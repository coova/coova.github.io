<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Problem with restarting chilli 1.0.12 - redir.c: 982: 28 (No	space left on device) msgget() failed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20Problem%20with%20restarting%20chilli%201.0.12%20-%20redir.c%3A%20982%3A%2028%20%28No%09space%0A%20left%20on%20device%29%20msgget%28%29%20failed&In-Reply-To=%3C1235989569.7661.19.camel%40david-laptop%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000596.html">
   <LINK REL="Next"  HREF="000598.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Problem with restarting chilli 1.0.12 - redir.c: 982: 28 (No	space left on device) msgget() failed</H1>
    <B>wlanmac</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20Problem%20with%20restarting%20chilli%201.0.12%20-%20redir.c%3A%20982%3A%2028%20%28No%09space%0A%20left%20on%20device%29%20msgget%28%29%20failed&In-Reply-To=%3C1235989569.7661.19.camel%40david-laptop%3E"
       TITLE="Problem with restarting chilli 1.0.12 - redir.c: 982: 28 (No	space left on device) msgget() failed">wlan at mac.com
       </A><BR>
    <I>Mon Mar  2 10:26:09 UTC 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000596.html">Problem with restarting chilli 1.0.12 - redir.c: 982: 28 (No space left on device) msgget() failed
</A></li>
        <LI>Next message: <A HREF="000598.html">Problem with restarting chilli 1.0.12 - redir.c: 982: 28 (No space left on device) msgget() failed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#597">[ date ]</a>
              <a href="thread.html#597">[ thread ]</a>
              <a href="subject.html#597">[ subject ]</a>
              <a href="author.html#597">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>don't let your radius server die :)

you using acctupdate option per chance?

If so, upgrade to svn version.


On Mon, 2009-03-02 at 12:13 +0200, Johan Meiring wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I have a problem with &quot;restarting&quot; coova-chilli.
</I>&gt;<i> This is completely reproducable.
</I>&gt;<i> 
</I>&gt;<i> Details as follows:
</I>&gt;<i> 
</I>&gt;<i> Running coova-chilli 1.0.12 on openwrt kamikaze 8.09
</I>&gt;<i> (somewhere between rc1 and final - r14038)
</I>&gt;<i> 
</I>&gt;<i> I have a cron script that checks if chilli is running every minute, and
</I>&gt;<i> starts it if not.
</I>&gt;<i> 
</I>&gt;<i> When the radius server dies for some reason, chilli eventually dies.
</I>&gt;<i> (expected?)
</I>&gt;<i> 
</I>&gt;<i> After a while (unsure if it is the first restart after chilli dies)
</I>&gt;<i> chilli does not want to start anymore (i.e. crashes on startup).
</I>&gt;<i> 
</I>&gt;<i> A simple reboot of the router resolves the problem.  This happens on
</I>&gt;<i> both Linksys and Nanostation devices.
</I>&gt;<i> 
</I>&gt;<i> logread as follows......
</I>&gt;<i> 
</I>&gt;<i> ********************* LOGREAD START*********************************
</I>&gt;<i> 
</I>&gt;<i> Jan  1 03:27:50 amobiahotspot-1028 local6.info coova-chilli[2997]:
</I>&gt;<i> CoovaChilli(ChilliSpot) 1.0.12. Copyright 2002-2005 Mondru AB. Licensed
</I>&gt;<i> under GPL. Copyright 2006-2008 David Bird &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">dbird at acm.org</A>&gt;. Licensed
</I>&gt;<i> under GPL. See <A HREF="http://coova.org/">http://coova.org/</A> for details.
</I>&gt;<i> Jan  1 03:27:50 amobiahotspot-1028 local6.notice coova-chilli[2997]:
</I>&gt;<i> tun.c: 482: TX queue length set to 100
</I>&gt;<i> Jan  1 03:28:01 amobiahotspot-1028 cron.err crond[811]: USER root pid
</I>&gt;<i> 3096 cmd /usr/local/amobia/check-chilli
</I>&gt;<i> Jan  1 03:28:05 amobiahotspot-1028 local6.notice coova-chilli[2997]:
</I>&gt;<i> chilli.c: 2694: New DHCP request from MAC=00-16-E3-4D-EA-46
</I>&gt;<i> Jan  1 03:28:05 amobiahotspot-1028 local6.notice coova-chilli[2997]:
</I>&gt;<i> chilli.c: 2661: Client MAC=00-16-E3-4D-EA-46 assigned IP 192.168.182.2
</I>&gt;<i> Jan  1 03:29:01 amobiahotspot-1028 cron.err crond[811]: USER root pid
</I>&gt;<i> 3104 cmd /usr/local/amobia/check-chilli
</I>&gt;<i> Jan  1 03:30:01 amobiahotspot-1028 cron.err crond[811]: USER root pid
</I>&gt;<i> 3118 cmd /usr/local/amobia/check-chilli
</I>&gt;<i> Jan  1 03:31:01 amobiahotspot-1028 cron.err crond[811]: USER root pid
</I>&gt;<i> 3163 cmd /usr/local/amobia/check-chilli
</I>&gt;<i> Jan  1 03:32:01 amobiahotspot-1028 cron.err crond[811]: USER root pid
</I>&gt;<i> 3168 cmd /usr/local/amobia/check-chilli
</I>&gt;<i> Jan  1 03:33:01 amobiahotspot-1028 cron.err crond[811]: USER root pid
</I>&gt;<i> 3176 cmd /usr/local/amobia/check-chilli
</I>&gt;<i> Jan  1 03:34:01 amobiahotspot-1028 cron.err crond[811]: USER root pid
</I>&gt;<i> 3181 cmd /usr/local/amobia/check-chilli
</I>&gt;<i> Jan  1 03:35:01 amobiahotspot-1028 cron.err crond[811]: USER root pid
</I>&gt;<i> 3189 cmd /usr/local/amobia/check-chilli
</I>&gt;<i> Jan  1 03:36:01 amobiahotspot-1028 cron.err crond[811]: USER root pid
</I>&gt;<i> 3196 cmd /usr/local/amobia/check-chilli
</I>&gt;<i> 
</I>&gt;<i> ********************************************************************
</I>&gt;<i> At this point I firewall off the radius server (simulating radius
</I>&gt;<i> death) and go home.  The next morning logread shows the following
</I>&gt;<i> *******************************************************************
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">root at amobiahotspot-1028</A>:~# logread
</I>&gt;<i> Jan  1 12:36:01 amobiahotspot-1028 cron.err crond[811]: USER root pid
</I>&gt;<i> 16872 cmd /usr/local/amobia/check-chilli
</I>&gt;<i> Jan  1 12:36:01 amobiahotspot-1028 user.notice check-chilli: Chillispot
</I>&gt;<i> is not running.  Starting it.
</I>&gt;<i> Jan  1 12:36:02 amobiahotspot-1028 local6.info coova-chilli[16884]:
</I>&gt;<i> CoovaChilli(ChilliSpot) 1.0.12. Copyright 2002-2005 Mondru AB. Licensed
</I>&gt;<i> under GPL. Copyright 2006-2008 David Bird &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">dbird at acm.org</A>&gt;. Licensed
</I>&gt;<i> under GPL. See <A HREF="http://coova.org/">http://coova.org/</A> for details.
</I>&gt;<i> Jan  1 12:36:02 amobiahotspot-1028 local6.notice coova-chilli[16884]:
</I>&gt;<i> tun.c: 482: TX queue length set to 100
</I>&gt;<i> Jan  1 12:36:02 amobiahotspot-1028 local6.err coova-chilli[16884]:
</I>&gt;<i> redir.c: 982: 28 (No space left on device) msgget() failed
</I>&gt;<i> Jan  1 12:36:02 amobiahotspot-1028 local6.err coova-chilli[16884]:
</I>&gt;<i> redir.c: 983: Most likely your computer does not have System V IPC installed
</I>&gt;<i> Jan  1 12:36:02 amobiahotspot-1028 local6.err coova-chilli[16884]:
</I>&gt;<i> chilli.c: 3504: Failed to create redir
</I>&gt;<i> Jan  1 12:37:01 amobiahotspot-1028 cron.err crond[811]: USER root pid
</I>&gt;<i> 16958 cmd /usr/local/amobia/check-chilli
</I>&gt;<i> Jan  1 12:37:01 amobiahotspot-1028 user.notice check-chilli: Chillispot
</I>&gt;<i> is not running.  Starting it.
</I>&gt;<i> Jan  1 12:37:02 amobiahotspot-1028 local6.info coova-chilli[16970]:
</I>&gt;<i> CoovaChilli(ChilliSpot) 1.0.12. Copyright 2002-2005 Mondru AB. Licensed
</I>&gt;<i> under GPL. Copyright 2006-2008 David Bird &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">dbird at acm.org</A>&gt;. Licensed
</I>&gt;<i> under GPL. See <A HREF="http://coova.org/">http://coova.org/</A> for details.
</I>&gt;<i> Jan  1 12:37:02 amobiahotspot-1028 local6.notice coova-chilli[16970]:
</I>&gt;<i> tun.c: 482: TX queue length set to 100
</I>&gt;<i> Jan  1 12:37:02 amobiahotspot-1028 local6.err coova-chilli[16970]:
</I>&gt;<i> redir.c: 982: 28 (No space left on device) msgget() failed
</I>&gt;<i> Jan  1 12:37:02 amobiahotspot-1028 local6.err coova-chilli[16970]:
</I>&gt;<i> redir.c: 983: Most likely your computer does not have System V IPC installed
</I>&gt;<i> Jan  1 12:37:02 amobiahotspot-1028 local6.err coova-chilli[16970]:
</I>&gt;<i> chilli.c: 3504: Failed to create redir
</I>&gt;<i> *********************  End logread ***********************************
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Any clues??
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000596.html">Problem with restarting chilli 1.0.12 - redir.c: 982: 28 (No space left on device) msgget() failed
</A></li>
	<LI>Next message: <A HREF="000598.html">Problem with restarting chilli 1.0.12 - redir.c: 982: 28 (No space left on device) msgget() failed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#597">[ date ]</a>
              <a href="thread.html#597">[ thread ]</a>
              <a href="subject.html#597">[ subject ]</a>
              <a href="author.html#597">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
