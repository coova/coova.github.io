<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] Captive portal &quot;looping&quot; problem - maybe radius /	radius-proxy timeout problem ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20Captive%20portal%20%22looping%22%20problem%20-%20maybe%20radius%20/%0A%09radius-proxy%20timeout%20problem%20%3F&In-Reply-To=%3CB85120C0-55ED-4E4F-824D-3CB07CE274DD%40hssl.ie%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002286.html">
   <LINK REL="Next"  HREF="002289.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] Captive portal &quot;looping&quot; problem - maybe radius /	radius-proxy timeout problem ?</H1>
    <B>Derek Conniffe</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20Captive%20portal%20%22looping%22%20problem%20-%20maybe%20radius%20/%0A%09radius-proxy%20timeout%20problem%20%3F&In-Reply-To=%3CB85120C0-55ED-4E4F-824D-3CB07CE274DD%40hssl.ie%3E"
       TITLE="[Chilli] Captive portal &quot;looping&quot; problem - maybe radius /	radius-proxy timeout problem ?">derek at hssl.ie
       </A><BR>
    <I>Sun Jul 14 14:33:19 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="002286.html">[Chilli] Radius stale sessions
</A></li>
        <LI>Next message: <A HREF="002289.html">[Chilli] Captive portal &quot;looping&quot; problem - maybe radius /	radius-proxy timeout problem ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2288">[ date ]</a>
              <a href="thread.html#2288">[ thread ]</a>
              <a href="subject.html#2288">[ subject ]</a>
              <a href="author.html#2288">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi everyone,

I've been playing with coova chilli for years and its feature set is great and I really love new features (especially chilli_proxy that appeared in 1.2.9)!.

I'm having a problem and I think I've also seen this problem over the years too.

I'm using coova chilli 1.2.9 and right now I'm using chilli-proxy with HTTP authentication (so no radius server at all) and I'm using mac authentication.

The problem is that for some reason coova chilli thinks the user isn't authorised so it sends the user to the login page (uamhomepage) *but* I have checking in my home page to see if the user is actually authenticated (in the DB) or not and, if they are, I try to redirect them to www.google.com - I'd hope this situation wouldn't happen but it does regularly.  Its worse actually because I can sometimes see devices looping through my uamhomepage page over and over again and then, maybe, eventually getting Google.  (coova chilli keeps thinking the client isn't authenticated - when this happens I can see that my web server handling the chilli proxy requests as per the uamaaaurl directive is *NOT* getting the coova chilli request at all!).

I see this problem more if the internet connection to the coova chilli enabled AP is slow.  This makes me think its some kind of radius timeout issue.  I did add the line &quot;radiustimeout=90&quot; to my chilli conf file (I think that sets the radius timeout to 90 seconds) but this didn't appear to have any effect.

I haven't seen anything in the chilli log output yet but mostly this is because I haven't been getting detailed logs in my APs.  Now I'm trying to use remote syslog to a dedicated server so this might help.

The issue could be in chilli_proxy.  If so I might have to go back to having a freeradius server but I'd hate to do that.

Has anyone else seen this type of problem before?

thanks for any info!

Derek
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002286.html">[Chilli] Radius stale sessions
</A></li>
	<LI>Next message: <A HREF="002289.html">[Chilli] Captive portal &quot;looping&quot; problem - maybe radius /	radius-proxy timeout problem ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2288">[ date ]</a>
              <a href="thread.html#2288">[ thread ]</a>
              <a href="subject.html#2288">[ subject ]</a>
              <a href="author.html#2288">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
