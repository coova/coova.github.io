<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] miniportal: wwwsh wrapper not receiving POST via stdin for login.chi
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20miniportal%3A%20wwwsh%20wrapper%20not%20receiving%20POST%20via%20stdin%0A%20for%20login.chi&In-Reply-To=%3C6239A24C38D2594FB682374DF81215836A51157F1E%40GBDCCCR01.PaperlinX-EU.Local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002758.html">
   <LINK REL="Next"  HREF="002760.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] miniportal: wwwsh wrapper not receiving POST via stdin for login.chi</H1>
    <B>Dennehy, Liam</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20miniportal%3A%20wwwsh%20wrapper%20not%20receiving%20POST%20via%20stdin%0A%20for%20login.chi&In-Reply-To=%3C6239A24C38D2594FB682374DF81215836A51157F1E%40GBDCCCR01.PaperlinX-EU.Local%3E"
       TITLE="[Chilli] miniportal: wwwsh wrapper not receiving POST via stdin for login.chi">Liam.Dennehy at paperlinx.com
       </A><BR>
    <I>Wed Jun  4 10:00:18 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="002758.html">[Chilli] CoovaChilli not redirecting
</A></li>
        <LI>Next message: <A HREF="002760.html">[Chilli] CoovaChilli behind ADSL2+ router
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2759">[ date ]</a>
              <a href="thread.html#2759">[ thread ]</a>
              <a href="subject.html#2759">[ subject ]</a>
              <a href="author.html#2759">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all

I haven't heard anything on this topic at all. As far as I can see the miniportal simply doesn't work, since the user's POST data (username + password) never reaches login.chi, indeed it is never even passed to wwwsh for it to give over to login.chi.

Has anyone actually got this working on OpenWRT or anywhere else? What is the format login.chi expects, how does it actually work?

Until this is sorted, the product is pretty useless and it appears I need to be something of a java coder to set up any other portal since there are no ready-made solutions. I was drawn to this product specifically because it has a radius-compatible portal built-in, and it just doesn't work.

Liam Dennehy
Technical Design Authority
PaperlinX Europe
M: +31 621 877 185

From: Dennehy, Liam
Sent: 24 April 2014 12:39
To: '<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>'
Subject: miniportal: wwwsh wrapper not receiving POST via stdin for login.chi

Hi all

I've been trying to figure out how to get this issue solved for some time, hopefully this is the right forum.

I'm running CoovaChilli on OpenWRT Barrier Breaker (trunk). The miniportal's wwwsh wrapper does not seem to have the client's POST response to login.chi either in stdin or as a shell variable which haserl is expecting to see when handling login.chi. As a result, the connection is terminated as soon as login.chi fails, citing a lack of input.

A packet trace shows POST data in the client's submission of 106 bytes, and a shell variable CONTENT_LENGTH inside the wwwsh image also 106 bytes, but the actual POST data is neither in stdin nor any shell variable. From my limited knowledge of C I can't see how this is ever submitted to the execv calling _options.wwwbin, so I have no idea where else to look.

All other functions appear to be working fine - DHCP, DNS forwarding, even opening the status.chi page and authenticating there passes to RADIUS just fine (that script has no stdin requirement apparently).

This is the last piece before I declare everything functional and can start rollout, and I've kept all my changes ready to publish to upstream to both OpenWRT and anyone else so I'm keen to get this solved.

Liam Dennehy
PaperlinX Europe


________________________________
This email is privileged and confidential and is intended only for those to whom it is addressed. If you are not the intended recipient then any disclosure, dissemination, copying or use of the information is strictly prohibited. If you have received this email in error, please notify this office immediately by return email.

Before opening any attachments please make sure they have been checked for viruses and defects.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20140604/a73f4f04/attachment.html">http://lists.coova.org/pipermail/chilli/attachments/20140604/a73f4f04/attachment.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002758.html">[Chilli] CoovaChilli not redirecting
</A></li>
	<LI>Next message: <A HREF="002760.html">[Chilli] CoovaChilli behind ADSL2+ router
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2759">[ date ]</a>
              <a href="thread.html#2759">[ thread ]</a>
              <a href="subject.html#2759">[ subject ]</a>
              <a href="author.html#2759">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
