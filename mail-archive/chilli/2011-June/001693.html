<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] Period &quot;Reauthorisation&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20Period%20%22Reauthorisation%22&In-Reply-To=%3C4DF6F32A.9080304%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001694.html">
   <LINK REL="Next"  HREF="001696.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] Period &quot;Reauthorisation&quot;</H1>
    <B>Tim White</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20Period%20%22Reauthorisation%22&In-Reply-To=%3C4DF6F32A.9080304%40gmail.com%3E"
       TITLE="[Chilli] Period &quot;Reauthorisation&quot;">timwhite88 at gmail.com
       </A><BR>
    <I>Tue Jun 14 05:35:38 UTC 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001694.html">[Chilli] Period &quot;Reauthorisation&quot;
</A></li>
        <LI>Next message: <A HREF="001696.html">[Chilli] Period &quot;Reauthorisation&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1693">[ date ]</a>
              <a href="thread.html#1693">[ thread ]</a>
              <a href="subject.html#1693">[ subject ]</a>
              <a href="author.html#1693">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok, so far I've got CoA replies working. So I guess this becomes more 
unlang/module stuff.

For example, in the accounting section, I have the following
        update coa {
               User-Name = &quot;%{User-Name}&quot;
               Acct-Session-Id = &quot;%{Acct-Session-Id}&quot;
               NAS-IP-Address = &quot;%{NAS-IP-Address}&quot;
#             ChilliSpot-Max-Total-Octets = &quot;%{noresetBytecounter: ''}&quot;
#             noresetcounter
#             noresetByteCounter
        }

Now, with every accounting packet, a CoA request is initiated from the 
server to Coova Chilli. Great!
I'm a bit lost at now getting the sqlcounter information back into this 
packet. Without any ChilliSpot attributes going back to CoovaChilli, it 
assumes those attributes no longer matter, and so for example the user 
gets no limits!

Does anyone have some example FreeRadius stuff that might assist here? 
Otherwise I'll have to go pester the FreeRadius list. When it's all 
working I'll post a nice article with details for others.

Tim

On 14/06/11 11:09, Royce Ausburn wrote:
&gt;<i> You could look at doing this from your RADIUS server's end rather than from within chilli.  Using accounting updates chilli already sends and initiating a RADIUS CoA when you need to kick/wall garden.
</I>&gt;<i>
</I>&gt;<i> HTH
</I>&gt;<i>
</I>&gt;<i> --Royce
</I>&gt;<i>
</I>&gt;<i> On 14/06/2011, at 10:43 AM, Tim White wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I'm wondering if there has been any discussion about implementing period reauthorisation in Coova Chilli?
</I>&gt;&gt;<i> Basically, I'm hoping to implement &quot;recurring limits&quot; using sqlcounter. However, this becomes more difficult with sessions that go over the time period used for recurrance.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For example, data limits. If you have an hourly data limit of 50Mb, the only attribute you can use to tell Coova this is the ChilliSpot-Max-Total-Octets. Ideally what we need is for Chilli to periodically reauthorise the sessions so that new attributes can be sent back.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My guess is that this could cause lots of problems with leaky_bucket and other counters, so I was thinking that it's probably best implemented by ending the current session, and starting a new session, all transparently to the user.
</I>&gt;&gt;<i>  From my understanding of RADIUS, it would need a whole new authentication, which would require saving the users password. And, if the user uses CHAP (which I believe comes from RADIUS and not CoovaChilli) then we are dead in the water.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Can someone with a better understanding of RADIUS and CoovaChilli let me know if this is possible in the world of RADIUS, or totally impossible?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think I'm beginning to understand why ISP's generally use a monthly limit! :-P
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Tim
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Chilli mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001694.html">[Chilli] Period &quot;Reauthorisation&quot;
</A></li>
	<LI>Next message: <A HREF="001696.html">[Chilli] Period &quot;Reauthorisation&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1693">[ date ]</a>
              <a href="thread.html#1693">[ thread ]</a>
              <a href="subject.html#1693">[ subject ]</a>
              <a href="author.html#1693">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
