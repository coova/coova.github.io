From derekchilli at hssl.ie  Wed Nov  4 20:22:45 2009
From: derekchilli at hssl.ie (Derek C)
Date: Wed, 4 Nov 2009 20:22:45 -0000 (UTC)
Subject: [Chilli] Hide all "users" behind one "mac" ?
Message-ID: <42048.78.152.192.69.1257366165.squirrel@www.rivertowermail.com>


Hi all,

A little off topic (kindof):

Is it possible to "hide" all the users of a VAP behind one "mac" for Coova
Chilli Mac authentication?

What I'd like to do is to have a wireless router where, after the user
pays up and gains Mac based Coova Chilli authentication, they could use
the gateway with any number of devices (not just the computer they
originally connected with).

I'm trying to think about whether I could do this with routing &
masquerading from the customer's VAP athX device and then out through the
Coova Chilli tun device that it uses.

Has anyone ever tried this?

thanks,

Derek

-- 
Derek C
In Ireland


From bnoteris at odbee.com  Thu Nov  5 09:11:47 2009
From: bnoteris at odbee.com (Benoit noteris)
Date: Thu, 5 Nov 2009 10:11:47 +0100
Subject: [Chilli] Hide all "users" behind one "mac" ?
In-Reply-To: <42048.78.152.192.69.1257366165.squirrel@www.rivertowermail.com>
References: <42048.78.152.192.69.1257366165.squirrel@www.rivertowermail.com>
Message-ID: <001601ca5df8$00a18b60$01e4a220$@com>


Hi Derek,

We are doing That with Ethernet router and it's working well with nat.
But we use public ip address and so if you use private network I don't know
what's will happen if you make double nat, but there is no reason that don?t
work for me.

Cheers,


-----Message d'origine-----
De?: chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] De la part
de Derek C
Envoy??: mercredi 4 novembre 2009 21:23
??: chilli at coova.org
Objet?: [Chilli] Hide all "users" behind one "mac" ?


Hi all,

A little off topic (kindof):

Is it possible to "hide" all the users of a VAP behind one "mac" for Coova
Chilli Mac authentication?

What I'd like to do is to have a wireless router where, after the user
pays up and gains Mac based Coova Chilli authentication, they could use
the gateway with any number of devices (not just the computer they
originally connected with).

I'm trying to think about whether I could do this with routing &
masquerading from the customer's VAP athX device and then out through the
Coova Chilli tun device that it uses.

Has anyone ever tried this?

thanks,

Derek

-- 
Derek C
In Ireland

_______________________________________________
Chilli mailing list
Chilli at coova.org
http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From derekchilli at hssl.ie  Thu Nov  5 09:50:43 2009
From: derekchilli at hssl.ie (Derek C)
Date: Thu, 5 Nov 2009 09:50:43 -0000 (UTC)
Subject: [Chilli] Hide all 'users' behind one 'mac' ?
In-Reply-To: <001601ca5df8$00a18b60$01e4a220$@com>
References: <42048.78.152.192.69.1257366165.squirrel@www.rivertowermail.com>
	<001601ca5df8$00a18b60$01e4a220$@com>
Message-ID: <36312.149.5.32.200.1257414643.squirrel@www.rivertowermail.com>

Hi Benoit,

I was wondering if I could do exactly what you are doing but do it all in
one openwrt router (the same router running Coova Chilli and doing the
NAT).  I was thinking about trying it the LAN eth0 port on the router as
the Masqueraded port (masquerading out the tunX Coova Chilli device).

I'm not sure if this would work though - I have a feeling that Coova
Chilli may see the different mac addresses on the eth0 device even with
the masquerading.

I'll think I'll just have to try it and see...

Derek


On Thu, November 5, 2009 9:11 am, Benoit noteris wrote:
>

> Hi Derek,
>
>
> We are doing That with Ethernet router and it's working well with nat.
> But we use public ip address and so if you use private network I don't
> know what's will happen if you make double nat, but there is no reason
> that don?t work for me.
>
> Cheers,
>
>
>
> -----Message d'origine-----
> De?: chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] De la part
>  de Derek C Envoy??: mercredi 4 novembre 2009 21:23
> ??: chilli at coova.org
> Objet?: [Chilli] Hide all "users" behind one "mac" ?
>
>
>
> Hi all,
>
>
> A little off topic (kindof):
>
>
> Is it possible to "hide" all the users of a VAP behind one "mac" for
> Coova
> Chilli Mac authentication?
>
>
> What I'd like to do is to have a wireless router where, after the user
> pays up and gains Mac based Coova Chilli authentication, they could use the
> gateway with any number of devices (not just the computer they originally
> connected with).
>
> I'm trying to think about whether I could do this with routing &
> masquerading from the customer's VAP athX device and then out through the
> Coova Chilli tun device that it uses.
>
>
> Has anyone ever tried this?
>
>
> thanks,
>
> Derek
>
>
> --
> Derek C
> In Ireland
>
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>


-- 
Derek C
In Ireland


From bnoteris at odbee.com  Thu Nov  5 11:08:31 2009
From: bnoteris at odbee.com (Benoit noteris)
Date: Thu, 5 Nov 2009 12:08:31 +0100
Subject: [Chilli] Hide all 'users' behind one 'mac' ?
In-Reply-To: <36312.149.5.32.200.1257414643.squirrel@www.rivertowermail.com>
References: <42048.78.152.192.69.1257366165.squirrel@www.rivertowermail.com>
	<001601ca5df8$00a18b60$01e4a220$@com>
	<36312.149.5.32.200.1257414643.squirrel@www.rivertowermail.com>
Message-ID: <001f01ca5e08$4f572160$ee056420$@com>


Hi Derek, 

Normally by default your coova ap is nating connexion like this draw


---Internet---[pppoA/eth0](coovaap)|nat|[private ip tun/eth1]--Lan--

I' pretty sur that you can't masquerading twice in same router, and I 'don't
understand the interest of what you want to do if you want direct connected
customer without connection just add another interface in trunked port that
you plug in you switch and just do normal routing without coova like Point
to point connection like this draw :

---Internet---[pppoA/eth0](coovaap)|nat|-[trunk]
							 |   |(vl10)
						(Vl20) |  [private ip
tun/eth1]--Lan--client
                                          [point to point to client]
This is just one idea after you've lot's of solution ofer to you.

But to hide client behind one mac address the only way is to route again in
layer 3

Cheers,


-----Message d'origine-----
De?: Derek C [mailto:derekchilli at hssl.ie] 
Envoy??: jeudi 5 novembre 2009 10:51
??: Benoit noteris
Cc?: chilli at coova.org
Objet?: Re: [Chilli] Hide all 'users' behind one 'mac' ?

Hi Benoit,

I was wondering if I could do exactly what you are doing but do it all in
one openwrt router (the same router running Coova Chilli and doing the
NAT).  I was thinking about trying it the LAN eth0 port on the router as
the Masqueraded port (masquerading out the tunX Coova Chilli device).

I'm not sure if this would work though - I have a feeling that Coova
Chilli may see the different mac addresses on the eth0 device even with
the masquerading.

I'll think I'll just have to try it and see...

Derek


On Thu, November 5, 2009 9:11 am, Benoit noteris wrote:
>

> Hi Derek,
>
>
> We are doing That with Ethernet router and it's working well with nat.
> But we use public ip address and so if you use private network I don't
> know what's will happen if you make double nat, but there is no reason
> that don?t work for me.
>
> Cheers,
>
>
>
> -----Message d'origine-----
> De?: chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] De la part
>  de Derek C Envoy??: mercredi 4 novembre 2009 21:23
> ??: chilli at coova.org
> Objet?: [Chilli] Hide all "users" behind one "mac" ?
>
>
>
> Hi all,
>
>
> A little off topic (kindof):
>
>
> Is it possible to "hide" all the users of a VAP behind one "mac" for
> Coova
> Chilli Mac authentication?
>
>
> What I'd like to do is to have a wireless router where, after the user
> pays up and gains Mac based Coova Chilli authentication, they could use
the
> gateway with any number of devices (not just the computer they originally
> connected with).
>
> I'm trying to think about whether I could do this with routing &
> masquerading from the customer's VAP athX device and then out through the
> Coova Chilli tun device that it uses.
>
>
> Has anyone ever tried this?
>
>
> thanks,
>
> Derek
>
>
> --
> Derek C
> In Ireland
>
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>


-- 
Derek C
In Ireland


From bankster at it.kmitl.net  Thu Nov  5 23:59:57 2009
From: bankster at it.kmitl.net (Thanachit Vichianchay)
Date: Fri, 6 Nov 2009 06:59:57 +0700
Subject: [Chilli] coovachilli bandwidth management
Message-ID: <7120eba10911051559i486fd338n2bb51938817b164@mail.gmail.com>

Hi, All

I want to enable bandwidth management feature on our coovachilli server to
perform traffic control for each client.
after I read the documents provide by coova.org about bandwidth control
parameters.
I found these parameters.
*WISPR_BANDWIDTH_MAX_UP=* **Max up stream bandwidth set by RADIUS
WISPr-Bandwidth-Max-Up. *WISPR_BANDWIDTH_MAX_DOWN=* **Max down stream
bandwidth set by RADIUS WISPr-Bandwidth-Max-Down. *
CHILLISPOT_MAX_INPUT_OCTETS=* **Max input octets set by RADIUS
ChilliSpot-Max-Input-Octets. *CHILLISPOT_MAX_OUTPUT_OCTETS=* **Max output
octets set by RADIUS ChilliSpot-Max-Output-Octets. *
CHILLISPOT_MAX_TOTAL_OCTETS=* **Max total octets set by RADIUS
ChilliSpot-Max-Total-Octets.
the problem is I don't know where to apply  those parameters
some says that I must store those parameters in radreply table for each user
but We use freeradius as an AAA Server
, the User Accounts are stored in LDAP Server
and use MySQL as Radius Accounting not for Authentication

Any help or the right direction will be appreciate.

Thanks,

Bank

-- 
Thanachit Vichianchay
Junior, Faculty of Information Technology
King Mongkut's Institute of Technology Ladkrabang
Marie von Ebner-Eschenbach<http://www.brainyquote.com/quotes/authors/m/marie_von_ebnereschenbac.html>
- "Even a stopped clock is right twice a day."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091106/4f5cb697/attachment.html>

From mihamina at gulfsat.mg  Fri Nov  6 06:25:22 2009
From: mihamina at gulfsat.mg (Rakotomandimby Mihamina)
Date: Fri, 06 Nov 2009 09:25:22 +0300
Subject: [Chilli] "miniportal/" folder
Message-ID: <4AF3C152.4000607@gulfsat.mg>

Hello,
What is the use of the "miniportal/" folder in the source?

Can I use it as a login form?

-- 
       Architecte Informatique chez Blueline/Gulfsat:
    Administration Systeme, Recherche & Developpement
                                    +261 33 11 207 36

From mihamina at gulfsat.mg  Fri Nov  6 06:27:14 2009
From: mihamina at gulfsat.mg (Rakotomandimby Mihamina)
Date: Fri, 06 Nov 2009 09:27:14 +0300
Subject: [Chilli] how not to use Javascript
Message-ID: <4AF3C1C2.70508@gulfsat.mg>

Hello,
We would like to setup an auth form not using Javascript but
just pure (x)HTML.
What is the common way to do that?


-- 
       Architecte Informatique chez Blueline/Gulfsat:
    Administration Systeme, Recherche & Developpement
                                    +261 33 11 207 36

From oguzhank at bilkent.edu.tr  Fri Nov  6 07:22:46 2009
From: oguzhank at bilkent.edu.tr (Oguzhan Kayhan)
Date: Fri, 6 Nov 2009 09:22:46 +0200 (EET)
Subject: [Chilli] how not to use Javascript
In-Reply-To: <4AF3C1C2.70508@gulfsat.mg>
References: <4AF3C1C2.70508@gulfsat.mg>
Message-ID: <42400.139.179.14.250.1257492166.squirrel@webmail.bilkent.edu.tr>

> Hello,
> We would like to setup an auth form not using Javascript but
> just pure (x)HTML.
> What is the common way to do that?
>
>
You can simply remove java lines from hotspotlogin.cgi and make necessary
settings according to your needs (like adding some information on your
login page or usage policy informations etc)



> --
>        Architecte Informatique chez Blueline/Gulfsat:
>     Administration Systeme, Recherche & Developpement
>                                     +261 33 11 207 36
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>



From david at coova.com  Fri Nov  6 07:41:40 2009
From: david at coova.com (David Bird)
Date: Fri, 06 Nov 2009 08:41:40 +0100
Subject: [Chilli] "miniportal/" folder
In-Reply-To: <4AF3C152.4000607@gulfsat.mg>
References: <4AF3C152.4000607@gulfsat.mg>
Message-ID: <1257493300.7382.45.camel@david-laptop>

The miniportal comes from CoovaAP, but figured it might as well be an
option to build directly from CoovaChilli. It uses haserl to implement a
pretty simple captive portal - implementing Paypal too! 

I will start to document it here:
http://www.coova.org/CoovaChilli/Miniportal

David

On Fri, 2009-11-06 at 09:25 +0300, Rakotomandimby Mihamina wrote:
> Hello,
> What is the use of the "miniportal/" folder in the source?
> 
> Can I use it as a login form?
> 


From bnoteris at odbee.com  Fri Nov  6 09:43:18 2009
From: bnoteris at odbee.com (Benoit noteris)
Date: Fri, 6 Nov 2009 10:43:18 +0100
Subject: [Chilli] [mac cloning]
In-Reply-To: <1257493300.7382.45.camel@david-laptop>
References: <4AF3C152.4000607@gulfsat.mg>
	<1257493300.7382.45.camel@david-laptop>
Message-ID: <002201ca5ec5$923e11b0$b6ba3510$@com>

Dear list,

We have Ubuntu platform with Coova running, and some client report some time
ip address are already in used and they have message about conflict of ip
address I thinks they are maybe somebody on our network which are cloning
the client ip address, do you know how can we avoid that, or prevent mac
cloning ?

every purpose are welcome.

cheers

Benoit


From mihamina at gulfsat.mg  Fri Nov  6 09:56:23 2009
From: mihamina at gulfsat.mg (Rakotomandimby Mihamina)
Date: Fri, 06 Nov 2009 12:56:23 +0300
Subject: [Chilli] build from SVN and from tarbal
Message-ID: <4AF3F2C7.1010503@gulfsat.mg>

Hi all,
 From here:
http://www.coova.org/CoovaChilli/Developers

I _try_ :
   $ bash bootstrap
   configure.in:203: required file `coova-chilli.spec.in' not found
   checking for a BSD-compatible install... /usr/bin/install -c
   checking whether build environment is sane... yes
   [...]
   checking for getline... yes
   checking for res_init in -lresolv... no
   configure: creating ./config.status
   config.status: error: cannot find input file: `Makefile.in'
   make: *** No rule to make target `clean'.  Stop.
   rm: cannot remove `libtool': No such file or directory


Building from 1.0.14 tarball is OK.
How could I help?
What invocation did I miss?

Thank you.

-- 
       Architecte Informatique chez Blueline/Gulfsat:
    Administration Systeme, Recherche & Developpement
                                    +261 33 11 207 36

From fmacedo at cpd.ufrgs.br  Fri Nov  6 10:48:27 2009
From: fmacedo at cpd.ufrgs.br (Fernando Dutra Fagundes Macedo)
Date: Fri, 6 Nov 2009 08:48:27 -0200
Subject: [Chilli] RES:  "miniportal/" folder
References: <4AF3C152.4000607@gulfsat.mg>
	<1257493300.7382.45.camel@david-laptop>
Message-ID: <25D4D9AF49D1CC499C48BDEA79E7B733039D05EF@DEUTERIO.ad.ufrgs.br>

When is the estimated date of next release?

Fernando Macedo


-----Mensagem original-----
De: chilli-bounces at coova.org em nome de David Bird
Enviada: sex 06/11/2009 05:41
Para: chilli at coova.org
Assunto: Re: [Chilli] "miniportal/" folder
 
The miniportal comes from CoovaAP, but figured it might as well be an
option to build directly from CoovaChilli. It uses haserl to implement a
pretty simple captive portal - implementing Paypal too! 

I will start to document it here:
http://www.coova.org/CoovaChilli/Miniportal

David

On Fri, 2009-11-06 at 09:25 +0300, Rakotomandimby Mihamina wrote:
> Hello,
> What is the use of the "miniportal/" folder in the source?
> 
> Can I use it as a login form?
> 

_______________________________________________
Chilli mailing list
Chilli at coova.org
http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From oguzhank at bilkent.edu.tr  Fri Nov  6 12:49:47 2009
From: oguzhank at bilkent.edu.tr (Oguzhan Kayhan)
Date: Fri, 6 Nov 2009 14:49:47 +0200 (EET)
Subject: [Chilli] [mac cloning]
In-Reply-To: <002201ca5ec5$923e11b0$b6ba3510$@com>
References: <4AF3C152.4000607@gulfsat.mg>
	<1257493300.7382.45.camel@david-laptop>
	<002201ca5ec5$923e11b0$b6ba3510$@com>
Message-ID: <33782.139.179.14.250.1257511787.squirrel@webmail.bilkent.edu.tr>

It is smthing to be done in layer 2. So you need to have a swtich on your
network that can prevent mac-id changes.

But as i read now.. you say you got messages of ip conflict.
It seems like some of your clients  has static ips.. or even after your
coova releases the ip that client keeps on having the old ip address.

When such thing happens ask your user to tell you the mac-id of the
conflicting computer.(which can be found on systemlog of windows) and
examine the computer with that mac-id


> Dear list,
>
> We have Ubuntu platform with Coova running, and some client report some
> time
> ip address are already in used and they have message about conflict of ip
> address I thinks they are maybe somebody on our network which are cloning
> the client ip address, do you know how can we avoid that, or prevent mac
> cloning ?
>
> every purpose are welcome.
>
> cheers
>
> Benoit
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>



From bnoteris at odbee.com  Fri Nov  6 13:30:18 2009
From: bnoteris at odbee.com (Benoit noteris)
Date: Fri, 6 Nov 2009 14:30:18 +0100
Subject: [Chilli] [mac cloning]
In-Reply-To: <33782.139.179.14.250.1257511787.squirrel@webmail.bilkent.edu.tr>
References: <4AF3C152.4000607@gulfsat.mg>	<1257493300.7382.45.camel@david-laptop>	<002201ca5ec5$923e11b0$b6ba3510$@com>
	<33782.139.179.14.250.1257511787.squirrel@webmail.bilkent.edu.tr>
Message-ID: <002601ca5ee5$4830a630$d891f290$@com>



That what we have done and only things I've found in syslog was lots of
release from this mac address and no successful uam, how long does it take
for a IP address from release go back to the pool to be attributed again.

I don't know if it is spoof hack or just a client how have trouble to access
the coova page, but it look's wired. 

Cheers,



-----Message d'origine-----
De?: chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] De la part
de Oguzhan Kayhan
Envoy??: vendredi 6 novembre 2009 13:50
??: chilli at coova.org
Objet?: Re: [Chilli] [mac cloning]

It is smthing to be done in layer 2. So you need to have a swtich on your
network that can prevent mac-id changes.

But as i read now.. you say you got messages of ip conflict.
It seems like some of your clients  has static ips.. or even after your
coova releases the ip that client keeps on having the old ip address.

When such thing happens ask your user to tell you the mac-id of the
conflicting computer.(which can be found on systemlog of windows) and
examine the computer with that mac-id


> Dear list,
>
> We have Ubuntu platform with Coova running, and some client report some
> time
> ip address are already in used and they have message about conflict of ip
> address I thinks they are maybe somebody on our network which are cloning
> the client ip address, do you know how can we avoid that, or prevent mac
> cloning ?
>
> every purpose are welcome.
>
> cheers
>
> Benoit
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>


_______________________________________________
Chilli mailing list
Chilli at coova.org
http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From gunther.mayer at googlemail.com  Mon Nov  9 10:40:14 2009
From: gunther.mayer at googlemail.com (Gunther Mayer)
Date: Mon, 09 Nov 2009 12:40:14 +0200
Subject: [Chilli] Ippool exhaustion bug?
Message-ID: <4AF7F18E.4000502@gmail.com>

Hi guys,

I've stumbled across the following VERY frustrating problem which is 
giving me and hundreds of our customers endless grey hair. I have a 
uamanyip setup with a /24 net, the first /25 subnet of which is for 
statip and the rest for dynip (implicitly) but specified with dhcpstart 
and dhcpend for flexibility. After quite a long time, when most ip's 
have been recycled a fair number of times chilli refuses to hand out any 
more ip addresses dynamically and chokes with the following appearing ad 
infinitum in the logs:

2009-11-09T01:00:14+02:00 coova-chilli[1378]: chilli.c: 3012: New DHCP 
request from MAC=xx-xx-xx-xx-xx-xx
2009-11-09T01:00:14+02:00 coova-chilli[1378]: ippool.c: 397: No more IP 
addresses available
2009-11-09T01:00:14+02:00 coova-chilli[1378]: chilli.c: 332: Failed to 
allocate either static or dynamic IP address

Of course reproducing my production settings would take forever (about 
127 ip addresses between dhcpstart and dhcpend) so I decided to cut it 
down to the following testing example in chilli.conf:

uamlisten 10.0.0.1
net 10.0.0.0/24
dhcpstart 129
dhcpend 133
statip 10.0.0.0/25
uamanyip

That is, 10.0.0.2-10.0.0.127 or 125 ip's are reserved for static 
ip/anyip clients and 10.0.0.129-10.0.0.132 or 4 ip's for dynamic/dhcp 
clients. Now to reproduce the ippool bug, connect your linux laptop via 
cable to the chilli box and do something like

$ dhclient eth0 # should give you 10.0.0.129 first time, then .130 and so on
$ killall dhclient
$ ifconfig eth0 0.0.0.0 down
$ ifconfig eth0 hw ether xx:xx:xx:xx:xx:xx+1

and repeat. Of course the fifth time you do this chilli will 
legitimately run out of ip addresses because it still has all the other 
allocated. Until such time that they all time out so wait a bit longer 
than 10 minutes and start from scratch. Unfortunately I'm no longer able 
to reproduce this but I could last night, I'll figure out an easy way in 
time but in the meantime, has anyone seen such problems before? Does 
anyone have a suggestion?

It looks strongly like some dynamic ip addresses not being properly 
released in ippool.c but I haven't been able to figure it out.
This bug has been present in 1.0.13(r199) and 1.0.14(r208), the two I've 
tested with so far.

Thanks,

Gunther

From jack.j.allan at gmail.com  Mon Nov  9 15:01:12 2009
From: jack.j.allan at gmail.com (Jack J Allan)
Date: Mon, 9 Nov 2009 17:01:12 +0200
Subject: [Chilli] Incorrectly high data usage over a short period of time
Message-ID: <d6a9b02c0911090701v34bf3101v398527589ea024a@mail.gmail.com>

Dear Coova Chilli Community

Firstly, my setup:

   1. Coova Chilli 1.013
   2. Freeradius 2.1.5

I am absolutely perplexed by this bug. Not only that, but I cannot think of
any ways of reproducing it, so I am hoping someone in the community has come
accross this before. My problem is my NAS is reporting incorrectly high
usage over a short space of time. Where we are based (South Africa), the
fastest one's ADSL line speed can be is 4 mega bits per second. This
translates to about 0.47 megabytes per seconds, and that is if you are
lucky. We have three such lines multiplexed together, which means we can get
a throughput of about 0.47*3 = 1.41 megabytes per second. Unfortunately, we
have received a complaint claiming that chilli has deducted more than what
was used. Looking at the radius logs, I can ascertain that this is true.

Here is the initial start packet sent by chilli to radius (I have removed
username and Nas Identifier to protect privacy):

*Tue Oct 27 09:12:57 2009
        ChilliSpot-Version = "1.0.13"
        Acct-Status-Type = Start
        Calling-Station-Id = "00-1F-33-FF-BD-00"
        NAS-Port-Type = Wireless-802.11
        NAS-Port = 4
        NAS-Port-Id = "00000004"
        Framed-IP-Address = 172.25.0.168
        Acct-Session-Id = "4ae69d6000000004"
        NAS-IP-Address = 172.25.0.1
        Called-Station-Id = "00-16-B6-D9-5A-EB"
        Acct-Unique-Session-Id = "f3bcc21590c1afd1"
        Timestamp = 1256627577
        Request-Authenticator = Verified*

Then about 1 minute later, the following occurs
*Tue Oct 27 09:13:59 2009
        ChilliSpot-Version = "1.0.13"
        Acct-Status-Type = Interim-Update
        Calling-Station-Id = "00-1F-33-FF-BD-00"
        NAS-Port-Type = Wireless-802.11
        NAS-Port = 4
        NAS-Port-Id = "00000004"
        Framed-IP-Address = 172.25.0.168
        Acct-Session-Id = "4ae69d6000000004"
        NAS-IP-Address = 172.25.0.1
        Called-Station-Id = "00-16-B6-D9-5A-EB"
       Acct-Input-Octets = 1178355
       Acct-Output-Octets = 52201523
        Acct-Input-Gigawords = 0
        Acct-Output-Gigawords = 0
        Acct-Input-Packets = 19170
        Acct-Output-Packets = 36581
        Acct-Session-Time = 63
        Acct-Unique-Session-Id = "f3bcc21590c1afd1"
        Timestamp = 1256627639
        Request-Authenticator = Verified*

This is definitely in error (the bold parts), as the backbone line speed
cannot handle this much traffic in such a short space of time. Another
minute later:
Tue Oct 27 09:15:02 2009
*        ChilliSpot-Version = "1.0.13"
        Acct-Status-Type = Interim-Update
        Calling-Station-Id = "00-1F-33-FF-BD-00"
        NAS-Port-Type = Wireless-802.11
        NAS-Port = 4
        NAS-Port-Id = "00000004"
        Framed-IP-Address = 172.25.0.168
        Acct-Session-Id = "4ae69d6000000004"
        NAS-IP-Address = 172.25.0.1
        Called-Station-Id = "00-16-B6-D9-5A-EB"
       Acct-Input-Octets = 2132628
       Acct-Output-Octets = 98448008
        Acct-Input-Gigawords = 0
        Acct-Output-Gigawords = 0
        Acct-Input-Packets = 36067
        Acct-Output-Packets = 68754
        Acct-Session-Time = 126
        Acct-Unique-Session-Id = "f3bcc21590c1afd1"
        Timestamp = 1256627702
        Request-Authenticator = Verified*

Again, the amount of data usage is absolutely impossible for the backbone's
capabaility. Another minute later:
*Tue Oct 27 09:16:05 2009
        ChilliSpot-Version = "1.0.13"
        Acct-Status-Type = Interim-Update
        Calling-Station-Id = "00-1F-33-FF-BD-00"
        NAS-Port-Type = Wireless-802.11
        NAS-Port = 4
        NAS-Port-Id = "00000004"
        Framed-IP-Address = 172.25.0.168
        Acct-Session-Id = "4ae69d6000000004"
        NAS-IP-Address = 172.25.0.1
        Called-Station-Id = "00-16-B6-D9-5A-EB"
       Acct-Input-Octets = 3097259
       Acct-Output-Octets = 146070592
        Acct-Input-Gigawords = 0
        Acct-Output-Gigawords = 0
        Acct-Input-Packets = 53364
        Acct-Output-Packets = 101854
        Acct-Session-Time = 189
        Acct-Unique-Session-Id = "f3bcc21590c1afd1"
        Timestamp = 1256627765
        Request-Authenticator = Verified*

Again, impossibly high. There is just one more account interim update, and
then the person is logged off due to insufficient credit:
*Tue Oct 27 09:17:14 2009
        ChilliSpot-Version = "1.0.13"
        Acct-Status-Type = Stop
        Calling-Station-Id = "00-1F-33-FF-BD-00"
        NAS-Port-Type = Wireless-802.11
        NAS-Port = 4
        NAS-Port-Id = "00000004"
        Framed-IP-Address = 172.25.0.168
        Acct-Session-Id = "4ae69d6000000004"
        NAS-IP-Address = 172.25.0.1
        Called-Station-Id = "00-16-B6-D9-5A-EB"
       Acct-Input-Octets = 3701744
       Acct-Output-Octets = 175905676
        Acct-Input-Gigawords = 0
        Acct-Output-Gigawords = 0
        Acct-Input-Packets = 64216
        Acct-Output-Packets = 122605
        Acct-Session-Time = 228
        Acct-Terminate-Cause = Session-Timeout
        Acct-Unique-Session-Id = "f3bcc21590c1afd1"
        Timestamp = 1256627834
        Request-Authenticator = Verified*

All in all, chilli has told radius that the user has used 171.29 megabytes
in 3.8 minutes. Of that, 167.76 megabytes were in downloads, and 3.53
megabytes were in uploads. Unfortunately, this is absolutely impossible with
regards to the backbone speeds in South Africa.

Any help would be greatly appreciated, I have no idea how to solve this.

All the best
Jack J Allan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091109/d601050d/attachment.htm>

From mihamina at gulfsat.mg  Mon Nov  9 16:51:29 2009
From: mihamina at gulfsat.mg (Rakotomandimby Mihamina)
Date: Mon, 09 Nov 2009 19:51:29 +0300
Subject: [Chilli] how not to use Javascript
In-Reply-To: <42400.139.179.14.250.1257492166.squirrel@webmail.bilkent.edu.tr>
References: <4AF3C1C2.70508@gulfsat.mg>
	<42400.139.179.14.250.1257492166.squirrel@webmail.bilkent.edu.tr>
Message-ID: <4AF84891.2090605@gulfsat.mg>

11/06/2009 10:22 AM, Oguzhan Kayhan::
>> We would like to setup an auth form not using Javascript but
>> just pure (x)HTML.
>> What is the common way to do that?
> You can simply remove java lines from hotspotlogin.cgi and make necessary
> settings according to your needs (like adding some information on your
> login page or usage policy informations etc)

"hostpotlogin.cgi" is called with GET parameters which become hidden inputs.
Those GET parameters are built with a Javascript in the www/coova.html file.

If I dont use Javascript, there is only:
     [...]
     <meta http-equiv="refresh" content="7; URL=/prelogin">
     </head>
     [...]
Is /prelogin supposed to be "hostpotlogin.cgi" _too_ ?

-- 
       Architecte Informatique chez Blueline/Gulfsat:
    Administration Systeme, Recherche & Developpement
                                    +261 33 11 207 36

From henk at skyrove.com  Tue Nov 10 07:19:06 2009
From: henk at skyrove.com (Henk Kleynhans)
Date: Tue, 10 Nov 2009 09:19:06 +0200
Subject: [Chilli] Incorrectly high data usage over a short period of time
In-Reply-To: <d6a9b02c0911090701v34bf3101v398527589ea024a@mail.gmail.com>
References: <d6a9b02c0911090701v34bf3101v398527589ea024a@mail.gmail.com>
Message-ID: <d42f029a0911092319y63a4e938ob689f2e851fa1bf2@mail.gmail.com>

Hi Jack,

It sounds quite plausible to me.

On my 4 Mbps line, I frequently download at 400 KB/s. (theoretic maximum is
512 KB/s)

That means, with a single line, I can typically download 23 MB every min.
(400 x 60/1024)

You have bonded 3 lines, thus you can get 23x3 = 69 MB / min

Your customer was online for 228 sec, or 3.8 min, thus 69 * 3.8 = 262 MB.

They only downloaded 168 MB. (Probably a Windows or Office update if they're
not aware of what it was)

Kind regards,
henk

-- 
Henk Kleynhans
CTO & Founder
Skyrove (Pty) Ltd
Africa's Largest & Fastest Growing Wi-Fi Hotspot Network
Tel: 0861 ROVERS
Cell: +27 (84) 3073451
Fax: +27 (86) 6204077
henk at skyrove.com
blog: www.geekrebel.com

------

"A person with ubuntu is open and available to others, affirming of others,
does not feel threatened that others are able and good, for he or she has a
proper self-assurance that comes from knowing that he or she belongs in a
greater whole and is diminished when others are humiliated or diminished,
when others are tortured or oppressed." - Desmond Tutu

On Mon, Nov 9, 2009 at 5:01 PM, Jack J Allan <jack.j.allan at gmail.com> wrote:

> Dear Coova Chilli Community
>
> Firstly, my setup:
>
>    1. Coova Chilli 1.013
>    2. Freeradius 2.1.5
>
> I am absolutely perplexed by this bug. Not only that, but I cannot think of
> any ways of reproducing it, so I am hoping someone in the community has come
> accross this before. My problem is my NAS is reporting incorrectly high
> usage over a short space of time. Where we are based (South Africa), the
> fastest one's ADSL line speed can be is 4 mega bits per second. This
> translates to about 0.47 megabytes per seconds, and that is if you are
> lucky. We have three such lines multiplexed together, which means we can get
> a throughput of about 0.47*3 = 1.41 megabytes per second. Unfortunately, we
> have received a complaint claiming that chilli has deducted more than what
> was used. Looking at the radius logs, I can ascertain that this is true.
>
> Here is the initial start packet sent by chilli to radius (I have removed
> username and Nas Identifier to protect privacy):
>
> *Tue Oct 27 09:12:57 2009
>         ChilliSpot-Version = "1.0.13"
>         Acct-Status-Type = Start
>         Calling-Station-Id = "00-1F-33-FF-BD-00"
>         NAS-Port-Type = Wireless-802.11
>         NAS-Port = 4
>         NAS-Port-Id = "00000004"
>         Framed-IP-Address = 172.25.0.168
>         Acct-Session-Id = "4ae69d6000000004"
>         NAS-IP-Address = 172.25.0.1
>         Called-Station-Id = "00-16-B6-D9-5A-EB"
>         Acct-Unique-Session-Id = "f3bcc21590c1afd1"
>         Timestamp = 1256627577
>         Request-Authenticator = Verified*
>
> Then about 1 minute later, the following occurs
> *Tue Oct 27 09:13:59 2009
>         ChilliSpot-Version = "1.0.13"
>         Acct-Status-Type = Interim-Update
>         Calling-Station-Id = "00-1F-33-FF-BD-00"
>         NAS-Port-Type = Wireless-802.11
>         NAS-Port = 4
>         NAS-Port-Id = "00000004"
>         Framed-IP-Address = 172.25.0.168
>         Acct-Session-Id = "4ae69d6000000004"
>         NAS-IP-Address = 172.25.0.1
>         Called-Station-Id = "00-16-B6-D9-5A-EB"
>        Acct-Input-Octets = 1178355
>        Acct-Output-Octets = 52201523
>         Acct-Input-Gigawords = 0
>         Acct-Output-Gigawords = 0
>         Acct-Input-Packets = 19170
>         Acct-Output-Packets = 36581
>         Acct-Session-Time = 63
>         Acct-Unique-Session-Id = "f3bcc21590c1afd1"
>         Timestamp = 1256627639
>         Request-Authenticator = Verified*
>
> This is definitely in error (the bold parts), as the backbone line speed
> cannot handle this much traffic in such a short space of time. Another
> minute later:
> Tue Oct 27 09:15:02 2009
> *        ChilliSpot-Version = "1.0.13"
>         Acct-Status-Type = Interim-Update
>         Calling-Station-Id = "00-1F-33-FF-BD-00"
>         NAS-Port-Type = Wireless-802.11
>         NAS-Port = 4
>         NAS-Port-Id = "00000004"
>         Framed-IP-Address = 172.25.0.168
>         Acct-Session-Id = "4ae69d6000000004"
>         NAS-IP-Address = 172.25.0.1
>         Called-Station-Id = "00-16-B6-D9-5A-EB"
>        Acct-Input-Octets = 2132628
>        Acct-Output-Octets = 98448008
>         Acct-Input-Gigawords = 0
>         Acct-Output-Gigawords = 0
>         Acct-Input-Packets = 36067
>         Acct-Output-Packets = 68754
>         Acct-Session-Time = 126
>         Acct-Unique-Session-Id = "f3bcc21590c1afd1"
>         Timestamp = 1256627702
>         Request-Authenticator = Verified*
>
> Again, the amount of data usage is absolutely impossible for the backbone's
> capabaility. Another minute later:
> *Tue Oct 27 09:16:05 2009
>         ChilliSpot-Version = "1.0.13"
>         Acct-Status-Type = Interim-Update
>         Calling-Station-Id = "00-1F-33-FF-BD-00"
>         NAS-Port-Type = Wireless-802.11
>         NAS-Port = 4
>         NAS-Port-Id = "00000004"
>         Framed-IP-Address = 172.25.0.168
>         Acct-Session-Id = "4ae69d6000000004"
>         NAS-IP-Address = 172.25.0.1
>         Called-Station-Id = "00-16-B6-D9-5A-EB"
>        Acct-Input-Octets = 3097259
>        Acct-Output-Octets = 146070592
>         Acct-Input-Gigawords = 0
>         Acct-Output-Gigawords = 0
>         Acct-Input-Packets = 53364
>         Acct-Output-Packets = 101854
>         Acct-Session-Time = 189
>         Acct-Unique-Session-Id = "f3bcc21590c1afd1"
>         Timestamp = 1256627765
>         Request-Authenticator = Verified*
>
> Again, impossibly high. There is just one more account interim update, and
> then the person is logged off due to insufficient credit:
> *Tue Oct 27 09:17:14 2009
>         ChilliSpot-Version = "1.0.13"
>         Acct-Status-Type = Stop
>         Calling-Station-Id = "00-1F-33-FF-BD-00"
>         NAS-Port-Type = Wireless-802.11
>         NAS-Port = 4
>         NAS-Port-Id = "00000004"
>         Framed-IP-Address = 172.25.0.168
>         Acct-Session-Id = "4ae69d6000000004"
>         NAS-IP-Address = 172.25.0.1
>         Called-Station-Id = "00-16-B6-D9-5A-EB"
>        Acct-Input-Octets = 3701744
>        Acct-Output-Octets = 175905676
>         Acct-Input-Gigawords = 0
>         Acct-Output-Gigawords = 0
>         Acct-Input-Packets = 64216
>         Acct-Output-Packets = 122605
>         Acct-Session-Time = 228
>         Acct-Terminate-Cause = Session-Timeout
>         Acct-Unique-Session-Id = "f3bcc21590c1afd1"
>         Timestamp = 1256627834
>         Request-Authenticator = Verified*
>
> All in all, chilli has told radius that the user has used 171.29 megabytes
> in 3.8 minutes. Of that, 167.76 megabytes were in downloads, and 3.53
> megabytes were in uploads. Unfortunately, this is absolutely impossible with
> regards to the backbone speeds in South Africa.
>
> Any help would be greatly appreciated, I have no idea how to solve this.
>
> All the best
> Jack J Allan
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091110/eabd5a29/attachment-0001.htm>

From devinder at palettemm.com  Wed Nov 11 03:49:44 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Wed, 11 Nov 2009 11:49:44 +0800
Subject: [Chilli] Hotspot Login on Mobile Phones
Message-ID: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>

Hello

I am trying to use the hotspotlogin.cgi page and it could authenticate
on my notebook running XP and VISTA. But i cant seeem to get the login
page to be displayed on NOKIA N95 mobile phone.

Regards


-- 
Devinder Singh   |   R&D Manager
______________________________
Palette Multimedia Berhad (420056-K)
6 Floor, Unit 4,
KPMG Tower
8 First Avenue,
Bandar Utama,
47800 Petaling Jaya, Selangor
Malaysia

m. +60122248306
p.  +60377289880 Ext 502
f.   +60377281080
@ devinder at palettemm.com
www.palettemm.com

From wichert at wiggy.net  Wed Nov 11 06:24:00 2009
From: wichert at wiggy.net (Wichert Akkerman)
Date: Wed, 11 Nov 2009 07:24:00 +0100
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
Message-ID: <4AFA5880.1080304@wiggy.net>

On 11/11/09 04:49 , Devinder Singh wrote:
> Hello
>
> I am trying to use the hotspotlogin.cgi page and it could authenticate
> on my notebook running XP and VISTA. But i cant seeem to get the login
> page to be displayed on NOKIA N95 mobile phone.

That is interesting. I've noticed that iPod and iPhones can have the 
same problem, but have not had the chance to properly debug that. Can 
you check if your phone gets a DHCP lease?

Wichert.

From jos at xos.nl  Wed Nov 11 07:32:20 2009
From: jos at xos.nl (Jos Vos)
Date: Wed, 11 Nov 2009 08:32:20 +0100
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <4AFA5880.1080304@wiggy.net>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net>
Message-ID: <20091111073220.GA27178@jasmine.xos.nl>

On Wed, Nov 11, 2009 at 07:24:00AM +0100, Wichert Akkerman wrote:

> That is interesting. I've noticed that iPod and iPhones can have the 
> same problem, but have not had the chance to properly debug that. Can 
> you check if your phone gets a DHCP lease?

I've once made a quick-and-dirty patch to the login page that solves
this problem (mainly removing some Javascript IIRC).  I'll dig up the
patch and post it in this thread later today.

-- 
--    Jos Vos <jos at xos.nl>
--    X/OS Experts in Open Systems BV   |   Phone: +31 20 6938364
--    Amsterdam, The Netherlands        |     Fax: +31 20 6948204

From jos at xos.nl  Wed Nov 11 09:09:47 2009
From: jos at xos.nl (Jos Vos)
Date: Wed, 11 Nov 2009 10:09:47 +0100
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <4979E0A9-A2B0-4DB9-A891-842AF68024AA@wiggy.net>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net>
	<20091111073220.GA27178@jasmine.xos.nl>
	<4979E0A9-A2B0-4DB9-A891-842AF68024AA@wiggy.net>
Message-ID: <20091111090947.GA28978@jasmine.xos.nl>

On Wed, Nov 11, 2009 at 09:53:00AM +0100, Wichert Akkerman wrote:

> Didn't expect to see you here :)

:-)

> The problem is not javascript. I run a custom portal which does not
> use any javascript and also notice problems with iPods/iPhones. It seems
> that either they do not get a valid DHCP lease, or their TCP traffic is
> misdirected somewhere.

Maybe it was not JS.  The redirect rings a bell...
Anyway, I'll dig up the patch later.  IIRC it worked out-of-the-box on
a Nokia E61, but not on a N95, for which the patch was required.

-- 
--    Jos Vos <jos at xos.nl>
--    X/OS Experts in Open Systems BV   |   Phone: +31 20 6938364
--    Amsterdam, The Netherlands        |     Fax: +31 20 6948204

From oguzhank at bilkent.edu.tr  Wed Nov 11 09:25:12 2009
From: oguzhank at bilkent.edu.tr (Oguzhan Kayhan)
Date: Wed, 11 Nov 2009 11:25:12 +0200 (EET)
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <4AFA5880.1080304@wiggy.net>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net>
Message-ID: <47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>

> On 11/11/09 04:49 , Devinder Singh wrote:
>> Hello
>>
>> I am trying to use the hotspotlogin.cgi page and it could authenticate
>> on my notebook running XP and VISTA. But i cant seeem to get the login
>> page to be displayed on NOKIA N95 mobile phone.
>
> That is interesting. I've noticed that iPod and iPhones can have the
> same problem, but have not had the chance to properly debug that. Can
> you check if your phone gets a DHCP lease?
>

We have similar problems with nokia phones also..
Actually. we dont have any java codes on our hotlogin.cgi too.
We dont have any problems with any clients except nokia.. But with them,
there is another login/password field pops up whele redirection occurs..
So user can not see our login page at all.





> Wichert.
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>



From wichert at wiggy.net  Wed Nov 11 08:53:00 2009
From: wichert at wiggy.net (Wichert Akkerman)
Date: Wed, 11 Nov 2009 09:53:00 +0100
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <20091111073220.GA27178@jasmine.xos.nl>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net>
	<20091111073220.GA27178@jasmine.xos.nl>
Message-ID: <4979E0A9-A2B0-4DB9-A891-842AF68024AA@wiggy.net>

Hi Jos!

Didn't expect to see you here :)

On Nov 11, 2009, at 08:32, Jos Vos wrote:

> I've once made a quick-and-dirty patch to the login page that solves
> this problem (mainly removing some Javascript IIRC).  I'll dig up the
> patch and post it in this thread later today.

The problem is not javascript. I run a custom portal which does not use any javascript and also notice problems with iPods/iPhones. It seems that either they do not get a valid DHCP lease, or their TCP traffic is misdirected somewhere.

Wichert.



From david at coova.com  Wed Nov 11 09:42:10 2009
From: david at coova.com (David Bird)
Date: Wed, 11 Nov 2009 10:42:10 +0100
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net>
	<47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>
Message-ID: <1257932530.7368.76.camel@david-laptop>

We'll need more details about the problems being had. I just, btw,
logged into my CoovaOM network using my Nokia N95 and I regularly test
it with an iPod touch. The captive portal is using the Drupal hotspot
module and redirects (not javascript) -- do you might refer to that for
a PHP example of a portal. 

On Wed, 2009-11-11 at 11:25 +0200, Oguzhan Kayhan wrote:
> > On 11/11/09 04:49 , Devinder Singh wrote:
> >> Hello
> >>
> >> I am trying to use the hotspotlogin.cgi page and it could authenticate
> >> on my notebook running XP and VISTA. But i cant seeem to get the login
> >> page to be displayed on NOKIA N95 mobile phone.
> >
> > That is interesting. I've noticed that iPod and iPhones can have the
> > same problem, but have not had the chance to properly debug that. Can
> > you check if your phone gets a DHCP lease?
> >
> 
> We have similar problems with nokia phones also..
> Actually. we dont have any java codes on our hotlogin.cgi too.
> We dont have any problems with any clients except nokia.. But with them,
> there is another login/password field pops up whele redirection occurs..
> So user can not see our login page at all.
> 
> 
> 
> 
> 
> > Wichert.
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >
> 
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From jos at xos.nl  Wed Nov 11 16:47:54 2009
From: jos at xos.nl (Jos Vos)
Date: Wed, 11 Nov 2009 17:47:54 +0100
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <4979E0A9-A2B0-4DB9-A891-842AF68024AA@wiggy.net>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net>
	<20091111073220.GA27178@jasmine.xos.nl>
	<4979E0A9-A2B0-4DB9-A891-842AF68024AA@wiggy.net>
Message-ID: <20091111164754.GA2884@jasmine.xos.nl>

On Wed, Nov 11, 2009 at 09:53:00AM +0100, Wichert Akkerman wrote:

> The problem is not javascript. I run a custom portal which does not
> use any javascript and also notice problems with iPods/iPhones. It seems
> that either they do not get a valid DHCP lease, or their TCP traffic is
> misdirected somewhere.

OK, I looked at my changes.
In coova.html there is this piece of code:

==========================================================================
<script type="text/javascript" language="Javascript">
//<!--
function getURLParam(n) {
  var s = "";
  var href = window.location.href;
  if (href.indexOf("?") > -1) {
    var qs = href.substr(href.indexOf("?"));
    var qsList = qs.split("&");
    for (var i = 0; i < qsList.length; i++) {
      if (qsList[i].indexOf(n + "=") > -1) {
        var pList = qsList[i].split("=");
        s = pList[1];
        break;
      }
    }
  }
  return unescape(s.replace(/\+/g, " "));
}
var loginUrl = getURLParam("loginurl");
window.document.write("<meta http-equiv=\"refresh\" content=\"5; URL="+loginUrl+"\">");
function redirect() { window.location = loginUrl; return false; }
//-->
</script>
==========================================================================

I completely commented this out and removed the "//" lines, so it becomes:

==========================================================================
<!--
<script type="text/javascript" language="Javascript">
function getURLParam(n) {
  var s = "";
  var href = window.location.href;
  if (href.indexOf("?") > -1) {
    var qs = href.substr(href.indexOf("?"));
    var qsList = qs.split("&");
    for (var i = 0; i < qsList.length; i++) {
      if (qsList[i].indexOf(n + "=") > -1) {
        var pList = qsList[i].split("=");
        s = pList[1];
        break;
      }
    }
  }
  return unescape(s.replace(/\+/g, " "));
}
var loginUrl = getURLParam("loginurl");
window.document.write("<meta http-equiv=\"refresh\" content=\"5; URL="+loginUrl+"\">");
function redirect() { window.location = loginUrl; return false; }
</script>
-->
==========================================================================

IIRC, this solved the problem, at least for the N95.  I admit it seems
to be a dirty hack, but it solved my urgent problems and after that I
didn't do any further research (especially because I do not own any of
these phones myself).

I'm happy to hear about a more structural solution.

-- 
--    Jos Vos <jos at xos.nl>
--    X/OS Experts in Open Systems BV   |   Phone: +31 20 6938364
--    Amsterdam, The Netherlands        |     Fax: +31 20 6948204

From devinder at palettemm.com  Thu Nov 12 00:53:56 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Thu, 12 Nov 2009 08:53:56 +0800
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <20091111164754.GA2884@jasmine.xos.nl>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net> <20091111073220.GA27178@jasmine.xos.nl>
	<4979E0A9-A2B0-4DB9-A891-842AF68024AA@wiggy.net>
	<20091111164754.GA2884@jasmine.xos.nl>
Message-ID: <6bdd03c50911111653p488bc75crf060beb1b0faf82f@mail.gmail.com>

Thanks Jos i will give it a try. Would it affect the login on
notebooks if we comment out the Java Script // lines

Regards,

Devinder

2009/11/12 Jos Vos <jos at xos.nl>:
> On Wed, Nov 11, 2009 at 09:53:00AM +0100, Wichert Akkerman wrote:
>
>> The problem is not javascript. I run a custom portal which does not
>> use any javascript and also notice problems with iPods/iPhones. It seems
>> that either they do not get a valid DHCP lease, or their TCP traffic is
>> misdirected somewhere.
>
> OK, I looked at my changes.
> In coova.html there is this piece of code:
>
> ==========================================================================
> <script type="text/javascript" language="Javascript">
> //<!--
> function getURLParam(n) {
> ?var s = "";
> ?var href = window.location.href;
> ?if (href.indexOf("?") > -1) {
> ? ?var qs = href.substr(href.indexOf("?"));
> ? ?var qsList = qs.split("&");
> ? ?for (var i = 0; i < qsList.length; i++) {
> ? ? ?if (qsList[i].indexOf(n + "=") > -1) {
> ? ? ? ?var pList = qsList[i].split("=");
> ? ? ? ?s = pList[1];
> ? ? ? ?break;
> ? ? ?}
> ? ?}
> ?}
> ?return unescape(s.replace(/\+/g, " "));
> }
> var loginUrl = getURLParam("loginurl");
> window.document.write("<meta http-equiv=\"refresh\" content=\"5; URL="+loginUrl+"\">");
> function redirect() { window.location = loginUrl; return false; }
> //-->
> </script>
> ==========================================================================
>
> I completely commented this out and removed the "//" lines, so it becomes:
>
> ==========================================================================
> <!--
> <script type="text/javascript" language="Javascript">
> function getURLParam(n) {
> ?var s = "";
> ?var href = window.location.href;
> ?if (href.indexOf("?") > -1) {
> ? ?var qs = href.substr(href.indexOf("?"));
> ? ?var qsList = qs.split("&");
> ? ?for (var i = 0; i < qsList.length; i++) {
> ? ? ?if (qsList[i].indexOf(n + "=") > -1) {
> ? ? ? ?var pList = qsList[i].split("=");
> ? ? ? ?s = pList[1];
> ? ? ? ?break;
> ? ? ?}
> ? ?}
> ?}
> ?return unescape(s.replace(/\+/g, " "));
> }
> var loginUrl = getURLParam("loginurl");
> window.document.write("<meta http-equiv=\"refresh\" content=\"5; URL="+loginUrl+"\">");
> function redirect() { window.location = loginUrl; return false; }
> </script>
> -->
> ==========================================================================
>
> IIRC, this solved the problem, at least for the N95. ?I admit it seems
> to be a dirty hack, but it solved my urgent problems and after that I
> didn't do any further research (especially because I do not own any of
> these phones myself).
>
> I'm happy to hear about a more structural solution.
>
> --
> -- ? ?Jos Vos <jos at xos.nl>
> -- ? ?X/OS Experts in Open Systems BV ? | ? Phone: +31 20 6938364
> -- ? ?Amsterdam, The Netherlands ? ? ? ?| ? ? Fax: +31 20 6948204
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>



-- 
Devinder Singh   |   R&D Manager
______________________________
Palette Multimedia Berhad (420056-K)
6 Floor, Unit 4,
KPMG Tower
8 First Avenue,
Bandar Utama,
47800 Petaling Jaya, Selangor
Malaysia

m. +60122248306
p.  +60377289880 Ext 502
f.   +60377281080
@ devinder at palettemm.com
www.palettemm.com

From devinder at palettemm.com  Thu Nov 12 01:36:02 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Thu, 12 Nov 2009 09:36:02 +0800
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <20091111164754.GA2884@jasmine.xos.nl>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net> <20091111073220.GA27178@jasmine.xos.nl>
	<4979E0A9-A2B0-4DB9-A891-842AF68024AA@wiggy.net>
	<20091111164754.GA2884@jasmine.xos.nl>
Message-ID: <6bdd03c50911111736n4bacbc52r2de0cc76730bf197@mail.gmail.com>

Hi Jos,

I had commented out the Java Script comment in coova.html  but the
hotspotlogin.cgi login page does not seems to be displayed on my Nokia
N95 mobile phone. what is see is the redirection logo when i launch my
phone browser and then i see a page error.

I get this error message :

Wireless Service Login Failed Login Must Be Performed through Hotspot daemon.

Btw i have also removed SSL on the hotspotlogin.cgi file to bypass SSL
and use http instead

Please could you let me know how can i allow users to login from their
mobile phones. I managed to get it to run on Windows Pocket PC.

Thanks

Devinder




2009/11/12 Jos Vos <jos at xos.nl>:
> On Wed, Nov 11, 2009 at 09:53:00AM +0100, Wichert Akkerman wrote:
>
>> The problem is not javascript. I run a custom portal which does not
>> use any javascript and also notice problems with iPods/iPhones. It seems
>> that either they do not get a valid DHCP lease, or their TCP traffic is
>> misdirected somewhere.
>
> OK, I looked at my changes.
> In coova.html there is this piece of code:
>
> ==========================================================================
> <script type="text/javascript" language="Javascript">
> //<!--
> function getURLParam(n) {
> ?var s = "";
> ?var href = window.location.href;
> ?if (href.indexOf("?") > -1) {
> ? ?var qs = href.substr(href.indexOf("?"));
> ? ?var qsList = qs.split("&");
> ? ?for (var i = 0; i < qsList.length; i++) {
> ? ? ?if (qsList[i].indexOf(n + "=") > -1) {
> ? ? ? ?var pList = qsList[i].split("=");
> ? ? ? ?s = pList[1];
> ? ? ? ?break;
> ? ? ?}
> ? ?}
> ?}
> ?return unescape(s.replace(/\+/g, " "));
> }
> var loginUrl = getURLParam("loginurl");
> window.document.write("<meta http-equiv=\"refresh\" content=\"5; URL="+loginUrl+"\">");
> function redirect() { window.location = loginUrl; return false; }
> //-->
> </script>
> ==========================================================================
>
> I completely commented this out and removed the "//" lines, so it becomes:
>
> ==========================================================================
> <!--
> <script type="text/javascript" language="Javascript">
> function getURLParam(n) {
> ?var s = "";
> ?var href = window.location.href;
> ?if (href.indexOf("?") > -1) {
> ? ?var qs = href.substr(href.indexOf("?"));
> ? ?var qsList = qs.split("&");
> ? ?for (var i = 0; i < qsList.length; i++) {
> ? ? ?if (qsList[i].indexOf(n + "=") > -1) {
> ? ? ? ?var pList = qsList[i].split("=");
> ? ? ? ?s = pList[1];
> ? ? ? ?break;
> ? ? ?}
> ? ?}
> ?}
> ?return unescape(s.replace(/\+/g, " "));
> }
> var loginUrl = getURLParam("loginurl");
> window.document.write("<meta http-equiv=\"refresh\" content=\"5; URL="+loginUrl+"\">");
> function redirect() { window.location = loginUrl; return false; }
> </script>
> -->
> ==========================================================================
>
> IIRC, this solved the problem, at least for the N95. ?I admit it seems
> to be a dirty hack, but it solved my urgent problems and after that I
> didn't do any further research (especially because I do not own any of
> these phones myself).
>
> I'm happy to hear about a more structural solution.
>
> --
> -- ? ?Jos Vos <jos at xos.nl>
> -- ? ?X/OS Experts in Open Systems BV ? | ? Phone: +31 20 6938364
> -- ? ?Amsterdam, The Netherlands ? ? ? ?| ? ? Fax: +31 20 6948204
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>



-- 
Devinder Singh   |   R&D Manager
______________________________
Palette Multimedia Berhad (420056-K)
6 Floor, Unit 4,
KPMG Tower
8 First Avenue,
Bandar Utama,
47800 Petaling Jaya, Selangor
Malaysia

m. +60122248306
p.  +60377289880 Ext 502
f.   +60377281080
@ devinder at palettemm.com
www.palettemm.com

From devinder at palettemm.com  Thu Nov 12 01:41:19 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Thu, 12 Nov 2009 09:41:19 +0800
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <4AFA5880.1080304@wiggy.net>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net>
Message-ID: <6bdd03c50911111741o5a2577b9gd34d5a63b1c5481a@mail.gmail.com>

Yes i am getting a DHCP lease from Coova on my phone.

This is the page info :

Current Page:

Web address:
http://192.168.10.1/cgi-bin/hotspotlogin.cgi?res

Conenction
Normal


Thanks
Devinder

2009/11/11 Wichert Akkerman <wichert at wiggy.net>:
> On 11/11/09 04:49 , Devinder Singh wrote:
>>
>> Hello
>>
>> I am trying to use the hotspotlogin.cgi page and it could authenticate
>> on my notebook running XP and VISTA. But i cant seeem to get the login
>> page to be displayed on NOKIA N95 mobile phone.
>
> That is interesting. I've noticed that iPod and iPhones can have the same
> problem, but have not had the chance to properly debug that. Can you check
> if your phone gets a DHCP lease?
>
> Wichert.
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>



-- 
Devinder Singh   |   R&D Manager
______________________________
Palette Multimedia Berhad (420056-K)
6 Floor, Unit 4,
KPMG Tower
8 First Avenue,
Bandar Utama,
47800 Petaling Jaya, Selangor
Malaysia

m. +60122248306
p.  +60377289880 Ext 502
f.   +60377281080
@ devinder at palettemm.com
www.palettemm.com

From gunther.mayer at googlemail.com  Thu Nov 12 08:12:38 2009
From: gunther.mayer at googlemail.com (Gunther Mayer)
Date: Thu, 12 Nov 2009 10:12:38 +0200
Subject: [Chilli] Ippool exhaustion bug?
In-Reply-To: <4AF7F18E.4000502@gmail.com>
References: <4AF7F18E.4000502@gmail.com>
Message-ID: <4AFBC376.1070401@gmail.com>

Ok, seeing that nobody seems to have similar problems I'm now posting my 
findings so far: There really /is/ a problem in the chilli code though I 
haven't been able to locate the precise spot where this occurs. So far 
I've carefully inserted / adjusted a whole bunch of log_err(0, ...) 
statements in ippool.c and chilli.c and have the following sample output 
for you, based on the same sample configuration as in my original email 
below (dhcpstart 10.0.0.129, dhcpend 10.0.0.133). It happened after a 
fresh restart of chilli, presumably when the client (my laptop) still 
had a valid lease cached locally:

2009-11-12T09:47:54+02:00 41.144.95.148 coova-chilli[1283]: 
CoovaChilli(ChilliSpot) 1.0.14. Copyright 2002-2005 Mondru AB. Licensed 
under GPL. Copyright 2006-2009 Coova Technologies <support at coova.com>. 
Licensed under GPL. See http://coova.org/ for details.
2009-11-12T09:47:54+02:00 41.144.95.148 coova-chilli[1283]: tun.c: 497: 
TX queue length set to 100
2009-11-12T09:47:54+02:00 41.144.95.148 kernel: device br-lan entered 
promiscuous mode
2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: chilli.c: 
1418: cb_tun_ind: trying to allocate newip
2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
334: Requesting new static ip: 10.0.0.131
2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
427: In ippool_newip just allocated dynamic address from pool:
2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
34: Listsize 132, Firstdyn 0, Lastdyn 3, Firststat 4, Laststat 131
2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
43: Unit 0 inuse 0 prev 1431469324 next 1 addr 10.0.0.129
2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
43: Unit 1 inuse 0 prev 0 next 3 addr 10.0.0.130
2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
43: Unit 2 inuse 1 prev 1431469324 next 1431469324 addr 10.0.0.131
2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
43: Unit 3 inuse 0 prev 1 next 1431469324 addr 10.0.0.132

The above shows that cb_tun_ind() function allocates a "static" ip 
(.131) from the dynamic pool BEFORE the dhcp request is even registered:

2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: chilli.c: 
3015: New DHCP request from MAC=00-11-22-33-44-55
2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
334: Requesting new static ip: 0.0.0.0
2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
334: Requesting new dynamic ip: 0.0.0.0
2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
427: In ippool_newip just allocated dynamic address from pool:
2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
34: Listsize 132, Firstdyn 1, Lastdyn 3, Firststat 4, Laststat 131
2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
43: Unit 0 inuse 1 prev 1431469324 next 1431469324 addr 10.0.0.129
2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
43: Unit 1 inuse 0 prev 1431469324 next 3 addr 10.0.0.130
2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
43: Unit 2 inuse 1 prev 1431469324 next 1431469324 addr 10.0.0.131
2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
43: Unit 3 inuse 0 prev 1 next 1431469324 addr 10.0.0.132

Somehow the normal log message "Client MAC=00-11-22-33-44-55 assigned IP 
10.0.0.129" is missing but you can tell that only in the above piece did 
the real dynamic ip allocation happen. I've set "lease 60" in my 
chilli.conf for debugging purposes so when the ip wasn't renewed in time 
1.5 min later chilli releases the lease and frees the dynamic ip:

2009-11-12T09:49:24+02:00 41.144.95.148 coova-chilli[1283]: chilli.c: 
3146: DHCP addr released by MAC=00-11-22-33-44-55 IP=10.0.0.129
2009-11-12T09:49:24+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
504: In ippool_freeip just reinserted ip into list of unused dynamic ips:
2009-11-12T09:49:24+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
34: Listsize 132, Firstdyn 1, Lastdyn 0, Firststat 4, Laststat 131
2009-11-12T09:49:24+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
43: Unit 0 inuse 0 prev 3 next 1431469324 addr 10.0.0.129
2009-11-12T09:49:24+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
43: Unit 1 inuse 0 prev 1431469324 next 3 addr 10.0.0.130
2009-11-12T09:49:24+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
43: Unit 2 inuse 1 prev 1431469324 next 1431469324 addr 10.0.0.131
2009-11-12T09:49:24+02:00 41.144.95.148 coova-chilli[1283]: ippool.c: 
43: Unit 3 inuse 0 prev 1 next 0 addr 10.0.0.132

10.0.0.129 has now been successfully freed and returned to the pool 
(inuse 0). But the 10.0.0.131 address assigned by cb_tun_ind remains 
there until the end of days, slowly filling up the pool until it is 
exhausted and nobody can use the hotspot anymore.

Please could somebody (David?) with better knowledge of the source look 
into chilli.c and tell me where the bug is? It will take me forever to 
track it down because my C skills are not that great. Attached is the 
patch relative to 1.0.14 on to enable the above log messages so you can 
reproduce this yourself (just use the below config snippets together 
with "lease 60", start chilli, restart and check out the logs).

Thanks,

Gunther

Gunther Mayer wrote:
> Hi guys,
>
> I've stumbled across the following VERY frustrating problem which is 
> giving me and hundreds of our customers endless grey hair. I have a 
> uamanyip setup with a /24 net, the first /25 subnet of which is for 
> statip and the rest for dynip (implicitly) but specified with 
> dhcpstart and dhcpend for flexibility. After quite a long time, when 
> most ip's have been recycled a fair number of times chilli refuses to 
> hand out any more ip addresses dynamically and chokes with the 
> following appearing ad infinitum in the logs:
>
> 2009-11-09T01:00:14+02:00 coova-chilli[1378]: chilli.c: 3012: New DHCP 
> request from MAC=xx-xx-xx-xx-xx-xx
> 2009-11-09T01:00:14+02:00 coova-chilli[1378]: ippool.c: 397: No more 
> IP addresses available
> 2009-11-09T01:00:14+02:00 coova-chilli[1378]: chilli.c: 332: Failed to 
> allocate either static or dynamic IP address
>
> Of course reproducing my production settings would take forever (about 
> 127 ip addresses between dhcpstart and dhcpend) so I decided to cut it 
> down to the following testing example in chilli.conf:
>
> uamlisten 10.0.0.1
> net 10.0.0.0/24
> dhcpstart 129
> dhcpend 133
> statip 10.0.0.0/25
> uamanyip
>
> That is, 10.0.0.2-10.0.0.127 or 125 ip's are reserved for static 
> ip/anyip clients and 10.0.0.129-10.0.0.132 or 4 ip's for dynamic/dhcp 
> clients. Now to reproduce the ippool bug, connect your linux laptop 
> via cable to the chilli box and do something like
>
> $ dhclient eth0 # should give you 10.0.0.129 first time, then .130 and 
> so on
> $ killall dhclient
> $ ifconfig eth0 0.0.0.0 down
> $ ifconfig eth0 hw ether xx:xx:xx:xx:xx:xx+1
>
> and repeat. Of course the fifth time you do this chilli will 
> legitimately run out of ip addresses because it still has all the 
> other allocated. Until such time that they all time out so wait a bit 
> longer than 10 minutes and start from scratch. Unfortunately I'm no 
> longer able to reproduce this but I could last night, I'll figure out 
> an easy way in time but in the meantime, has anyone seen such problems 
> before? Does anyone have a suggestion?
>
> It looks strongly like some dynamic ip addresses not being properly 
> released in ippool.c but I haven't been able to figure it out.
> This bug has been present in 1.0.13(r199) and 1.0.14(r208), the two 
> I've tested with so far.
>
> Thanks,
>
> Gunther
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091112/5cb3b2c3/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 1.0.14_ippool_debug.patch
Type: text/x-diff
Size: 5078 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091112/5cb3b2c3/attachment-0001.patch>

From jos at xos.nl  Thu Nov 12 08:56:23 2009
From: jos at xos.nl (Jos Vos)
Date: Thu, 12 Nov 2009 09:56:23 +0100
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <6bdd03c50911111653p488bc75crf060beb1b0faf82f@mail.gmail.com>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net>
	<20091111073220.GA27178@jasmine.xos.nl>
	<4979E0A9-A2B0-4DB9-A891-842AF68024AA@wiggy.net>
	<20091111164754.GA2884@jasmine.xos.nl>
	<6bdd03c50911111653p488bc75crf060beb1b0faf82f@mail.gmail.com>
Message-ID: <20091112085623.GA18342@jasmine.xos.nl>

On Thu, Nov 12, 2009 at 08:53:56AM +0800, Devinder Singh wrote:

> Thanks Jos i will give it a try. Would it affect the login on
> notebooks if we comment out the Java Script // lines

In principle not (this is running on a lot of hotspots we manage for
a customer).  Although as I said I consider it a hack and I'm happy
to hear the bakground of that code and what might be a better solution.

-- 
--    Jos Vos <jos at xos.nl>
--    X/OS Experts in Open Systems BV   |   Phone: +31 20 6938364
--    Amsterdam, The Netherlands        |     Fax: +31 20 6948204

From devinder at palettemm.com  Thu Nov 12 09:15:04 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Thu, 12 Nov 2009 17:15:04 +0800
Subject: [Chilli] VLAN Support
Message-ID: <6bdd03c50911120115u733f2236p945e20e5e9cf42e8@mail.gmail.com>

Hello

Could anyone let me know how do i configure VLAN using Coova Chilli.

Regards

Devinder

From devinder at palettemm.com  Thu Nov 12 09:18:05 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Thu, 12 Nov 2009 17:18:05 +0800
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <20091112085623.GA18342@jasmine.xos.nl>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net> <20091111073220.GA27178@jasmine.xos.nl>
	<4979E0A9-A2B0-4DB9-A891-842AF68024AA@wiggy.net>
	<20091111164754.GA2884@jasmine.xos.nl>
	<6bdd03c50911111653p488bc75crf060beb1b0faf82f@mail.gmail.com>
	<20091112085623.GA18342@jasmine.xos.nl>
Message-ID: <6bdd03c50911120118j4611d282t6072614d8676a27a@mail.gmail.com>

Hi Jos.

Do you happen to have a php page that i can use for mobile phone N95.

Regards,
Devinder

2009/11/12 Jos Vos <jos at xos.nl>:
> On Thu, Nov 12, 2009 at 08:53:56AM +0800, Devinder Singh wrote:
>
>> Thanks Jos i will give it a try. Would it affect the login on
>> notebooks if we comment out the Java Script // lines
>
> In principle not (this is running on a lot of hotspots we manage for
> a customer). ?Although as I said I consider it a hack and I'm happy
> to hear the bakground of that code and what might be a better solution.
>
> --
> -- ? ?Jos Vos <jos at xos.nl>
> -- ? ?X/OS Experts in Open Systems BV ? | ? Phone: +31 20 6938364
> -- ? ?Amsterdam, The Netherlands ? ? ? ?| ? ? Fax: +31 20 6948204
>
>



-- 
Devinder Singh   |   R&D Manager
______________________________
Palette Multimedia Berhad (420056-K)
6 Floor, Unit 4,
KPMG Tower
8 First Avenue,
Bandar Utama,
47800 Petaling Jaya, Selangor
Malaysia

m. +60122248306
p.  +60377289880 Ext 502
f.   +60377281080
@ devinder at palettemm.com
www.palettemm.com

From david at coova.com  Thu Nov 12 14:32:18 2009
From: david at coova.com (David Bird)
Date: Thu, 12 Nov 2009 15:32:18 +0100
Subject: [Chilli] VLAN Support
In-Reply-To: <6bdd03c50911120115u733f2236p945e20e5e9cf42e8@mail.gmail.com>
References: <6bdd03c50911120115u733f2236p945e20e5e9cf42e8@mail.gmail.com>
Message-ID: <1258036338.20047.2.camel@david-laptop>

Run chilli with --ieee8021q and it will allow for dhcpif to be a VLAN'ed
network. You may need to use it with --tcpmss as your MTU will need to
be adjusted to fit the larger frames. 


On Thu, 2009-11-12 at 17:15 +0800, Devinder Singh wrote:
> Hello
> 
> Could anyone let me know how do i configure VLAN using Coova Chilli.
> 
> Regards
> 
> Devinder
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From david at coova.com  Thu Nov 12 14:34:44 2009
From: david at coova.com (David Bird)
Date: Thu, 12 Nov 2009 15:34:44 +0100
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <7a50ad140911110706r6f5c3fc7g9bdee02f9711ae93@mail.gmail.com>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net>
	<47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>
	<1257932530.7368.76.camel@david-laptop>
	<7a50ad140911110706r6f5c3fc7g9bdee02f9711ae93@mail.gmail.com>
Message-ID: <1258036485.20047.4.camel@david-laptop>

Anyone have a pcap dump of that DHCP renew? 


On Wed, 2009-11-11 at 17:06 +0200, ???????? ???????? wrote:
> Some problem with ipod touch, after renew the lease...ap with ipod
> stops traffic exchange. After reconnect again working
> 
> 2009/11/11 David Bird <david at coova.com>:
> > We'll need more details about the problems being had. I just, btw,
> > logged into my CoovaOM network using my Nokia N95 and I regularly test
> > it with an iPod touch. The captive portal is using the Drupal hotspot
> > module and redirects (not javascript) -- do you might refer to that for
> > a PHP example of a portal.
> >
> > On Wed, 2009-11-11 at 11:25 +0200, Oguzhan Kayhan wrote:
> >> > On 11/11/09 04:49 , Devinder Singh wrote:
> >> >> Hello
> >> >>
> >> >> I am trying to use the hotspotlogin.cgi page and it could authenticate
> >> >> on my notebook running XP and VISTA. But i cant seeem to get the login
> >> >> page to be displayed on NOKIA N95 mobile phone.
> >> >
> >> > That is interesting. I've noticed that iPod and iPhones can have the
> >> > same problem, but have not had the chance to properly debug that. Can
> >> > you check if your phone gets a DHCP lease?
> >> >
> >>
> >> We have similar problems with nokia phones also..
> >> Actually. we dont have any java codes on our hotlogin.cgi too.
> >> We dont have any problems with any clients except nokia.. But with them,
> >> there is another login/password field pops up whele redirection occurs..
> >> So user can not see our login page at all.
> >>
> >>
> >>
> >>
> >>
> >> > Wichert.
> >> > _______________________________________________
> >> > Chilli mailing list
> >> > Chilli at coova.org
> >> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >> >
> >>
> >>
> >> _______________________________________________
> >> Chilli mailing list
> >> Chilli at coova.org
> >> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >
> 
> 
> 


From david at coova.com  Thu Nov 12 14:49:33 2009
From: david at coova.com (David Bird)
Date: Thu, 12 Nov 2009 15:49:33 +0100
Subject: [Chilli] Ippool exhaustion bug?
In-Reply-To: <4AFBC376.1070401@gmail.com>
References: <4AF7F18E.4000502@gmail.com>  <4AFBC376.1070401@gmail.com>
Message-ID: <1258037373.20047.10.camel@david-laptop>

Hi Gunther,

You mention one IP being allocated by tun_ind(), which means it's the
result of packets coming into tun0/tap0, which means it's not the
traffic from the end user side of chilli -- rather it's the WAN side.
I'm unclear how this is filling up the pool, however. Is it multiple
entries for the same IP or always allocating new IPs out of tun_ind() ?
Are you using --usetap (if so, try without). Are you narrowing your DHCP
pool only for testing or is your real world IP allocation really a
network smaller than /24 ? 

David

On Thu, 2009-11-12 at 10:12 +0200, Gunther Mayer wrote:
> Ok, seeing that nobody seems to have similar problems I'm now posting
> my findings so far: There really is a problem in the chilli code
> though I haven't been able to locate the precise spot where this
> occurs. So far I've carefully inserted / adjusted a whole bunch of
> log_err(0, ...) statements in ippool.c and chilli.c and have the
> following sample output for you, based on the same sample
> configuration as in my original email below (dhcpstart 10.0.0.129,
> dhcpend 10.0.0.133). It happened after a fresh restart of chilli,
> presumably when the client (my laptop) still had a valid lease cached
> locally:
> 
> 2009-11-12T09:47:54+02:00 41.144.95.148 coova-chilli[1283]:
> CoovaChilli(ChilliSpot) 1.0.14. Copyright 2002-2005 Mondru AB.
> Licensed under GPL. Copyright 2006-2009 Coova Technologies
> <support at coova.com>. Licensed under GPL. See http://coova.org/ for
> details.
> 2009-11-12T09:47:54+02:00 41.144.95.148 coova-chilli[1283]: tun.c:
> 497: TX queue length set to 100
> 2009-11-12T09:47:54+02:00 41.144.95.148 kernel: device br-lan entered
> promiscuous mode
> 2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: chilli.c:
> 1418: cb_tun_ind: trying to allocate newip
> 2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 334: Requesting new static ip: 10.0.0.131
> 2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 427: In ippool_newip just allocated dynamic address from pool:
> 2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 34: Listsize 132, Firstdyn 0, Lastdyn 3, Firststat 4, Laststat 131
> 2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 43: Unit 0 inuse 0 prev 1431469324 next 1 addr 10.0.0.129
> 2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 43: Unit 1 inuse 0 prev 0 next 3 addr 10.0.0.130
> 2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 43: Unit 2 inuse 1 prev 1431469324 next 1431469324 addr 10.0.0.131
> 2009-11-12T09:47:56+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 43: Unit 3 inuse 0 prev 1 next 1431469324 addr 10.0.0.132
> 
> The above shows that cb_tun_ind() function allocates a "static" ip
> (.131) from the dynamic pool BEFORE the dhcp request is even
> registered:
> 
> 2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: chilli.c:
> 3015: New DHCP request from MAC=00-11-22-33-44-55
> 2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 334: Requesting new static ip: 0.0.0.0
> 2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 334: Requesting new dynamic ip: 0.0.0.0
> 2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 427: In ippool_newip just allocated dynamic address from pool:
> 2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 34: Listsize 132, Firstdyn 1, Lastdyn 3, Firststat 4, Laststat 131
> 2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 43: Unit 0 inuse 1 prev 1431469324 next 1431469324 addr 10.0.0.129
> 2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 43: Unit 1 inuse 0 prev 1431469324 next 3 addr 10.0.0.130
> 2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 43: Unit 2 inuse 1 prev 1431469324 next 1431469324 addr 10.0.0.131
> 2009-11-12T09:48:00+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 43: Unit 3 inuse 0 prev 1 next 1431469324 addr 10.0.0.132
> 
> Somehow the normal log message "Client MAC=00-11-22-33-44-55 assigned
> IP 10.0.0.129" is missing but you can tell that only in the above
> piece did the real dynamic ip allocation happen. I've set "lease 60"
> in my chilli.conf for debugging purposes so when the ip wasn't renewed
> in time 1.5 min later chilli releases the lease and frees the dynamic
> ip:
> 
> 2009-11-12T09:49:24+02:00 41.144.95.148 coova-chilli[1283]: chilli.c:
> 3146: DHCP addr released by MAC=00-11-22-33-44-55 IP=10.0.0.129
> 2009-11-12T09:49:24+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 504: In ippool_freeip just reinserted ip into list of unused dynamic
> ips:
> 2009-11-12T09:49:24+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 34: Listsize 132, Firstdyn 1, Lastdyn 0, Firststat 4, Laststat 131
> 2009-11-12T09:49:24+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 43: Unit 0 inuse 0 prev 3 next 1431469324 addr 10.0.0.129
> 2009-11-12T09:49:24+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 43: Unit 1 inuse 0 prev 1431469324 next 3 addr 10.0.0.130
> 2009-11-12T09:49:24+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 43: Unit 2 inuse 1 prev 1431469324 next 1431469324 addr 10.0.0.131
> 2009-11-12T09:49:24+02:00 41.144.95.148 coova-chilli[1283]: ippool.c:
> 43: Unit 3 inuse 0 prev 1 next 0 addr 10.0.0.132
> 
> 10.0.0.129 has now been successfully freed and returned to the pool
> (inuse 0). But the 10.0.0.131 address assigned by cb_tun_ind remains
> there until the end of days, slowly filling up the pool until it is
> exhausted and nobody can use the hotspot anymore.
> 
> Please could somebody (David?) with better knowledge of the source
> look into chilli.c and tell me where the bug is? It will take me
> forever to track it down because my C skills are not that great.
> Attached is the patch relative to 1.0.14 on to enable the above log
> messages so you can reproduce this yourself (just use the below config
> snippets together with "lease 60", start chilli, restart and check out
> the logs).
> 
> Thanks,
> 
> Gunther
> 
> Gunther Mayer wrote: 
> > Hi guys, 
> > 
> > I've stumbled across the following VERY frustrating problem which is
> > giving me and hundreds of our customers endless grey hair. I have a
> > uamanyip setup with a /24 net, the first /25 subnet of which is for
> > statip and the rest for dynip (implicitly) but specified with
> > dhcpstart and dhcpend for flexibility. After quite a long time, when
> > most ip's have been recycled a fair number of times chilli refuses
> > to hand out any more ip addresses dynamically and chokes with the
> > following appearing ad infinitum in the logs: 
> > 
> > 2009-11-09T01:00:14+02:00 coova-chilli[1378]: chilli.c: 3012: New
> > DHCP request from MAC=xx-xx-xx-xx-xx-xx 
> > 2009-11-09T01:00:14+02:00 coova-chilli[1378]: ippool.c: 397: No more
> > IP addresses available 
> > 2009-11-09T01:00:14+02:00 coova-chilli[1378]: chilli.c: 332: Failed
> > to allocate either static or dynamic IP address 
> > 
> > Of course reproducing my production settings would take forever
> > (about 127 ip addresses between dhcpstart and dhcpend) so I decided
> > to cut it down to the following testing example in chilli.conf: 
> > 
> > uamlisten 10.0.0.1 
> > net 10.0.0.0/24 
> > dhcpstart 129 
> > dhcpend 133 
> > statip 10.0.0.0/25 
> > uamanyip 
> > 
> > That is, 10.0.0.2-10.0.0.127 or 125 ip's are reserved for static
> > ip/anyip clients and 10.0.0.129-10.0.0.132 or 4 ip's for
> > dynamic/dhcp clients. Now to reproduce the ippool bug, connect your
> > linux laptop via cable to the chilli box and do something like 
> > 
> > $ dhclient eth0 # should give you 10.0.0.129 first time, then .130
> > and so on 
> > $ killall dhclient 
> > $ ifconfig eth0 0.0.0.0 down 
> > $ ifconfig eth0 hw ether xx:xx:xx:xx:xx:xx+1 
> > 
> > and repeat. Of course the fifth time you do this chilli will
> > legitimately run out of ip addresses because it still has all the
> > other allocated. Until such time that they all time out so wait a
> > bit longer than 10 minutes and start from scratch. Unfortunately I'm
> > no longer able to reproduce this but I could last night, I'll figure
> > out an easy way in time but in the meantime, has anyone seen such
> > problems before? Does anyone have a suggestion? 
> > 
> > It looks strongly like some dynamic ip addresses not being properly
> > released in ippool.c but I haven't been able to figure it out. 
> > This bug has been present in 1.0.13(r199) and 1.0.14(r208), the two
> > I've tested with so far. 
> > 
> > Thanks, 
> > 
> > Gunther 
> > 
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From fmacedo at cpd.ufrgs.br  Thu Nov 12 14:50:53 2009
From: fmacedo at cpd.ufrgs.br (Fernando Dutra Fagundes Macedo)
Date: Thu, 12 Nov 2009 12:50:53 -0200
Subject: [Chilli] SSL on Chili
Message-ID: <25D4D9AF49D1CC499C48BDEA79E7B73303AA4897@DEUTERIO.ad.ufrgs.br>

Hi,

 

When using ssl on chilli, the first page that a user must open must be
HTTPS because chilli will respond only connections over ssl. How can I
accept the two types of redirection (80 and 443) when using ssl?

 

Regards,

Fernando

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091112/c294d3d4/attachment.htm>

From devinder at palettemm.com  Fri Nov 13 01:03:39 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Fri, 13 Nov 2009 09:03:39 +0800
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <1258036485.20047.4.camel@david-laptop>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net>
	<47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>
	<1257932530.7368.76.camel@david-laptop>
	<7a50ad140911110706r6f5c3fc7g9bdee02f9711ae93@mail.gmail.com>
	<1258036485.20047.4.camel@david-laptop>
Message-ID: <6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>

Hi

I actually could recall signing on Nokia N95 using coova version
1.0.14 and the latest hotspotlogin.cgi file.

currently i am using an older version of Coova Chilli but the latest
hotspot.cgi file and still cant login using N95 Nokia.

regards,
devinder

2009/11/12 David Bird <david at coova.com>:
> Anyone have a pcap dump of that DHCP renew?
>
>
> On Wed, 2009-11-11 at 17:06 +0200, ???????? ???????? wrote:
>> Some problem with ipod touch, after renew the lease...ap with ipod
>> stops traffic exchange. After reconnect again working
>>
>> 2009/11/11 David Bird <david at coova.com>:
>> > We'll need more details about the problems being had. I just, btw,
>> > logged into my CoovaOM network using my Nokia N95 and I regularly test
>> > it with an iPod touch. The captive portal is using the Drupal hotspot
>> > module and redirects (not javascript) -- do you might refer to that for
>> > a PHP example of a portal.
>> >
>> > On Wed, 2009-11-11 at 11:25 +0200, Oguzhan Kayhan wrote:
>> >> > On 11/11/09 04:49 , Devinder Singh wrote:
>> >> >> Hello
>> >> >>
>> >> >> I am trying to use the hotspotlogin.cgi page and it could authenticate
>> >> >> on my notebook running XP and VISTA. But i cant seeem to get the login
>> >> >> page to be displayed on NOKIA N95 mobile phone.
>> >> >
>> >> > That is interesting. I've noticed that iPod and iPhones can have the
>> >> > same problem, but have not had the chance to properly debug that. Can
>> >> > you check if your phone gets a DHCP lease?
>> >> >
>> >>
>> >> We have similar problems with nokia phones also..
>> >> Actually. we dont have any java codes on our hotlogin.cgi too.
>> >> We dont have any problems with any clients except nokia.. But with them,
>> >> there is another login/password field pops up whele redirection occurs..
>> >> So user can not see our login page at all.
>> >>
>> >>
>> >>
>> >>
>> >>
>> >> > Wichert.
>> >> > _______________________________________________
>> >> > Chilli mailing list
>> >> > Chilli at coova.org
>> >> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>> >> >
>> >>
>> >>
>> >> _______________________________________________
>> >> Chilli mailing list
>> >> Chilli at coova.org
>> >> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>> >
>> > _______________________________________________
>> > Chilli mailing list
>> > Chilli at coova.org
>> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>> >
>>
>>
>>
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>



-- 
Devinder Singh   |   R&D Manager
______________________________
Palette Multimedia Berhad (420056-K)
6 Floor, Unit 4,
KPMG Tower
8 First Avenue,
Bandar Utama,
47800 Petaling Jaya, Selangor
Malaysia

m. +60122248306
p.  +60377289880 Ext 502
f.   +60377281080
@ devinder at palettemm.com
www.palettemm.com

From devinder at palettemm.com  Fri Nov 13 03:16:23 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Fri, 13 Nov 2009 11:16:23 +0800
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net>
	<47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>
	<1257932530.7368.76.camel@david-laptop>
	<7a50ad140911110706r6f5c3fc7g9bdee02f9711ae93@mail.gmail.com>
	<1258036485.20047.4.camel@david-laptop>
	<6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>
Message-ID: <6bdd03c50911121916y4e980026j2f5771fcb0a9d392@mail.gmail.com>

Hi  David,

Do you have any php appplication that i can use to login from N95. Is
it possible to use the hotspot.cgi file and logiin on N95. What are
the code modifications do i need to do to support on mobile phones.


Devinder

2009/11/13 Devinder Singh <devinder at palettemm.com>:
> Hi
>
> I actually could recall signing on Nokia N95 using coova version
> 1.0.14 and the latest hotspotlogin.cgi file.
>
> currently i am using an older version of Coova Chilli but the latest
> hotspot.cgi file and still cant login using N95 Nokia.
>
> regards,
> devinder
>
> 2009/11/12 David Bird <david at coova.com>:
>> Anyone have a pcap dump of that DHCP renew?
>>
>>
>> On Wed, 2009-11-11 at 17:06 +0200, ???????? ???????? wrote:
>>> Some problem with ipod touch, after renew the lease...ap with ipod
>>> stops traffic exchange. After reconnect again working
>>>
>>> 2009/11/11 David Bird <david at coova.com>:
>>> > We'll need more details about the problems being had. I just, btw,
>>> > logged into my CoovaOM network using my Nokia N95 and I regularly test
>>> > it with an iPod touch. The captive portal is using the Drupal hotspot
>>> > module and redirects (not javascript) -- do you might refer to that for
>>> > a PHP example of a portal.
>>> >
>>> > On Wed, 2009-11-11 at 11:25 +0200, Oguzhan Kayhan wrote:
>>> >> > On 11/11/09 04:49 , Devinder Singh wrote:
>>> >> >> Hello
>>> >> >>
>>> >> >> I am trying to use the hotspotlogin.cgi page and it could authenticate
>>> >> >> on my notebook running XP and VISTA. But i cant seeem to get the login
>>> >> >> page to be displayed on NOKIA N95 mobile phone.
>>> >> >
>>> >> > That is interesting. I've noticed that iPod and iPhones can have the
>>> >> > same problem, but have not had the chance to properly debug that. Can
>>> >> > you check if your phone gets a DHCP lease?
>>> >> >
>>> >>
>>> >> We have similar problems with nokia phones also..
>>> >> Actually. we dont have any java codes on our hotlogin.cgi too.
>>> >> We dont have any problems with any clients except nokia.. But with them,
>>> >> there is another login/password field pops up whele redirection occurs..
>>> >> So user can not see our login page at all.
>>> >>
>>> >>
>>> >>
>>> >>
>>> >>
>>> >> > Wichert.
>>> >> > _______________________________________________
>>> >> > Chilli mailing list
>>> >> > Chilli at coova.org
>>> >> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>> >> >
>>> >>
>>> >>
>>> >> _______________________________________________
>>> >> Chilli mailing list
>>> >> Chilli at coova.org
>>> >> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>> >
>>> > _______________________________________________
>>> > Chilli mailing list
>>> > Chilli at coova.org
>>> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>> >
>>>
>>>
>>>
>>
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>
>
>
>
> --
> Devinder Singh ? | ? R&D Manager
> ______________________________
> Palette Multimedia Berhad (420056-K)
> 6 Floor, Unit 4,
> KPMG Tower
> 8 First Avenue,
> Bandar Utama,
> 47800 Petaling Jaya, Selangor
> Malaysia
>
> m. +60122248306
> p. ?+60377289880 Ext 502
> f. ? +60377281080
> @ devinder at palettemm.com
> www.palettemm.com
>



-- 
Devinder Singh   |   R&D Manager
______________________________
Palette Multimedia Berhad (420056-K)
6 Floor, Unit 4,
KPMG Tower
8 First Avenue,
Bandar Utama,
47800 Petaling Jaya, Selangor
Malaysia

m. +60122248306
p.  +60377289880 Ext 502
f.   +60377281080
@ devinder at palettemm.com
www.palettemm.com

From devinder at palettemm.com  Fri Nov 13 07:21:33 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Fri, 13 Nov 2009 15:21:33 +0800
Subject: [Chilli] Coova Chilli Version 1.0.14
Message-ID: <6bdd03c50911122321q458b6b49m9709c8cef0a3c261@mail.gmail.com>

Hello

I have just downloaded Coova Chilli version 1.0.14. I am using Ubuntu
Server version 9.10


I have done the following

./configure
make
make install

But when i start chilli

/etc/init.d/chilli/chilli start


i get the following error message options.c :164 could not generate
configuration, sleeping one second.

Please could someone help me on this



Devinder

From mihamina at gulfsat.mg  Fri Nov 13 07:29:58 2009
From: mihamina at gulfsat.mg (Rakotomandimby Mihamina)
Date: Fri, 13 Nov 2009 10:29:58 +0300
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>	<4AFA5880.1080304@wiggy.net>	<47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>	<1257932530.7368.76.camel@david-laptop>	<7a50ad140911110706r6f5c3fc7g9bdee02f9711ae93@mail.gmail.com>	<1258036485.20047.4.camel@david-laptop>
	<6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>
Message-ID: <4AFD0AF6.4030903@gulfsat.mg>

11/13/2009 04:03 AM, Devinder Singh:
> currently i am using an older version of Coova Chilli but the latest
> hotspot.cgi file and still cant login using N95 Nokia.

This is the current hotspot.cgi file I use.
It work when Javascript is disabled on the browser:
http://git.malagasy.com/?p=coova-chilli-1.0.14;a=blob;f=doc/hotspotlogin.cgi;h=3e3954ed1efdd9bd06be86fa7472992920c48720;hb=HEAD
What I tweaked is:
   $userpassword=0;
(Apart from hard translating to french)

-- 
       Architecte Informatique chez Blueline/Gulfsat:
    Administration Systeme, Recherche & Developpement
                                    +261 33 11 207 36

From devinder at palettemm.com  Fri Nov 13 07:38:45 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Fri, 13 Nov 2009 15:38:45 +0800
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <4AFD0AF6.4030903@gulfsat.mg>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net>
	<47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>
	<1257932530.7368.76.camel@david-laptop>
	<7a50ad140911110706r6f5c3fc7g9bdee02f9711ae93@mail.gmail.com>
	<1258036485.20047.4.camel@david-laptop>
	<6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>
	<4AFD0AF6.4030903@gulfsat.mg>
Message-ID: <6bdd03c50911122338p1b0c5fb2r31c1c4d542511fc7@mail.gmail.com>

Ok thanks i will give it a try on my N95
regards
Devinder


2009/11/13 Rakotomandimby Mihamina <mihamina at gulfsat.mg>:
> 11/13/2009 04:03 AM, Devinder Singh:
>>
>> currently i am using an older version of Coova Chilli but the latest
>> hotspot.cgi file and still cant login using N95 Nokia.
>
> This is the current hotspot.cgi file I use.
> It work when Javascript is disabled on the browser:
> http://git.malagasy.com/?p=coova-chilli-1.0.14;a=blob;f=doc/hotspotlogin.cgi;h=3e3954ed1efdd9bd06be86fa7472992920c48720;hb=HEAD
> What I tweaked is:
> ?$userpassword=0;
> (Apart from hard translating to french)
>
> --
> ? ? ?Architecte Informatique chez Blueline/Gulfsat:
> ? Administration Systeme, Recherche & Developpement
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? +261 33 11 207 36
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>



-- 
Devinder Singh   |   R&D Manager
______________________________
Palette Multimedia Berhad (420056-K)
6 Floor, Unit 4,
KPMG Tower
8 First Avenue,
Bandar Utama,
47800 Petaling Jaya, Selangor
Malaysia

m. +60122248306
p.  +60377289880 Ext 502
f.   +60377281080
@ devinder at palettemm.com
www.palettemm.com

From devinder at palettemm.com  Fri Nov 13 08:54:57 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Fri, 13 Nov 2009 16:54:57 +0800
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <6bdd03c50911122338p1b0c5fb2r31c1c4d542511fc7@mail.gmail.com>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net>
	<47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>
	<1257932530.7368.76.camel@david-laptop>
	<7a50ad140911110706r6f5c3fc7g9bdee02f9711ae93@mail.gmail.com>
	<1258036485.20047.4.camel@david-laptop>
	<6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>
	<4AFD0AF6.4030903@gulfsat.mg>
	<6bdd03c50911122338p1b0c5fb2r31c1c4d542511fc7@mail.gmail.com>
Message-ID: <6bdd03c50911130054w408f164ah933b9de52beca5f8@mail.gmail.com>

Yes its works on my mobile phone now. I had  to disable javascript on
my N95 and can login now.

Thanks so much


Devinder

2009/11/13 Devinder Singh <devinder at palettemm.com>:
> Ok thanks i will give it a try on my N95
> regards
> Devinder
>
>
> 2009/11/13 Rakotomandimby Mihamina <mihamina at gulfsat.mg>:
>> 11/13/2009 04:03 AM, Devinder Singh:
>>>
>>> currently i am using an older version of Coova Chilli but the latest
>>> hotspot.cgi file and still cant login using N95 Nokia.
>>
>> This is the current hotspot.cgi file I use.
>> It work when Javascript is disabled on the browser:
>> http://git.malagasy.com/?p=coova-chilli-1.0.14;a=blob;f=doc/hotspotlogin.cgi;h=3e3954ed1efdd9bd06be86fa7472992920c48720;hb=HEAD
>> What I tweaked is:
>> ?$userpassword=0;
>> (Apart from hard translating to french)
>>
>> --
>> ? ? ?Architecte Informatique chez Blueline/Gulfsat:
>> ? Administration Systeme, Recherche & Developpement
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? +261 33 11 207 36
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>
>>
>
>
>
> --
> Devinder Singh ? | ? R&D Manager
> ______________________________
> Palette Multimedia Berhad (420056-K)
> 6 Floor, Unit 4,
> KPMG Tower
> 8 First Avenue,
> Bandar Utama,
> 47800 Petaling Jaya, Selangor
> Malaysia
>
> m. +60122248306
> p. ?+60377289880 Ext 502
> f. ? +60377281080
> @ devinder at palettemm.com
> www.palettemm.com
>



-- 
Devinder Singh   |   R&D Manager
______________________________
Palette Multimedia Berhad (420056-K)
6 Floor, Unit 4,
KPMG Tower
8 First Avenue,
Bandar Utama,
47800 Petaling Jaya, Selangor
Malaysia

m. +60122248306
p.  +60377289880 Ext 502
f.   +60377281080
@ devinder at palettemm.com
www.palettemm.com

From david at coova.com  Fri Nov 13 09:45:51 2009
From: david at coova.com (David Bird)
Date: Fri, 13 Nov 2009 10:45:51 +0100
Subject: [Chilli] Ippool exhaustion bug?
In-Reply-To: <4AFCFD5B.9090107@gmail.com>
References: <4AF7F18E.4000502@gmail.com>  <4AFBC376.1070401@gmail.com>
	<1258037373.20047.10.camel@david-laptop> <4AFCFD5B.9090107@gmail.com>
Message-ID: <1258105551.7348.63.camel@david-laptop>

Hmm.. 

I think I see how this can happen. I likely added that ability to
allocate a static IP out of tun_ind() so that truly static IPs would
work (though, looking at it now, I don't think the code helps that
situation since as you noted, it's not a fully configured dhcp lease at
that point, just an entry in the ippool). I'm thinking it'll be wise to
remove the call to ippool_newip() at this point in the code. Instead,
perhaps it just goes ahead and accepts the packet if within the statip
range -- then, presumably, the computer with the statip will reply to
the packets, which will create the dhcpconn/appconn/etc properly (from
the packet originating from the dhcpif). 

David


On Fri, 2009-11-13 at 08:31 +0200, Gunther Mayer wrote:
> David Bird wrote:
> > Hi Gunther,
> >
> > You mention one IP being allocated by tun_ind(), which means it's the
> > result of packets coming into tun0/tap0, which means it's not the
> > traffic from the end user side of chilli -- rather it's the WAN side.
> >   
> Hmm, could be my openvpn tunnel or other pre-existing connections from 
> before which still try to pump traffic from the WAN side to my client 
> but I doubt this - as in the below example cb_tun_ind() acts always a 
> second before the dhcp request is acted upon (I can send you more logs 
> to show this if you like).
> > I'm unclear how this is filling up the pool, however. Is it multiple
> > entries for the same IP or always allocating new IPs out of tun_ind() ?
> >   
> 
> It's not *always* allocating new IPs out of cb_tun_ind() but seems to do 
> so most of the time if my client has had connections to chilli before 
> (even if chilli itself has already released this IP), most likely 
> because my dhcp client tries to recycle still valid leases though I'm 
> not sure. The pool is getting filled up by cb_tun_ind() allocating one 
> IP which never gets "garbage collected" followed shortly by a real dhcp 
> dynamic ip allocation which does get deallocated properly upon expiry, 
> that's apparent in my logs.
> > Are you using --usetap (if so, try without).
> Nope, standard tun device, no tap.
> > Are you narrowing your DHCP
> > pool only for testing or is your real world IP allocation really a
> > network smaller than /24 ?
> >   
> 
> As I said in my first email I'm narrowing my pool only for testing 
> purposes, in the real world it goes from 129 to 254 (126 ip's) but to 
> get such a large pool to be exhausted is impossible to reproduce in a 
> testing environment.
> 
> I have actually made progress on this issue since - seeing that I did 
> narrow it down to cb_tun_ind() being the culprit I saw that its call to 
> ippool_newip() wasn't there in 1.0.11 (r147 I think) which is the 
> previous stable version we used. So I reverted this piece of code to the 
> old behaviour, taking ippool_newip() totally out of cb_tun_ind() and now 
> everything works for me 100%.
> 
> However, there must be a reason you (or another developer?) added the 
> ippool_newip() statement in there in the first place. I'm not sure for 
> which use cases it's required but it seems to me that while it allocates 
> a new ip for the client, it doesn't properly update the other house 
> keeping data structures which means that
> 
>     a) when it comes to actually processing the dhcp request the code 
> doesn't pick up that the allocation has already happened
>     b) when the lease expires the ip is returned back to the pool (inuse 
> = 0)
> 
> Gunther


From gunther.mayer at googlemail.com  Fri Nov 13 10:40:08 2009
From: gunther.mayer at googlemail.com (Gunther Mayer)
Date: Fri, 13 Nov 2009 12:40:08 +0200
Subject: [Chilli] Ippool exhaustion bug?
In-Reply-To: <1258105551.7348.63.camel@david-laptop>
References: <4AF7F18E.4000502@gmail.com>
	<4AFBC376.1070401@gmail.com>	<1258037373.20047.10.camel@david-laptop>
	<4AFCFD5B.9090107@gmail.com>
	<1258105551.7348.63.camel@david-laptop>
Message-ID: <4AFD3788.9040601@gmail.com>

David Bird wrote:
> Hmm.. 
>
> I think I see how this can happen. I likely added that ability to
> allocate a static IP out of tun_ind() so that truly static IPs would
> work (though, looking at it now, I don't think the code helps that
> situation since as you noted, it's not a fully configured dhcp lease at
> that point, just an entry in the ippool). I'm thinking it'll be wise to
> remove the call to ippool_newip() at this point in the code. Instead,
> perhaps it just goes ahead and accepts the packet if within the statip
> range -- then, presumably, the computer with the statip will reply to
> the packets, which will create the dhcpconn/appconn/etc properly (from
> the packet originating from the dhcpif).
>   

I concur, it should be removed. I tested my patched code with "truly 
static IP's" and it still works fine without it (full connection 
allocated, times out after default 600 seconds "lease" time etc.). I've 
done hundreds of static IP mixed with dynamic IP setups in the past with 
1.0.11 (where that code wasn't in) and never had an issue. That piece of 
code is not required and it looks as though it never was (I thought you 
introduced it in a later version to make a particular new feature work).

Not sure if I still have commit access but I'm happy to commit this 
change and take credit ;-)

Gunther

From david at coova.com  Fri Nov 13 11:19:17 2009
From: david at coova.com (David Bird)
Date: Fri, 13 Nov 2009 12:19:17 +0100
Subject: [Chilli] Development
In-Reply-To: <4AFD3788.9040601@gmail.com>
References: <4AF7F18E.4000502@gmail.com>  <4AFBC376.1070401@gmail.com>
	<1258037373.20047.10.camel@david-laptop> <4AFCFD5B.9090107@gmail.com>
	<1258105551.7348.63.camel@david-laptop>  <4AFD3788.9040601@gmail.com>
Message-ID: <1258111157.7348.79.camel@david-laptop>

>From the sounds of it, I need to take full credit; for the bug! :) 

I have no issue giving you write access, though I already made the
change to my copy. I actually have some major changes to commit in my
working copy... Send me a htpasswd entry for yourself (privately) and
I'll configure you in subversion. 

Some highlights of things in development (or at least areas of
research);

- Went (back) to a globally static _options struct to get rid of many
functions calls

- A helper server called 'chilli_proxy' (already in svn; compile with
--enable-chilliproxy) that does a RADIUS<->HTTP conversion
(http://www.coova.org/CoovaChilli/Proxy)

- Breaking out a server called 'chilli_redir' (enabled with configure
--enable-chilliredir) that will do the UAM server functions broken out
from the main chilli program. This opens the door for additional
processing of the hijacked URL - like for doing a URL based walled
garden (to allow www.google.com, but not www.google.com/mail for
instance). 

- Reworked the chilli_main() heavily making it like a "plug-in" style
registration of listeners/handlers.

- Adding support for poll() and epoll() as alternatives to select()

- Testing the "packet mmap" features of Linux 2.6.31 (mmap "ring"
buffers for both RX and TX for "zero-copy" in/out to/from kernel/user
space; though still the issue/bottleneck of the tun/tap)

- A haserl "miniportal" taken from CoovaAP now part of coova-chilli
standard distro (build with --enable-miniportal)

- Some fixups in the "routeidx/routeif" features of chilli whereby
chilli can directly (through a raw socket) tap into multiple WAN
interfaces and can route user session data between them. Used with RX/TX
rings, this can be used to bypass the tun/tap completely for
authenticated traffic and doubles the throughput on my fonera ;)

- Experimenting on a Linux kernel module that can do the above
(bypassing chilli for authenticated traffic) directly in the kernel
instead of user space. 

Lots to come... ;) Developers and testers wanted! 

David



On Fri, 2009-11-13 at 12:40 +0200, Gunther Mayer wrote:
> David Bird wrote:
> > Hmm.. 
> >
> > I think I see how this can happen. I likely added that ability to
> > allocate a static IP out of tun_ind() so that truly static IPs would
> > work (though, looking at it now, I don't think the code helps that
> > situation since as you noted, it's not a fully configured dhcp lease at
> > that point, just an entry in the ippool). I'm thinking it'll be wise to
> > remove the call to ippool_newip() at this point in the code. Instead,
> > perhaps it just goes ahead and accepts the packet if within the statip
> > range -- then, presumably, the computer with the statip will reply to
> > the packets, which will create the dhcpconn/appconn/etc properly (from
> > the packet originating from the dhcpif).
> >   
> 
> I concur, it should be removed. I tested my patched code with "truly 
> static IP's" and it still works fine without it (full connection 
> allocated, times out after default 600 seconds "lease" time etc.). I've 
> done hundreds of static IP mixed with dynamic IP setups in the past with 
> 1.0.11 (where that code wasn't in) and never had an issue. That piece of 
> code is not required and it looks as though it never was (I thought you 
> introduced it in a later version to make a particular new feature work).
> 
> Not sure if I still have commit access but I'm happy to commit this 
> change and take credit ;-)
> 
> Gunther


From mihamina at gulfsat.mg  Fri Nov 13 11:40:46 2009
From: mihamina at gulfsat.mg (Rakotomandimby Mihamina)
Date: Fri, 13 Nov 2009 14:40:46 +0300
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <6bdd03c50911130054w408f164ah933b9de52beca5f8@mail.gmail.com>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>	
	<4AFA5880.1080304@wiggy.net>	
	<47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>	
	<1257932530.7368.76.camel@david-laptop>	
	<7a50ad140911110706r6f5c3fc7g9bdee02f9711ae93@mail.gmail.com>	
	<1258036485.20047.4.camel@david-laptop>	
	<6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>	
	<4AFD0AF6.4030903@gulfsat.mg>	
	<6bdd03c50911122338p1b0c5fb2r31c1c4d542511fc7@mail.gmail.com>
	<6bdd03c50911130054w408f164ah933b9de52beca5f8@mail.gmail.com>
Message-ID: <4AFD45BE.6070405@gulfsat.mg>

11/13/2009 11:54 AM, Devinder Singh::
> Yes its works on my mobile phone now. I had  to disable javascript on
> my N95 and can login now.

I am going to remove all javascript parts from that script and copy it
Then I will request its inclusion in the mailline Coova distribution.

-- 
       Architecte Informatique chez Blueline/Gulfsat:
    Administration Systeme, Recherche & Developpement
                                    +261 33 11 207 36

From david at coova.com  Fri Nov 13 11:44:43 2009
From: david at coova.com (David Bird)
Date: Fri, 13 Nov 2009 12:44:43 +0100
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <4AFD45BE.6070405@gulfsat.mg>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net>
	<47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>
	<1257932530.7368.76.camel@david-laptop>
	<7a50ad140911110706r6f5c3fc7g9bdee02f9711ae93@mail.gmail.com>
	<1258036485.20047.4.camel@david-laptop>
	<6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>
	<4AFD0AF6.4030903@gulfsat.mg>
	<6bdd03c50911122338p1b0c5fb2r31c1c4d542511fc7@mail.gmail.com>
	<6bdd03c50911130054w408f164ah933b9de52beca5f8@mail.gmail.com>
	<4AFD45BE.6070405@gulfsat.mg>
Message-ID: <1258112683.7348.81.camel@david-laptop>

It sounds like many have an issue with the coova.html "splash
page" (which is set as your uamhomepage in chilli config)...

You can also:

a) not use the uamhomepage config
b) instead of coova.html, you can use an actual CGI script to do the
redirect to the query string parameter 'loginurl' without using
Javascript




From mihamina at gulfsat.mg  Fri Nov 13 11:56:18 2009
From: mihamina at gulfsat.mg (Rakotomandimby Mihamina)
Date: Fri, 13 Nov 2009 14:56:18 +0300
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <1258112683.7348.81.camel@david-laptop>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>	<4AFA5880.1080304@wiggy.net>	<47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>	<1257932530.7368.76.camel@david-laptop>	<7a50ad140911110706r6f5c3fc7g9bdee02f9711ae93@mail.gmail.com>	<1258036485.20047.4.camel@david-laptop>	<6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>	<4AFD0AF6.4030903@gulfsat.mg>	<6bdd03c50911122338p1b0c5fb2r31c1c4d542511fc7@mail.gmail.com>	<6bdd03c50911130054w408f164ah933b9de52beca5f8@mail.gmail.com>	<4AFD45BE.6070405@gulfsat.mg>
	<1258112683.7348.81.camel@david-laptop>
Message-ID: <4AFD4962.5080105@gulfsat.mg>

11/13/2009 02:44 PM, David Bird::
> It sounds like many have an issue with the coova.html "splash
> page" (which is set as your uamhomepage in chilli config)...
> a) not use the uamhomepage config
> b) instead of coova.html,

Yeah,
I could directly redirect to /prelogin with that CGI.
I'll give a try.


-- 
       Architecte Informatique chez Blueline/Gulfsat:
    Administration Systeme, Recherche & Developpement
                                    +261 33 11 207 36

From david at coova.com  Fri Nov 13 12:00:00 2009
From: david at coova.com (David Bird)
Date: Fri, 13 Nov 2009 13:00:00 +0100
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <4AFD4962.5080105@gulfsat.mg>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<4AFA5880.1080304@wiggy.net>
	<47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>
	<1257932530.7368.76.camel@david-laptop>
	<7a50ad140911110706r6f5c3fc7g9bdee02f9711ae93@mail.gmail.com>
	<1258036485.20047.4.camel@david-laptop>
	<6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>
	<4AFD0AF6.4030903@gulfsat.mg>
	<6bdd03c50911122338p1b0c5fb2r31c1c4d542511fc7@mail.gmail.com>
	<6bdd03c50911130054w408f164ah933b9de52beca5f8@mail.gmail.com>
	<4AFD45BE.6070405@gulfsat.mg> <1258112683.7348.81.camel@david-laptop>
	<4AFD4962.5080105@gulfsat.mg>
Message-ID: <1258113600.7348.83.camel@david-laptop>

Actually, you can redirect to /prelogin without it being a CGI. 

The benefit of redirecting to the 'loginurl' query string parameter is
that the URL it contains includes the correct "userurl" for that
browser's initial request. When using /prelogin, you assume the use of
what chilli already knows as the initial url, but more often then not,
that URL is some RSS feed or behind the scenes activity of your
computer, and not that of the user's browsing session... 

David


On Fri, 2009-11-13 at 14:56 +0300, Rakotomandimby Mihamina wrote:
> 11/13/2009 02:44 PM, David Bird::
> > It sounds like many have an issue with the coova.html "splash
> > page" (which is set as your uamhomepage in chilli config)...
> > a) not use the uamhomepage config
> > b) instead of coova.html,
> 
> Yeah,
> I could directly redirect to /prelogin with that CGI.
> I'll give a try.
> 
> 


From mihamina at gulfsat.mg  Fri Nov 13 12:06:16 2009
From: mihamina at gulfsat.mg (Rakotomandimby Mihamina)
Date: Fri, 13 Nov 2009 15:06:16 +0300
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <1258113600.7348.83.camel@david-laptop>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>	<4AFA5880.1080304@wiggy.net>	<47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>	<1257932530.7368.76.camel@david-laptop>	<7a50ad140911110706r6f5c3fc7g9bdee02f9711ae93@mail.gmail.com>	<1258036485.20047.4.camel@david-laptop>	<6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>	<4AFD0AF6.4030903@gulfsat.mg>	<6bdd03c50911122338p1b0c5fb2r31c1c4d542511fc7@mail.gmail.com>	<6bdd03c50911130054w408f164ah933b9de52beca5f8@mail.gmail.com>	<4AFD45BE.6070405@gulfsat.mg>
	<1258112683.7348.81.camel@david-laptop>	<4AFD4962.5080105@gulfsat.mg>
	<1258113600.7348.83.camel@david-laptop>
Message-ID: <4AFD4BB8.4050007@gulfsat.mg>

11/13/2009 03:00 PM, David Bird::
> Actually, you can redirect to /prelogin without it being a CGI.

Just with HTTP meta tags?

> The benefit of redirecting to the 'loginurl' query string parameter is
> that the URL it contains includes the correct "userurl" for that
> browser's initial request.

Given 90% of the browsers start on a useless page ;-) it's not a big losss.
Anyway, yes, having that first url is a good point.

-- 
       Architecte Informatique chez Blueline/Gulfsat:
    Administration Systeme, Recherche & Developpement
                                    +261 33 11 207 36

From liran.tal at gmail.com  Fri Nov 13 18:04:48 2009
From: liran.tal at gmail.com (Liran Tal)
Date: Fri, 13 Nov 2009 20:04:48 +0200
Subject: [Chilli] CoovaChilli on latest snapshot of X-WRT+OpenWRT
Message-ID: <81237f640911131004q5538c133h72d88389b910739b@mail.gmail.com>

Hey guys,

After installing coova-chilli 1.0.14 on openwrt's kamikaze (latest snapshot
with x-wrt webif)
as can be seen here:

root at OpenWrt:/etc/chilli# opkg info coova-chilli
Package: coova-chilli
Version: 1.0.14-1
Depends: kmod-tun
Provides:
Status: install user installed
Architecture: brcm-2.4
MD5Sum: 71e880fda902c8bf3913e6c579f40041
Size: 170042
Filename: coova-chilli_1.0.14-1_brcm-2.4.ipk


When starting up chilli it complains about config file not found:
root at OpenWrt:/etc/chilli# /etc/init.d/chilli  start
Starting chilli: coova-chilli[10198]: options.c: 164: could not generate
configuration, sleeping one second
coova-chilli[10198]: options.c: 164: could not generate configuration,
sleeping one second

Browsing the source I can see it's looking for a copy of the config file in
/tmp or something alike.

Any ideas? possibly the x-wrt provided startup scripts for coova-chilli
aren't up to date with
latest coova-chilli additions?



-- 
-- 
Sincerely, Liran Tal

Founder and CTO
Linux and Open Source
Enginx - http://enginx.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091113/7495f192/attachment.htm>

From david at coova.com  Sat Nov 14 05:54:33 2009
From: david at coova.com (David Bird)
Date: Sat, 14 Nov 2009 06:54:33 +0100
Subject: [Chilli] CoovaChilli on latest snapshot of X-WRT+OpenWRT
In-Reply-To: <81237f640911131004q5538c133h72d88389b910739b@mail.gmail.com>
References: <81237f640911131004q5538c133h72d88389b910739b@mail.gmail.com>
Message-ID: <1258178073.4132.7.camel@david-laptop>

Look in your logs or run in debug more to see what the actual problem
with the configuration file is... Or, you can also try running
"chilli_opt" directly which should also show you any errors. 


On Fri, 2009-11-13 at 20:04 +0200, Liran Tal wrote:
> Hey guys,
> 
> After installing coova-chilli 1.0.14 on openwrt's kamikaze (latest
> snapshot with x-wrt webif)
> as can be seen here:
> 
> root at OpenWrt:/etc/chilli# opkg info coova-chilli
> Package: coova-chilli
> Version: 1.0.14-1
> Depends: kmod-tun
> Provides:
> Status: install user installed
> Architecture: brcm-2.4
> MD5Sum: 71e880fda902c8bf3913e6c579f40041
> Size: 170042
> Filename: coova-chilli_1.0.14-1_brcm-2.4.ipk
> 
> 
> When starting up chilli it complains about config file not found:
> root at OpenWrt:/etc/chilli# /etc/init.d/chilli  start
> Starting chilli: coova-chilli[10198]: options.c: 164: could not
> generate configuration, sleeping one second
> coova-chilli[10198]: options.c: 164: could not generate configuration,
> sleeping one second
> 
> Browsing the source I can see it's looking for a copy of the config
> file in /tmp or something alike.
> 
> Any ideas? possibly the x-wrt provided startup scripts for
> coova-chilli aren't up to date with
> latest coova-chilli additions?
> 
> 
> 
> -- 
> -- 
> Sincerely, Liran Tal
> 
> Founder and CTO
> Linux and Open Source
> Enginx - http://enginx.com
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From mihamina at gulfsat.mg  Sun Nov 15 06:23:40 2009
From: mihamina at gulfsat.mg (Rakotomandimby Mihamina)
Date: Sun, 15 Nov 2009 09:23:40 +0300
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <7a50ad140911141603t2a19845cx40f5b9060910f616@mail.gmail.com>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>	
	<6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>	
	<4AFD0AF6.4030903@gulfsat.mg>	
	<6bdd03c50911122338p1b0c5fb2r31c1c4d542511fc7@mail.gmail.com>	
	<6bdd03c50911130054w408f164ah933b9de52beca5f8@mail.gmail.com>	
	<4AFD45BE.6070405@gulfsat.mg>
	<1258112683.7348.81.camel@david-laptop>	
	<4AFD4962.5080105@gulfsat.mg>
	<1258113600.7348.83.camel@david-laptop>	
	<4AFD4BB8.4050007@gulfsat.mg>
	<7a50ad140911141603t2a19845cx40f5b9060910f616@mail.gmail.com>
Message-ID: <4AFF9E6C.3030907@gulfsat.mg>

11/15/2009 03:03 AM, ???????? ????????::
> tcpdump    ipod touch.   don't work after release

   --verbose

-- 
       Architecte Informatique chez Blueline/Gulfsat:
    Administration Systeme, Recherche & Developpement
                                    +261 33 11 207 36

From david at coova.com  Sun Nov 15 07:13:19 2009
From: david at coova.com (David Bird)
Date: Sun, 15 Nov 2009 08:13:19 +0100
Subject: [Chilli] CoovaChilli
Message-ID: <1258269199.4334.11.camel@david-laptop>

I recently noticed that someone removed the link to www.coova.org from
the wikipedia page for Chillispot. The person left a notice on the
discussion stating "CoovaChilli needs to stop hijacking this page for
commercial gain". This has me very confused... as the page in question
is becoming nothing but a page for "commercial" links. Indeed, the link
to CoovaChilli is almost the only useful link on the page (if you are
looking for Chillispot functionality). Yet, this is the only link
removed. Of course, this person, no doubt, likely has their own
commercial interests... or is completely clueless. But still has me
wondering..

Is Coova "too commercial"? If so, how? 

What do you think?

David


From liran.tal at gmail.com  Sun Nov 15 07:28:36 2009
From: liran.tal at gmail.com (Liran Tal)
Date: Sun, 15 Nov 2009 09:28:36 +0200
Subject: [Chilli] CoovaChilli
In-Reply-To: <1258269199.4334.11.camel@david-laptop>
References: <1258269199.4334.11.camel@david-laptop>
Message-ID: <81237f640911142328t120986f4pff6f0e7729e2fc96@mail.gmail.com>

That's very sad to hear David.

I believe that the opposite it true, Coova took on itself to continue the
development
of the chillispot captive portal software and doing a wonderful job at it by
maintaining
good interaction with the open source community.

I don't know what kind of management orientation is handled in wikipedia but
I'm pretty sure it's possible to contact a higher hierarchy than the page
owner
or such. I suggest you do that.


Regards,
Liran.


On Sun, Nov 15, 2009 at 9:13 AM, David Bird <david at coova.com> wrote:

> I recently noticed that someone removed the link to www.coova.org from
> the wikipedia page for Chillispot. The person left a notice on the
> discussion stating "CoovaChilli needs to stop hijacking this page for
> commercial gain". This has me very confused... as the page in question
> is becoming nothing but a page for "commercial" links. Indeed, the link
> to CoovaChilli is almost the only useful link on the page (if you are
> looking for Chillispot functionality). Yet, this is the only link
> removed. Of course, this person, no doubt, likely has their own
> commercial interests... or is completely clueless. But still has me
> wondering..
>
> Is Coova "too commercial"? If so, how?
>
> What do you think?
>
> David
>
>


-- 
-- 
Sincerely, Liran Tal

Founder and CTO
Linux and Open Source
Enginx - http://enginx.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091115/8b28a89e/attachment.htm>

From david at coova.com  Sun Nov 15 07:58:55 2009
From: david at coova.com (David Bird)
Date: Sun, 15 Nov 2009 08:58:55 +0100
Subject: [Chilli] CoovaChilli
In-Reply-To: <81237f640911142328t120986f4pff6f0e7729e2fc96@mail.gmail.com>
References: <1258269199.4334.11.camel@david-laptop>
	<81237f640911142328t120986f4pff6f0e7729e2fc96@mail.gmail.com>
Message-ID: <1258271935.4334.32.camel@david-laptop>

Thanks for your support, Liran!

Yes, I keep trying to grow the community, and I think it has been
somewhat successful. I've also been trying to remove any and all
"commercial" (or at least non-open-source) stuff from www.coova.org. 

I suppose I should be flattered that people find coova.org so
threatening (to their own commercial interests) to the extent that they
are compelled to fabricate reasons why Coova is somehow evil. I
typically just ignore such people, as those "in the know" are already
using CoovaChilli (including FON, open-mesh, and most of the (reputable)
back-end providers that also support Chililspot). 

Personally, I think wikipedia is a mess when it comes to the low-volume,
low-profile pages. I only brought the issue to the mailing list as it
wasn't the first time I've seen people unfairly classifying Coova as
some sort of enemy to the Chillispot community. 


David



On Sun, 2009-11-15 at 09:28 +0200, Liran Tal wrote:
> That's very sad to hear David.
> 
> I believe that the opposite it true, Coova took on itself to continue
> the development
> of the chillispot captive portal software and doing a wonderful job at
> it by maintaining
> good interaction with the open source community.
> 
> I don't know what kind of management orientation is handled in
> wikipedia but
> I'm pretty sure it's possible to contact a higher hierarchy than the
> page owner
> or such. I suggest you do that.
> 
> 
> Regards,
> Liran. 
> 
> 
> On Sun, Nov 15, 2009 at 9:13 AM, David Bird <david at coova.com> wrote:
>         I recently noticed that someone removed the link to
>         www.coova.org from
>         the wikipedia page for Chillispot. The person left a notice on
>         the
>         discussion stating "CoovaChilli needs to stop hijacking this
>         page for
>         commercial gain". This has me very confused... as the page in
>         question
>         is becoming nothing but a page for "commercial" links. Indeed,
>         the link
>         to CoovaChilli is almost the only useful link on the page (if
>         you are
>         looking for Chillispot functionality). Yet, this is the only
>         link
>         removed. Of course, this person, no doubt, likely has their
>         own
>         commercial interests... or is completely clueless. But still
>         has me
>         wondering..
>         
>         Is Coova "too commercial"? If so, how?
>         
>         What do you think?
>         
>         David
>         
> 
> 
> 
> -- 
> -- 
> Sincerely, Liran Tal
> 
> Founder and CTO
> Linux and Open Source
> Enginx - http://enginx.com
> 



From beck at ibh.de  Sat Nov 14 16:17:39 2009
From: beck at ibh.de (Andre Beck)
Date: Sat, 14 Nov 2009 17:17:39 +0100
Subject: [Chilli] MAC Flapping bug in dhcp_nakDNS
Message-ID: <20091114161739.GC14209@ibh.de>

Hi,

I'm seeing a steady stream of MAC flap warnings on switches operating
a Coova Chilli installation, where the MAC of a client appears to
flap between the client side (coming from Cisco WLCs here, but that's
not relevant) and the port towards the server running the Chilli
instance in question. I think I tracked it down to this fix:

--- src/dhcp.c.orig     2009-11-14 17:04:01.000000000 +0100
+++ src/dhcp.c  2009-11-14 17:04:29.000000000 +0100
@@ -786,7 +786,7 @@
 
   memcpy(answer, pack, len); 
 
-  answer_ethh = ethhdr(pack);
+  answer_ethh = ethhdr(answer);
   answer_iph  = iphdr(answer);
   answer_udph = udphdr(answer);
   answer_dns  = dnspkt(answer);


Apparently, the intented swapping of the Ethernet SA and DA is done
on the wrong buffer (the original packet, not the answer copy that
will get sent), so it's missing from the final frame going out.

Please note that this will mean dhcp_nakDNS() has never worked as
expected, so fixing it now might introduce a regression. I'm entirely
not sure sending NXdomains to clients for potentially perfectly valid
queries is that good an idea, especially in times of resolver-side
negative caching. But that's another story, first I'd like to get rid
of the noise in my switch logs ;)

HTH,
Andre.
-- 
                    Cool .signatures are so 90s...

-> Andre Beck    +++ ABP-RIPE +++      IBH IT-Service GmbH, Dresden <-

From david at coova.com  Sun Nov 15 08:09:41 2009
From: david at coova.com (David Bird)
Date: Sun, 15 Nov 2009 09:09:41 +0100
Subject: [Chilli] MAC Flapping bug in dhcp_nakDNS
In-Reply-To: <20091114161739.GC14209@ibh.de>
References: <20091114161739.GC14209@ibh.de>
Message-ID: <1258272581.4334.34.camel@david-laptop>

Hi Andre,

Sorry that I didn't ack you message sooner. It got caught in the
moderator list because you are not subscribed to the list, at least not
from this address. 

Thanks... 

On Sat, 2009-11-14 at 17:17 +0100, Andre Beck wrote:
> Hi,
> 
> I'm seeing a steady stream of MAC flap warnings on switches operating
> a Coova Chilli installation, where the MAC of a client appears to
> flap between the client side (coming from Cisco WLCs here, but that's
> not relevant) and the port towards the server running the Chilli
> instance in question. I think I tracked it down to this fix:
> 
> --- src/dhcp.c.orig     2009-11-14 17:04:01.000000000 +0100
> +++ src/dhcp.c  2009-11-14 17:04:29.000000000 +0100
> @@ -786,7 +786,7 @@
>  
>    memcpy(answer, pack, len); 
>  
> -  answer_ethh = ethhdr(pack);
> +  answer_ethh = ethhdr(answer);
>    answer_iph  = iphdr(answer);
>    answer_udph = udphdr(answer);
>    answer_dns  = dnspkt(answer);
> 
> 
> Apparently, the intented swapping of the Ethernet SA and DA is done
> on the wrong buffer (the original packet, not the answer copy that
> will get sent), so it's missing from the final frame going out.
> 
> Please note that this will mean dhcp_nakDNS() has never worked as
> expected, so fixing it now might introduce a regression. I'm entirely
> not sure sending NXdomains to clients for potentially perfectly valid
> queries is that good an idea, especially in times of resolver-side
> negative caching. But that's another story, first I'd like to get rid
> of the noise in my switch logs ;)
> 
> HTH,
> Andre.



From devinder at palettemm.com  Mon Nov 16 01:23:00 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Mon, 16 Nov 2009 09:23:00 +0800
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <4AFD45BE.6070405@gulfsat.mg>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>
	<1257932530.7368.76.camel@david-laptop>
	<7a50ad140911110706r6f5c3fc7g9bdee02f9711ae93@mail.gmail.com>
	<1258036485.20047.4.camel@david-laptop>
	<6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>
	<4AFD0AF6.4030903@gulfsat.mg>
	<6bdd03c50911122338p1b0c5fb2r31c1c4d542511fc7@mail.gmail.com>
	<6bdd03c50911130054w408f164ah933b9de52beca5f8@mail.gmail.com>
	<4AFD45BE.6070405@gulfsat.mg>
Message-ID: <6bdd03c50911151723i4f1e8037u80a3740e3915994@mail.gmail.com>

Ok thanks

2009/11/13 Rakotomandimby Mihamina <mihamina at gulfsat.mg>:
> 11/13/2009 11:54 AM, Devinder Singh::
>>
>> Yes its works on my mobile phone now. I had ?to disable javascript on
>> my N95 and can login now.
>
> I am going to remove all javascript parts from that script and copy it
> Then I will request its inclusion in the mailline Coova distribution.
>
> --
> ? ? ?Architecte Informatique chez Blueline/Gulfsat:
> ? Administration Systeme, Recherche & Developpement
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? +261 33 11 207 36
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>



-- 
Devinder Singh   |   R&D Manager
______________________________
Palette Multimedia Berhad (420056-K)
6 Floor, Unit 4,
KPMG Tower
8 First Avenue,
Bandar Utama,
47800 Petaling Jaya, Selangor
Malaysia

m. +60122248306
p.  +60377289880 Ext 502
f.   +60377281080
@ devinder at palettemm.com
www.palettemm.com

From devinder at palettemm.com  Mon Nov 16 02:34:07 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Mon, 16 Nov 2009 10:34:07 +0800
Subject: [Chilli] GUI Web Interface
Message-ID: <6bdd03c50911151834j2b20a218q91c6c258b1307e6c@mail.gmail.com>

Hello

Does anyone have a web interface to adjust IP address i.e radius IP ,
DNS IP adreess in chill config file. Currently i edit the
/etc/chilli/config to edit the eth1 eth0 IP address and radius
settings.


Devinder

From david at coova.com  Mon Nov 16 04:57:31 2009
From: david at coova.com (David Bird)
Date: Mon, 16 Nov 2009 05:57:31 +0100
Subject: [Chilli] GUI Web Interface
In-Reply-To: <6bdd03c50911151834j2b20a218q91c6c258b1307e6c@mail.gmail.com>
References: <6bdd03c50911151834j2b20a218q91c6c258b1307e6c@mail.gmail.com>
Message-ID: <1258347451.3186.2.camel@david-laptop>

I have written a python script for Openmoko, which can be easily adapted
for general use, I suppose. 

http://www.opkg.org/package_176.html


On Mon, 2009-11-16 at 10:34 +0800, Devinder Singh wrote:
> Hello
> 
> Does anyone have a web interface to adjust IP address i.e radius IP ,
> DNS IP adreess in chill config file. Currently i edit the
> /etc/chilli/config to edit the eth1 eth0 IP address and radius
> settings.
> 
> 
> Devinder
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From mihamina at gulfsat.mg  Mon Nov 16 08:28:42 2009
From: mihamina at gulfsat.mg (Rakotomandimby Mihamina)
Date: Mon, 16 Nov 2009 11:28:42 +0300
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <6bdd03c50911151723i4f1e8037u80a3740e3915994@mail.gmail.com>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>	
	<47892.139.179.14.250.1257931512.squirrel@webmail.bilkent.edu.tr>	
	<1257932530.7368.76.camel@david-laptop>	
	<7a50ad140911110706r6f5c3fc7g9bdee02f9711ae93@mail.gmail.com>	
	<1258036485.20047.4.camel@david-laptop>	
	<6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>	
	<4AFD0AF6.4030903@gulfsat.mg>	
	<6bdd03c50911122338p1b0c5fb2r31c1c4d542511fc7@mail.gmail.com>	
	<6bdd03c50911130054w408f164ah933b9de52beca5f8@mail.gmail.com>	
	<4AFD45BE.6070405@gulfsat.mg>
	<6bdd03c50911151723i4f1e8037u80a3740e3915994@mail.gmail.com>
Message-ID: <4B010D3A.40408@gulfsat.mg>

11/16/2009 04:23 AM, Devinder Singh:
>> I am going to remove all javascript parts from that script and copy it
>> Then I will request its inclusion in the mailline Coova distribution.

here you are
http://git.malagasy.com/?p=coova-chilli-1.0.14;a=blob;f=doc/hotspotlogin.cgi;h=34ff60a6188512edf5111410dfae7b89d86ca145;hb=HEAD

It works on our testing device
But we dont have any Nokia ones.

-- 
       Architecte Informatique chez Blueline/Gulfsat:
    Administration Systeme, Recherche & Developpement
                                    +261 33 11 207 36

From devinder at palettemm.com  Mon Nov 16 08:48:20 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Mon, 16 Nov 2009 16:48:20 +0800
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <4B010D3A.40408@gulfsat.mg>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<7a50ad140911110706r6f5c3fc7g9bdee02f9711ae93@mail.gmail.com>
	<1258036485.20047.4.camel@david-laptop>
	<6bdd03c50911121703o4294cb4ene692b179ea54a252@mail.gmail.com>
	<4AFD0AF6.4030903@gulfsat.mg>
	<6bdd03c50911122338p1b0c5fb2r31c1c4d542511fc7@mail.gmail.com>
	<6bdd03c50911130054w408f164ah933b9de52beca5f8@mail.gmail.com>
	<4AFD45BE.6070405@gulfsat.mg>
	<6bdd03c50911151723i4f1e8037u80a3740e3915994@mail.gmail.com>
	<4B010D3A.40408@gulfsat.mg>
Message-ID: <6bdd03c50911160048t67469a38ie63e9100902d31e7@mail.gmail.com>

thanks

2009/11/16 Rakotomandimby Mihamina <mihamina at gulfsat.mg>:
> 11/16/2009 04:23 AM, Devinder Singh:
>>>
>>> I am going to remove all javascript parts from that script and copy it
>>> Then I will request its inclusion in the mailline Coova distribution.
>
> here you are
> http://git.malagasy.com/?p=coova-chilli-1.0.14;a=blob;f=doc/hotspotlogin.cgi;h=34ff60a6188512edf5111410dfae7b89d86ca145;hb=HEAD
>
> It works on our testing device
> But we dont have any Nokia ones.
>
> --
> ? ? ?Architecte Informatique chez Blueline/Gulfsat:
> ? Administration Systeme, Recherche & Developpement
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? +261 33 11 207 36
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>



-- 
Devinder Singh   |   R&D Manager
______________________________
Palette Multimedia Berhad (420056-K)
6 Floor, Unit 4,
KPMG Tower
8 First Avenue,
Bandar Utama,
47800 Petaling Jaya, Selangor
Malaysia

m. +60122248306
p.  +60377289880 Ext 502
f.   +60377281080
@ devinder at palettemm.com
www.palettemm.com

From adamanov at gmail.com  Tue Nov 17 08:27:58 2009
From: adamanov at gmail.com (=?UTF-8?B?0JLRj9GH0LXRgdC70LDQsiDQkNC00LDQvNCw0L3QvtCy?=)
Date: Tue, 17 Nov 2009 10:27:58 +0200
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <7a50ad140911151320s4a982e6ap33b364274a501567@mail.gmail.com>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<6bdd03c50911130054w408f164ah933b9de52beca5f8@mail.gmail.com>
	<4AFD45BE.6070405@gulfsat.mg> <1258112683.7348.81.camel@david-laptop>
	<4AFD4962.5080105@gulfsat.mg> <1258113600.7348.83.camel@david-laptop>
	<4AFD4BB8.4050007@gulfsat.mg>
	<7a50ad140911141603t2a19845cx40f5b9060910f616@mail.gmail.com>
	<4AFF9E6C.3030907@gulfsat.mg>
	<7a50ad140911151320s4a982e6ap33b364274a501567@mail.gmail.com>
Message-ID: <7a50ad140911170027j76b9eb6ar6fc2af593406b938@mail.gmail.com>

 with verbose.

2009/11/15 Rakotomandimby Mihamina <mihamina at gulfsat.mg>

11/15/2009 03:03 AM, ???????? ????????::
>
>  tcpdump    ipod touch.   don't work after release
>>
>
>  --verbose
>
>
> --
>      Architecte Informatique chez Blueline/Gulfsat:
>   Administration Systeme, Recherche & Developpement
>                                   +261 33 11 207 36
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091117/7d64d532/attachment-0001.htm>
-------------- next part --------------
root at wnas:~# tcpdump -s 1500 -vvv -n -i ath0 host 10.1.1.40
tcpdump: WARNING: ath0: no IPv4 address assigned
tcpdump: listening on ath0, link-type EN10MB (Ethernet), capture size 1500 bytes
00:55:12.924742 ARP, Ethernet (len 6), IPv4 (len 4), Reply 10.1.0.1 is-at 00:0c:42:61:44:a2, length 28
00:55:12.940662 ARP, Ethernet (len 6), IPv4 (len 4), Reply 10.1.0.1 is-at 00:0c:42:61:44:a2, length 28
00:55:12.970186 ARP, Ethernet (len 6), IPv4 (len 4), Reply 10.1.0.1 is-at 00:0c:42:61:44:a2, length 28
00:55:13.030076 IP (tos 0x0, ttl 16, id 0, offset 0, flags [none], proto UDP (17), length 327)
    10.1.0.1.67 > 10.1.1.40.68: [udp sum ok] BOOTP/DHCP, Reply, length 299, xid 0xa9ec73be, Flags [none] (0x0000)
          Your-IP 10.1.1.40
          Client-Ethernet-Address 00:1d:4f:ac:36:dd
          Vendor-rfc1048 Extensions
            Magic Cookie 0x63825363
            DHCP-Message Option 53, length 1: Offer
            Subnet-Mask Option 1, length 4: 255.255.255.255
            Static-Route Option 33, length 8: (10.1.0.1:10.1.1.40)
            Default-Gateway Option 3, length 4: 10.1.0.1
            Domain-Name-Server Option 6, length 8: 10.1.0.1,10.1.0.1
            Domain-Name Option 15, length 9: "coova.org"
            Lease-Time Option 51, length 4: 100
            Server-ID Option 54, length 4: 10.1.0.1
            END Option 255, length 0
00:55:14.142829 IP (tos 0x0, ttl 16, id 0, offset 0, flags [none], proto UDP (17), length 331)
    10.1.0.1.67 > 10.1.1.40.68: [udp sum ok] BOOTP/DHCP, Reply, length 303, xid 0xa9ec73be, Flags [none] (0x0000)
          Your-IP 10.1.1.40
          Client-Ethernet-Address 00:1d:4f:ac:36:dd
          Vendor-rfc1048 Extensions
            Magic Cookie 0x63825363
            DHCP-Message Option 53, length 1: ACK
            Subnet-Mask Option 1, length 4: 255.255.255.255
            Static-Route Option 33, length 8: (10.1.0.1:10.1.1.40)
            Default-Gateway Option 3, length 4: 10.1.0.1
            Domain-Name-Server Option 6, length 8: 10.1.0.1,10.1.0.1
            Domain-Name Option 15, length 9: "coova.org"
            Lease-Time Option 51, length 4: 100
            MTU Option 26, length 2: 1500
            Server-ID Option 54, length 4: 10.1.0.1
            END Option 255, length 0
00:55:15.068069 IP (tos 0x0, ttl 16, id 0, offset 0, flags [none], proto UDP (17), length 331)
    10.1.0.1.67 > 10.1.1.40.68: [udp sum ok] BOOTP/DHCP, Reply, length 303, xid 0xa9ec73be, Flags [none] (0x0000)
          Your-IP 10.1.1.40
          Client-Ethernet-Address 00:1d:4f:ac:36:dd
          Vendor-rfc1048 Extensions
            Magic Cookie 0x63825363
            DHCP-Message Option 53, length 1: ACK
            Subnet-Mask Option 1, length 4: 255.255.255.255
            Static-Route Option 33, length 8: (10.1.0.1:10.1.1.40)
            Default-Gateway Option 3, length 4: 10.1.0.1
            Domain-Name-Server Option 6, length 8: 10.1.0.1,10.1.0.1
            Domain-Name Option 15, length 9: "coova.org"
            Lease-Time Option 51, length 4: 100
            MTU Option 26, length 2: 1500
            Server-ID Option 54, length 4: 10.1.0.1
            END Option 255, length 0
00:55:15.075274 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 10.1.1.40 tell 0.0.0.0, length 28
00:55:15.477424 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 10.1.1.40 tell 0.0.0.0, length 28
00:55:15.877502 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 10.1.1.40 tell 0.0.0.0, length 28
00:55:16.278751 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 10.1.1.40 tell 10.1.1.40, length 28
00:55:16.682307 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 10.1.1.40 tell 10.1.1.40, length 28
00:55:16.686447 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 10.1.0.1 tell 10.1.1.40, length 28
00:55:16.686662 ARP, Ethernet (len 6), IPv4 (len 4), Reply 10.1.0.1 is-at 00:0c:42:61:44:a2, length 28
00:55:16.694013 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 169.254.255.255 tell 10.1.1.40, length 28
00:55:17.132824 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 169.254.255.255 tell 10.1.1.40, length 28
00:55:17.142657 IP (tos 0x0, ttl 1, id 18183, offset 0, flags [none], proto IGMP (2), length 32, options (RA))
    10.1.1.40 > 224.0.0.2: igmp leave 224.0.0.251
00:55:17.146986 IP (tos 0x0, ttl 1, id 17787, offset 0, flags [none], proto IGMP (2), length 32, options (RA))
    10.1.1.40 > 224.0.0.251: igmp v2 report 224.0.0.251
00:55:17.534262 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 169.254.255.255 tell 10.1.1.40, length 28
00:55:17.935586 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 169.254.255.255 tell 10.1.1.40, length 28
00:55:22.140458 IP (tos 0x0, ttl 255, id 40468, offset 0, flags [none], proto UDP (17), length 183)
    10.1.1.40.5353 > 224.0.0.251.5353: [udp sum ok] 0 [3q] [3n] [1au] ANY (QU)? iPodik._ssh._tcp.local. ANY (QU)? iPodik._sftp-ssh._tcp.local. ANY (QU)? iPodik.local. ns: iPodik._ssh._tcp.local. [2m] SRV iPodik.local.:22 0 0, iPodik._sftp-ssh._tcp.local. [2m] SRV iPodik.local.:22 0 0, iPodik.local. [2m] A 10.1.1.40 ar: . OPT UDPsize=1440 (155)
00:55:22.397468 IP (tos 0x0, ttl 255, id 57178, offset 0, flags [none], proto UDP (17), length 183)
    10.1.1.40.5353 > 224.0.0.251.5353: [udp sum ok] 0 [3q] [3n] [1au] ANY (QM)? iPodik._ssh._tcp.local. ANY (QM)? iPodik._sftp-ssh._tcp.local. ANY (QM)? iPodik.local. ns: iPodik._ssh._tcp.local. [2m] SRV iPodik.local.:22 0 0, iPodik._sftp-ssh._tcp.local. [2m] SRV iPodik.local.:22 0 0, iPodik.local. [2m] A 10.1.1.40 ar: . OPT UDPsize=1440 (155)
00:55:22.654865 IP (tos 0x0, ttl 255, id 8707, offset 0, flags [none], proto UDP (17), length 183)
    10.1.1.40.5353 > 224.0.0.251.5353: [udp sum ok] 0 [3q] [3n] [1au] ANY (QM)? iPodik._ssh._tcp.local. ANY (QM)? iPodik._sftp-ssh._tcp.local. ANY (QM)? iPodik.local. ns: iPodik._ssh._tcp.local. [2m] SRV iPodik.local.:22 0 0, iPodik._sftp-ssh._tcp.local. [2m] SRV iPodik.local.:22 0 0, iPodik.local. [2m] A 10.1.1.40 ar: . OPT UDPsize=1440 (155)
00:55:22.899381 IP (tos 0x0, ttl 255, id 62321, offset 0, flags [none], proto UDP (17), length 328)
    10.1.1.40.5353 > 224.0.0.251.5353: [udp sum ok] 0*- [0q] 11/0/0 iPodik._ssh._tcp.local. (Cache flush) [2m] SRV iPodik.local.:22 0 0, iPodik._ssh._tcp.local. (Cache flush) [1h15m] TXT "", _services._dns-sd._udp.local. [1h15m] PTR _ssh._tcp.local., _ssh._tcp.local. [1h15m] PTR iPodik._ssh._tcp.local., iPodik._device-info._tcp.local. [1h15m] TXT "model=Device", iPodik._sftp-ssh._tcp.local. (Cache flush) [2m] SRV iPodik.local.:22 0 0, iPodik._sftp-ssh._tcp.local. (Cache flush) [1h15m] TXT "", _services._dns-sd._udp.local. [1h15m] PTR _sftp-ssh._tcp.local., _sftp-ssh._tcp.local. [1h15m] PTR iPodik._sftp-ssh._tcp.local., iPodik.local. (Cache flush) [2m] A 10.1.1.40, 40.1.1.10.in-addr.arpa. (Cache flush) [2m] PTR iPodik.local. (300)
00:55:23.914877 IP (tos 0x0, ttl 255, id 37392, offset 0, flags [none], proto UDP (17), length 328)
    10.1.1.40.5353 > 224.0.0.251.5353: [udp sum ok] 0*- [0q] 11/0/0 iPodik._ssh._tcp.local. (Cache flush) [2m] SRV iPodik.local.:22 0 0, iPodik._ssh._tcp.local. (Cache flush) [1h15m] TXT "", _services._dns-sd._udp.local. [1h15m] PTR _ssh._tcp.local., _ssh._tcp.local. [1h15m] PTR iPodik._ssh._tcp.local., iPodik._device-info._tcp.local. [1h15m] TXT "model=Device", iPodik._sftp-ssh._tcp.local. (Cache flush) [2m] SRV iPodik.local.:22 0 0, iPodik._sftp-ssh._tcp.local. (Cache flush) [1h15m] TXT "", _services._dns-sd._udp.local. [1h15m] PTR _sftp-ssh._tcp.local., _sftp-ssh._tcp.local. [1h15m] PTR iPodik._sftp-ssh._tcp.local., iPodik.local. (Cache flush) [2m] A 10.1.1.40, 40.1.1.10.in-addr.arpa. (Cache flush) [2m] PTR iPodik.local. (300)
00:55:24.627494 IP (tos 0x0, ttl 1, id 1538, offset 0, flags [none], proto IGMP (2), length 32, options (RA))
    10.1.1.40 > 224.0.0.251: igmp v2 report 224.0.0.251
00:55:25.898703 IP (tos 0x0, ttl 255, id 10576, offset 0, flags [none], proto UDP (17), length 104)
    10.1.1.40.5353 > 224.0.0.251.5353: [udp sum ok] 0*- [0q] 2/0/0 iPodik.local. (Cache flush) [2m] A 10.1.1.40, 40.1.1.10.in-addr.arpa. (Cache flush) [2m] PTR iPodik.local. (76)
00:55:29.898538 IP (tos 0x0, ttl 255, id 54276, offset 0, flags [none], proto UDP (17), length 104)
    10.1.1.40.5353 > 224.0.0.251.5353: [udp sum ok] 0*- [0q] 2/0/0 iPodik.local. (Cache flush) [2m] A 10.1.1.40, 40.1.1.10.in-addr.arpa. (Cache flush) [2m] PTR iPodik.local. (76)
00:55:37.898666 IP (tos 0x0, ttl 255, id 3946, offset 0, flags [none], proto UDP (17), length 104)
    10.1.1.40.5353 > 224.0.0.251.5353: [udp sum ok] 0*- [0q] 2/0/0 iPodik.local. (Cache flush) [2m] A 10.1.1.40, 40.1.1.10.in-addr.arpa. (Cache flush) [2m] PTR iPodik.local. (76)
00:55:39.407164 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 10.1.0.1 tell 10.1.1.40, length 28
00:55:39.407407 ARP, Ethernet (len 6), IPv4 (len 4), Reply 10.1.0.1 is-at 00:0c:42:61:44:a2, length 28
00:55:39.409654 IP (tos 0x0, ttl 255, id 43383, offset 0, flags [none], proto UDP (17), length 69)
    10.1.1.40.58501 > 91.192.159.1.53: [udp sum ok] 13819+ A? configuration.apple.com. (41)
00:55:39.414807 IP (tos 0x0, ttl 61, id 2572, offset 0, flags [none], proto UDP (17), length 326)
    91.192.159.1.53 > 10.1.1.40.58501: [udp sum ok] 13819 q: A? configuration.apple.com. 1/6/6 configuration.apple.com. [20m39s] A 17.250.248.105 ns: apple.com. [3d22h26m2s] NS nserver2.apple.com., apple.com. [3d22h26m2s] NS nserver.apple.com., apple.com. [3d22h26m2s] NS nserver4.apple.com., apple.com. [3d22h26m2s] NS nserver3.apple.com., apple.com. [3d22h26m2s] NS nserver.asia.apple.com., apple.com. [3d22h26m2s] NS nserver.euro.apple.com. ar: nserver.asia.apple.com. [1d22h46m2s] A 17.82.254.3, nserver3.apple.com. [4d22h46m3s] A 17.112.144.50, nserver.apple.com. [22h23m31s] A 17.254.0.50, nserver4.apple.com. [4d22h46m3s] A 17.112.144.59, nserver.euro.apple.com. [1d22h46m2s] A 17.72.133.64, nserver2.apple.com. [4d22h46m3s] A 17.254.0.59 (298)
00:55:39.424083 IP (tos 0x0, ttl 64, id 48206, offset 0, flags [DF], proto TCP (6), length 64)
    10.1.1.40.50279 > 17.250.248.105.80: Flags [S], cksum 0x70a3 (correct), seq 3011644867, win 65535, options [mss 1460,nop,wscale 2,nop,nop,TS val 840759478 ecr 0,sackOK,eol], length 0
00:55:39.639094 IP (tos 0x0, ttl 244, id 50526, offset 0, flags [none], proto TCP (6), length 44)
    17.250.248.105.80 > 10.1.1.40.50279: Flags [S.], cksum 0x52c8 (correct), seq 1892554999, ack 3011644868, win 8190, options [mss 1460], length 0
00:55:40.073903 IP (tos 0x0, ttl 64, id 38688, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50279 > 17.250.248.105.80: Flags [.], cksum 0x8a83 (correct), seq 1, ack 1, win 65535, length 0
00:55:40.084134 IP (tos 0x0, ttl 64, id 44842, offset 0, flags [DF], proto TCP (6), length 349)
    10.1.1.40.50279 > 17.250.248.105.80: Flags [P.], cksum 0x472e (correct), seq 1:310, ack 1, win 65535, length 309
00:55:40.296377 IP (tos 0x0, ttl 53, id 11993, offset 0, flags [DF], proto TCP (6), length 40)
    17.250.248.105.80 > 10.1.1.40.50279: Flags [.], cksum 0x4aa5 (correct), seq 1, ack 310, win 16041, length 0
00:55:40.296898 IP (tos 0x0, ttl 53, id 12249, offset 0, flags [DF], proto TCP (6), length 756)
    17.250.248.105.80 > 10.1.1.40.50279: Flags [P.], cksum 0x0ae4 (correct), seq 1:717, ack 310, win 16384, length 716
00:55:40.372854 IP (tos 0x0, ttl 64, id 4728, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50279 > 17.250.248.105.80: Flags [.], cksum 0x8682 (correct), seq 310, ack 717, win 65535, length 0
00:55:42.374466 IP (tos 0x0, ttl 64, id 51541, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50279 > 17.250.248.105.80: Flags [F.], cksum 0x8681 (correct), seq 310, ack 717, win 65535, length 0
00:55:42.603752 IP (tos 0x0, ttl 244, id 41042, offset 0, flags [none], proto TCP (6), length 40)
    17.250.248.105.80 > 10.1.1.40.50279: Flags [F.], cksum 0x6682 (correct), seq 717, ack 311, win 8190, length 0
00:55:42.631149 IP (tos 0x0, ttl 64, id 28718, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50279 > 17.250.248.105.80: Flags [.], cksum 0x8680 (correct), seq 311, ack 718, win 65535, length 0
00:55:48.237707 IP (tos 0x0, ttl 255, id 22365, offset 0, flags [none], proto UDP (17), length 77)
    10.1.1.40.49702 > 91.192.159.1.53: [udp sum ok] 39314+ A? safebrowsing.clients.google.com. (49)
00:55:48.240288 IP (tos 0x0, ttl 61, id 2573, offset 0, flags [none], proto UDP (17), length 317)
    91.192.159.1.53 > 10.1.1.40.49702: [udp sum ok] 39314 q: A? safebrowsing.clients.google.com. 6/4/4 safebrowsing.clients.google.com. [3m6s] CNAME clients.l.google.com., clients.l.google.com. [4m24s] A 74.125.87.138, clients.l.google.com. [4m24s] A 74.125.87.102, clients.l.google.com. [4m24s] A 74.125.87.113, clients.l.google.com. [4m24s] A 74.125.87.101, clients.l.google.com. [4m24s] A 74.125.87.100 ns: google.com. [1d22h14m30s] NS ns1.google.com., google.com. [1d22h14m30s] NS ns2.google.com., google.com. [1d22h14m30s] NS ns4.google.com., google.com. [1d22h14m30s] NS ns3.google.com. ar: ns1.google.com. [15h44m53s] A 216.239.32.10, ns2.google.com. [15h44m53s] A 216.239.34.10, ns3.google.com. [15h44m53s] A 216.239.36.10, ns4.google.com. [15h44m53s] A 216.239.38.10 (289)
00:55:48.476560 IP (tos 0x0, ttl 255, id 30027, offset 0, flags [none], proto UDP (17), length 51)
    10.1.1.40.65243 > 91.192.159.1.53: [udp sum ok] 37477+ A? ya.ru. (23)
00:55:48.482958 IP (tos 0x0, ttl 61, id 2574, offset 0, flags [none], proto UDP (17), length 174)
    91.192.159.1.53 > 10.1.1.40.65243: [udp sum ok] 37477 q: A? ya.ru. 3/2/2 ya.ru. [1h39m17s] A 77.88.21.8, ya.ru. [1h39m17s] A 93.158.134.8, ya.ru. [1h39m17s] A 213.180.204.8 ns: ya.ru. [14m38s] NS ns5.yandex.ru., ya.ru. [14m38s] NS ns1.yandex.ru. ar: ns1.yandex.ru. [1d22h14m37s] A 213.180.193.1, ns5.yandex.ru. [3d14h5m23s] A 213.180.204.1 (146)
00:55:48.490852 IP (tos 0x0, ttl 64, id 38488, offset 0, flags [DF], proto TCP (6), length 64)
    10.1.1.40.50280 > 77.88.21.8.80: Flags [S], cksum 0x4c6e (correct), seq 849435265, win 65535, options [mss 1460,nop,wscale 2,nop,nop,TS val 840759569 ecr 0,sackOK,eol], length 0
00:55:48.529969 IP (tos 0x0, ttl 54, id 55964, offset 0, flags [DF], proto TCP (6), length 60)
    77.88.21.8.80 > 10.1.1.40.50280: Flags [S.], cksum 0x59e6 (correct), seq 1168204995, ack 849435266, win 8192, options [mss 1410,nop,wscale 3,sackOK,TS val 1097070564 ecr 840759569], length 0
00:55:48.532046 IP (tos 0x0, ttl 64, id 57651, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50280 > 77.88.21.8.80: Flags [.], cksum 0x2827 (correct), seq 1, ack 1, win 32853, options [nop,nop,TS val 840759569 ecr 1097070564], length 0
00:55:48.537461 IP (tos 0x0, ttl 64, id 33888, offset 0, flags [DF], proto TCP (6), length 414)
    10.1.1.40.50280 > 77.88.21.8.80: Flags [P.], cksum 0x0797 (correct), seq 1:363, ack 1, win 32853, options [nop,nop,TS val 840759569 ecr 1097070564], length 362
00:55:48.577403 IP (tos 0x0, ttl 54, id 56121, offset 0, flags [DF], proto TCP (6), length 1450)
    77.88.21.8.80 > 10.1.1.40.50280: Flags [.], cksum 0xccb4 (correct), seq 1:1399, ack 363, win 1048, options [nop,nop,TS val 1097070611 ecr 840759569], length 1398
00:55:48.577649 IP (tos 0x0, ttl 54, id 56122, offset 0, flags [DF], proto TCP (6), length 1290)
    77.88.21.8.80 > 10.1.1.40.50280: Flags [P.], cksum 0xf2a0 (correct), seq 1399:2637, ack 363, win 1048, options [nop,nop,TS val 1097070611 ecr 840759569], length 1238
00:55:48.581218 IP (tos 0x0, ttl 64, id 57939, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50280 > 77.88.21.8.80: Flags [.], cksum 0x1ed4 (correct), seq 363, ack 2637, win 32194, options [nop,nop,TS val 840759570 ecr 1097070611], length 0
00:55:50.059058 IP (tos 0x0, ttl 64, id 59003, offset 0, flags [DF], proto TCP (6), length 359)
    10.1.1.40.50280 > 77.88.21.8.80: Flags [P.], cksum 0xb85a (correct), seq 363:670, ack 2637, win 32853, options [nop,nop,TS val 840759584 ecr 1097070611], length 307
00:55:50.110824 IP (tos 0x0, ttl 54, id 59531, offset 0, flags [DF], proto TCP (6), length 1450)
    77.88.21.8.80 > 10.1.1.40.50280: Flags [.], cksum 0xd5af (correct), seq 2637:4035, ack 670, win 1048, options [nop,nop,TS val 1097072143 ecr 840759584], length 1398
00:55:50.111047 IP (tos 0x0, ttl 54, id 59532, offset 0, flags [DF], proto TCP (6), length 282)
    77.88.21.8.80 > 10.1.1.40.50280: Flags [P.], cksum 0xa070 (correct), seq 4035:4265, ack 670, win 1048, options [nop,nop,TS val 1097072143 ecr 840759584], length 230
00:55:50.115265 IP (tos 0x0, ttl 64, id 47188, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50280 > 77.88.21.8.80: Flags [.], cksum 0x103e (correct), seq 670, ack 4265, win 32446, options [nop,nop,TS val 840759585 ecr 1097072143], length 0
00:55:50.183798 IP (tos 0x0, ttl 255, id 19492, offset 0, flags [none], proto UDP (17), length 64)
    10.1.1.40.50950 > 91.192.159.1.53: [udp sum ok] 17231+ A? www.tns-counter.ru. (36)
00:55:50.186825 IP (tos 0x0, ttl 61, id 2575, offset 0, flags [none], proto UDP (17), length 189)
    91.192.159.1.53 > 10.1.1.40.50950: [udp sum ok] 17231 q: A? www.tns-counter.ru. 3/2/2 www.tns-counter.ru. [2m16s] A 217.73.200.222, www.tns-counter.ru. [2m16s] A 217.73.200.169, www.tns-counter.ru. [2m16s] A 217.73.200.221 ns: tns-counter.ru. [2m16s] NS ns1.stack.net., tns-counter.ru. [2m16s] NS ns0.stack.net. ar: ns0.stack.net. [1d22h26m11s] A 217.73.199.229, ns1.stack.net. [1d22h26m11s] A 217.73.194.104 (161)
00:55:50.204892 IP (tos 0x0, ttl 255, id 32775, offset 0, flags [none], proto UDP (17), length 60)
    10.1.1.40.52407 > 91.192.159.1.53: [udp sum ok] 50295+ A? clck.yandex.ru. (32)
00:55:50.208112 IP (tos 0x0, ttl 61, id 2576, offset 0, flags [none], proto UDP (17), length 228)
    91.192.159.1.53 > 10.1.1.40.52407: [udp sum ok] 50295 q: A? clck.yandex.ru. 2/4/4 clck.yandex.ru. [5m35s] A 213.180.204.14, clck.yandex.ru. [5m35s] A 77.88.21.14 ns: yandex.ru. [1d22h14m36s] NS ns2.yandex.ru., yandex.ru. [1d22h14m36s] NS ns5.yandex.ru., yandex.ru. [1d22h14m36s] NS ns1.yandex.ru., yandex.ru. [1d22h14m36s] NS ns4.yandex.ru. ar: ns1.yandex.ru. [1d22h14m36s] A 213.180.193.1, ns2.yandex.ru. [1d22h14m36s] A 213.180.199.34, ns4.yandex.ru. [1d22h17m35s] A 77.88.19.60, ns5.yandex.ru. [3d14h5m22s] A 213.180.204.1 (200)
00:55:50.212906 IP (tos 0x0, ttl 64, id 7465, offset 0, flags [DF], proto TCP (6), length 64)
    10.1.1.40.50281 > 217.73.200.222.80: Flags [S], cksum 0x41f1 (correct), seq 354173609, win 65535, options [mss 1460,nop,wscale 2,nop,nop,TS val 840759586 ecr 0,sackOK,eol], length 0
00:55:50.224395 IP (tos 0x0, ttl 64, id 30251, offset 0, flags [DF], proto TCP (6), length 64)
    10.1.1.40.50282 > 213.180.204.14.80: Flags [S], cksum 0xcd0f (correct), seq 668116280, win 65535, options [mss 1460,nop,wscale 2,nop,nop,TS val 840759586 ecr 0,sackOK,eol], length 0
00:55:50.264021 IP (tos 0x0, ttl 54, id 38821, offset 0, flags [DF], proto TCP (6), length 60)
    213.180.204.14.80 > 10.1.1.40.50282: Flags [S.], cksum 0x6a66 (correct), seq 506637769, ack 668116281, win 8192, options [mss 1410,nop,wscale 8,sackOK,TS val 2228880115 ecr 840759586], length 0
00:55:50.266399 IP (tos 0x0, ttl 64, id 43834, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50282 > 213.180.204.14.80: Flags [.], cksum 0x38ab (correct), seq 1, ack 1, win 32853, options [nop,nop,TS val 840759587 ecr 2228880115], length 0
00:55:50.271936 IP (tos 0x0, ttl 64, id 9510, offset 0, flags [DF], proto TCP (6), length 448)
    10.1.1.40.50282 > 213.180.204.14.80: Flags [P.], cksum 0x4eb5 (correct), seq 1:397, ack 1, win 32853, options [nop,nop,TS val 840759587 ecr 2228880115], length 396
00:55:50.292517 IP (tos 0x0, ttl 54, id 2760, offset 0, flags [DF], proto TCP (6), length 52)
    217.73.200.222.80 > 10.1.1.40.50281: Flags [S.], cksum 0xd29f (correct), seq 1704686078, ack 354173610, win 64240, options [mss 1460,nop,nop,sackOK,nop,wscale 13], length 0
00:55:50.294456 IP (tos 0x0, ttl 64, id 64780, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50281 > 217.73.200.222.80: Flags [.], cksum 0x8e16 (correct), seq 1, ack 1, win 32850, length 0
00:55:50.300177 IP (tos 0x0, ttl 64, id 15950, offset 0, flags [DF], proto TCP (6), length 397)
    10.1.1.40.50281 > 217.73.200.222.80: Flags [P.], cksum 0x8fa2 (correct), seq 1:358, ack 1, win 32850, length 357
00:55:50.314121 IP (tos 0x0, ttl 54, id 38939, offset 0, flags [DF], proto TCP (6), length 186)
    213.180.204.14.80 > 10.1.1.40.50282: Flags [P.], cksum 0x4403 (correct), seq 1:135, ack 397, win 32, options [nop,nop,TS val 2228880165 ecr 840759587], length 134
00:55:50.314349 IP (tos 0x0, ttl 54, id 38940, offset 0, flags [DF], proto TCP (6), length 52)
    213.180.204.14.80 > 10.1.1.40.50282: Flags [F.], cksum 0xb69b (correct), seq 135, ack 397, win 32, options [nop,nop,TS val 2228880165 ecr 840759587], length 0
00:55:50.316595 IP (tos 0x0, ttl 64, id 4634, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50282 > 213.180.204.14.80: Flags [.], cksum 0x3689 (correct), seq 397, ack 135, win 32819, options [nop,nop,TS val 840759587 ecr 2228880165], length 0
00:55:50.317211 IP (tos 0x0, ttl 64, id 10812, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50282 > 213.180.204.14.80: Flags [.], cksum 0x3688 (correct), seq 397, ack 136, win 32819, options [nop,nop,TS val 840759587 ecr 2228880165], length 0
00:55:50.328483 IP (tos 0x0, ttl 64, id 11326, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50282 > 213.180.204.14.80: Flags [F.], cksum 0x3665 (correct), seq 397, ack 136, win 32853, options [nop,nop,TS val 840759587 ecr 2228880165], length 0
00:55:50.343273 IP (tos 0x0, ttl 54, id 29748, offset 0, flags [DF], proto TCP (6), length 40)
    217.73.200.222.80 > 10.1.1.40.50281: Flags [.], cksum 0x0cfc (correct), seq 1, ack 358, win 8, length 0
00:55:50.344820 IP (tos 0x0, ttl 54, id 29750, offset 0, flags [DF], proto TCP (6), length 40)
    217.73.200.222.80 > 10.1.1.40.50281: Flags [F.], cksum 0x0a9e (correct), seq 606, ack 358, win 8, length 0
00:55:50.345097 IP (tos 0x0, ttl 54, id 29749, offset 0, flags [DF], proto TCP (6), length 645)
    217.73.200.222.80 > 10.1.1.40.50281: Flags [P.], cksum 0xd421 (correct), seq 1:606, ack 358, win 8, length 605
00:55:50.346789 IP (tos 0x0, ttl 64, id 45586, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50281 > 217.73.200.222.80: Flags [.], cksum 0x8cb1 (correct), seq 358, ack 1, win 32850, length 0
00:55:50.348159 IP (tos 0x0, ttl 64, id 64113, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50281 > 217.73.200.222.80: Flags [.], cksum 0x8aeb (correct), seq 358, ack 607, win 32698, length 0
00:55:50.363920 IP (tos 0x0, ttl 64, id 23561, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50281 > 217.73.200.222.80: Flags [F.], cksum 0x8a52 (correct), seq 358, ack 607, win 32850, length 0
00:55:50.368075 IP (tos 0x0, ttl 54, id 39090, offset 0, flags [DF], proto TCP (6), length 52)
    213.180.204.14.80 > 10.1.1.40.50282: Flags [.], cksum 0xb664 (correct), seq 136, ack 398, win 32, options [nop,nop,TS val 2228880219 ecr 840759587], length 0
00:55:50.408133 IP (tos 0x0, ttl 54, id 2773, offset 0, flags [DF], proto TCP (6), length 40)
    217.73.200.222.80 > 10.1.1.40.50281: Flags [.], cksum 0x0a9d (correct), seq 607, ack 359, win 8, length 0
00:55:50.812067 IP (tos 0x0, ttl 255, id 36924, offset 0, flags [none], proto UDP (17), length 62)
    10.1.1.40.65316 > 91.192.159.1.53: [udp sum ok] 18468+ A? export.yandex.ru. (34)
00:55:50.813920 IP (tos 0x0, ttl 64, id 32769, offset 0, flags [DF], proto TCP (6), length 64)
    10.1.1.40.50283 > 217.73.200.222.80: Flags [S], cksum 0xf055 (correct), seq 2614234502, win 65535, options [mss 1460,nop,wscale 2,nop,nop,TS val 840759592 ecr 0,sackOK,eol], length 0
00:55:50.815194 IP (tos 0x0, ttl 61, id 2577, offset 0, flags [none], proto UDP (17), length 294)
    91.192.159.1.53 > 10.1.1.40.65316: [udp sum ok] 18468 q: A? export.yandex.ru. 5/4/4 export.yandex.ru. [49m5s] CNAME corba-http-export.yandex.ru., corba-http-export.yandex.ru. [49m5s] A 213.180.204.69, corba-http-export.yandex.ru. [49m5s] A 77.88.21.69, corba-http-export.yandex.ru. [49m5s] A 87.250.251.69, corba-http-export.yandex.ru. [49m5s] A 93.158.134.69 ns: yandex.ru. [1d22h14m35s] NS ns1.yandex.ru., yandex.ru. [1d22h14m35s] NS ns5.yandex.ru., yandex.ru. [1d22h14m35s] NS ns2.yandex.ru., yandex.ru. [1d22h14m35s] NS ns4.yandex.ru. ar: ns1.yandex.ru. [1d22h14m35s] A 213.180.193.1, ns2.yandex.ru. [1d22h14m35s] A 213.180.199.34, ns4.yandex.ru. [1d22h17m34s] A 77.88.19.60, ns5.yandex.ru. [3d14h5m21s] A 213.180.204.1 (266)
00:55:50.829362 IP (tos 0x0, ttl 64, id 25911, offset 0, flags [DF], proto TCP (6), length 64)
    10.1.1.40.50284 > 213.180.204.69.80: Flags [S], cksum 0xaa6f (correct), seq 2815444891, win 65535, options [mss 1460,nop,wscale 2,nop,nop,TS val 840759592 ecr 0,sackOK,eol], length 0
00:55:50.856540 IP (tos 0x0, ttl 54, id 2778, offset 0, flags [DF], proto TCP (6), length 52)
    217.73.200.222.80 > 10.1.1.40.50283: Flags [S.], cksum 0x06e3 (correct), seq 1704389674, ack 2614234503, win 64240, options [mss 1460,nop,nop,sackOK,nop,wscale 13], length 0
00:55:50.858438 IP (tos 0x0, ttl 64, id 41222, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50283 > 217.73.200.222.80: Flags [.], cksum 0xc259 (correct), seq 1, ack 1, win 32850, length 0
00:55:50.862963 IP (tos 0x0, ttl 64, id 39946, offset 0, flags [DF], proto TCP (6), length 397)
    10.1.1.40.50283 > 217.73.200.222.80: Flags [P.], cksum 0xc2e5 (correct), seq 1:358, ack 1, win 32850, length 357
00:55:50.869431 IP (tos 0x0, ttl 54, id 2781, offset 0, flags [DF], proto TCP (6), length 52)
    213.180.204.69.80 > 10.1.1.40.50284: Flags [S.], cksum 0x72a0 (correct), seq 2809191888, ack 2815444892, win 5640, options [mss 1410,nop,nop,sackOK,nop,wscale 4], length 0
00:55:50.871460 IP (tos 0x0, ttl 64, id 50793, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50284 > 213.180.204.69.80: Flags [.], cksum 0x4937 (correct), seq 1, ack 1, win 32782, length 0
00:55:50.876150 IP (tos 0x0, ttl 64, id 27963, offset 0, flags [DF], proto TCP (6), length 379)
    10.1.1.40.50284 > 213.180.204.69.80: Flags [P.], cksum 0xb3cc (correct), seq 1:340, ack 1, win 32782, length 339
00:55:50.905892 IP (tos 0x0, ttl 54, id 60368, offset 0, flags [DF], proto TCP (6), length 40)
    217.73.200.222.80 > 10.1.1.40.50283: Flags [.], cksum 0x413f (correct), seq 1, ack 358, win 8, length 0
00:55:50.906172 IP (tos 0x0, ttl 54, id 60369, offset 0, flags [DF], proto TCP (6), length 478)
    217.73.200.222.80 > 10.1.1.40.50283: Flags [P.], cksum 0x7f42 (correct), seq 1:439, ack 358, win 8, length 438
00:55:50.906334 IP (tos 0x0, ttl 54, id 60370, offset 0, flags [DF], proto TCP (6), length 40)
    217.73.200.222.80 > 10.1.1.40.50283: Flags [F.], cksum 0x3f88 (correct), seq 439, ack 358, win 8, length 0
00:55:50.908898 IP (tos 0x0, ttl 64, id 51290, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50283 > 217.73.200.222.80: Flags [.], cksum 0xbfac (correct), seq 358, ack 439, win 32740, length 0
00:55:50.909513 IP (tos 0x0, ttl 64, id 40553, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50283 > 217.73.200.222.80: Flags [.], cksum 0xbfab (correct), seq 358, ack 440, win 32740, length 0
00:55:50.916730 IP (tos 0x0, ttl 54, id 46082, offset 0, flags [DF], proto TCP (6), length 40)
    213.180.204.69.80 > 10.1.1.40.50284: Flags [.], cksum 0xc64e (correct), seq 1, ack 340, win 420, length 0
00:55:50.917031 IP (tos 0x0, ttl 54, id 46084, offset 0, flags [DF], proto TCP (6), length 638)
    213.180.204.69.80 > 10.1.1.40.50284: Flags [P.], cksum 0x64ff (correct), seq 1411:2009, ack 340, win 420, length 598
00:55:50.918419 IP (tos 0x0, ttl 54, id 46083, offset 0, flags [DF], proto TCP (6), length 1450)
    213.180.204.69.80 > 10.1.1.40.50284: Flags [.], cksum 0x6de4 (correct), seq 1:1411, ack 340, win 420, length 1410
00:55:50.919500 IP (tos 0x0, ttl 64, id 29471, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50284 > 213.180.204.69.80: Flags [.], cksum 0xf9ed (correct), seq 340, ack 1, win 32782, options [nop,nop,sack 1 {1411:2009}], length 0
00:55:50.920472 IP (tos 0x0, ttl 64, id 42332, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50283 > 217.73.200.222.80: Flags [F.], cksum 0xbf3c (correct), seq 358, ack 440, win 32850, length 0
00:55:50.921756 IP (tos 0x0, ttl 64, id 33565, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50284 > 213.180.204.69.80: Flags [.], cksum 0x4202 (correct), seq 340, ack 2009, win 32280, length 0
00:55:50.971421 IP (tos 0x0, ttl 54, id 2798, offset 0, flags [DF], proto TCP (6), length 40)
    217.73.200.222.80 > 10.1.1.40.50283: Flags [.], cksum 0x3f87 (correct), seq 440, ack 359, win 8, length 0
00:55:51.454068 IP (tos 0x0, ttl 255, id 53615, offset 0, flags [none], proto UDP (17), length 63)
    10.1.1.40.57773 > 91.192.159.1.53: [udp sum ok] 19927+ A? suggest.yandex.ru. (35)
00:55:51.456160 IP (tos 0x0, ttl 61, id 2578, offset 0, flags [none], proto UDP (17), length 245)
    91.192.159.1.53 > 10.1.1.40.57773: [udp sum ok] 19927 q: A? suggest.yandex.ru. 4/3/3 suggest.yandex.ru. [2h10m22s] CNAME suggest.yandex.net., suggest.yandex.net. [27m55s] A 93.158.134.63, suggest.yandex.net. [27m55s] A 77.88.21.63, suggest.yandex.net. [27m55s] A 87.250.251.63 ns: yandex.net. [1d22h24m57s] NS ns1.yandex.net., yandex.net. [1d22h24m57s] NS ns5.yandex.net., yandex.net. [1d22h24m57s] NS ns2.yandex.net. ar: ns1.yandex.net. [1d10h29m40s] A 213.180.193.1, ns2.yandex.net. [1d12h20m10s] A 213.180.199.34, ns5.yandex.net. [1d9h42m53s] A 213.180.204.1 (217)
00:55:51.459940 IP (tos 0x0, ttl 64, id 61729, offset 0, flags [DF], proto TCP (6), length 379)
    10.1.1.40.50280 > 77.88.21.8.80: Flags [P.], cksum 0xf992 (correct), seq 670:997, ack 4265, win 32853, options [nop,nop,TS val 840759598 ecr 1097072143], length 327
00:55:51.471259 IP (tos 0x0, ttl 64, id 31749, offset 0, flags [DF], proto TCP (6), length 64)
    10.1.1.40.50285 > 93.158.134.63.80: Flags [S], cksum 0x5452 (correct), seq 810734411, win 65535, options [mss 1460,nop,wscale 2,nop,nop,TS val 840759599 ecr 0,sackOK,eol], length 0
00:55:51.499761 IP (tos 0x0, ttl 54, id 62396, offset 0, flags [DF], proto TCP (6), length 935)
    77.88.21.8.80 > 10.1.1.40.50280: Flags [P.], cksum 0xe497 (correct), seq 4265:5148, ack 997, win 1048, options [nop,nop,TS val 1097073534 ecr 840759598], length 883
00:55:51.502937 IP (tos 0x0, ttl 64, id 36403, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50280 > 77.88.21.8.80: Flags [.], cksum 0x054d (correct), seq 997, ack 5148, win 32632, options [nop,nop,TS val 840759599 ecr 1097073534], length 0
00:55:51.510305 IP (tos 0x0, ttl 54, id 2807, offset 0, flags [DF], proto TCP (6), length 60)
    93.158.134.63.80 > 10.1.1.40.50285: Flags [S.], cksum 0x4597 (correct), seq 1096213033, ack 810734412, win 5592, options [mss 1410,sackOK,TS val 261084915 ecr 840759599,nop,wscale 8], length 0
00:55:51.512196 IP (tos 0x0, ttl 64, id 20837, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50285 > 93.158.134.63.80: Flags [.], cksum 0x09b5 (correct), seq 1, ack 1, win 32853, options [nop,nop,TS val 840759599 ecr 261084915], length 0
00:55:51.518033 IP (tos 0x0, ttl 64, id 8972, offset 0, flags [DF], proto TCP (6), length 378)
    10.1.1.40.50285 > 93.158.134.63.80: Flags [P.], cksum 0x91d5 (correct), seq 1:327, ack 1, win 32853, options [nop,nop,TS val 840759599 ecr 261084915], length 326
00:55:51.556930 IP (tos 0x0, ttl 54, id 13525, offset 0, flags [DF], proto TCP (6), length 52)
    93.158.134.63.80 > 10.1.1.40.50285: Flags [.], cksum 0x889d (correct), seq 1, ack 327, win 27, options [nop,nop,TS val 261084927 ecr 840759599], length 0
00:55:51.558053 IP (tos 0x0, ttl 54, id 13526, offset 0, flags [DF], proto TCP (6), length 1450)
    93.158.134.63.80 > 10.1.1.40.50285: Flags [.], cksum 0x88c0 (correct), seq 1:1399, ack 327, win 27, options [nop,nop,TS val 261084927 ecr 840759599], length 1398
00:55:51.558304 IP (tos 0x0, ttl 54, id 13527, offset 0, flags [DF], proto TCP (6), length 1450)
    93.158.134.63.80 > 10.1.1.40.50285: Flags [.], cksum 0x7d0a (correct), seq 1399:2797, ack 327, win 27, options [nop,nop,TS val 261084927 ecr 840759599], length 1398
00:55:51.561989 IP (tos 0x0, ttl 64, id 64545, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50285 > 93.158.134.63.80: Flags [.], cksum 0x0032 (correct), seq 327, ack 2797, win 32154, options [nop,nop,TS val 840759599 ecr 261084927], length 0
00:55:51.602453 IP (tos 0x0, ttl 54, id 13528, offset 0, flags [DF], proto TCP (6), length 1450)
    93.158.134.63.80 > 10.1.1.40.50285: Flags [.], cksum 0x6da3 (correct), seq 2797:4195, ack 327, win 27, options [nop,nop,TS val 261084938 ecr 840759599], length 1398
00:55:51.602704 IP (tos 0x0, ttl 54, id 13529, offset 0, flags [DF], proto TCP (6), length 732)
    93.158.134.63.80 > 10.1.1.40.50285: Flags [P.], cksum 0x10c7 (correct), seq 4195:4875, ack 327, win 27, options [nop,nop,TS val 261084938 ecr 840759599], length 680
00:55:51.606066 IP (tos 0x0, ttl 64, id 34576, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50285 > 93.158.134.63.80: Flags [.], cksum 0xf754 (correct), seq 327, ack 4875, win 32333, options [nop,nop,TS val 840759600 ecr 261084938], length 0
00:55:53.498991 IP (tos 0x0, ttl 54, id 1027, offset 0, flags [DF], proto TCP (6), length 52)
    77.88.21.8.80 > 10.1.1.40.50280: Flags [F.], cksum 0x78dc (correct), seq 5148, ack 997, win 1048, options [nop,nop,TS val 1097075534 ecr 840759599], length 0
00:55:53.585169 IP (tos 0x0, ttl 64, id 4433, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50280 > 77.88.21.8.80: Flags [.], cksum 0xfc89 (correct), seq 997, ack 5149, win 32853, options [nop,nop,TS val 840759620 ecr 1097075534], length 0
00:55:53.898715 IP (tos 0x0, ttl 255, id 43119, offset 0, flags [none], proto UDP (17), length 104)
    10.1.1.40.5353 > 224.0.0.251.5353: [udp sum ok] 0*- [0q] 2/0/0 iPodik.local. (Cache flush) [2m] A 10.1.1.40, 40.1.1.10.in-addr.arpa. (Cache flush) [2m] PTR iPodik.local. (76)
00:55:54.465849 IP (tos 0x0, ttl 64, id 1142, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50285 > 93.158.134.63.80: Flags [F.], cksum 0xf52f (correct), seq 327, ack 4875, win 32853, options [nop,nop,TS val 840759628 ecr 261084938], length 0
00:55:54.466271 IP (tos 0x0, ttl 64, id 22112, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50280 > 77.88.21.8.80: Flags [F.], cksum 0xfc80 (correct), seq 997, ack 5149, win 32853, options [nop,nop,TS val 840759628 ecr 1097075534], length 0
00:55:54.466566 IP (tos 0x0, ttl 64, id 51249, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50284 > 213.180.204.69.80: Flags [F.], cksum 0x400b (correct), seq 340, ack 2009, win 32782, length 0
00:55:54.528750 IP (tos 0x0, ttl 54, id 13530, offset 0, flags [DF], proto TCP (6), length 52)
    93.158.134.63.80 > 10.1.1.40.50285: Flags [F.], cksum 0x728d (correct), seq 4875, ack 328, win 27, options [nop,nop,TS val 261085670 ecr 840759628], length 0
00:55:54.528983 IP (tos 0x0, ttl 54, id 3265, offset 0, flags [DF], proto TCP (6), length 52)
    77.88.21.8.80 > 10.1.1.40.50280: Flags [.], cksum 0x74b9 (correct), seq 5149, ack 998, win 1048, options [nop,nop,TS val 1097076563 ecr 840759628], length 0
00:55:54.530342 IP (tos 0x0, ttl 54, id 46085, offset 0, flags [DF], proto TCP (6), length 40)
    213.180.204.69.80 > 10.1.1.40.50284: Flags [F.], cksum 0xbe74 (correct), seq 2009, ack 341, win 420, length 0
00:55:54.532310 IP (tos 0x0, ttl 64, id 30257, offset 0, flags [DF], proto TCP (6), length 52)
    10.1.1.40.50285 > 93.158.134.63.80: Flags [.], cksum 0xf251 (correct), seq 328, ack 4876, win 32853, options [nop,nop,TS val 840759629 ecr 261085670], length 0
00:55:54.533201 IP (tos 0x0, ttl 64, id 65368, offset 0, flags [DF], proto TCP (6), length 40)
    10.1.1.40.50284 > 213.180.204.69.80: Flags [.], cksum 0x400a (correct), seq 341, ack 2010, win 32782, length 0
00:56:05.693780 IP (tos 0x0, ttl 64, id 28193, offset 0, flags [none], proto UDP (17), length 328)
    10.1.1.40.68 > 10.1.0.1.67: [udp sum ok] BOOTP/DHCP, Request from 00:1d:4f:ac:36:dd, length 300, xid 0xa9ec73bf, Flags [none] (0x0000)
          Client-IP 10.1.1.40
          Client-Ethernet-Address 00:1d:4f:ac:36:dd
          Vendor-rfc1048 Extensions
            Magic Cookie 0x63825363
            DHCP-Message Option 53, length 1: Request
            Parameter-Request Option 55, length 6:
              Subnet-Mask, Default-Gateway, Domain-Name-Server, Domain-Name
              Option 119, Option 252
            MSZ Option 57, length 2: 1500
            Client-ID Option 61, length 7: ether 00:1d:4f:ac:36:dd
            Lease-Time Option 51, length 4: 7776000
            Hostname Option 12, length 6: "iPodik"
            END Option 255, length 0
            PAD Option 0, length 0, occurs 21
00:56:05.710233 IP (tos 0xc0, ttl 64, id 60084, offset 0, flags [none], proto ICMP (1), length 356)
    10.1.0.1 > 10.1.1.40: ICMP 10.1.0.1 udp port 67 unreachable, length 336
        IP (tos 0x0, ttl 64, id 28193, offset 0, flags [none], proto UDP (17), length 328)
    10.1.1.40.68 > 10.1.0.1.67: [udp sum ok] BOOTP/DHCP, Request from 00:1d:4f:ac:36:dd, length 300, xid 0xa9ec73bf, Flags [none] (0x0000)
          Client-IP 10.1.1.40
          Client-Ethernet-Address 00:1d:4f:ac:36:dd
          Vendor-rfc1048 Extensions
            Magic Cookie 0x63825363
            DHCP-Message Option 53, length 1: Request
            Parameter-Request Option 55, length 6:
              Subnet-Mask, Default-Gateway, Domain-Name-Server, Domain-Name
              Option 119, Option 252
            MSZ Option 57, length 2: 1500
            Client-ID Option 61, length 7: ether 00:1d:4f:ac:36:dd
            Lease-Time Option 51, length 4: 7776000
            Hostname Option 12, length 6: "iPodik"
            END Option 255, length 0
            PAD Option 0, length 0, occurs 21
00:56:05.710446 IP (tos 0x0, ttl 16, id 0, offset 0, flags [none], proto UDP (17), length 331)
    10.1.0.1.67 > 10.1.1.40.68: [udp sum ok] BOOTP/DHCP, Reply, length 303, xid 0xa9ec73bf, Flags [none] (0x0000)
          Client-IP 10.1.1.40
          Your-IP 10.1.1.40
          Client-Ethernet-Address 00:1d:4f:ac:36:dd
          Vendor-rfc1048 Extensions
            Magic Cookie 0x63825363
            DHCP-Message Option 53, length 1: ACK
            Subnet-Mask Option 1, length 4: 255.255.255.255
            Static-Route Option 33, length 8: (10.1.0.1:10.1.1.40)
            Default-Gateway Option 3, length 4: 10.1.0.1
            Domain-Name-Server Option 6, length 8: 10.1.0.1,10.1.0.1
            Domain-Name Option 15, length 9: "coova.org"
            Lease-Time Option 51, length 4: 100
            MTU Option 26, length 2: 1500
            Server-ID Option 54, length 4: 10.1.0.1
            END Option 255, length 0
00:56:25.900109 IP (tos 0x0, ttl 255, id 38931, offset 0, flags [none], proto UDP (17), length 104)
    10.1.1.40.5353 > 224.0.0.251.5353: [udp sum ok] 0*- [0q] 2/0/0 iPodik.local. (Cache flush) [2m] A 10.1.1.40, 40.1.1.10.in-addr.arpa. (Cache flush) [2m] PTR iPodik.local. (76)


From david at coova.com  Tue Nov 17 09:11:04 2009
From: david at coova.com (David Bird)
Date: Tue, 17 Nov 2009 10:11:04 +0100
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <7a50ad140911170027j76b9eb6ar6fc2af593406b938@mail.gmail.com>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<6bdd03c50911130054w408f164ah933b9de52beca5f8@mail.gmail.com>
	<4AFD45BE.6070405@gulfsat.mg> <1258112683.7348.81.camel@david-laptop>
	<4AFD4962.5080105@gulfsat.mg> <1258113600.7348.83.camel@david-laptop>
	<4AFD4BB8.4050007@gulfsat.mg>
	<7a50ad140911141603t2a19845cx40f5b9060910f616@mail.gmail.com>
	<4AFF9E6C.3030907@gulfsat.mg>
	<7a50ad140911151320s4a982e6ap33b364274a501567@mail.gmail.com>
	<7a50ad140911170027j76b9eb6ar6fc2af593406b938@mail.gmail.com>
Message-ID: <1258449064.3979.10.camel@david-laptop>

Thanks,

I've also been testing a bit with an iPod touch, using subversion
chilli, an ubiquiti router (not that it matters) VLAN'ing traffic to my
eth0 interface which has chilli running on it...

One thing I noticed (also in your tcpdump) is the inappropriate use of
Client-IP in the second Ack. It correctly has the Your-IP, just like the
original Ack, but this one also has Client-IP, which should only be sent
my the client (when it is arp-able). 

Though, the funny thing is, I'm not having any problems with my ipod
after the lease renewer ... with or without the Client-IP being set. 

Are you testing with latest ipod/iphone firmware?

David


On Tue, 2009-11-17 at 10:27 +0200, ???????? ???????? wrote:
>  with verbose.
> 
> 2009/11/15 Rakotomandimby Mihamina <mihamina at gulfsat.mg>
> 
> 
>         11/15/2009 03:03 AM, ???????? ????????::
>         
>                 tcpdump    ipod touch.   don't work after release
>         
>         
>          --verbose
>         
>         
>         
>         -- 
>              Architecte Informatique chez Blueline/Gulfsat:
>           Administration Systeme, Recherche & Developpement
>                                           +261 33 11 207 36
>         _______________________________________________
>         Chilli mailing list
>         Chilli at coova.org
>         http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>         
> 
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From adamanov at gmail.com  Tue Nov 17 11:31:11 2009
From: adamanov at gmail.com (=?UTF-8?B?0JLRj9GH0LXRgdC70LDQsiDQkNC00LDQvNCw0L3QvtCy?=)
Date: Tue, 17 Nov 2009 13:31:11 +0200
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <1258449064.3979.10.camel@david-laptop>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<1258112683.7348.81.camel@david-laptop> <4AFD4962.5080105@gulfsat.mg>
	<1258113600.7348.83.camel@david-laptop> <4AFD4BB8.4050007@gulfsat.mg>
	<7a50ad140911141603t2a19845cx40f5b9060910f616@mail.gmail.com>
	<4AFF9E6C.3030907@gulfsat.mg>
	<7a50ad140911151320s4a982e6ap33b364274a501567@mail.gmail.com>
	<7a50ad140911170027j76b9eb6ar6fc2af593406b938@mail.gmail.com>
	<1258449064.3979.10.camel@david-laptop>
Message-ID: <7a50ad140911170331p6974afbbkd5d8c437e4ec8212@mail.gmail.com>

Yes, last firmware installed 3.1.2 .. this problem appeared after upgrading
from 2.2  to 3.X  firmware version.

2009/11/17 David Bird <david at coova.com>

> Thanks,
>
> I've also been testing a bit with an iPod touch, using subversion
> chilli, an ubiquiti router (not that it matters) VLAN'ing traffic to my
> eth0 interface which has chilli running on it...
>
> One thing I noticed (also in your tcpdump) is the inappropriate use of
> Client-IP in the second Ack. It correctly has the Your-IP, just like the
> original Ack, but this one also has Client-IP, which should only be sent
> my the client (when it is arp-able).
>
> Though, the funny thing is, I'm not having any problems with my ipod
> after the lease renewer ... with or without the Client-IP being set.
>
> Are you testing with latest ipod/iphone firmware?
>
> David
>
>
> On Tue, 2009-11-17 at 10:27 +0200, ???????? ???????? wrote:
> >  with verbose.
> >
> > 2009/11/15 Rakotomandimby Mihamina <mihamina at gulfsat.mg>
> >
> >
> >         11/15/2009 03:03 AM, ???????? ????????::
> >
> >                 tcpdump    ipod touch.   don't work after release
> >
> >
> >          --verbose
> >
> >
> >
> >         --
> >              Architecte Informatique chez Blueline/Gulfsat:
> >           Administration Systeme, Recherche & Developpement
> >                                           +261 33 11 207 36
> >         _______________________________________________
> >         Chilli mailing list
> >         Chilli at coova.org
> >         http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >
> >
> >
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>



-- 
__________________________
? ?????????, ???????? ????????.
????????? ??????? ??? "????????".
87500, ???????, ?????????,
??. ??????? 136?
???. ??? +38 (067) 621 32 61

Email: adamanov at gmail.com
WWW: http://hl.ua

MCN Hitline - ????????????? ????????? ????.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091117/d449a8f5/attachment.htm>

From devinder at palettemm.com  Wed Nov 18 07:07:32 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Wed, 18 Nov 2009 15:07:32 +0800
Subject: [Chilli] Multiple Instances of Coova
Message-ID: <6bdd03c50911172307i200e7a74m70f5f2dd47bb4d6c@mail.gmail.com>

Hello,

I have a situation where i need to run multiple instances of Coova on
a PC. For example each time i run an instance of Coova i want to use a
different config file. How can i assign coova to use different config
file when it runs as multiple instance.


Each instance users would get a different login page. i suppose i need
to use VLAN also to differentiate the network.

I managed to create VLAN2 and able to view the hotspotlogin.cgi file
when i ran the following command

/etc/init.d/chilli start --conf/palette/conf2 --ieee8021q

but i cant seem to start another instance of chilli when i type the
above command

ps aux | grep chilli only shows one instance of chilli running.


I managed to set VLAN2 on Coova and use an  an AP with SSID guest on
VLAN 2, I also managed to get the DHCP IP address on VLAN2 from Coova.
great. Now i need some help on how do i run several instances of Coova
which would display a different hotspotlogin.cgi file based on
different VLAN ID.

Regards
Devinder

From liske at ibh.de  Wed Nov 18 08:30:42 2009
From: liske at ibh.de (Thomas Liske)
Date: Wed, 18 Nov 2009 09:30:42 +0100
Subject: [Chilli] Multiple Instances of Coova
In-Reply-To: <6bdd03c50911172307i200e7a74m70f5f2dd47bb4d6c@mail.gmail.com>
References: <6bdd03c50911172307i200e7a74m70f5f2dd47bb4d6c@mail.gmail.com>
Message-ID: <4B03B0B2.70009@ibh.de>

Hi,

here are my experience on using coova-chilli 1.0.14-1 with different vlans:

Devinder Singh wrote:
> Hello,
> 
> I have a situation where i need to run multiple instances of Coova on
> a PC. For example each time i run an instance of Coova i want to use a
> different config file. How can i assign coova to use different config
> file when it runs as multiple instance.

I'd the same problem here and managed it by customizing the init.d 
script to support multiple configuration files. I'd to use different 
uamuiports on each instance, since chilli opens the port listening on 
IP_ANY - so the second instance could not open the port and did refused 
starting.

> Each instance users would get a different login page. i suppose i need
> to use VLAN also to differentiate the network.
> 
> I managed to create VLAN2 and able to view the hotspotlogin.cgi file
> when i ran the following command

I'd use the 802.1Q feature of the linux kernel (using the vlan package 
on Debian). I use a software bridge between the ethernet vlan device and 
chilli - using the ethernet vlan device directly should IMHO also work 
out of the box.

> /etc/init.d/chilli start --conf/palette/conf2 --ieee8021q

What does/should the --ieee8021q parameter do?


Regards,
Thomas

> but i cant seem to start another instance of chilli when i type the
> above command
> 
> ps aux | grep chilli only shows one instance of chilli running.
> 
> 
> I managed to set VLAN2 on Coova and use an  an AP with SSID guest on
> VLAN 2, I also managed to get the DHCP IP address on VLAN2 from Coova.
> great. Now i need some help on how do i run several instances of Coova
> which would display a different hotspotlogin.cgi file based on
> different VLAN ID.
> 
> Regards
> Devinder
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 


-- 
support at ibh.de                              Tel. +49 351 477 77 30
www.ibh.de                                  Fax  +49 351 477 77 39

-----------------------------------------------------------------------
Dipl.-Ing. Thomas Liske
Netzwerk- und System-Design


IBH IT-Service GmbH                         Amtsgericht Dresden
Gostritzer Str. 61-63                       HRB 13626
D-01217 Dresden                             GF: Prof. Dr. Thomas Horn
Germany                                     VAT DE182302907
-----------------------------------------------------------------------
Ihr Partner f?r: LAN, WAN IP-Quality, Security, VoIP, SAN, Backup, USV
-----------------------------------------------------------------------
        professioneller IT-Service - kompetent und zuverl?ssig
-----------------------------------------------------------------------

From wichert at wiggy.net  Wed Nov 18 08:43:09 2009
From: wichert at wiggy.net (Wichert Akkerman)
Date: Wed, 18 Nov 2009 09:43:09 +0100
Subject: [Chilli] Multiple Instances of Coova
In-Reply-To: <4B03B0B2.70009@ibh.de>
References: <6bdd03c50911172307i200e7a74m70f5f2dd47bb4d6c@mail.gmail.com>
	<4B03B0B2.70009@ibh.de>
Message-ID: <4B03B39D.5040006@wiggy.net>

On 11/18/09 09:30 , Thomas Liske wrote:
> Hi,
>
> here are my experience on using coova-chilli 1.0.14-1 with different vlans:
>
> Devinder Singh wrote:
>> Hello,
>>
>> I have a situation where i need to run multiple instances of Coova on
>> a PC. For example each time i run an instance of Coova i want to use a
>> different config file. How can i assign coova to use different config
>> file when it runs as multiple instance.
>
> I'd the same problem here and managed it by customizing the init.d
> script to support multiple configuration files. I'd to use different
> uamuiports on each instance, since chilli opens the port listening on
> IP_ANY - so the second instance could not open the port and did refused
> starting.

Same here. I also simplified things by removing all logic to assemble 
various small files into a configuration file as well. The whole 
configuration file is still very simple, so I did not see the point of 
generating it.

>> /etc/init.d/chilli start --conf/palette/conf2 --ieee8021q
>
> What does/should the --ieee8021q parameter do?

VLAN tagging support. Personally I do that outside of chilli using the 
standard Linux tools.

Wichert.

From david at coova.com  Wed Nov 18 08:44:48 2009
From: david at coova.com (David Bird)
Date: Wed, 18 Nov 2009 09:44:48 +0100
Subject: [Chilli] Multiple Instances of Coova
In-Reply-To: <4B03B0B2.70009@ibh.de>
References: <6bdd03c50911172307i200e7a74m70f5f2dd47bb4d6c@mail.gmail.com>
	<4B03B0B2.70009@ibh.de>
Message-ID: <1258533888.4109.30.camel@david-laptop>

If you are wanting to run chilli on different VLANs on the same
interface, then you can have chilli do this directly (with only one
instance) using --ieee8021q option. All redirects will go to the same
captive portal, but you do have the vlan=# query string param to help
device which UI. 

David


On Wed, 2009-11-18 at 09:30 +0100, Thomas Liske wrote:
> Hi,
> 
> here are my experience on using coova-chilli 1.0.14-1 with different vlans:
> 
> Devinder Singh wrote:
> > Hello,
> > 
> > I have a situation where i need to run multiple instances of Coova on
> > a PC. For example each time i run an instance of Coova i want to use a
> > different config file. How can i assign coova to use different config
> > file when it runs as multiple instance.
> 
> I'd the same problem here and managed it by customizing the init.d 
> script to support multiple configuration files. I'd to use different 
> uamuiports on each instance, since chilli opens the port listening on 
> IP_ANY - so the second instance could not open the port and did refused 
> starting.
> 
> > Each instance users would get a different login page. i suppose i need
> > to use VLAN also to differentiate the network.
> > 
> > I managed to create VLAN2 and able to view the hotspotlogin.cgi file
> > when i ran the following command
> 
> I'd use the 802.1Q feature of the linux kernel (using the vlan package 
> on Debian). I use a software bridge between the ethernet vlan device and 
> chilli - using the ethernet vlan device directly should IMHO also work 
> out of the box.
> 
> > /etc/init.d/chilli start --conf/palette/conf2 --ieee8021q
> 
> What does/should the --ieee8021q parameter do?
> 
> 
> Regards,
> Thomas
> 
> > but i cant seem to start another instance of chilli when i type the
> > above command
> > 
> > ps aux | grep chilli only shows one instance of chilli running.
> > 
> > 
> > I managed to set VLAN2 on Coova and use an  an AP with SSID guest on
> > VLAN 2, I also managed to get the DHCP IP address on VLAN2 from Coova.
> > great. Now i need some help on how do i run several instances of Coova
> > which would display a different hotspotlogin.cgi file based on
> > different VLAN ID.
> > 
> > Regards
> > Devinder
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> > 
> 
> 



From david at coova.com  Wed Nov 18 08:47:52 2009
From: david at coova.com (David Bird)
Date: Wed, 18 Nov 2009 09:47:52 +0100
Subject: [Chilli] Multiple Instances of Coova
In-Reply-To: <1258533888.4109.30.camel@david-laptop>
References: <6bdd03c50911172307i200e7a74m70f5f2dd47bb4d6c@mail.gmail.com>
	<4B03B0B2.70009@ibh.de>  <1258533888.4109.30.camel@david-laptop>
Message-ID: <1258534072.4109.32.camel@david-laptop>

Btw, you'd want to use something like --tcpmss 1450 with ieee8021q since
an MTU of 1500 can't be maintained with the extra header length. 

On Wed, 2009-11-18 at 09:44 +0100, David Bird wrote:
> If you are wanting to run chilli on different VLANs on the same
> interface, then you can have chilli do this directly (with only one
> instance) using --ieee8021q option. All redirects will go to the same
> captive portal, but you do have the vlan=# query string param to help
> device which UI. 
> 
> David
> 
> 
> On Wed, 2009-11-18 at 09:30 +0100, Thomas Liske wrote:
> > Hi,
> > 
> > here are my experience on using coova-chilli 1.0.14-1 with different vlans:
> > 
> > Devinder Singh wrote:
> > > Hello,
> > > 
> > > I have a situation where i need to run multiple instances of Coova on
> > > a PC. For example each time i run an instance of Coova i want to use a
> > > different config file. How can i assign coova to use different config
> > > file when it runs as multiple instance.
> > 
> > I'd the same problem here and managed it by customizing the init.d 
> > script to support multiple configuration files. I'd to use different 
> > uamuiports on each instance, since chilli opens the port listening on 
> > IP_ANY - so the second instance could not open the port and did refused 
> > starting.
> > 
> > > Each instance users would get a different login page. i suppose i need
> > > to use VLAN also to differentiate the network.
> > > 
> > > I managed to create VLAN2 and able to view the hotspotlogin.cgi file
> > > when i ran the following command
> > 
> > I'd use the 802.1Q feature of the linux kernel (using the vlan package 
> > on Debian). I use a software bridge between the ethernet vlan device and 
> > chilli - using the ethernet vlan device directly should IMHO also work 
> > out of the box.
> > 
> > > /etc/init.d/chilli start --conf/palette/conf2 --ieee8021q
> > 
> > What does/should the --ieee8021q parameter do?
> > 
> > 
> > Regards,
> > Thomas
> > 
> > > but i cant seem to start another instance of chilli when i type the
> > > above command
> > > 
> > > ps aux | grep chilli only shows one instance of chilli running.
> > > 
> > > 
> > > I managed to set VLAN2 on Coova and use an  an AP with SSID guest on
> > > VLAN 2, I also managed to get the DHCP IP address on VLAN2 from Coova.
> > > great. Now i need some help on how do i run several instances of Coova
> > > which would display a different hotspotlogin.cgi file based on
> > > different VLAN ID.
> > > 
> > > Regards
> > > Devinder
> > > _______________________________________________
> > > Chilli mailing list
> > > Chilli at coova.org
> > > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> > > 
> > 
> > 
> 
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From wichert at wiggy.net  Wed Nov 18 08:52:05 2009
From: wichert at wiggy.net (Wichert Akkerman)
Date: Wed, 18 Nov 2009 09:52:05 +0100
Subject: [Chilli] Multiple Instances of Coova
In-Reply-To: <1258534072.4109.32.camel@david-laptop>
References: <6bdd03c50911172307i200e7a74m70f5f2dd47bb4d6c@mail.gmail.com>	<4B03B0B2.70009@ibh.de>
	<1258533888.4109.30.camel@david-laptop>
	<1258534072.4109.32.camel@david-laptop>
Message-ID: <4B03B5B5.6090008@wiggy.net>

On 11/18/09 09:47 , David Bird wrote:
> Btw, you'd want to use something like --tcpmss 1450 with ieee8021q since
> an MTU of 1500 can't be maintained with the extra header length.

Or perhaps change the MTU of the ethernet interface to 1550 to 
accomodate the VLAN tag?

Wichert.


From david at coova.com  Wed Nov 18 09:07:17 2009
From: david at coova.com (David Bird)
Date: Wed, 18 Nov 2009 10:07:17 +0100
Subject: [Chilli] Multiple Instances of Coova
In-Reply-To: <4B03B5B5.6090008@wiggy.net>
References: <6bdd03c50911172307i200e7a74m70f5f2dd47bb4d6c@mail.gmail.com>
	<4B03B0B2.70009@ibh.de> <1258533888.4109.30.camel@david-laptop>
	<1258534072.4109.32.camel@david-laptop>  <4B03B5B5.6090008@wiggy.net>
Message-ID: <1258535237.4109.33.camel@david-laptop>

Sure... though, you still might run into fragmentation elsewhere in the
network..

On Wed, 2009-11-18 at 09:52 +0100, Wichert Akkerman wrote:
> On 11/18/09 09:47 , David Bird wrote:
> > Btw, you'd want to use something like --tcpmss 1450 with ieee8021q since
> > an MTU of 1500 can't be maintained with the extra header length.
> 
> Or perhaps change the MTU of the ethernet interface to 1550 to 
> accomodate the VLAN tag?
> 
> Wichert.
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From liske at ibh.de  Wed Nov 18 10:09:33 2009
From: liske at ibh.de (Thomas Liske)
Date: Wed, 18 Nov 2009 11:09:33 +0100
Subject: [Chilli] Multiple Instances of Coova
In-Reply-To: <1258535237.4109.33.camel@david-laptop>
References: <6bdd03c50911172307i200e7a74m70f5f2dd47bb4d6c@mail.gmail.com>	<4B03B0B2.70009@ibh.de>
	<1258533888.4109.30.camel@david-laptop>	<1258534072.4109.32.camel@david-laptop>
	<4B03B5B5.6090008@wiggy.net>
	<1258535237.4109.33.camel@david-laptop>
Message-ID: <4B03C7DD.7070804@ibh.de>

Hi,

802.1Q adds the vlan tagging outside the 1500 payload. If a switch is 
configured with a trunk port to a chilli host, the frames inside the 
vlans have a MTU of 1500. The problem on this approach is that chilli 
uses a ethernet port running in "access mode" (= no vlan support) from 
the kernel view and implements 802.1Q in userspace. To behave correctly 
chilli has to raise the MTU to support a max MTU of 1500 inside the 
vlans IMHO.


Regards,
Thomas


David Bird wrote:
> Sure... though, you still might run into fragmentation elsewhere in the
> network..
> 
> On Wed, 2009-11-18 at 09:52 +0100, Wichert Akkerman wrote:
>> On 11/18/09 09:47 , David Bird wrote:
>>> Btw, you'd want to use something like --tcpmss 1450 with ieee8021q since
>>> an MTU of 1500 can't be maintained with the extra header length.
>> Or perhaps change the MTU of the ethernet interface to 1550 to 
>> accomodate the VLAN tag?
>>
>> Wichert.
>>
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 


-- 
support at ibh.de                              Tel. +49 351 477 77 30
www.ibh.de                                  Fax  +49 351 477 77 39

-----------------------------------------------------------------------
Dipl.-Ing. Thomas Liske
Netzwerk- und System-Design


IBH IT-Service GmbH                         Amtsgericht Dresden
Gostritzer Str. 61-63                       HRB 13626
D-01217 Dresden                             GF: Prof. Dr. Thomas Horn
Germany                                     VAT DE182302907
-----------------------------------------------------------------------
Ihr Partner f?r: LAN, WAN IP-Quality, Security, VoIP, SAN, Backup, USV
-----------------------------------------------------------------------
        professioneller IT-Service - kompetent und zuverl?ssig
-----------------------------------------------------------------------

From wichert at wiggy.net  Wed Nov 18 10:35:23 2009
From: wichert at wiggy.net (Wichert Akkerman)
Date: Wed, 18 Nov 2009 11:35:23 +0100
Subject: [Chilli] Multiple Instances of Coova
In-Reply-To: <4B03C7DD.7070804@ibh.de>
References: <6bdd03c50911172307i200e7a74m70f5f2dd47bb4d6c@mail.gmail.com>	<4B03B0B2.70009@ibh.de>	<1258533888.4109.30.camel@david-laptop>	<1258534072.4109.32.camel@david-laptop>	<4B03B5B5.6090008@wiggy.net>	<1258535237.4109.33.camel@david-laptop>
	<4B03C7DD.7070804@ibh.de>
Message-ID: <4B03CDEB.3080404@wiggy.net>

On 11/18/09 11:09 , Thomas Liske wrote:
> Hi,
>
> 802.1Q adds the vlan tagging outside the 1500 payload. If a switch is
> configured with a trunk port to a chilli host, the frames inside the
> vlans have a MTU of 1500. The problem on this approach is that chilli
> uses a ethernet port running in "access mode" (= no vlan support) from
> the kernel view and implements 802.1Q in userspace. To behave correctly
> chilli has to raise the MTU to support a max MTU of 1500 inside the
> vlans IMHO.

Or use the kernel API to let the kernel handle VLANs. Linux does that 
fine, so there should not be a need to duplicate that in userspace.

FWIW I personally prefer multiple chilli instances so I can have 
different default limits and different UAMs for each VLAN.

Wichert.

From david at coova.com  Wed Nov 18 10:42:05 2009
From: david at coova.com (David Bird)
Date: Wed, 18 Nov 2009 11:42:05 +0100
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <7a50ad140911170027j76b9eb6ar6fc2af593406b938@mail.gmail.com>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<6bdd03c50911130054w408f164ah933b9de52beca5f8@mail.gmail.com>
	<4AFD45BE.6070405@gulfsat.mg> <1258112683.7348.81.camel@david-laptop>
	<4AFD4962.5080105@gulfsat.mg> <1258113600.7348.83.camel@david-laptop>
	<4AFD4BB8.4050007@gulfsat.mg>
	<7a50ad140911141603t2a19845cx40f5b9060910f616@mail.gmail.com>
	<4AFF9E6C.3030907@gulfsat.mg>
	<7a50ad140911151320s4a982e6ap33b364274a501567@mail.gmail.com>
	<7a50ad140911170027j76b9eb6ar6fc2af593406b938@mail.gmail.com>
Message-ID: <1258540925.4109.37.camel@david-laptop>

00:56:05.710233 IP (tos 0xc0, ttl 64, id 60084, offset 0, flags [none],
proto ICMP (1), length 356)

    10.1.0.1 > 10.1.1.40: ICMP 10.1.0.1 udp port 67 unreachable, length
336

I believe this ICMP port unreachable, just (exactly) before the DHCP Ack
is likely the issue. What interface is your "dhcpif" ? Does it have an
IP address while chilli is running? You might try to ensure the kernel
doesn't process these requests, with iptables -I INPUT -i <dhcpif>
--dport 67 -j DROP or similar. (don't worry about filtering the dhcpif
INPUT... chilli creates a RAW socket on the interface which sees packets
before iptables does). 

On Tue, 2009-11-17 at 10:27 +0200, ???????? ???????? wrote:
>  with verbose.
> 
> 2009/11/15 Rakotomandimby Mihamina <mihamina at gulfsat.mg>
> 
> 
>         11/15/2009 03:03 AM, ???????? ????????::
>         
>                 tcpdump    ipod touch.   don't work after release
>         
>         
>          --verbose
>         
>         
>         
>         -- 
>              Architecte Informatique chez Blueline/Gulfsat:
>           Administration Systeme, Recherche & Developpement
>                                           +261 33 11 207 36
>         _______________________________________________
>         Chilli mailing list
>         Chilli at coova.org
>         http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>         
> 
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From adamanov at gmail.com  Wed Nov 18 11:00:15 2009
From: adamanov at gmail.com (=?UTF-8?B?0JLRj9GH0LXRgdC70LDQsiDQkNC00LDQvNCw0L3QvtCy?=)
Date: Wed, 18 Nov 2009 13:00:15 +0200
Subject: [Chilli] Hotspot Login on Mobile Phones
In-Reply-To: <1258540925.4109.37.camel@david-laptop>
References: <6bdd03c50911101949w2d5c02d1o1f69e17c40671ab1@mail.gmail.com>
	<1258112683.7348.81.camel@david-laptop> <4AFD4962.5080105@gulfsat.mg>
	<1258113600.7348.83.camel@david-laptop> <4AFD4BB8.4050007@gulfsat.mg>
	<7a50ad140911141603t2a19845cx40f5b9060910f616@mail.gmail.com>
	<4AFF9E6C.3030907@gulfsat.mg>
	<7a50ad140911151320s4a982e6ap33b364274a501567@mail.gmail.com>
	<7a50ad140911170027j76b9eb6ar6fc2af593406b938@mail.gmail.com>
	<1258540925.4109.37.camel@david-laptop>
Message-ID: <7a50ad140911180300k1a085166n6591f4d49b7186d5@mail.gmail.com>

interface ath0, without ip address configured before chilli start.

2009/11/18 David Bird <david at coova.com>

> 00:56:05.710233 IP (tos 0xc0, ttl 64, id 60084, offset 0, flags [none],
> proto ICMP (1), length 356)
>
>     10.1.0.1 > 10.1.1.40: ICMP 10.1.0.1 udp port 67 unreachable, length
> 336
>
> I believe this ICMP port unreachable, just (exactly) before the DHCP Ack
> is likely the issue. What interface is your "dhcpif" ? Does it have an
> IP address while chilli is running? You might try to ensure the kernel
> doesn't process these requests, with iptables -I INPUT -i <dhcpif>
> --dport 67 -j DROP or similar. (don't worry about filtering the dhcpif
> INPUT... chilli creates a RAW socket on the interface which sees packets
> before iptables does).
>
> On Tue, 2009-11-17 at 10:27 +0200, ???????? ???????? wrote:
> >  with verbose.
> >
> > 2009/11/15 Rakotomandimby Mihamina <mihamina at gulfsat.mg>
> >
> >
> >         11/15/2009 03:03 AM, ???????? ????????::
> >
> >                 tcpdump    ipod touch.   don't work after release
> >
> >
> >          --verbose
> >
> >
> >
> >         --
> >              Architecte Informatique chez Blueline/Gulfsat:
> >           Administration Systeme, Recherche & Developpement
> >                                           +261 33 11 207 36
> >         _______________________________________________
> >         Chilli mailing list
> >         Chilli at coova.org
> >         http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >
> >
> >
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>
>


-- 
__________________________
Adamanov Vyacheslav
87500, Ukraine, Mariupol,
st. Apatova 136?
mob: +38 (067) 621 32 61
email: adamanov at gmail.com
www: http://hl.ua
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091118/6b268f8f/attachment.htm>

From david at coova.com  Wed Nov 18 18:29:26 2009
From: david at coova.com (David Bird)
Date: Wed, 18 Nov 2009 19:29:26 +0100
Subject: [Chilli] subversion
Message-ID: <1258568966.4109.39.camel@david-laptop>

Committed changes to subversion... including the use of libtool 2 (you
will likely need to use "sh bootstrap2" to reconfigure). 


From fmacedo at cpd.ufrgs.br  Thu Nov 19 16:25:15 2009
From: fmacedo at cpd.ufrgs.br (Fernando Dutra Fagundes Macedo)
Date: Thu, 19 Nov 2009 14:25:15 -0200
Subject: [Chilli] SSL on Chili
In-Reply-To: <25D4D9AF49D1CC499C48BDEA79E7B73303AA4897@DEUTERIO.ad.ufrgs.br>
References: <25D4D9AF49D1CC499C48BDEA79E7B73303AA4897@DEUTERIO.ad.ufrgs.br>
Message-ID: <25D4D9AF49D1CC499C48BDEA79E7B73303AA4DEE@DEUTERIO.ad.ufrgs.br>

I think that I wasn't enough clear describing the problem in the last
message. I'll try to explain this issue with more details:

The problem happens When coova chilli is configured to work with ssl and
a client tries to connect to a http server (port 80). In this
sittuation, coova redirects the connection to port 3990 which is working
with ssl. Although, the client have made a request to connect to a http
server, not https. So, the ssl negotiation fails, the client didn't
connect properly and presents a blank page to the user.

We have been trying to solve this issue but we hadn't any good ideas
until now. The best solution we thought was to redirect the connection
to apache and after do a http redirection from http to https and then
return back the connection to coova.

The scenario now is like this:
1. http request to http://www.abcdefgh.com
2. coova redirects to port 3990 with ssl
3. ssl negotiation fails

And we want coova to work like this:
1. http request to http://www.abcdefgh.com
2. coova redirects to apache port 80
3. apache makes a http to https redirection to coova
4. coova receives https connection on port 3990 and the ssl negotiation
succeeds

Could someone help us or give us some directions on how to modify the
code to solve this problem?

 

Regards,

Fernando Macedo

 

De: chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] Em nome
de Fernando Dutra Fagundes Macedo
Enviada: quinta-feira, 12 de novembro de 2009 12:51
Para: chilli at coova.org
Assunto: [Chilli] SSL on Chili

 

Hi,

 

When using ssl on chilli, the first page that a user must open must be
HTTPS because chilli will respond only connections over ssl. How can I
accept the two types of redirection (80 and 443) when using ssl?

 

Regards,

Fernando

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091119/49795539/attachment.htm>

From jmeiring at amobia.com  Thu Nov 19 20:24:00 2009
From: jmeiring at amobia.com (Johan Meiring)
Date: Thu, 19 Nov 2009 22:24:00 +0200
Subject: [Chilli] SSL on Chili
In-Reply-To: <25D4D9AF49D1CC499C48BDEA79E7B73303AA4DEE@DEUTERIO.ad.ufrgs.br>
References: <25D4D9AF49D1CC499C48BDEA79E7B73303AA4897@DEUTERIO.ad.ufrgs.br>
	<25D4D9AF49D1CC499C48BDEA79E7B73303AA4DEE@DEUTERIO.ad.ufrgs.br>
Message-ID: <4B05A960.3070501@amobia.com>

Fernando Dutra Fagundes Macedo wrote:
> I think that I wasn't enough clear describing the problem in the last 
> message. I'll try to explain this issue with more details:
> 
> The problem happens When coova chilli is configured to work with ssl and 
> a client tries to connect to a http server (port 80). In this 
> sittuation, coova redirects the connection to port 3990 which is working 
> with ssl. Although, the client have made a request to connect to a http 
> server, not https. So, the ssl negotiation fails, the client didn't 
> connect properly and presents a blank page to the user.
> 
> We have been trying to solve this issue but we hadn't any good ideas 
> until now. The best solution we thought was to redirect the connection 
> to apache and after do a http redirection from http to https and then 
> return back the connection to coova.
> 

Why are you (or is) chilli using ssl.  There is no point, as chilli only 
redirects to the UAM page agian, which may be SSL without issues....

-- 


Johan Meiring
Amobia Communications
Tel: (0861) AMOBIA / (0861) 266242
Fax: (0861) AMOFAX / (0861) 266329


From mail.gery at gmail.com  Thu Nov 19 20:33:00 2009
From: mail.gery at gmail.com (Gergely Kiss)
Date: Thu, 19 Nov 2009 21:33:00 +0100
Subject: [Chilli] SSL on Chili
In-Reply-To: <25D4D9AF49D1CC499C48BDEA79E7B73303AA4DEE@DEUTERIO.ad.ufrgs.br>
References: <25D4D9AF49D1CC499C48BDEA79E7B73303AA4897@DEUTERIO.ad.ufrgs.br>
	<25D4D9AF49D1CC499C48BDEA79E7B73303AA4DEE@DEUTERIO.ad.ufrgs.br>
Message-ID: <f1cd8c6d0911191233r6ffa398ao1e9c14fdb2f736f2@mail.gmail.com>

Here is my idea: let's redirect all HTTPS requests to a HTTPS-enabled
Apache server which will then point the browser to the login screen
(HTTP) via the UrlRewrite module. For normal HTTP requests, Chilli
should do the trick by itself. For example, create an iptables rule
like this:

iptables -t nat -I PREROUTING -p tcp --dport 443 -j DNAT --to 192.168.1.1:443

where 192.168.1.1 is the IP of your Apache server. The server catches
the request and after the SSL tunnel has been established, it can
redirect the browser to any other URL. After a successful login, you
create a rule that resolves the redirection rule for the client:

iptables -t nat -I PREROUTING -s <client IP> -p tcp --dport 443 -j ACCEPT

You can achieve this by using the --conup and --condown parameters of
the chilli daemon. The client IP address can be easily determined,
because Chilli exports a couple of useful environment variables just
before running the script. Therefore, you need only a single command:

#!/bin/sh

if [ -n "$FRAMED_IP_ADDRESS" ] ; then
  iptables -t nat -I PREROUTING -s ${FRAMED_IP_ADDRESS} -p tcp --dport
443 -j ACCEPT
fi

For the logout event, use the following script:

#!/bin/sh
if [ -n "$FRAMED_IP_ADDRESS" ] ; then
  iptables -t nat -D PREROUTING -s ${FRAMED_IP_ADDRESS} -p tcp --dport
443 -j ACCEPT
fi

I'm not able to test this right now, but theoretically it should solve
the issue.

Regards
George

Ps.: hopefully this is an acceptable solution for you, as I'm not 100%
sure that I understood your problem correctly.

2009/11/19 Fernando Dutra Fagundes Macedo <fmacedo at cpd.ufrgs.br>:
> I think that I wasn't enough clear describing the problem in the last
> message. I'll try to explain this issue with more details:
>
> The problem happens When coova chilli is configured to work with ssl and a
> client tries to connect to a http server (port 80). In this sittuation,
> coova redirects the connection to port 3990 which is working with ssl.
> Although, the client have made a request to connect to a http server, not
> https. So, the ssl negotiation fails, the client didn't connect properly and
> presents a blank page to the user.
>
> We have been trying to solve this issue but we hadn't any good ideas until
> now. The best solution we thought was to redirect the connection to apache
> and after do a http redirection from http to https and then return back the
> connection to coova.
>
> The scenario now is like this:
> 1. http request to http://www.abcdefgh.com
> 2. coova redirects to port 3990 with ssl
> 3. ssl negotiation fails
>
> And we want coova to work like this:
> 1. http request to http://www.abcdefgh.com
> 2. coova redirects to apache port 80
> 3. apache makes a http to https redirection to coova
> 4. coova receives https connection on port 3990 and the ssl negotiation
> succeeds
>
> Could someone help us or give us some directions on how to modify the code
> to solve this problem?
>
>
>
> Regards,
>
> Fernando Macedo
>
>
>
> De: chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] Em nome de
> Fernando Dutra Fagundes Macedo
> Enviada: quinta-feira, 12 de novembro de 2009 12:51
> Para: chilli at coova.org
> Assunto: [Chilli] SSL on Chili
>
>
>
> Hi,
>
>
>
> When using ssl on chilli, the first page that a user must open must be HTTPS
> because chilli will respond only connections over ssl. How can I accept the
> two types of redirection (80 and 443) when using ssl?
>
>
>
> Regards,
>
> Fernando
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>

From wichert at wiggy.net  Thu Nov 19 21:06:57 2009
From: wichert at wiggy.net (Wichert Akkerman)
Date: Thu, 19 Nov 2009 22:06:57 +0100
Subject: [Chilli] SSL on Chili
In-Reply-To: <f1cd8c6d0911191233r6ffa398ao1e9c14fdb2f736f2@mail.gmail.com>
References: <25D4D9AF49D1CC499C48BDEA79E7B73303AA4897@DEUTERIO.ad.ufrgs.br>	<25D4D9AF49D1CC499C48BDEA79E7B73303AA4DEE@DEUTERIO.ad.ufrgs.br>
	<f1cd8c6d0911191233r6ffa398ao1e9c14fdb2f736f2@mail.gmail.com>
Message-ID: <4B05B371.4050707@wiggy.net>

On 11/19/09 21:33 , Gergely Kiss wrote:
> Here is my idea: let's redirect all HTTPS requests to a HTTPS-enabled
> Apache server which will then point the browser to the login screen
> (HTTP) via the UrlRewrite module.

The problem with this is SSL certs: every single https request will go 
to your server, which will not have a valid SSL cert for the requested 
page. Which means users will always get a nasty security warning.

Wichert.


From mail.gery at gmail.com  Thu Nov 19 22:52:17 2009
From: mail.gery at gmail.com (Gergely Kiss)
Date: Thu, 19 Nov 2009 23:52:17 +0100
Subject: [Chilli] SSL on Chili
In-Reply-To: <4B05B371.4050707@wiggy.net>
References: <25D4D9AF49D1CC499C48BDEA79E7B73303AA4897@DEUTERIO.ad.ufrgs.br>
	<25D4D9AF49D1CC499C48BDEA79E7B73303AA4DEE@DEUTERIO.ad.ufrgs.br>
	<f1cd8c6d0911191233r6ffa398ao1e9c14fdb2f736f2@mail.gmail.com>
	<4B05B371.4050707@wiggy.net>
Message-ID: <f1cd8c6d0911191452k1dd59701h5f13d92f6d99b87a@mail.gmail.com>

Yes, you are right. It seems to be a hard nut, but I still have some ideas:

1. Give the certificate to users and ask them to install it (not much
preferred for installations used by hundreds of subscribers).

2. Reject HTTPS requests and tell the users somehow that they must log
in to browse the web (can be printed on the login card). HTTP requests
can still be redirected to the login page.

3. Just tell the users, that it's normal if they see a warning before
logging in - it's not an elegant method, but for small networks, it
should be adequate.

4. Grant the browsing of HTTPS sites, but only with a limited
bandwidth and by displaying a message to the user that he/she should
log in to browse at full speed (it's a silly and overcomplicated
solution, isn't it?).

5. Buy a formally signed certificate and use it with Apache - and the
warning message will disappear.

Could there be any other methods which can be taken in account? Maybe
a Joker solution?

2009/11/19 Wichert Akkerman <wichert at wiggy.net>:
> On 11/19/09 21:33 , Gergely Kiss wrote:
>>
>> Here is my idea: let's redirect all HTTPS requests to a HTTPS-enabled
>> Apache server which will then point the browser to the login screen
>> (HTTP) via the UrlRewrite module.
>
> The problem with this is SSL certs: every single https request will go to
> your server, which will not have a valid SSL cert for the requested page.
> Which means users will always get a nasty security warning.
>
> Wichert.
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>

From mail.gery at gmail.com  Thu Nov 19 22:56:05 2009
From: mail.gery at gmail.com (Gergely Kiss)
Date: Thu, 19 Nov 2009 23:56:05 +0100
Subject: [Chilli] SSL on Chili
In-Reply-To: <f1cd8c6d0911191452k1dd59701h5f13d92f6d99b87a@mail.gmail.com>
References: <25D4D9AF49D1CC499C48BDEA79E7B73303AA4897@DEUTERIO.ad.ufrgs.br>
	<25D4D9AF49D1CC499C48BDEA79E7B73303AA4DEE@DEUTERIO.ad.ufrgs.br>
	<f1cd8c6d0911191233r6ffa398ao1e9c14fdb2f736f2@mail.gmail.com>
	<4B05B371.4050707@wiggy.net>
	<f1cd8c6d0911191452k1dd59701h5f13d92f6d99b87a@mail.gmail.com>
Message-ID: <f1cd8c6d0911191456m3f3abd93sbb123f9417e2cf09@mail.gmail.com>

Ah, sorry, I've misunderstood something... It's pointless in this case
to buy a commercial certificate, therefore solution 1 and 5 aren't
solutions in this case.

2009/11/19 Gergely Kiss <mail.gery at gmail.com>:
> Yes, you are right. It seems to be a hard nut, but I still have some ideas:
>
> 1. Give the certificate to users and ask them to install it (not much
> preferred for installations used by hundreds of subscribers).
>
> 2. Reject HTTPS requests and tell the users somehow that they must log
> in to browse the web (can be printed on the login card). HTTP requests
> can still be redirected to the login page.
>
> 3. Just tell the users, that it's normal if they see a warning before
> logging in - it's not an elegant method, but for small networks, it
> should be adequate.
>
> 4. Grant the browsing of HTTPS sites, but only with a limited
> bandwidth and by displaying a message to the user that he/she should
> log in to browse at full speed (it's a silly and overcomplicated
> solution, isn't it?).
>
> 5. Buy a formally signed certificate and use it with Apache - and the
> warning message will disappear.
>
> Could there be any other methods which can be taken in account? Maybe
> a Joker solution?
>
> 2009/11/19 Wichert Akkerman <wichert at wiggy.net>:
>> On 11/19/09 21:33 , Gergely Kiss wrote:
>>>
>>> Here is my idea: let's redirect all HTTPS requests to a HTTPS-enabled
>>> Apache server which will then point the browser to the login screen
>>> (HTTP) via the UrlRewrite module.
>>
>> The problem with this is SSL certs: every single https request will go to
>> your server, which will not have a valid SSL cert for the requested page.
>> Which means users will always get a nasty security warning.
>>
>> Wichert.
>>
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>
>

From david at coova.com  Fri Nov 20 05:30:53 2009
From: david at coova.com (David Bird)
Date: Fri, 20 Nov 2009 06:30:53 +0100
Subject: [Chilli] SSL on Chili
In-Reply-To: <f1cd8c6d0911191456m3f3abd93sbb123f9417e2cf09@mail.gmail.com>
References: <25D4D9AF49D1CC499C48BDEA79E7B73303AA4897@DEUTERIO.ad.ufrgs.br>
	<25D4D9AF49D1CC499C48BDEA79E7B73303AA4DEE@DEUTERIO.ad.ufrgs.br>
	<f1cd8c6d0911191233r6ffa398ao1e9c14fdb2f736f2@mail.gmail.com>
	<4B05B371.4050707@wiggy.net>
	<f1cd8c6d0911191452k1dd59701h5f13d92f6d99b87a@mail.gmail.com>
	<f1cd8c6d0911191456m3f3abd93sbb123f9417e2cf09@mail.gmail.com>
Message-ID: <1258695053.4288.3.camel@david-laptop>

Indeed, the issue with hijacking SSL is that you will always get the
security violation. There is absolutely no way around this - even with
commercial certificates, you, of course, will get an SSL violation
because of the domain name mismatch. 

However, if you still want to hijack SSL (and some access controllers do
this, even with the security violation), then you can do it with chilli.
Here is how:

- Build with --with-openssl

- Run with:
      --sslkeyfile=STRING       SSL private key file in PEM format
      --sslcertfile=STRING      SSL certificate file in PEM format

David


On Thu, 2009-11-19 at 23:56 +0100, Gergely Kiss wrote:
> Ah, sorry, I've misunderstood something... It's pointless in this case
> to buy a commercial certificate, therefore solution 1 and 5 aren't
> solutions in this case.
> 
> 2009/11/19 Gergely Kiss <mail.gery at gmail.com>:
> > Yes, you are right. It seems to be a hard nut, but I still have some ideas:
> >
> > 1. Give the certificate to users and ask them to install it (not much
> > preferred for installations used by hundreds of subscribers).
> >
> > 2. Reject HTTPS requests and tell the users somehow that they must log
> > in to browse the web (can be printed on the login card). HTTP requests
> > can still be redirected to the login page.
> >
> > 3. Just tell the users, that it's normal if they see a warning before
> > logging in - it's not an elegant method, but for small networks, it
> > should be adequate.
> >
> > 4. Grant the browsing of HTTPS sites, but only with a limited
> > bandwidth and by displaying a message to the user that he/she should
> > log in to browse at full speed (it's a silly and overcomplicated
> > solution, isn't it?).
> >
> > 5. Buy a formally signed certificate and use it with Apache - and the
> > warning message will disappear.
> >
> > Could there be any other methods which can be taken in account? Maybe
> > a Joker solution?
> >
> > 2009/11/19 Wichert Akkerman <wichert at wiggy.net>:
> >> On 11/19/09 21:33 , Gergely Kiss wrote:
> >>>
> >>> Here is my idea: let's redirect all HTTPS requests to a HTTPS-enabled
> >>> Apache server which will then point the browser to the login screen
> >>> (HTTP) via the UrlRewrite module.
> >>
> >> The problem with this is SSL certs: every single https request will go to
> >> your server, which will not have a valid SSL cert for the requested page.
> >> Which means users will always get a nasty security warning.
> >>
> >> Wichert.
> >>
> >> _______________________________________________
> >> Chilli mailing list
> >> Chilli at coova.org
> >> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>
> >
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From david at coova.com  Fri Nov 20 05:39:43 2009
From: david at coova.com (David Bird)
Date: Fri, 20 Nov 2009 06:39:43 +0100
Subject: [Chilli] SSL on Chili
In-Reply-To: <25D4D9AF49D1CC499C48BDEA79E7B73303AA4DEE@DEUTERIO.ad.ufrgs.br>
References: <25D4D9AF49D1CC499C48BDEA79E7B73303AA4897@DEUTERIO.ad.ufrgs.br>
	<25D4D9AF49D1CC499C48BDEA79E7B73303AA4DEE@DEUTERIO.ad.ufrgs.br>
Message-ID: <1258695583.4288.9.camel@david-laptop>

Hi,


> 
> The scenario now is like this:
> 1. http request to http://www.abcdefgh.com
> 2. coova redirects to port 3990 with ssl
> 3. ssl negotiation fails
> 

Stop. If you are running with SSL on port 3990, then all you need to do
is adjust your uamserver URL to be https:// instead of http://

> And we want coova to work like this:
> 1. http request to http://www.abcdefgh.com
> 2. coova redirects to apache port 80
> 3. apache makes a http to https redirection to coova
> 4. coova receives https connection on port 3990 and the ssl
> negotiation succeeds
> 
> Could someone help us or give us some directions on how to modify the
> code to solve this problem?
> 

There is no need for apache.

David



From mail.gery at gmail.com  Fri Nov 20 11:49:51 2009
From: mail.gery at gmail.com (Gergely Kiss)
Date: Fri, 20 Nov 2009 12:49:51 +0100
Subject: [Chilli]  VLAN Support
In-Reply-To: <f1cd8c6d0911190920i6594c399qae162c01cf225fae@mail.gmail.com>
References: <6bdd03c50911120115u733f2236p945e20e5e9cf42e8@mail.gmail.com>
	<f1cd8c6d0911120422g1d85a29dwb1742df6af35ab5d@mail.gmail.com>
	<6bdd03c50911162300g5a629d8i4a7756625540cca9@mail.gmail.com>
	<f1cd8c6d0911170100q4b819211jca89bc1ce3c5dedd@mail.gmail.com>
	<6bdd03c50911171917x4d6bc728n55327eea1e49091d@mail.gmail.com>
	<f1cd8c6d0911180025p647ae616je4e381cd34d67ce8@mail.gmail.com>
	<6bdd03c50911190058x6d9a1e56qfba6e15da624e4a8@mail.gmail.com>
	<f1cd8c6d0911190115k35cb75f0kc13f7987bd57dced@mail.gmail.com>
	<6bdd03c50911190157k45913cfi5f9f4c2ff3f48972@mail.gmail.com>
	<f1cd8c6d0911190920i6594c399qae162c01cf225fae@mail.gmail.com>
Message-ID: <f1cd8c6d0911200349y69f52429u9c44adc3c1445635@mail.gmail.com>

Could the attached scripts be integrated to the source somehow? A lot
of users are wanting to run Chilli on multiple interfaces and probably
these scripts are suitable for most situations.

George

---------- Forwarded message ----------
From: Gergely Kiss <mail.gery at gmail.com>
Date: 2009/11/19
Subject: Re: [Chilli] VLAN Support
To: Devinder Singh <devinder at palettemm.com>


I'm happy to announce that I managed to run 4 separate Chilli
instances at the same time. :)
Two files had to be modified to achieve this, /etc/init.d/chilli (the
init script) and /etc/chilli/functions.

You can find the files attached to this message as a gzip archive.

Just copy the files over the existing ones (create backup first!),
then open /etc/init.d/chilli in a text editor. You have two options
now:

1. Leave the variable CONFDIR empty, so that only one instance will be
run by the script, using the default config file in
/etc/chilli/config.
2. Enter a path to the CONFDIR variable. In this case, the script will
try to create separate instances for each files in the directory you
specify here.

There's another variable, which can be used to pass arguments to all
instances (CHILLI_PARAMS). Anything you specify here will be passed to
all of the chilli processes.

Let's see an example:

You have the directory "/etc/chilli/configs" in your system, and it
contains 3 config files (their syntax should be identical to the
default configuration). To be able to run multiple instances, make
sure that the following variables are unique in each configuration:

HS_LANIF -> which is the subscriber interface?
HS_NETWORK -> which subnet to use for DHCP?
HS_UAMLISTEN -> which IP to listen for auth requests?
HS_UAMPORT -> which port to use for auth requests?
HS_UAMUIPORT -> the port of the internal webserver

Once you are done with configuring, open the init script
(/etc/init.d/chilli) in a text editor and set:

CONFDIR=/etc/chilli/configs

Save the script and start up Chilli using the well-known command:

# /etc/init.d/chilli start

After this, a separate chilli process will be run for each
configuration and they will be completely independent on each other
(just make sure you specify different directories for the HS_WWWDIR
setting).

Now, check if all the required instances are running with "ps waux |
grep chilli".
You should see one running chilli process per configuration.

To test the script, I've included some sample configs in the archive,
just copy them to /etc/chilli/configs and you are done. Also, make
sure you create VLAN interfaces with IDs of 2, 3, 4, 5 to use my
config files for testing.

That's all! I hope, you can make use of what I made.

Regards
George
-------------- next part --------------
A non-text attachment was scrubbed...
Name: chilli_multi.tar.gz
Type: application/x-gzip
Size: 7335 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091120/2ff9f68a/attachment.bin>

From david at coova.com  Fri Nov 20 13:37:12 2009
From: david at coova.com (David Bird)
Date: Fri, 20 Nov 2009 14:37:12 +0100
Subject: [Chilli] CoovaChilli on Ubiquiti (AirOS)
Message-ID: <1258724232.4288.29.camel@david-laptop>

http://www.coova.org/node/3685

enjoy,

David


From david at coova.com  Fri Nov 20 14:49:47 2009
From: david at coova.com (David Bird)
Date: Fri, 20 Nov 2009 15:49:47 +0100
Subject: [Chilli] VLAN Support
In-Reply-To: <f1cd8c6d0911200349y69f52429u9c44adc3c1445635@mail.gmail.com>
References: <6bdd03c50911120115u733f2236p945e20e5e9cf42e8@mail.gmail.com>
	<f1cd8c6d0911120422g1d85a29dwb1742df6af35ab5d@mail.gmail.com>
	<6bdd03c50911162300g5a629d8i4a7756625540cca9@mail.gmail.com>
	<f1cd8c6d0911170100q4b819211jca89bc1ce3c5dedd@mail.gmail.com>
	<6bdd03c50911171917x4d6bc728n55327eea1e49091d@mail.gmail.com>
	<f1cd8c6d0911180025p647ae616je4e381cd34d67ce8@mail.gmail.com>
	<6bdd03c50911190058x6d9a1e56qfba6e15da624e4a8@mail.gmail.com>
	<f1cd8c6d0911190115k35cb75f0kc13f7987bd57dced@mail.gmail.com>
	<6bdd03c50911190157k45913cfi5f9f4c2ff3f48972@mail.gmail.com>
	<f1cd8c6d0911190920i6594c399qae162c01cf225fae@mail.gmail.com>
	<f1cd8c6d0911200349y69f52429u9c44adc3c1445635@mail.gmail.com>
Message-ID: <1258728587.4288.33.camel@david-laptop>

Hi Gergely,

Thanks... though, it would be better to give things as patches instead
of complete files. Also, some of those files are generated by using .in
files. Regardless, I think this is largely a local implementation issue
- and certainly not a standard use case (nobody wants to run multiple
instances on a router, for instance). 

Best regards,
David


On Fri, 2009-11-20 at 12:49 +0100, Gergely Kiss wrote:
> Could the attached scripts be integrated to the source somehow? A lot
> of users are wanting to run Chilli on multiple interfaces and probably
> these scripts are suitable for most situations.
> 
> George
> 
> ---------- Forwarded message ----------
> From: Gergely Kiss <mail.gery at gmail.com>
> Date: 2009/11/19
> Subject: Re: [Chilli] VLAN Support
> To: Devinder Singh <devinder at palettemm.com>
> 
> 
> I'm happy to announce that I managed to run 4 separate Chilli
> instances at the same time. :)
> Two files had to be modified to achieve this, /etc/init.d/chilli (the
> init script) and /etc/chilli/functions.
> 
> You can find the files attached to this message as a gzip archive.
> 
> Just copy the files over the existing ones (create backup first!),
> then open /etc/init.d/chilli in a text editor. You have two options
> now:
> 
> 1. Leave the variable CONFDIR empty, so that only one instance will be
> run by the script, using the default config file in
> /etc/chilli/config.
> 2. Enter a path to the CONFDIR variable. In this case, the script will
> try to create separate instances for each files in the directory you
> specify here.
> 
> There's another variable, which can be used to pass arguments to all
> instances (CHILLI_PARAMS). Anything you specify here will be passed to
> all of the chilli processes.
> 
> Let's see an example:
> 
> You have the directory "/etc/chilli/configs" in your system, and it
> contains 3 config files (their syntax should be identical to the
> default configuration). To be able to run multiple instances, make
> sure that the following variables are unique in each configuration:
> 
> HS_LANIF -> which is the subscriber interface?
> HS_NETWORK -> which subnet to use for DHCP?
> HS_UAMLISTEN -> which IP to listen for auth requests?
> HS_UAMPORT -> which port to use for auth requests?
> HS_UAMUIPORT -> the port of the internal webserver
> 
> Once you are done with configuring, open the init script
> (/etc/init.d/chilli) in a text editor and set:
> 
> CONFDIR=/etc/chilli/configs
> 
> Save the script and start up Chilli using the well-known command:
> 
> # /etc/init.d/chilli start
> 
> After this, a separate chilli process will be run for each
> configuration and they will be completely independent on each other
> (just make sure you specify different directories for the HS_WWWDIR
> setting).
> 
> Now, check if all the required instances are running with "ps waux |
> grep chilli".
> You should see one running chilli process per configuration.
> 
> To test the script, I've included some sample configs in the archive,
> just copy them to /etc/chilli/configs and you are done. Also, make
> sure you create VLAN interfaces with IDs of 2, 3, 4, 5 to use my
> config files for testing.
> 
> That's all! I hope, you can make use of what I made.
> 
> Regards
> George
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From fahd.kasri at weblib.eu  Fri Nov 20 17:40:44 2009
From: fahd.kasri at weblib.eu (Fahd Kasri)
Date: Fri, 20 Nov 2009 18:40:44 +0100
Subject: [Chilli]  Chilli running on a dedicated server
Message-ID: <ddc827aa0911200940jc3a5148qb5206106d3abdea9@mail.gmail.com>

Hi all,

* Is it possible to have CoovaChilli running on a dedicated server
instead of on the Wifi router?

* Is there a release date for 1.0.15?

Thanks.

--
Fahd Kasri

From liran.tal at gmail.com  Fri Nov 20 18:24:05 2009
From: liran.tal at gmail.com (Liran Tal)
Date: Fri, 20 Nov 2009 20:24:05 +0200
Subject: [Chilli] Chilli running on a dedicated server
In-Reply-To: <ddc827aa0911200940jc3a5148qb5206106d3abdea9@mail.gmail.com>
References: <ddc827aa0911200940jc3a5148qb5206106d3abdea9@mail.gmail.com>
Message-ID: <81237f640911201024q347901efu81cb6fb52d5037f8@mail.gmail.com>

Yes it's possible.



On Fri, Nov 20, 2009 at 7:40 PM, Fahd Kasri <fahd.kasri at weblib.eu> wrote:

> Hi all,
>
> * Is it possible to have CoovaChilli running on a dedicated server
> instead of on the Wifi router?
>
> * Is there a release date for 1.0.15?
>
> Thanks.
>
> --
> Fahd Kasri
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>



-- 
-- 
Sincerely, Liran Tal

Founder and CTO
Linux and Open Source
Enginx - http://enginx.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091120/06dac801/attachment.htm>

From liran.tal at gmail.com  Fri Nov 20 18:45:48 2009
From: liran.tal at gmail.com (Liran Tal)
Date: Fri, 20 Nov 2009 20:45:48 +0200
Subject: [Chilli] Chilli running on a dedicated server
In-Reply-To: <ddc827aa0911201040q1df35ce4jb65b191dc38d9601@mail.gmail.com>
References: <ddc827aa0911200940jc3a5148qb5206106d3abdea9@mail.gmail.com> 
	<81237f640911201024q347901efu81cb6fb52d5037f8@mail.gmail.com> 
	<ddc827aa0911201040q1df35ce4jb65b191dc38d9601@mail.gmail.com>
Message-ID: <81237f640911201045t5a00a8a3s7003e452b497d2d0@mail.gmail.com>

That's already what I said - it's possible.
The installation is straight-forward. Download the package whether source or
binaries
for your linux distribution, install and configure the config file as you
wish.

You'll probably want to put 2 interface cards on that box as well.

If you're using Ubuntu then I think in one of their wiki pages there's a
howto available.


Regards,
Liran.



On Fri, Nov 20, 2009 at 8:40 PM, Fahd Kasri <fahd.kasri at weblib.eu> wrote:

> Hi Liran,
>
> Thanks for your response. I have several Linksys WRT54GL routers
> running Coova. Since Coova takes a lot of memory, I was wondering if I
> could run Coova on my dedicated server and keep my hotspot
> functionality (the router would have the same behaviour, only Coova
> would be running on the server). Is this possible? Do you know of any
> documentation on this type of configuration?
>
> I was thinking about having a VPN between my router and my server to do
> this.
>
> Thanks in advance for any help you may provide.
>
> Cheers.
>
> Fahd
>
> 2009/11/20 Liran Tal <liran.tal at gmail.com>:
> > Yes it's possible.
> >
> >
> >
> > On Fri, Nov 20, 2009 at 7:40 PM, Fahd Kasri <fahd.kasri at weblib.eu>
> wrote:
> >>
> >> Hi all,
> >>
> >> * Is it possible to have CoovaChilli running on a dedicated server
> >> instead of on the Wifi router?
> >>
> >> * Is there a release date for 1.0.15?
> >>
> >> Thanks.
> >>
> >> --
> >> Fahd Kasri
> >> _______________________________________________
> >> Chilli mailing list
> >> Chilli at coova.org
> >> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >
> >
> >
> > --
> > --
> > Sincerely, Liran Tal
> >
> > Founder and CTO
> > Linux and Open Source
> > Enginx - http://enginx.com
> >
>
>
>
> --
> Fahd Kasri
> Directeur Technique
> Weblib
> http://www.weblib.eu
>



-- 
-- 
Sincerely, Liran Tal

Founder and CTO
Linux and Open Source
Enginx - http://enginx.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091120/4e010690/attachment.htm>

From seth.lesky at gmail.com  Fri Nov 20 19:50:38 2009
From: seth.lesky at gmail.com (Seth Lesky)
Date: Fri, 20 Nov 2009 12:50:38 -0700
Subject: [Chilli] Revision: 243 Compile Error
Message-ID: <56A9ACF9-E0BF-4306-938E-C856C8A0E881@gmail.com>


Greetings,

Issue #1

Revision 242 of CoovaChilli compiled cleanly for me with:
./configure --enable-chilliproxy --with-curl

When I try to compile with r243 I get the following error:
make[2]: *** No rule to make target `chilli_redir.1.in', needed by  
`chilli_redir.1'.  Stop.
make[2]: Leaving directory `/tmp/coova-chilli/doc'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/tmp/coova-chilli'
make: *** [all] Error 2

Issue #2

Ultimately, I'm trying to get CoovaChilli Proxy  (http://www.coova.org/CoovaChilli/Proxy 
) to cross compile for my Linksys WRT54GL router that is currently  
running the latest CoovaAP firmware (whiterussian). The ultimate goal  
will be to have a Drupal Captive Portal (http://www.coova.org/CoovaChilli/Drupal 
) doing AAA over HTTP.

I've hit other snags (primarily due to my own lack of experience) and  
am planning on documenting the the process (setting up buildroot,  
compiling dependencies, etc) for my own clarification as well as to  
assist others who may be trying to do something similar. Would this be  
a reasonable thing to do on this list?

Cheers.
-Seth

From adamanov at gmail.com  Fri Nov 20 22:40:45 2009
From: adamanov at gmail.com (=?UTF-8?B?0JLRj9GH0LXRgdC70LDQsiDQkNC00LDQvNCw0L3QvtCy?=)
Date: Sat, 21 Nov 2009 00:40:45 +0200
Subject: [Chilli] Revision: 243 Compile Error
In-Reply-To: <56A9ACF9-E0BF-4306-938E-C856C8A0E881@gmail.com>
References: <56A9ACF9-E0BF-4306-938E-C856C8A0E881@gmail.com>
Message-ID: <7a50ad140911201440l335b6bb0s5a1130dd94fc57fb@mail.gmail.com>

No files are two files in the folder doc.

I compiled coova 1.0.15-pre1 in openwrt 8.09.1 on mikrotik rh411, at low
network load, departs segment fault or kernel panik.

2009/11/20 Seth Lesky <seth.lesky at gmail.com>

>
> Greetings,
>
> Issue #1
>
> Revision 242 of CoovaChilli compiled cleanly for me with:
> ./configure --enable-chilliproxy --with-curl
>
> When I try to compile with r243 I get the following error:
> make[2]: *** No rule to make target `chilli_redir.1.in', needed by
> `chilli_redir.1'.  Stop.
> make[2]: Leaving directory `/tmp/coova-chilli/doc'
> make[1]: *** [all-recursive] Error 1
> make[1]: Leaving directory `/tmp/coova-chilli'
> make: *** [all] Error 2
>
> Issue #2
>
> Ultimately, I'm trying to get CoovaChilli Proxy  (
> http://www.coova.org/CoovaChilli/Proxy) to cross compile for my Linksys
> WRT54GL router that is currently running the latest CoovaAP firmware
> (whiterussian). The ultimate goal will be to have a Drupal Captive Portal (
> http://www.coova.org/CoovaChilli/Drupal) doing AAA over HTTP.
>
> I've hit other snags (primarily due to my own lack of experience) and am
> planning on documenting the the process (setting up buildroot, compiling
> dependencies, etc) for my own clarification as well as to assist others who
> may be trying to do something similar. Would this be a reasonable thing to
> do on this list?
>
> Cheers.
> -Seth
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>



-- 
__________________________
Adamanov Vyacheslav
87500, Ukraine, Mariupol,
st. Apatova 136?
mob: +38 (067) 621 32 61
email: adamanov at gmail.com
www: http://hl.ua
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091121/391b3c44/attachment-0001.htm>

From david at coova.com  Sat Nov 21 05:00:52 2009
From: david at coova.com (David Bird)
Date: Sat, 21 Nov 2009 06:00:52 +0100
Subject: [Chilli] Revision: 243 Compile Error
In-Reply-To: <56A9ACF9-E0BF-4306-938E-C856C8A0E881@gmail.com>
References: <56A9ACF9-E0BF-4306-938E-C856C8A0E881@gmail.com>
Message-ID: <1258779652.4288.43.camel@david-laptop>

I added the missing files, sorry. 

For building chilli with the proxy support, you don't have to use
--use-curl (if you do, make sure you have libcurl built in your
buildroot). Also know that the Drupal hotspot modules hasn't been fitted
with the HTTP AAA API yet... 

David


On Fri, 2009-11-20 at 12:50 -0700, Seth Lesky wrote:
> Greetings,
> 
> Issue #1
> 
> Revision 242 of CoovaChilli compiled cleanly for me with:
> ./configure --enable-chilliproxy --with-curl
> 
> When I try to compile with r243 I get the following error:
> make[2]: *** No rule to make target `chilli_redir.1.in', needed by  
> `chilli_redir.1'.  Stop.
> make[2]: Leaving directory `/tmp/coova-chilli/doc'
> make[1]: *** [all-recursive] Error 1
> make[1]: Leaving directory `/tmp/coova-chilli'
> make: *** [all] Error 2
> 
> Issue #2
> 
> Ultimately, I'm trying to get CoovaChilli Proxy  (http://www.coova.org/CoovaChilli/Proxy 
> ) to cross compile for my Linksys WRT54GL router that is currently  
> running the latest CoovaAP firmware (whiterussian). The ultimate goal  
> will be to have a Drupal Captive Portal (http://www.coova.org/CoovaChilli/Drupal 
> ) doing AAA over HTTP.
> 
> I've hit other snags (primarily due to my own lack of experience) and  
> am planning on documenting the the process (setting up buildroot,  
> compiling dependencies, etc) for my own clarification as well as to  
> assist others who may be trying to do something similar. Would this be  
> a reasonable thing to do on this list?
> 
> Cheers.
> -Seth
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From adamanov at gmail.com  Sun Nov 22 15:34:46 2009
From: adamanov at gmail.com (=?UTF-8?B?0JLRj9GH0LXRgdC70LDQsiDQkNC00LDQvNCw0L3QvtCy?=)
Date: Sun, 22 Nov 2009 17:34:46 +0200
Subject: [Chilli] Revision: 243 Compile Error
In-Reply-To: <1258779652.4288.43.camel@david-laptop>
References: <56A9ACF9-E0BF-4306-938E-C856C8A0E881@gmail.com>
	<1258779652.4288.43.camel@david-laptop>
Message-ID: <7a50ad140911220734t69a3af2g1cb749ad7620a164@mail.gmail.com>

compiled rev 247 but chilli  shutdown with errors

or    PCI error 1 at PCI addr 0x1042181c

or    Reserved instruction in kernel code[#1]:

or   Unhandled kernel unaligned access[#1]: 0% [pdflush]
      Cpu 0


2009/11/21 David Bird <david at coova.com>

> I added the missing files, sorry.
>
> For building chilli with the proxy support, you don't have to use
> --use-curl (if you do, make sure you have libcurl built in your
> buildroot). Also know that the Drupal hotspot modules hasn't been fitted
> with the HTTP AAA API yet...
>
> David
>
>
> On Fri, 2009-11-20 at 12:50 -0700, Seth Lesky wrote:
> > Greetings,
> >
> > Issue #1
> >
> > Revision 242 of CoovaChilli compiled cleanly for me with:
> > ./configure --enable-chilliproxy --with-curl
> >
> > When I try to compile with r243 I get the following error:
> > make[2]: *** No rule to make target `chilli_redir.1.in', needed by
> > `chilli_redir.1'.  Stop.
> > make[2]: Leaving directory `/tmp/coova-chilli/doc'
> > make[1]: *** [all-recursive] Error 1
> > make[1]: Leaving directory `/tmp/coova-chilli'
> > make: *** [all] Error 2
> >
> > Issue #2
> >
> > Ultimately, I'm trying to get CoovaChilli Proxy  (
> http://www.coova.org/CoovaChilli/Proxy
> > ) to cross compile for my Linksys WRT54GL router that is currently
> > running the latest CoovaAP firmware (whiterussian). The ultimate goal
> > will be to have a Drupal Captive Portal (
> http://www.coova.org/CoovaChilli/Drupal
> > ) doing AAA over HTTP.
> >
> > I've hit other snags (primarily due to my own lack of experience) and
> > am planning on documenting the the process (setting up buildroot,
> > compiling dependencies, etc) for my own clarification as well as to
> > assist others who may be trying to do something similar. Would this be
> > a reasonable thing to do on this list?
> >
> > Cheers.
> > -Seth
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>



-- 
__________________________
Adamanov Vyacheslav
87500, Ukraine, Mariupol,
st. Apatova 136?
mob: +38 (067) 621 32 61
email: adamanov at gmail.com
www: http://hl.ua
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091122/1d348a98/attachment.htm>

From david at coova.com  Sun Nov 22 18:01:25 2009
From: david at coova.com (David Bird)
Date: Sun, 22 Nov 2009 19:01:25 +0100
Subject: [Chilli] Revision: 243 Compile Error
In-Reply-To: <7a50ad140911220734t69a3af2g1cb749ad7620a164@mail.gmail.com>
References: <56A9ACF9-E0BF-4306-938E-C856C8A0E881@gmail.com>
	<1258779652.4288.43.camel@david-laptop>
	<7a50ad140911220734t69a3af2g1cb749ad7620a164@mail.gmail.com>
Message-ID: <1258912885.4049.23.camel@david-laptop>

What options are you running with? Any other info from logs/output? 


On Sun, 2009-11-22 at 17:34 +0200, ???????? ???????? wrote:
> compiled rev 247 but chilli  shutdown with errors
> 
> or    PCI error 1 at PCI addr 0x1042181c
> 
> or    Reserved instruction in kernel code[#1]:
> 
> or   Unhandled kernel unaligned access[#1]: 0% [pdflush]
>       Cpu 0
> 
> 
> 2009/11/21 David Bird <david at coova.com>
>         I added the missing files, sorry.
>         
>         For building chilli with the proxy support, you don't have to
>         use
>         --use-curl (if you do, make sure you have libcurl built in
>         your
>         buildroot). Also know that the Drupal hotspot modules hasn't
>         been fitted
>         with the HTTP AAA API yet...
>         
>         David
>         
>         
>         
>         On Fri, 2009-11-20 at 12:50 -0700, Seth Lesky wrote:
>         > Greetings,
>         >
>         > Issue #1
>         >
>         > Revision 242 of CoovaChilli compiled cleanly for me with:
>         > ./configure --enable-chilliproxy --with-curl
>         >
>         > When I try to compile with r243 I get the following error:
>         > make[2]: *** No rule to make target `chilli_redir.1.in',
>         needed by
>         > `chilli_redir.1'.  Stop.
>         > make[2]: Leaving directory `/tmp/coova-chilli/doc'
>         > make[1]: *** [all-recursive] Error 1
>         > make[1]: Leaving directory `/tmp/coova-chilli'
>         > make: *** [all] Error 2
>         >
>         > Issue #2
>         >
>         > Ultimately, I'm trying to get CoovaChilli Proxy
>          (http://www.coova.org/CoovaChilli/Proxy
>         > ) to cross compile for my Linksys WRT54GL router that is
>         currently
>         > running the latest CoovaAP firmware (whiterussian). The
>         ultimate goal
>         > will be to have a Drupal Captive Portal
>         (http://www.coova.org/CoovaChilli/Drupal
>         > ) doing AAA over HTTP.
>         >
>         > I've hit other snags (primarily due to my own lack of
>         experience) and
>         > am planning on documenting the the process (setting up
>         buildroot,
>         > compiling dependencies, etc) for my own clarification as
>         well as to
>         > assist others who may be trying to do something similar.
>         Would this be
>         > a reasonable thing to do on this list?
>         >
>         > Cheers.
>         > -Seth
>         > _______________________________________________
>         > Chilli mailing list
>         > Chilli at coova.org
>         > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>         
>         
>         _______________________________________________
>         Chilli mailing list
>         Chilli at coova.org
>         http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>         
> 
> 
> 
> -- 
> __________________________
> Adamanov Vyacheslav
> 87500, Ukraine, Mariupol,
> st. Apatova 136?
> mob: +38 (067) 621 32 61
> email: adamanov at gmail.com
> www: http://hl.ua
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From adamanov at gmail.com  Sun Nov 22 19:11:15 2009
From: adamanov at gmail.com (=?UTF-8?B?0JLRj9GH0LXRgdC70LDQsiDQkNC00LDQvNCw0L3QvtCy?=)
Date: Sun, 22 Nov 2009 21:11:15 +0200
Subject: [Chilli] Revision: 243 Compile Error
In-Reply-To: <1258912885.4049.23.camel@david-laptop>
References: <56A9ACF9-E0BF-4306-938E-C856C8A0E881@gmail.com>
	<1258779652.4288.43.camel@david-laptop>
	<7a50ad140911220734t69a3af2g1cb749ad7620a164@mail.gmail.com>
	<1258912885.4049.23.camel@david-laptop>
Message-ID: <7a50ad140911221111o7e46ac76t6283d4a39ce4e4d5@mail.gmail.com>

Linux version 2.6.26.8 (adamanov at kioto) (gcc version 4.1.2) #1 Sun Nov 22
16:42:28 EET 2009
prom: fw_arg0=00000007, fw_arg1=a0861c00, fw_arg2=00000000, fw_arg3=00000000
MyLoader: sysp=4c2f30d7, boardp=4c2f30d7, parts=4c2f30d7
console [early0] enabled
CPU revision is: 00019374 (MIPS 24K)
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Entering add_active_range(0, 0, 8192) 0 entries of 256 used



redir.c: 2378: 0 (Debug) Calling redir_getstate()
redir.c: 2404: 0 (Debug) Receiving HTTP Request
dhcp.c: 2289: 0 (Debug) dhcp_decaps: src=00:1d:4f:ac:36:dd
dst=00:0c:42:61:44:a2 prot=0800 len=54
dhcp.c: 2102: 0 (Debug) DHCP packet received
dhcp.c: 2134: 0 (Debug) Address found
tun.c: 688: 0 (Debug) tun_decaps(idx=0, len=40)
dhcp.c: 2469: 0 (Debug) adding 14 to IP frame
dhcp.c: 2289: 0 (Debug) dhcp_decaps: src=00:1d:4f:ac:36:dd
dst=00:0c:42:61:44:a2 prot=0800 lUnhandled kernel unaligned access[#1]:
Cpu 0
$ 0   : 00000000 80290000 202d2d5e 00000000
$ 4   : 202d2d4e 8009489c 00000000 00000010
$ 8   : 8c850010 00000000 8025dd18 00000005
$12   : 00000000 00989680 8025dd70 00000000
$16   : 8025dd18 8c850010 80261bb8 00000000
$20   : 7fffffff ffffffff 0000013c 32aa06bd
$24   : 00000000 800776b8
$28   : 8025c000 8025dcf0 7fd9e480 80061420
Hi    : 00000003





2009/11/22 David Bird <david at coova.com>

> What options are you running with? Any other info from logs/output?
>
>
> On Sun, 2009-11-22 at 17:34 +0200, ???????? ???????? wrote:
> > compiled rev 247 but chilli  shutdown with errors
> >
> > or    PCI error 1 at PCI addr 0x1042181c
> >
> > or    Reserved instruction in kernel code[#1]:
> >
> > or   Unhandled kernel unaligned access[#1]: 0% [pdflush]
> >       Cpu 0
> >
> >
> > 2009/11/21 David Bird <david at coova.com>
> >         I added the missing files, sorry.
> >
> >         For building chilli with the proxy support, you don't have to
> >         use
> >         --use-curl (if you do, make sure you have libcurl built in
> >         your
> >         buildroot). Also know that the Drupal hotspot modules hasn't
> >         been fitted
> >         with the HTTP AAA API yet...
> >
> >         David
> >
> >
> >
> >         On Fri, 2009-11-20 at 12:50 -0700, Seth Lesky wrote:
> >         > Greetings,
> >         >
> >         > Issue #1
> >         >
> >         > Revision 242 of CoovaChilli compiled cleanly for me with:
> >         > ./configure --enable-chilliproxy --with-curl
> >         >
> >         > When I try to compile with r243 I get the following error:
> >         > make[2]: *** No rule to make target `chilli_redir.1.in',
> >         needed by
> >         > `chilli_redir.1'.  Stop.
> >         > make[2]: Leaving directory `/tmp/coova-chilli/doc'
> >         > make[1]: *** [all-recursive] Error 1
> >         > make[1]: Leaving directory `/tmp/coova-chilli'
> >         > make: *** [all] Error 2
> >         >
> >         > Issue #2
> >         >
> >         > Ultimately, I'm trying to get CoovaChilli Proxy
> >          (http://www.coova.org/CoovaChilli/Proxy
> >         > ) to cross compile for my Linksys WRT54GL router that is
> >         currently
> >         > running the latest CoovaAP firmware (whiterussian). The
> >         ultimate goal
> >         > will be to have a Drupal Captive Portal
> >         (http://www.coova.org/CoovaChilli/Drupal
> >         > ) doing AAA over HTTP.
> >         >
> >         > I've hit other snags (primarily due to my own lack of
> >         experience) and
> >         > am planning on documenting the the process (setting up
> >         buildroot,
> >         > compiling dependencies, etc) for my own clarification as
> >         well as to
> >         > assist others who may be trying to do something similar.
> >         Would this be
> >         > a reasonable thing to do on this list?
> >         >
> >         > Cheers.
> >         > -Seth
> >         > _______________________________________________
> >         > Chilli mailing list
> >         > Chilli at coova.org
> >         > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >
> >
> >         _______________________________________________
> >         Chilli mailing list
> >         Chilli at coova.org
> >         http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >
> >
> >
> >
> > --
> > __________________________
> > Adamanov Vyacheslav
> > 87500, Ukraine, Mariupol,
> > st. Apatova 136?
> > mob: +38 (067) 621 32 61
> > email: adamanov at gmail.com
> > www: http://hl.ua
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>
>


-- 
__________________________
Adamanov Vyacheslav
87500, Ukraine, Mariupol,
st. Apatova 136?
mob: +38 (067) 621 32 61
email: adamanov at gmail.com
www: http://hl.ua
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091122/1fde9662/attachment-0001.htm>

From david at coova.com  Mon Nov 23 05:56:27 2009
From: david at coova.com (David Bird)
Date: Mon, 23 Nov 2009 06:56:27 +0100
Subject: [Chilli] Revision: 243 Compile Error
In-Reply-To: <7a50ad140911221111o7e46ac76t6283d4a39ce4e4d5@mail.gmail.com>
References: <56A9ACF9-E0BF-4306-938E-C856C8A0E881@gmail.com>
	<1258779652.4288.43.camel@david-laptop>
	<7a50ad140911220734t69a3af2g1cb749ad7620a164@mail.gmail.com>
	<1258912885.4049.23.camel@david-laptop>
	<7a50ad140911221111o7e46ac76t6283d4a39ce4e4d5@mail.gmail.com>
Message-ID: <1258955787.4053.2.camel@david-laptop>

Could you build a kernel with debugging info and try that? Also, what
options are you using with chilli?


On Sun, 2009-11-22 at 21:11 +0200, ???????? ???????? wrote:
> Linux version 2.6.26.8 (adamanov at kioto) (gcc version 4.1.2) #1 Sun Nov
> 22 16:42:28 EET 2009
> prom: fw_arg0=00000007, fw_arg1=a0861c00, fw_arg2=00000000,
> fw_arg3=00000000
> MyLoader: sysp=4c2f30d7, boardp=4c2f30d7, parts=4c2f30d7
> console [early0] enabled
> CPU revision is: 00019374 (MIPS 24K)
> Determined physical RAM map:
>  memory: 02000000 @ 00000000 (usable)
> Entering add_active_range(0, 0, 8192) 0 entries of 256 used
> 
> 
> 
> redir.c: 2378: 0 (Debug) Calling redir_getstate()
> redir.c: 2404: 0 (Debug) Receiving HTTP Request
> dhcp.c: 2289: 0 (Debug) dhcp_decaps: src=00:1d:4f:ac:36:dd
> dst=00:0c:42:61:44:a2 prot=0800 len=54
> dhcp.c: 2102: 0 (Debug) DHCP packet received
> dhcp.c: 2134: 0 (Debug) Address found
> tun.c: 688: 0 (Debug) tun_decaps(idx=0, len=40)
> dhcp.c: 2469: 0 (Debug) adding 14 to IP frame
> dhcp.c: 2289: 0 (Debug) dhcp_decaps: src=00:1d:4f:ac:36:dd
> dst=00:0c:42:61:44:a2 prot=0800 lUnhandled kernel unaligned
> access[#1]:
> Cpu 0
> $ 0   : 00000000 80290000 202d2d5e 00000000
> $ 4   : 202d2d4e 8009489c 00000000 00000010
> $ 8   : 8c850010 00000000 8025dd18 00000005
> $12   : 00000000 00989680 8025dd70 00000000
> $16   : 8025dd18 8c850010 80261bb8 00000000
> $20   : 7fffffff ffffffff 0000013c 32aa06bd
> $24   : 00000000 800776b8
> $28   : 8025c000 8025dcf0 7fd9e480 80061420
> Hi    : 00000003
> 
> 
> 
> 
> 
> 2009/11/22 David Bird <david at coova.com>
>         What options are you running with? Any other info from
>         logs/output?
>         
>         
>         
>         On Sun, 2009-11-22 at 17:34 +0200, ???????? ???????? wrote:
>         > compiled rev 247 but chilli  shutdown with errors
>         >
>         > or    PCI error 1 at PCI addr 0x1042181c
>         >
>         > or    Reserved instruction in kernel code[#1]:
>         >
>         > or   Unhandled kernel unaligned access[#1]: 0% [pdflush]
>         >       Cpu 0
>         >
>         >
>         > 2009/11/21 David Bird <david at coova.com>
>         >         I added the missing files, sorry.
>         >
>         >         For building chilli with the proxy support, you
>         don't have to
>         >         use
>         >         --use-curl (if you do, make sure you have libcurl
>         built in
>         >         your
>         >         buildroot). Also know that the Drupal hotspot
>         modules hasn't
>         >         been fitted
>         >         with the HTTP AAA API yet...
>         >
>         >         David
>         >
>         >
>         >
>         >         On Fri, 2009-11-20 at 12:50 -0700, Seth Lesky wrote:
>         >         > Greetings,
>         >         >
>         >         > Issue #1
>         >         >
>         >         > Revision 242 of CoovaChilli compiled cleanly for
>         me with:
>         >         > ./configure --enable-chilliproxy --with-curl
>         >         >
>         >         > When I try to compile with r243 I get the
>         following error:
>         >         > make[2]: *** No rule to make target
>         `chilli_redir.1.in',
>         >         needed by
>         >         > `chilli_redir.1'.  Stop.
>         >         > make[2]: Leaving directory `/tmp/coova-chilli/doc'
>         >         > make[1]: *** [all-recursive] Error 1
>         >         > make[1]: Leaving directory `/tmp/coova-chilli'
>         >         > make: *** [all] Error 2
>         >         >
>         >         > Issue #2
>         >         >
>         >         > Ultimately, I'm trying to get CoovaChilli Proxy
>         >          (http://www.coova.org/CoovaChilli/Proxy
>         >         > ) to cross compile for my Linksys WRT54GL router
>         that is
>         >         currently
>         >         > running the latest CoovaAP firmware
>         (whiterussian). The
>         >         ultimate goal
>         >         > will be to have a Drupal Captive Portal
>         >         (http://www.coova.org/CoovaChilli/Drupal
>         >         > ) doing AAA over HTTP.
>         >         >
>         >         > I've hit other snags (primarily due to my own lack
>         of
>         >         experience) and
>         >         > am planning on documenting the the process
>         (setting up
>         >         buildroot,
>         >         > compiling dependencies, etc) for my own
>         clarification as
>         >         well as to
>         >         > assist others who may be trying to do something
>         similar.
>         >         Would this be
>         >         > a reasonable thing to do on this list?
>         >         >
>         >         > Cheers.
>         >         > -Seth
>         >         > _______________________________________________
>         >         > Chilli mailing list
>         >         > Chilli at coova.org
>         >         >
>         http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>         >
>         >
>         >         _______________________________________________
>         >         Chilli mailing list
>         >         Chilli at coova.org
>         >
>         http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>         >
>         >
>         >
>         >
>         > --
>         > __________________________
>         > Adamanov Vyacheslav
>         > 87500, Ukraine, Mariupol,
>         > st. Apatova 136?
>         > mob: +38 (067) 621 32 61
>         > email: adamanov at gmail.com
>         > www: http://hl.ua
>         > _______________________________________________
>         > Chilli mailing list
>         > Chilli at coova.org
>         > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>         
>         
>         
> 
> 
> 
> -- 
> __________________________
> Adamanov Vyacheslav
> 87500, Ukraine, Mariupol,
> st. Apatova 136?
> mob: +38 (067) 621 32 61
> email: adamanov at gmail.com
> www: http://hl.ua



From fahd.kasri at weblib.eu  Mon Nov 23 13:10:28 2009
From: fahd.kasri at weblib.eu (Fahd Kasri)
Date: Mon, 23 Nov 2009 14:10:28 +0100
Subject: [Chilli] Chilli running on a dedicated server
In-Reply-To: <81237f640911201045t5a00a8a3s7003e452b497d2d0@mail.gmail.com>
References: <ddc827aa0911200940jc3a5148qb5206106d3abdea9@mail.gmail.com>
	<81237f640911201024q347901efu81cb6fb52d5037f8@mail.gmail.com>
	<ddc827aa0911201040q1df35ce4jb65b191dc38d9601@mail.gmail.com>
	<81237f640911201045t5a00a8a3s7003e452b497d2d0@mail.gmail.com>
Message-ID: <ddc827aa0911230510u486ef6a8xbd60a00ab63c914@mail.gmail.com>

Sorry, I wasn't clear.

I can only access my server with ssh (no physical acces). I want to
keep using my Linksys routers for my hotspots. Instead of running
Coova on each of the routers, I want to run it on my server. I know
it's possible to run Coova on any flavour of Linux. I'm just wondering
if it's possible, if it has been done before,
and what kind of performance I could get with this kind of configuration.

Thanks

2009/11/20 Liran Tal <liran.tal at gmail.com>
>
> That's already what I said - it's possible.
> The installation is straight-forward. Download the package whether source or binaries
> for your linux distribution, install and configure the config file as you wish.
>
> You'll probably want to put 2 interface cards on that box as well.
>
> If you're using Ubuntu then I think in one of their wiki pages there's a howto available.
>
>
> Regards,
> Liran.
>
>
>
> On Fri, Nov 20, 2009 at 8:40 PM, Fahd Kasri <fahd.kasri at weblib.eu> wrote:
>>
>> Hi Liran,
>>
>> Thanks for your response. I have several Linksys WRT54GL routers
>> running Coova. Since Coova takes a lot of memory, I was wondering if I
>> could run Coova on my dedicated server and keep my hotspot
>> functionality (the router would have the same behaviour, only Coova
>> would be running on the server). Is this possible? Do you know of any
>> documentation on this type of configuration?
>>
>> I was thinking about having a VPN between my router and my server to do this.
>>
>> Thanks in advance for any help you may provide.
>>
>> Cheers.
>>
>> Fahd
>>
>> 2009/11/20 Liran Tal <liran.tal at gmail.com>:
>> > Yes it's possible.
>> >
>> >
>> >
>> > On Fri, Nov 20, 2009 at 7:40 PM, Fahd Kasri <fahd.kasri at weblib.eu> wrote:
>> >>
>> >> Hi all,
>> >>
>> >> * Is it possible to have CoovaChilli running on a dedicated server
>> >> instead of on the Wifi router?
>> >>
>> >> * Is there a release date for 1.0.15?
>> >>
>> >> Thanks.
>> >>
>> >> --
>> >> Fahd Kasri
>> >> _______________________________________________
>> >> Chilli mailing list
>> >> Chilli at coova.org
>> >> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>> >
>> >
>> >
>> > --
>> > --
>> > Sincerely, Liran Tal
>> >
>> > Founder and CTO
>> > Linux and Open Source
>> > Enginx - http://enginx.com
>> >
>>
>>
>>
>> --
>> Fahd Kasri
>> Directeur Technique
>> Weblib
>> http://www.weblib.eu
>
>
>
> --
> --
> Sincerely, Liran Tal
>
> Founder and CTO
> Linux and Open Source
> Enginx - http://enginx.com



--
Fahd Kasri
Directeur Technique
Weblib
http://www.weblib.eu

From liske at ibh.de  Mon Nov 23 13:22:54 2009
From: liske at ibh.de (Thomas Liske)
Date: Mon, 23 Nov 2009 14:22:54 +0100
Subject: [Chilli] Chilli running on a dedicated server
In-Reply-To: <ddc827aa0911230510u486ef6a8xbd60a00ab63c914@mail.gmail.com>
References: <ddc827aa0911200940jc3a5148qb5206106d3abdea9@mail.gmail.com>	<81237f640911201024q347901efu81cb6fb52d5037f8@mail.gmail.com>	<ddc827aa0911201040q1df35ce4jb65b191dc38d9601@mail.gmail.com>	<81237f640911201045t5a00a8a3s7003e452b497d2d0@mail.gmail.com>
	<ddc827aa0911230510u486ef6a8xbd60a00ab63c914@mail.gmail.com>
Message-ID: <4B0A8CAE.3030703@ibh.de>

Hi,

Fahd Kasri wrote:
> Sorry, I wasn't clear.
> 
> I can only access my server with ssh (no physical acces). I want to
> keep using my Linksys routers for my hotspots. Instead of running
> Coova on each of the routers, I want to run it on my server. I know
> it's possible to run Coova on any flavour of Linux. I'm just wondering
> if it's possible, if it has been done before,
> and what kind of performance I could get with this kind of configuration.

of course it is possible. If've several dedicated servers serving 
hotspot access for a L2 cloud. If your APs have no L2 access to your 
server, you need some L2 tunneling between them.

I use vtun for this purpose to be able to debug my remote sites. Chilli 
listens on a software bridge, the bridge is connected to the hotspot 
ethernet port.

vtun runs in "ether" mode. If vtun has established a connection the tap 
interfaces is added to the software bridge on the server side. Other vpn 
software (openvpn, tinc, ...) can run in L2 mode, too.


HTH,
Thomas

> 2009/11/20 Liran Tal <liran.tal at gmail.com>
>> That's already what I said - it's possible.
>> The installation is straight-forward. Download the package whether source or binaries
>> for your linux distribution, install and configure the config file as you wish.
>>
>> You'll probably want to put 2 interface cards on that box as well.
>>
>> If you're using Ubuntu then I think in one of their wiki pages there's a howto available.
>>
>>
>> Regards,
>> Liran.
>>
>>
>>
>> On Fri, Nov 20, 2009 at 8:40 PM, Fahd Kasri <fahd.kasri at weblib.eu> wrote:
>>> Hi Liran,
>>>
>>> Thanks for your response. I have several Linksys WRT54GL routers
>>> running Coova. Since Coova takes a lot of memory, I was wondering if I
>>> could run Coova on my dedicated server and keep my hotspot
>>> functionality (the router would have the same behaviour, only Coova
>>> would be running on the server). Is this possible? Do you know of any
>>> documentation on this type of configuration?
>>>
>>> I was thinking about having a VPN between my router and my server to do this.
>>>
>>> Thanks in advance for any help you may provide.
>>>
>>> Cheers.
>>>
>>> Fahd
>>>
>>> 2009/11/20 Liran Tal <liran.tal at gmail.com>:
>>>> Yes it's possible.
>>>>
>>>>
>>>>
>>>> On Fri, Nov 20, 2009 at 7:40 PM, Fahd Kasri <fahd.kasri at weblib.eu> wrote:
>>>>> Hi all,
>>>>>
>>>>> * Is it possible to have CoovaChilli running on a dedicated server
>>>>> instead of on the Wifi router?
>>>>>
>>>>> * Is there a release date for 1.0.15?
>>>>>
>>>>> Thanks.
>>>>>
>>>>> --
>>>>> Fahd Kasri
>>>>> _______________________________________________
>>>>> Chilli mailing list
>>>>> Chilli at coova.org
>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>
>>>>
>>>> --
>>>> --
>>>> Sincerely, Liran Tal
>>>>
>>>> Founder and CTO
>>>> Linux and Open Source
>>>> Enginx - http://enginx.com
>>>>
>>>
>>>
>>> --
>>> Fahd Kasri
>>> Directeur Technique
>>> Weblib
>>> http://www.weblib.eu
>>
>>
>> --
>> --
>> Sincerely, Liran Tal
>>
>> Founder and CTO
>> Linux and Open Source
>> Enginx - http://enginx.com
> 
> 
> 
> --
> Fahd Kasri
> Directeur Technique
> Weblib
> http://www.weblib.eu
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 


-- 
support at ibh.de                              Tel. +49 351 477 77 30
www.ibh.de                                  Fax  +49 351 477 77 39

-----------------------------------------------------------------------
Dipl.-Ing. Thomas Liske
Netzwerk- und System-Design


IBH IT-Service GmbH                         Amtsgericht Dresden
Gostritzer Str. 61-63                       HRB 13626
D-01217 Dresden                             GF: Prof. Dr. Thomas Horn
Germany                                     VAT DE182302907
-----------------------------------------------------------------------
Ihr Partner f?r: LAN, WAN IP-Quality, Security, VoIP, SAN, Backup, USV
-----------------------------------------------------------------------
        professioneller IT-Service - kompetent und zuverl?ssig
-----------------------------------------------------------------------

From devinder at palettemm.com  Thu Nov 26 07:02:17 2009
From: devinder at palettemm.com (Devinder Singh)
Date: Thu, 26 Nov 2009 15:02:17 +0800
Subject: [Chilli] HS_UAMALLOW
Message-ID: <6bdd03c50911252302p6d08d74dv29d12fe88f2276a9@mail.gmail.com>

Hello,


How do i let users to go to certain web sites without allowing them to
login. I have set some web sites in HS_UAMALLOW but users cant access those
web sites. Do i need to enter IP address or can i just enter domain names. I
have placed yahoo.com here but I type on the address bar it recirects to the
login page.


Devinder



# -*- /bin/sh -*-
#

###
#   Local Network Configurations
#
HS_WANIF=eth0            # WAN Interface toward the Internet
HS_LANIF=eth1              # Subscriber Interface for client devices
HS_NETWORK=192.168.10.0
HS_NETMASK=255.255.255.0
HS_UAMLISTEN=192.168.10.1
HS_UAMPORT=3990            # HotSpot Port (on subscriber network)
# HS_DYNIP=
# HS_DYNIP_MASK=255.255.255.0
# HS_STATIP=
# HS_STATIP_MASK=255.255.255.0
# HS_DNS_DOMAIN=
HS_DNS1=203.121.65.30
HS_DNS2=203.121.65.39
#HS_DNS1=192.168.1.1
###
#   HotSpot settings for simple Captive Portal
#
HS_NASID=nas01
HS_UAMSECRET=uamsharedsecret
HS_RADIUS=203.121.4.51
HS_RADIUS2=192.168.1.164
HS_RADSECRET=testing123-1
HS_UAMALLOW=www.google.com,www.yahoo.com
#   Put entire domains in the walled-garden with DNS inspection
# HS_UAMDOMAINS=".paypal.com,.paypalobjects.com"
#   Optional initial redirect and RADIUS settings
# HS_SSID=<ssid>           # To send to the captive portal
# HS_NASMAC=<mac address>  # To explicitly set Called-Station-Id
HS_NASIP=192.168.1.110    # To explicitly set NAS-IP-Address

Regards,

Devinder Singh   |   R&D Manager
______________________________
Palette Multimedia Berhad (420056-K)
6 Floor, Unit 4,
KPMG Tower
8 First Avenue,
Bandar Utama,
47800 Petaling Jaya, Selangor
Malaysia

m. +60122248306
p.  +60377289880 Ext 502
f.   +60377281080
@ devinder at palettemm.com
www.palettemm.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091126/db9f622d/attachment.htm>

From gunther.mayer at googlemail.com  Sun Nov 29 13:34:32 2009
From: gunther.mayer at googlemail.com (Gunther Mayer)
Date: Sun, 29 Nov 2009 15:34:32 +0200
Subject: [Chilli] How to put uamport behind SSL?
Message-ID: <4B127868.6040001@gmail.com>

Hi guys,

I've been trying to enable clients to communicate to chilli's uamport 
over SSL for authentication. Our uamserver has been running with SSL 
from day one but the uamport access is currently still over ordinary 
http for lack of a better alternative. With newer browsers increasingly 
complaining about mixed content the time has come to ssl enable chilli's 
uamport as well (I know - we'll have to get a commercial certificate but 
that's OK).

But how?

At first I thought there's a simple solution: use matrixtunnel (or its 
successor xrelayd with xyssl/polarssl) in front of chilli, i.e. as a 
proxy to provide a "fake" SSL port for clients which is then forwarded 
to chilli's normal http uamport. I've got xrelayd installed and working 
but if I point my browser to

https://ua.m.lis.ten:8443/prelogin

I just get an empty page instead of the normal login page that I get 
when using the plain http://ua.m.lis.ten:uamport/prelogin (8443 is the 
port xrelayd is forwarding to chilli's uamport). I think that's because 
chilli only sees the http request as originating from the local machine 
instead of from the client and hence doesn't know what to do. Or am I 
doing something wrong here?

Then I saw the very recent openssl support that David put in trunk this 
month and thought perhaps that's the solution. However, latest svn 
(r249) doesn't even compile:

$ svn co http://dev.coova.org/svn/coova-chilli
$ ./bootstrap2 # ./bootstrap no longer works here :-(
$ ./configure --with-openssl
$ make
cd . && /bin/bash ./config.status config.h
config.status: creating config.h
config.status: config.h is unchanged
make  all-recursive
make[1]: Entering directory `/Coova/coova-chilli-1.0.15-pre-r249'
Making all in bstring
make[2]: Entering directory `/Coova/coova-chilli-1.0.15-pre-r249/bstring'
make[2]: Nothing to be done for `all'.
make[2]: Leaving directory `/Coova/coova-chilli-1.0.15-pre-r249/bstring'
Making all in src
make[2]: Entering directory `/Coova/coova-chilli-1.0.15-pre-r249/src'
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. 
-I..    -D_GNU_SOURCE -Wall -fno-builtin -fno-strict-aliasing -O2 
-fomit-frame-pointer -funroll-loops -pipe 
-DDEFCHILLICONF='"/usr/local/etc/chilli.conf"' 
-DDEFPIDFILE='"/usr/local/var/run/chilli.pid"' 
-DDEFSTATEDIR='"/usr/local/var/run"' 
-DDEFCMDSOCK='"/usr/local/var/run/chilli.sock"' 
-DSBINDIR='"/usr/local/sbin"' -I../bstring  -g -O2 -MT chilli.lo -MD -MP 
-MF .deps/chilli.Tpo -c -o chilli.lo chilli.c
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall 
-fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer 
-funroll-loops -pipe -DDEFCHILLICONF=\"/usr/local/etc/chilli.conf\" 
-DDEFPIDFILE=\"/usr/local/var/run/chilli.pid\" 
-DDEFSTATEDIR=\"/usr/local/var/run\" 
-DDEFCMDSOCK=\"/usr/local/var/run/chilli.sock\" 
-DSBINDIR=\"/usr/local/sbin\" -I../bstring -g -O2 -MT chilli.lo -MD -MP 
-MF .deps/chilli.Tpo -c chilli.c  -fPIC -DPIC -o .libs/chilli.o
*chilli.c: In function 'cb_redir_getstate':
chilli.c:1682: error: 'struct dhcp_conn_t' has no member named 'dnatport'
chilli.c:1683: error: 'struct dhcp_conn_t' has no member named 'dnatstate'
*chilli.c: In function 'config_radius_session':
chilli.c:2429: warning: passing argument 3 of 
'pass_throughs_from_string' from incompatible pointer type
garden.h:53: note: expected 'size_t *' but argument is of type 'uint32_t *'
chilli.c: In function 'cmdsock_accept':
chilli.c:3756: warning: passing argument 3 of 'accept' from incompatible 
pointer type
/usr/include/sys/socket.h:214: note: expected 'socklen_t * __restrict__' 
but argument is of type 'size_t *'
chilli.c: In function 'redir_msg':
chilli.c:3997: warning: passing argument 3 of 'accept' from incompatible 
pointer type
/usr/include/sys/socket.h:214: note: expected 'socklen_t * __restrict__' 
but argument is of type 'size_t *'
make[2]: *** [chilli.lo] Error 1
make[2]: Leaving directory `/Coova/coova-chilli-1.0.15-pre-r249/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/Coova/coova-chilli-1.0.15-pre-r249'
make: *** [all] Error 2

Now I'm really stuck. How do I achieve my goal?

Gunther
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091129/2be20062/attachment.htm>

From outbackdingo at gmail.com  Sun Nov 29 13:54:21 2009
From: outbackdingo at gmail.com (Outback Dingo)
Date: Sun, 29 Nov 2009 08:54:21 -0500
Subject: [Chilli] How to put uamport behind SSL?
In-Reply-To: <4B127868.6040001@gmail.com>
References: <4B127868.6040001@gmail.com>
Message-ID: <5635aa0d0911290554m6b32c392ua4ef9ad1c7aab829@mail.gmail.com>

it eould help if we knew what OS and version you were building on

On Sun, Nov 29, 2009 at 8:34 AM, Gunther Mayer <gunther.mayer at googlemail.com
> wrote:

>  Hi guys,
>
> I've been trying to enable clients to communicate to chilli's uamport over
> SSL for authentication. Our uamserver has been running with SSL from day one
> but the uamport access is currently still over ordinary http for lack of a
> better alternative. With newer browsers increasingly complaining about mixed
> content the time has come to ssl enable chilli's uamport as well (I know -
> we'll have to get a commercial certificate but that's OK).
>
> But how?
>
> At first I thought there's a simple solution: use matrixtunnel (or its
> successor xrelayd with xyssl/polarssl) in front of chilli, i.e. as a proxy
> to provide a "fake" SSL port for clients which is then forwarded to chilli's
> normal http uamport. I've got xrelayd installed and working but if I point
> my browser to
>
> https://ua.m.lis.ten:8443/prelogin
>
> I just get an empty page instead of the normal login page that I get when
> using the plain http://ua.m.lis.ten:uamport/prelogin (8443 is the port
> xrelayd is forwarding to chilli's uamport). I think that's because chilli
> only sees the http request as originating from the local machine instead of
> from the client and hence doesn't know what to do. Or am I doing something
> wrong here?
>
> Then I saw the very recent openssl support that David put in trunk this
> month and thought perhaps that's the solution. However, latest svn (r249)
> doesn't even compile:
>
> $ svn co http://dev.coova.org/svn/coova-chilli
> $ ./bootstrap2 # ./bootstrap no longer works here :-(
> $ ./configure --with-openssl
> $ make
> cd . && /bin/bash ./config.status config.h
> config.status: creating config.h
> config.status: config.h is unchanged
> make  all-recursive
> make[1]: Entering directory `/Coova/coova-chilli-1.0.15-pre-r249'
> Making all in bstring
> make[2]: Entering directory `/Coova/coova-chilli-1.0.15-pre-r249/bstring'
> make[2]: Nothing to be done for `all'.
> make[2]: Leaving directory `/Coova/coova-chilli-1.0.15-pre-r249/bstring'
> Making all in src
> make[2]: Entering directory `/Coova/coova-chilli-1.0.15-pre-r249/src'
> /bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.
> -I..    -D_GNU_SOURCE -Wall -fno-builtin -fno-strict-aliasing -O2
> -fomit-frame-pointer -funroll-loops -pipe
> -DDEFCHILLICONF='"/usr/local/etc/chilli.conf"'
> -DDEFPIDFILE='"/usr/local/var/run/chilli.pid"'
> -DDEFSTATEDIR='"/usr/local/var/run"'
> -DDEFCMDSOCK='"/usr/local/var/run/chilli.sock"'
> -DSBINDIR='"/usr/local/sbin"' -I../bstring  -g -O2 -MT chilli.lo -MD -MP -MF
> .deps/chilli.Tpo -c -o chilli.lo chilli.c
> libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall
> -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops
> -pipe -DDEFCHILLICONF=\"/usr/local/etc/chilli.conf\"
> -DDEFPIDFILE=\"/usr/local/var/run/chilli.pid\"
> -DDEFSTATEDIR=\"/usr/local/var/run\"
> -DDEFCMDSOCK=\"/usr/local/var/run/chilli.sock\"
> -DSBINDIR=\"/usr/local/sbin\" -I../bstring -g -O2 -MT chilli.lo -MD -MP -MF
> .deps/chilli.Tpo -c chilli.c  -fPIC -DPIC -o .libs/chilli.o
> *chilli.c: In function ?cb_redir_getstate?:
> chilli.c:1682: error: ?struct dhcp_conn_t? has no member named ?dnatport?
> chilli.c:1683: error: ?struct dhcp_conn_t? has no member named ?dnatstate?
> *chilli.c: In function ?config_radius_session?:
> chilli.c:2429: warning: passing argument 3 of ?pass_throughs_from_string?
> from incompatible pointer type
> garden.h:53: note: expected ?size_t *? but argument is of type ?uint32_t *?
> chilli.c: In function ?cmdsock_accept?:
> chilli.c:3756: warning: passing argument 3 of ?accept? from incompatible
> pointer type
> /usr/include/sys/socket.h:214: note: expected ?socklen_t * __restrict__?
> but argument is of type ?size_t *?
> chilli.c: In function ?redir_msg?:
> chilli.c:3997: warning: passing argument 3 of ?accept? from incompatible
> pointer type
> /usr/include/sys/socket.h:214: note: expected ?socklen_t * __restrict__?
> but argument is of type ?size_t *?
> make[2]: *** [chilli.lo] Error 1
> make[2]: Leaving directory `/Coova/coova-chilli-1.0.15-pre-r249/src'
> make[1]: *** [all-recursive] Error 1
> make[1]: Leaving directory `/Coova/coova-chilli-1.0.15-pre-r249'
> make: *** [all] Error 2
>
> Now I'm really stuck. How do I achieve my goal?
>
> Gunther
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091129/0aec9399/attachment.htm>

From david at coova.com  Sun Nov 29 19:36:44 2009
From: david at coova.com (David Bird)
Date: Sun, 29 Nov 2009 20:36:44 +0100
Subject: [Chilli] How to put uamport behind SSL?
In-Reply-To: <4B127868.6040001@gmail.com>
References: <4B127868.6040001@gmail.com>
Message-ID: <1259523404.3969.64.camel@david-laptop>

Fixed in rev 250. Though, it doesn't do what you outlined. It will
hijack port 443 and with security error redirect to the captive portal.
It doesn't do SSL on the UAM port. I suppose it is a straight forward
feature (perhaps for uamuiport leaving uamport as is).  With that said,
chilli uses the chap challenge/response style login to secure the
password. It does reveal a username over plain HTTP, but then again you
can always use anonymous codes or one-time-passwords. At this point, I
would use a relay -- chilli already has all the facilities for SSL
(using openssl at least). 

David


On Sun, 2009-11-29 at 15:34 +0200, Gunther Mayer wrote:
> Hi guys,
> 
> I've been trying to enable clients to communicate to chilli's uamport
> over SSL for authentication. Our uamserver has been running with SSL
> from day one but the uamport access is currently still over ordinary
> http for lack of a better alternative. With newer browsers
> increasingly complaining about mixed content the time has come to ssl
> enable chilli's uamport as well (I know - we'll have to get a
> commercial certificate but that's OK).
> 
> But how?
> 
> At first I thought there's a simple solution: use matrixtunnel (or its
> successor xrelayd with xyssl/polarssl) in front of chilli, i.e. as a
> proxy to provide a "fake" SSL port for clients which is then forwarded
> to chilli's normal http uamport. I've got xrelayd installed and
> working but if I point my browser to
> 
> https://ua.m.lis.ten:8443/prelogin
> 
> I just get an empty page instead of the normal login page that I get
> when using the plain http://ua.m.lis.ten:uamport/prelogin (8443 is the
> port xrelayd is forwarding to chilli's uamport). I think that's
> because chilli only sees the http request as originating from the
> local machine instead of from the client and hence doesn't know what
> to do. Or am I doing something wrong here?
> 
> Then I saw the very recent openssl support that David put in trunk
> this month and thought perhaps that's the solution. However, latest
> svn (r249) doesn't even compile:
> 
> $ svn co http://dev.coova.org/svn/coova-chilli
> $ ./bootstrap2 # ./bootstrap no longer works here :-(
> $ ./configure --with-openssl
> $ make
> cd . && /bin/bash ./config.status config.h
> config.status: creating config.h
> config.status: config.h is unchanged
> make  all-recursive
> make[1]: Entering directory `/Coova/coova-chilli-1.0.15-pre-r249'
> Making all in bstring
> make[2]: Entering directory
> `/Coova/coova-chilli-1.0.15-pre-r249/bstring'
> make[2]: Nothing to be done for `all'.
> make[2]: Leaving directory
> `/Coova/coova-chilli-1.0.15-pre-r249/bstring'
> Making all in src
> make[2]: Entering directory `/Coova/coova-chilli-1.0.15-pre-r249/src'
> /bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.
> -I..    -D_GNU_SOURCE -Wall -fno-builtin -fno-strict-aliasing -O2
> -fomit-frame-pointer -funroll-loops -pipe
> -DDEFCHILLICONF='"/usr/local/etc/chilli.conf"'
> -DDEFPIDFILE='"/usr/local/var/run/chilli.pid"'
> -DDEFSTATEDIR='"/usr/local/var/run"'
> -DDEFCMDSOCK='"/usr/local/var/run/chilli.sock"'
> -DSBINDIR='"/usr/local/sbin"' -I../bstring  -g -O2 -MT chilli.lo -MD
> -MP -MF .deps/chilli.Tpo -c -o chilli.lo chilli.c
> libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall
> -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer
> -funroll-loops -pipe -DDEFCHILLICONF=\"/usr/local/etc/chilli.conf\"
> -DDEFPIDFILE=\"/usr/local/var/run/chilli.pid\" -DDEFSTATEDIR=
> \"/usr/local/var/run\" -DDEFCMDSOCK=\"/usr/local/var/run/chilli.sock\"
> -DSBINDIR=\"/usr/local/sbin\" -I../bstring -g -O2 -MT chilli.lo -MD
> -MP -MF .deps/chilli.Tpo -c chilli.c  -fPIC -DPIC -o .libs/chilli.o
> chilli.c: In function ?cb_redir_getstate?:
> chilli.c:1682: error: ?struct dhcp_conn_t? has no member named
> ?dnatport?
> chilli.c:1683: error: ?struct dhcp_conn_t? has no member named
> ?dnatstate?
> chilli.c: In function ?config_radius_session?:
> chilli.c:2429: warning: passing argument 3 of
> ?pass_throughs_from_string? from incompatible pointer type
> garden.h:53: note: expected ?size_t *? but argument is of type
> ?uint32_t *?
> chilli.c: In function ?cmdsock_accept?:
> chilli.c:3756: warning: passing argument 3 of ?accept? from
> incompatible pointer type
> /usr/include/sys/socket.h:214: note: expected ?socklen_t *
> __restrict__? but argument is of type ?size_t *?
> chilli.c: In function ?redir_msg?:
> chilli.c:3997: warning: passing argument 3 of ?accept? from
> incompatible pointer type
> /usr/include/sys/socket.h:214: note: expected ?socklen_t *
> __restrict__? but argument is of type ?size_t *?
> make[2]: *** [chilli.lo] Error 1
> make[2]: Leaving directory `/Coova/coova-chilli-1.0.15-pre-r249/src'
> make[1]: *** [all-recursive] Error 1
> make[1]: Leaving directory `/Coova/coova-chilli-1.0.15-pre-r249'
> make: *** [all] Error 2
> 
> Now I'm really stuck. How do I achieve my goal?
> 
> Gunther
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From outbackdingo at gmail.com  Sun Nov 29 19:42:16 2009
From: outbackdingo at gmail.com (Outback Dingo)
Date: Sun, 29 Nov 2009 14:42:16 -0500
Subject: [Chilli] How to put uamport behind SSL?
In-Reply-To: <1259523404.3969.64.camel@david-laptop>
References: <4B127868.6040001@gmail.com>
	<1259523404.3969.64.camel@david-laptop>
Message-ID: <5635aa0d0911291142l6ad32adcncbc9a96a70c6449c@mail.gmail.com>

hijacking a port like 443 that could be in use by say apache isnt a great
idea
it would negate the use of chilli and a ssl web server on the same system

On Sun, Nov 29, 2009 at 2:36 PM, David Bird <david at coova.com> wrote:

> Fixed in rev 250. Though, it doesn't do what you outlined. It will
> hijack port 443 and with security error redirect to the captive portal.
> It doesn't do SSL on the UAM port. I suppose it is a straight forward
> feature (perhaps for uamuiport leaving uamport as is).  With that said,
> chilli uses the chap challenge/response style login to secure the
> password. It does reveal a username over plain HTTP, but then again you
> can always use anonymous codes or one-time-passwords. At this point, I
> would use a relay -- chilli already has all the facilities for SSL
> (using openssl at least).
>
> David
>
>
> On Sun, 2009-11-29 at 15:34 +0200, Gunther Mayer wrote:
> > Hi guys,
> >
> > I've been trying to enable clients to communicate to chilli's uamport
> > over SSL for authentication. Our uamserver has been running with SSL
> > from day one but the uamport access is currently still over ordinary
> > http for lack of a better alternative. With newer browsers
> > increasingly complaining about mixed content the time has come to ssl
> > enable chilli's uamport as well (I know - we'll have to get a
> > commercial certificate but that's OK).
> >
> > But how?
> >
> > At first I thought there's a simple solution: use matrixtunnel (or its
> > successor xrelayd with xyssl/polarssl) in front of chilli, i.e. as a
> > proxy to provide a "fake" SSL port for clients which is then forwarded
> > to chilli's normal http uamport. I've got xrelayd installed and
> > working but if I point my browser to
> >
> > https://ua.m.lis.ten:8443/prelogin
> >
> > I just get an empty page instead of the normal login page that I get
> > when using the plain http://ua.m.lis.ten:uamport/prelogin (8443 is the
> > port xrelayd is forwarding to chilli's uamport). I think that's
> > because chilli only sees the http request as originating from the
> > local machine instead of from the client and hence doesn't know what
> > to do. Or am I doing something wrong here?
> >
> > Then I saw the very recent openssl support that David put in trunk
> > this month and thought perhaps that's the solution. However, latest
> > svn (r249) doesn't even compile:
> >
> > $ svn co http://dev.coova.org/svn/coova-chilli
> > $ ./bootstrap2 # ./bootstrap no longer works here :-(
> > $ ./configure --with-openssl
> > $ make
> > cd . && /bin/bash ./config.status config.h
> > config.status: creating config.h
> > config.status: config.h is unchanged
> > make  all-recursive
> > make[1]: Entering directory `/Coova/coova-chilli-1.0.15-pre-r249'
> > Making all in bstring
> > make[2]: Entering directory
> > `/Coova/coova-chilli-1.0.15-pre-r249/bstring'
> > make[2]: Nothing to be done for `all'.
> > make[2]: Leaving directory
> > `/Coova/coova-chilli-1.0.15-pre-r249/bstring'
> > Making all in src
> > make[2]: Entering directory `/Coova/coova-chilli-1.0.15-pre-r249/src'
> > /bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.
> > -I..    -D_GNU_SOURCE -Wall -fno-builtin -fno-strict-aliasing -O2
> > -fomit-frame-pointer -funroll-loops -pipe
> > -DDEFCHILLICONF='"/usr/local/etc/chilli.conf"'
> > -DDEFPIDFILE='"/usr/local/var/run/chilli.pid"'
> > -DDEFSTATEDIR='"/usr/local/var/run"'
> > -DDEFCMDSOCK='"/usr/local/var/run/chilli.sock"'
> > -DSBINDIR='"/usr/local/sbin"' -I../bstring  -g -O2 -MT chilli.lo -MD
> > -MP -MF .deps/chilli.Tpo -c -o chilli.lo chilli.c
> > libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall
> > -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer
> > -funroll-loops -pipe -DDEFCHILLICONF=\"/usr/local/etc/chilli.conf\"
> > -DDEFPIDFILE=\"/usr/local/var/run/chilli.pid\" -DDEFSTATEDIR=
> > \"/usr/local/var/run\" -DDEFCMDSOCK=\"/usr/local/var/run/chilli.sock\"
> > -DSBINDIR=\"/usr/local/sbin\" -I../bstring -g -O2 -MT chilli.lo -MD
> > -MP -MF .deps/chilli.Tpo -c chilli.c  -fPIC -DPIC -o .libs/chilli.o
> > chilli.c: In function ?cb_redir_getstate?:
> > chilli.c:1682: error: ?struct dhcp_conn_t? has no member named
> > ?dnatport?
> > chilli.c:1683: error: ?struct dhcp_conn_t? has no member named
> > ?dnatstate?
> > chilli.c: In function ?config_radius_session?:
> > chilli.c:2429: warning: passing argument 3 of
> > ?pass_throughs_from_string? from incompatible pointer type
> > garden.h:53: note: expected ?size_t *? but argument is of type
> > ?uint32_t *?
> > chilli.c: In function ?cmdsock_accept?:
> > chilli.c:3756: warning: passing argument 3 of ?accept? from
> > incompatible pointer type
> > /usr/include/sys/socket.h:214: note: expected ?socklen_t *
> > __restrict__? but argument is of type ?size_t *?
> > chilli.c: In function ?redir_msg?:
> > chilli.c:3997: warning: passing argument 3 of ?accept? from
> > incompatible pointer type
> > /usr/include/sys/socket.h:214: note: expected ?socklen_t *
> > __restrict__? but argument is of type ?size_t *?
> > make[2]: *** [chilli.lo] Error 1
> > make[2]: Leaving directory `/Coova/coova-chilli-1.0.15-pre-r249/src'
> > make[1]: *** [all-recursive] Error 1
> > make[1]: Leaving directory `/Coova/coova-chilli-1.0.15-pre-r249'
> > make: *** [all] Error 2
> >
> > Now I'm really stuck. How do I achieve my goal?
> >
> > Gunther
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20091129/961d314f/attachment.htm>

From david at coova.com  Sun Nov 29 19:59:42 2009
From: david at coova.com (David Bird)
Date: Sun, 29 Nov 2009 20:59:42 +0100
Subject: [Chilli] How to put uamport behind SSL?
In-Reply-To: <5635aa0d0911291142l6ad32adcncbc9a96a70c6449c@mail.gmail.com>
References: <4B127868.6040001@gmail.com>
	<1259523404.3969.64.camel@david-laptop>
	<5635aa0d0911291142l6ad32adcncbc9a96a70c6449c@mail.gmail.com>
Message-ID: <1259524782.3969.65.camel@david-laptop>

The hijacking doesn't impact other services.. just like hijacking port
80 doesn't mean you can't run apache locally on port 80 as well. 

On Sun, 2009-11-29 at 14:42 -0500, Outback Dingo wrote:
> hijacking a port like 443 that could be in use by say apache isnt a
> great idea
> it would negate the use of chilli and a ssl web server on the same
> system
> 
> On Sun, Nov 29, 2009 at 2:36 PM, David Bird <david at coova.com> wrote:
>         Fixed in rev 250. Though, it doesn't do what you outlined. It
>         will
>         hijack port 443 and with security error redirect to the
>         captive portal.
>         It doesn't do SSL on the UAM port. I suppose it is a straight
>         forward
>         feature (perhaps for uamuiport leaving uamport as is).  With
>         that said,
>         chilli uses the chap challenge/response style login to secure
>         the
>         password. It does reveal a username over plain HTTP, but then
>         again you
>         can always use anonymous codes or one-time-passwords. At this
>         point, I
>         would use a relay -- chilli already has all the facilities for
>         SSL
>         (using openssl at least).
>         
>         David
>         
>         
>         
>         On Sun, 2009-11-29 at 15:34 +0200, Gunther Mayer wrote:
>         > Hi guys,
>         >
>         > I've been trying to enable clients to communicate to
>         chilli's uamport
>         > over SSL for authentication. Our uamserver has been running
>         with SSL
>         > from day one but the uamport access is currently still over
>         ordinary
>         > http for lack of a better alternative. With newer browsers
>         > increasingly complaining about mixed content the time has
>         come to ssl
>         > enable chilli's uamport as well (I know - we'll have to get
>         a
>         > commercial certificate but that's OK).
>         >
>         > But how?
>         >
>         > At first I thought there's a simple solution: use
>         matrixtunnel (or its
>         > successor xrelayd with xyssl/polarssl) in front of chilli,
>         i.e. as a
>         > proxy to provide a "fake" SSL port for clients which is then
>         forwarded
>         > to chilli's normal http uamport. I've got xrelayd installed
>         and
>         > working but if I point my browser to
>         >
>         > https://ua.m.lis.ten:8443/prelogin
>         >
>         > I just get an empty page instead of the normal login page
>         that I get
>         > when using the plain http://ua.m.lis.ten:uamport/prelogin
>         (8443 is the
>         > port xrelayd is forwarding to chilli's uamport). I think
>         that's
>         > because chilli only sees the http request as originating
>         from the
>         > local machine instead of from the client and hence doesn't
>         know what
>         > to do. Or am I doing something wrong here?
>         >
>         > Then I saw the very recent openssl support that David put in
>         trunk
>         > this month and thought perhaps that's the solution. However,
>         latest
>         > svn (r249) doesn't even compile:
>         >
>         > $ svn co http://dev.coova.org/svn/coova-chilli
>         > $ ./bootstrap2 # ./bootstrap no longer works here :-(
>         > $ ./configure --with-openssl
>         > $ make
>         > cd . && /bin/bash ./config.status config.h
>         > config.status: creating config.h
>         > config.status: config.h is unchanged
>         > make  all-recursive
>         > make[1]: Entering directory
>         `/Coova/coova-chilli-1.0.15-pre-r249'
>         > Making all in bstring
>         > make[2]: Entering directory
>         > `/Coova/coova-chilli-1.0.15-pre-r249/bstring'
>         > make[2]: Nothing to be done for `all'.
>         > make[2]: Leaving directory
>         > `/Coova/coova-chilli-1.0.15-pre-r249/bstring'
>         > Making all in src
>         > make[2]: Entering directory
>         `/Coova/coova-chilli-1.0.15-pre-r249/src'
>         > /bin/bash ../libtool --tag=CC   --mode=compile gcc
>         -DHAVE_CONFIG_H -I.
>         > -I..    -D_GNU_SOURCE -Wall -fno-builtin
>         -fno-strict-aliasing -O2
>         > -fomit-frame-pointer -funroll-loops -pipe
>         > -DDEFCHILLICONF='"/usr/local/etc/chilli.conf"'
>         > -DDEFPIDFILE='"/usr/local/var/run/chilli.pid"'
>         > -DDEFSTATEDIR='"/usr/local/var/run"'
>         > -DDEFCMDSOCK='"/usr/local/var/run/chilli.sock"'
>         > -DSBINDIR='"/usr/local/sbin"' -I../bstring  -g -O2 -MT
>         chilli.lo -MD
>         > -MP -MF .deps/chilli.Tpo -c -o chilli.lo chilli.c
>         > libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I..
>         -D_GNU_SOURCE -Wall
>         > -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer
>         > -funroll-loops -pipe -DDEFCHILLICONF=
>         \"/usr/local/etc/chilli.conf\"
>         > -DDEFPIDFILE=\"/usr/local/var/run/chilli.pid\"
>         -DDEFSTATEDIR=
>         > \"/usr/local/var/run\" -DDEFCMDSOCK=
>         \"/usr/local/var/run/chilli.sock\"
>         > -DSBINDIR=\"/usr/local/sbin\" -I../bstring -g -O2 -MT
>         chilli.lo -MD
>         > -MP -MF .deps/chilli.Tpo -c chilli.c  -fPIC -DPIC
>         -o .libs/chilli.o
>         > chilli.c: In function ?cb_redir_getstate?:
>         > chilli.c:1682: error: ?struct dhcp_conn_t? has no member
>         named
>         > ?dnatport?
>         > chilli.c:1683: error: ?struct dhcp_conn_t? has no member
>         named
>         > ?dnatstate?
>         > chilli.c: In function ?config_radius_session?:
>         > chilli.c:2429: warning: passing argument 3 of
>         > ?pass_throughs_from_string? from incompatible pointer type
>         > garden.h:53: note: expected ?size_t *? but argument is of
>         type
>         > ?uint32_t *?
>         > chilli.c: In function ?cmdsock_accept?:
>         > chilli.c:3756: warning: passing argument 3 of ?accept? from
>         > incompatible pointer type
>         > /usr/include/sys/socket.h:214: note: expected ?socklen_t *
>         > __restrict__? but argument is of type ?size_t *?
>         > chilli.c: In function ?redir_msg?:
>         > chilli.c:3997: warning: passing argument 3 of ?accept? from
>         > incompatible pointer type
>         > /usr/include/sys/socket.h:214: note: expected ?socklen_t *
>         > __restrict__? but argument is of type ?size_t *?
>         > make[2]: *** [chilli.lo] Error 1
>         > make[2]: Leaving directory
>         `/Coova/coova-chilli-1.0.15-pre-r249/src'
>         > make[1]: *** [all-recursive] Error 1
>         > make[1]: Leaving directory
>         `/Coova/coova-chilli-1.0.15-pre-r249'
>         > make: *** [all] Error 2
>         >
>         > Now I'm really stuck. How do I achieve my goal?
>         >
>         > Gunther
>         
>         
>         > _______________________________________________
>         > Chilli mailing list
>         > Chilli at coova.org
>         > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>         
>         
>         _______________________________________________
>         Chilli mailing list
>         Chilli at coova.org
>         http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>         
> 
> 



From gunther.mayer at googlemail.com  Mon Nov 30 08:01:44 2009
From: gunther.mayer at googlemail.com (Gunther Mayer)
Date: Mon, 30 Nov 2009 10:01:44 +0200
Subject: [Chilli] How to put uamport behind SSL?
In-Reply-To: <1259523404.3969.64.camel@david-laptop>
References: <4B127868.6040001@gmail.com>
	<1259523404.3969.64.camel@david-laptop>
Message-ID: <4B137BE8.6000606@gmail.com>

David Bird wrote:
> Fixed in rev 250. Though, it doesn't do what you outlined. It will
> hijack port 443 and with security error redirect to the captive portal.
> It doesn't do SSL on the UAM port. I suppose it is a straight forward
> feature (perhaps for uamuiport leaving uamport as is).

Would you mind implementing that please? It would take me weeks to do it...
>  With that said,
> chilli uses the chap challenge/response style login to secure the
> password. It does reveal a username over plain HTTP, but then again you
> can always use anonymous codes or one-time-passwords.

I know the current setup is secure enough. It's just that almost all of 
the most recent browsers out there give you nasty or at least very 
annoying warnings that some parts of the site are unsecured (http to 
chilli) and explaining security to users using tech talk is of little 
comfort, for a layman at least. On top of that, mixing https with plain 
http makes things really challenging with some javascript libraries. 
They all recommend to not mix at all.
> At this point, I
> would use a relay -- chilli already has all the facilities for SSL
> (using openssl at least).
>   

Ok, please explain how I could use "a relay" to achieve what I need.

Am I right that it cannot be made to work with stunnel/matrixtunnel/xrelayd?

Gunther

From adamanov at gmail.com  Mon Nov 30 19:12:43 2009
From: adamanov at gmail.com (=?UTF-8?B?0JLRj9GH0LXRgdC70LDQsiDQkNC00LDQvNCw0L3QvtCy?=)
Date: Mon, 30 Nov 2009 21:12:43 +0200
Subject: [Chilli] freeradius with peap .. I do not?!
Message-ID: <7a50ad140911301112v163e469fj63ae0b4092219e76@mail.gmail.com>

In the spring of 2009, I set up coova-chilli and freeradius for
authorization through peap.?Then it worked.??Now with coova 1.1.15,
the radius is constantly sending access-reject.

coova-chilli run with option:
    dhcpif ath0
...
    proxylisten 127.0.0.1
    proxyclient 127.0.0.1
    proxyport 1812
    proxysecret testing123
    coaport 3799
    papalwaysok
    wpaguests
    acctupdate
    dnsparanoia
    uamsecret qwertyasdfgh
    eapolenable
    noc2c
    mschapv2
    framedservice
    nouamsuccess


wireless card ar5414 with hostapd options:
   config wifi-iface      ath0
       option device   wifi0
       option encryption wpa2/tkip+aes
       option key      testing123
       option server   127.0.0.1
       option port     1812


radius eap.conf :
 eap {
  default_eap_type = peap
  ...
      peap {

            default_eap_type = mschapv2
            copy_request_to_tunnel = yes
            use_tunneled_reply = yes

           }
}


--
__________________________
Adamanov Vyacheslav
87500, Ukraine, Mariupol,
st. Apatova 136?
mob: +38 (067) 621 32 61
email: adamanov at gmail.com
www: http://hl.ua

