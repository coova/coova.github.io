<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Accounting NOT broken in v1.0.11 (was: Accounting badly broken in v1.0.11)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20Accounting%20NOT%20broken%20in%20v1.0.11%20%28was%3A%20Accounting%20badly%20broken%20in%0A%20v1.0.11%29&In-Reply-To=%3C480BCC4B.8080801%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000207.html">
   <LINK REL="Next"  HREF="000209.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Accounting NOT broken in v1.0.11 (was: Accounting badly broken in v1.0.11)</H1>
    <B>Gunther Mayer</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20Accounting%20NOT%20broken%20in%20v1.0.11%20%28was%3A%20Accounting%20badly%20broken%20in%0A%20v1.0.11%29&In-Reply-To=%3C480BCC4B.8080801%40gmail.com%3E"
       TITLE="Accounting NOT broken in v1.0.11 (was: Accounting badly broken in v1.0.11)">gunther.mayer at googlemail.com
       </A><BR>
    <I>Sun Apr 20 23:05:47 UTC 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000207.html">Accounting badly broken in v1.0.11
</A></li>
        <LI>Next message: <A HREF="000209.html">Accounting NOT broken in v1.0.11 (was: Accounting badly broken in v1.0.11)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#208">[ date ]</a>
              <a href="thread.html#208">[ thread ]</a>
              <a href="subject.html#208">[ subject ]</a>
              <a href="author.html#208">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">wlan at mac.com</A> wrote:
&gt;<i> I'm not certain of the problems reported by previously. Gunther, can 
</I>&gt;<i> you confirm that chilli is indeed getting the responses? Otherwise, 
</I>&gt;<i> the behavior he describes is, basically, retransmission doing its job. 
</I>&gt;<i> I have heard reports of v1.0.11 already &quot;in the wild&quot; without major 
</I>&gt;<i> problems.  You are also encouraged to test the svn version.
</I>Hi David,

I carried out the packet dumps again from the box that runs chilli and 
even though the replies were delivered fine it turns out that it was a 
firewall rule of mine that dropped them like a hot potato. I had to use 
the coaport option together with coanoipcheck (because my PoD packets 
would come through an openvpn tunnel, not from any of the defined 
radiusservers) so tried to harden my setup by doing the checking in the 
firewall. Unfortunately in the process I didn't realise that the coaport 
option also causes all Accounting Requests to be sent from that port 
which is where my assumptions broke down.

To cut a long story short it was my stupidity rather than your code that 
caused the mess and the behaviour I saw indeed was just chilli trying to 
retransmit whatever it never received a reply for. The radauth stuff of 
course ran flawlessly so that I could log in fine, which is why I never 
detected the problem when I did my initial firewall testing.

I apologise for jumping to conclusions despite days of debugging...

In the end I can recommend v1.0.11 for all purposes.

Gunther

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000207.html">Accounting badly broken in v1.0.11
</A></li>
	<LI>Next message: <A HREF="000209.html">Accounting NOT broken in v1.0.11 (was: Accounting badly broken in v1.0.11)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#208">[ date ]</a>
              <a href="thread.html#208">[ thread ]</a>
              <a href="subject.html#208">[ subject ]</a>
              <a href="author.html#208">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
