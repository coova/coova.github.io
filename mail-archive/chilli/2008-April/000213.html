<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> macallowlocal with uamanyip doesn't work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20macallowlocal%20with%20uamanyip%20doesn%27t%20work&In-Reply-To=%3C480D9DB6.9060508%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000212.html">
   <LINK REL="Next"  HREF="000214.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>macallowlocal with uamanyip doesn't work</H1>
    <B>Gunther Mayer</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20macallowlocal%20with%20uamanyip%20doesn%27t%20work&In-Reply-To=%3C480D9DB6.9060508%40gmail.com%3E"
       TITLE="macallowlocal with uamanyip doesn't work">gunther.mayer at googlemail.com
       </A><BR>
    <I>Tue Apr 22 08:11:34 UTC 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000212.html">Development and coding issues
</A></li>
        <LI>Next message: <A HREF="000214.html">Thanks a lot !
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#213">[ date ]</a>
              <a href="thread.html#213">[ thread ]</a>
              <a href="subject.html#213">[ subject ]</a>
              <a href="author.html#213">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi again,

I realised today that static ip (misconfigured) clients that are 
supposed to be given access with uamanyip don't have ANY sort of 
connection when they are additionally macallowed with the macallowlocal 
option. I noticed this problem with both 1.0.11 and latest svn and 
neither a debug nor a debugfacility 255 would give me any clues to why 
this wouldn't work.

To reproduce:

   1. Pick a hotspot client, configure its static IP with totally random
      ip settings (static ip, gateway within subnet and any usable dns,
      preferably with uamanydns)
   2. Turn on uamanyip on the chilli box with suitable statip subnet and
      restart chilli
   3. Back on the client you'll see that it'll get redirected to the
      portal page as expected and can even ping, ssh or whatever the
      chilli box when using its dhcplisten ip address
   4. Now add &quot;macallowed &lt;client mac address&gt;&quot; together with the
      &quot;macallowlocal&quot; option into chilli.conf and restart chilli
   5. The client now has no access whatsoever, no Internet access,
      cannot ping the chilli box, nothing. A tcpdump on the chilli box
      shows the packets coming in from the client but no response ever
      coming in

While I'm pretty sure this time there aren't any dodgy firewall rules 
messing up my setup I'd like somebody to confirm this problem and then 
perhaps fix it?

Gunther

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20080422/1c67bf5d/attachment.htm">http://lists.coova.org/pipermail/chilli/attachments/20080422/1c67bf5d/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000212.html">Development and coding issues
</A></li>
	<LI>Next message: <A HREF="000214.html">Thanks a lot !
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#213">[ date ]</a>
              <a href="thread.html#213">[ thread ]</a>
              <a href="subject.html#213">[ subject ]</a>
              <a href="author.html#213">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
