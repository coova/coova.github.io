<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Accounting badly broken in v1.0.11
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20Accounting%20badly%20broken%20in%20v1.0.11&In-Reply-To=%3C357BDC80-E9A2-4ADE-8CE5-1782B42408BC%40mac.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000200.html">
   <LINK REL="Next"  HREF="000202.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Accounting badly broken in v1.0.11</H1>
    <B>wlan at mac.com</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20Accounting%20badly%20broken%20in%20v1.0.11&In-Reply-To=%3C357BDC80-E9A2-4ADE-8CE5-1782B42408BC%40mac.com%3E"
       TITLE="Accounting badly broken in v1.0.11">wlan at mac.com
       </A><BR>
    <I>Fri Apr 18 04:51:30 UTC 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000200.html">Accounting badly broken in v1.0.11
</A></li>
        <LI>Next message: <A HREF="000202.html">Accounting badly broken in v1.0.11
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#201">[ date ]</a>
              <a href="thread.html#201">[ thread ]</a>
              <a href="subject.html#201">[ subject ]</a>
              <a href="author.html#201">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you are having issues with the current release, it is probably  
best to try the svn version.

I can't imagine why chilli would be sending out odd RADIUS half way  
during a session. Is it perhaps not getting any Accounting-Responses  
coming back (and hence you see the retries)?

Accounting-On/Off is a new(er) feature and is per RFC - useful for  
clearing out stale sessions when you know chilli rebooted.

David

On Apr 17, 2008, at 11:42 PM, Gunther Mayer wrote:

&gt;<i> Hi guys,
</I>&gt;<i>
</I>&gt;<i> I just wanted to share my experiences with v1.0.11 with everyone  
</I>&gt;<i> thinking of upgrading to that &quot;latest&quot; release. At first I noticed  
</I>&gt;<i> our radius/db accounting entries got all messed up for some  
</I>&gt;<i> sessions and when I started investigating in more detail I stumbled  
</I>&gt;<i> across a whack load of spurious radius packets that chilli sends to  
</I>&gt;<i> the radius server halfway through the session or even after it ended:
</I>&gt;<i> replays of entire previous sessions (from accounting start to all  
</I>&gt;<i> interim updates, sometimes even all the way to accounting stop)
</I>&gt;<i> replay of current session (from accounting start to zero or more  
</I>&gt;<i> interim updates)
</I>&gt;<i> accounting-on packets
</I>&gt;<i> This can get really hairy to try and work around in the radius  
</I>&gt;<i> server code and is giving me grey hair. It seems like quite a  
</I>&gt;<i> serious bug to me but others here may have more robust radius code  
</I>&gt;<i> than mine so perhaps haven't noticed this yet.
</I>&gt;<i>
</I>&gt;<i> David if this is all new to you I'll gladly follow up with a whole  
</I>&gt;<i> bunch of tcpdump's that I've prepared which isolate the problems.  
</I>&gt;<i> Reproducing this is fairly easy too, just fire up a session and  
</I>&gt;<i> watch the radius packets that flow past...
</I>&gt;<i>
</I>&gt;<i> Has anyone been bitten by this too? Has anyone worked around this  
</I>&gt;<i> successfully? Has anyone experienced something similar at least in  
</I>&gt;<i> post svn r147 (1.0.11)?
</I>&gt;<i>
</I>&gt;<i> I'm stuck here trying to release an upgrade to our system which  
</I>&gt;<i> involves JSON (I'm currently based on 1.0.6 just before JSON got  
</I>&gt;<i> introduced) but clearly cannot use latest release, am a bit wary of  
</I>&gt;<i> using bleeding edge trunk in production but also don't want to  
</I>&gt;<i> successively test each earlier release (1.0.10 has known issues,  
</I>&gt;<i> 1.0.7-9 anyone?) in the light of this.
</I>&gt;<i>
</I>&gt;<i> Gunther
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000200.html">Accounting badly broken in v1.0.11
</A></li>
	<LI>Next message: <A HREF="000202.html">Accounting badly broken in v1.0.11
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#201">[ date ]</a>
              <a href="thread.html#201">[ thread ]</a>
              <a href="subject.html#201">[ subject ]</a>
              <a href="author.html#201">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
