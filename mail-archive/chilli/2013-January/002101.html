<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] RADIUS based way to set the per session
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20RADIUS%20based%20way%20to%20set%20the%20per%20session&In-Reply-To=%3C1358793673.6241.9.camel%40david-laptop%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002094.html">
   <LINK REL="Next"  HREF="002102.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] RADIUS based way to set the per session</H1>
    <B>David Bird</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20RADIUS%20based%20way%20to%20set%20the%20per%20session&In-Reply-To=%3C1358793673.6241.9.camel%40david-laptop%3E"
       TITLE="[Chilli] RADIUS based way to set the per session">david at coova.com
       </A><BR>
    <I>Mon Jan 21 18:41:13 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="002094.html">[Chilli] RADIUS based way to set the per session
</A></li>
        <LI>Next message: <A HREF="002102.html">[Chilli] RADIUS based way to set the per session
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2101">[ date ]</a>
              <a href="thread.html#2101">[ thread ]</a>
              <a href="subject.html#2101">[ subject ]</a>
              <a href="author.html#2101">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Danny,

I can't say I'm an expert on the functionality of FR and it's standard
database structure. Are you certain (via wireshark, etc) that FR is
putting the attribute out of the radreply table when the response is
Reject? 


On Sat, 2013-01-19 at 18:27 +0400, Danny Magat wrote:
&gt;<i> Dear David,
</I>&gt;<i> 
</I>&gt;<i> Yes I am using ChilliSpot-Inject-URL attributes,
</I>&gt;<i> Below is my configuration:
</I>&gt;<i> Chilli.conf
</I>&gt;<i> --redir
</I>&gt;<i> -- macauth
</I>&gt;<i> 
</I>&gt;<i> -Radcheck-
</I>&gt;<i> Username = mac
</I>&gt;<i> Attributes = Auth-Type
</I>&gt;<i> Operator = :=
</I>&gt;<i> Value=Reject
</I>&gt;<i> 
</I>&gt;<i> Radreply
</I>&gt;<i> Username = 98-03-D8-F4-0D-90
</I>&gt;<i> Attributes = ChilliSpot-Inject-URL
</I>&gt;<i> Operator = :=
</I>&gt;<i> Value =  <A HREF="http://URL/inject.js">http://URL/inject.js</A>
</I>&gt;<i> 
</I>&gt;<i> I did compile with --enable-inspect
</I>&gt;<i> And its showing below:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">root at danny</A>:/etc/chilli# chilli_query inspect mac 98-03-D8-F4-0D-90
</I>&gt;<i> MAC:   98-03-D8-F4-0D-90   IP:  10.1.0.2
</I>&gt;<i> ---------------------------------------------------
</I>&gt;<i>               status: not authenticated
</I>&gt;<i>            challenge: 935faea8add1ab843786da6a87eed4e2
</I>&gt;<i>           session id: 50faa9e600000001
</I>&gt;<i>            user name: 98-03-D8-F4-0D-90
</I>&gt;<i>         session time: 0 sec
</I>&gt;<i>      session timeout: 0 sec
</I>&gt;<i>            idle time: 0 sec
</I>&gt;<i>         idle timeout: 0 sec
</I>&gt;<i>        octets in/out: in=down, out=up
</I>&gt;<i>            octets in: 0
</I>&gt;<i>           octets out: 0
</I>&gt;<i>           max b/w up: 0
</I>&gt;<i>         max b/w down: 0
</I>&gt;<i>       last sent time: 520 sec ago
</I>&gt;<i>            last seen: 513 sec ago
</I>&gt;<i>             user url: <A HREF="http://www.apple.com/library/test/success.html">http://www.apple.com/library/test/success.html</A>
</I>&gt;<i>            url param:
</I>&gt;<i>                flags:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> am I missing something in the config? Because I am not able to redirect to injected page. Please advise...
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: David Bird [mailto:<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">david at coova.com</A>] 
</I>&gt;<i> Sent: Thursday, January 17, 2013 10:35 PM
</I>&gt;<i> To: Danny Magat
</I>&gt;<i> Cc: 'Jed Gainer'; <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli at coova.org</A>
</I>&gt;<i> Subject: Re: [Chilli] RADIUS based way to set the per session
</I>&gt;<i> 
</I>&gt;<i> You have tried the ChilliSpot-Inject-URL attribute? 
</I>&gt;<i> 
</I>&gt;<i> Also, it is also helpful to --enable-inspect so that chilli_query inspect mac &lt;mac&gt; gives you more information on per session configurations. 
</I>&gt;<i> 
</I>&gt;<i> David
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Wed, 2013-01-16 at 12:17 +0400, Danny Magat wrote:
</I>&gt;<i> &gt; Yes inject url per user wherein the URL is coming from the radius reply.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From: Jed Gainer [mailto:<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">jedgainer at gmail.com</A>]
</I>&gt;<i> &gt; Sent: Wednesday, January 16, 2013 8:11 AM
</I>&gt;<i> &gt; To: Danny Magat
</I>&gt;<i> &gt; Subject: Re: [Chilli] RADIUS based way to set the per session
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I am not sure what you mean. Inject per user you mean?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;     $.getJSON(&quot;<A HREF="http://10.1.0.1:3990/json/status?callback=?">http://10.1.0.1:3990/json/status?callback=?</A>&quot;,
</I>&gt;<i> &gt; function(chilli) {
</I>&gt;<i> &gt;         console.log(chilli);
</I>&gt;<i> &gt;         if ($.inArray(chilli.session.userName, ['Cyndy', 'Chris']) != -1)
</I>&gt;<i> &gt;         {
</I>&gt;<i> &gt;             var addHeight =
</I>&gt;<i> &gt; (/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent
</I>&gt;<i> &gt; ))
</I>&gt;<i> &gt; ? 60 : 40;
</I>&gt;<i> &gt;             $('body').height($('body').height() + addHeight);
</I>&gt;<i> &gt;             $('body').append('&lt;div style=&quot;position: fixed; bottom: 0;
</I>&gt;<i> &gt; left: 0; right: 0; height: ' + addHeight + 'px; border-top: 2px solid 
</I>&gt;<i> &gt; #000; background-color: #fff&quot;&gt;&lt;iframe style=&quot;border: 0; width: 99%&quot;
</I>&gt;<i> &gt; src=&quot;<A HREF="http://10.1.0.1/toolbar.php">http://10.1.0.1/toolbar.php</A>&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;');
</I>&gt;<i> &gt;         }
</I>&gt;<i> &gt;     });
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; On Tue, Jan 15, 2013 at 6:07 AM, Danny Magat &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">danny at sb-ps.ae</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; Dear All,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; <A HREF="http://coova.org/node/4788#comment-9802">http://coova.org/node/4788#comment-9802</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Based on the above links by David there is a way on how to 
</I>&gt;<i> &gt; &gt; inject-URL per session.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Can somebody guide me on how to achieve this.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Thanks in Advance.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Danny
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Chilli mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Chilli mailing list
</I>&gt;<i> &gt; <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i> &gt; <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>
-- 
--
David Bird
<A HREF="http://www.linkedin.com/in/dwbird">http://www.linkedin.com/in/dwbird</A>
<A HREF="https://twitter.com/wlanmac">https://twitter.com/wlanmac</A>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002094.html">[Chilli] RADIUS based way to set the per session
</A></li>
	<LI>Next message: <A HREF="002102.html">[Chilli] RADIUS based way to set the per session
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2101">[ date ]</a>
              <a href="thread.html#2101">[ thread ]</a>
              <a href="subject.html#2101">[ subject ]</a>
              <a href="author.html#2101">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
