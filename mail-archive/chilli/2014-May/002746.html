<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] SSL certificates not being trusted by clients
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20SSL%20certificates%20not%20being%20trusted%20by%20clients&In-Reply-To=%3CCAF%2BUSJ5ceEmMDFjvOnqA-GEQfGsQZ16u8NVFeorOn%2Be0DO9%2B%2BQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002745.html">
   <LINK REL="Next"  HREF="002747.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] SSL certificates not being trusted by clients</H1>
    <B>Eric Chaves</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20SSL%20certificates%20not%20being%20trusted%20by%20clients&In-Reply-To=%3CCAF%2BUSJ5ceEmMDFjvOnqA-GEQfGsQZ16u8NVFeorOn%2Be0DO9%2B%2BQ%40mail.gmail.com%3E"
       TITLE="[Chilli] SSL certificates not being trusted by clients">eric at craftti.com.br
       </A><BR>
    <I>Tue May 27 04:42:21 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="002745.html">[Chilli] Enable encoding UTF-8 - coovachilli 1.3.0
</A></li>
        <LI>Next message: <A HREF="002747.html">[Chilli] Intermittent Radius request timed out error in coova chilli
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2746">[ date ]</a>
              <a href="thread.html#2746">[ thread ]</a>
              <a href="subject.html#2746">[ subject ]</a>
              <a href="author.html#2746">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi folks,

I'm trying to use a comodo certificate to encrypt traffic between my
captive portal and Coova's JSON interface (on the controller) but I'm
facing a trouble where clients are not being able to verify the
controller's identity to match it's name with the SSL certificate.

It seems to me that the problem is related to how clients resolve the
controller's name to IP address but I'm not 100% sure.

To issue the controller's certificate I defined valid server name under my
domain, like &quot;nac.mydomain.com&quot;, and in my authoritative DNS (hosted
outside of the controllers network) I added an &quot;A record&quot; pointing to the
controller's internal IP address (for example, 172.16.0.1).

The controller's hostname is &quot;ctrl001&quot; (not &quot;nac&quot;) and coova is configured
to use google's public DNS (8.8.8.8) to resolve dns lookups.

When a client connects on the wifi and get's an IP address (like
172.16.0.25) if it queries DNS for &quot;nac.mydomain.com&quot;, the response is
1.0.0.1 instead of 172.16.0.1 which was what I expected to see.  And if the
client pings 1.0.0.1, the controller replies with his internal IP
(172.16.0.1). I assume coova is intercepting this DNS query and somehow
it's replying with the 1.0.0.1 instead of relying on the real DNS reply. Am
I correct?

What should I do to setup the controller's name in order to have it
matching the SSL subject name?

Thanks in advance,

Eric
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20140527/d3191c27/attachment.html">http://lists.coova.org/pipermail/chilli/attachments/20140527/d3191c27/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002745.html">[Chilli] Enable encoding UTF-8 - coovachilli 1.3.0
</A></li>
	<LI>Next message: <A HREF="002747.html">[Chilli] Intermittent Radius request timed out error in coova chilli
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2746">[ date ]</a>
              <a href="thread.html#2746">[ thread ]</a>
              <a href="subject.html#2746">[ subject ]</a>
              <a href="author.html#2746">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
