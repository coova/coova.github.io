<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] coova-chilli 1.3.0 problem with WISPr-Redirection-URL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20coova-chilli%201.3.0%20problem%20with%20WISPr-Redirection-URL&In-Reply-To=%3C5232502D.8030104%40netcommwireless.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002368.html">
   <LINK REL="Next"  HREF="002373.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] coova-chilli 1.3.0 problem with WISPr-Redirection-URL</H1>
    <B>Sourav</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20coova-chilli%201.3.0%20problem%20with%20WISPr-Redirection-URL&In-Reply-To=%3C5232502D.8030104%40netcommwireless.com%3E"
       TITLE="[Chilli] coova-chilli 1.3.0 problem with WISPr-Redirection-URL">sourav.chakraborty at netcommwireless.com
       </A><BR>
    <I>Thu Sep 12 23:37:17 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="002368.html">[Chilli] coova-chilli 1.3.0 problem with WISPr-Redirection-URL
</A></li>
        <LI>Next message: <A HREF="002373.html">[Chilli] coova-chilli 1.3.0 problem with WISPr-Redirection-URL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2371">[ date ]</a>
              <a href="thread.html#2371">[ thread ]</a>
              <a href="subject.html#2371">[ subject ]</a>
              <a href="author.html#2371">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The config file for this issue is --

# -*- mode: shell-script; -*-
#
#   Coova-Chilli Default Configurations.
#   To customize, copy this file to /etc/chilli/config
#   and edit to your liking. This is included in shell scripts
#   that configure chilli and related programs before file 'config'.


###
#   Local Network Configurations
#

# HS_WANIF=eth0            # WAN Interface toward the Internet
HS_WANIF=wwan0            # WAN Interface toward the Internet
HS_LANIF=ra0               # Subscriber Interface for client devices
HS_NETWORK=10.1.0.0        # HotSpot Network (must include HS_UAMLISTEN)
#HS_NETWORK=192.168.1.0    # HotSpot Network (must include HS_UAMLISTEN)
HS_NETMASK=255.255.255.0   # HotSpot Network Netmask
HS_UAMLISTEN=10.1.0.1      # HotSpot IP Address (on subscriber network)
#HS_UAMLISTEN=192.168.1.1          # HotSpot IP Address (on subscriber 
network)
HS_UAMPORT=3990            # HotSpot UAM Port (on subscriber network)
HS_UAMUIPORT=4990          # HotSpot UAM &quot;UI&quot; Port (on subscriber 
network, for embedded portal)
#HS_DYNIP=192.168.1.0
HS_DYNIP=10.1.0.2
HS_DYNIP_MASK=255.255.255.0
# HS_STATIP=
# HS_STATIP_MASK=255.255.255.0
# HS_DNS_DOMAIN=

# OpenDNS Servers
HS_DNS1=10.4.81.103
#HS_DNS1=192.168.1.1
HS_DNS2=10.4.182.20

###
#   HotSpot settings for simple Captive Portal
#
HS_NASID=nas01
HS_RADIUS=192.168.1.107
HS_RADIUS2=localhost
HS_UAMALLOW=www.coova.org
HS_RADSECRET=testing123    # Set to be your RADIUS shared secret
HS_UAMSECRET=change-me     # Set to be your UAM secret
HS_UAMALIASNAME=chilli

#  Configure RADIUS proxy support (for 802.1x + captive portal support)
#HS_RADPROXY=on
#HS_RADPROXY_LISTEN=127.0.0.1
#HS_RADPROXY_CLIENT=127.0.0.1
#HS_RADPROXY_PORT=1645
#HS_RADPROXY_SECRET=$HS_RADSECRET
#  Example OpenWrt /etc/config/wireless entry for hostapd
#    option encryption wpa2
#    option server $HS_RADPROXY_LISTEN
#    option port $HS_RADPROXY_PORT
#    option key $HS_RADPROXY_SECRET


#   To alternatively use a HTTP URL for AAA instead of RADIUS:
# HS_UAMAAAURL=<A HREF="http://my-site/script.php">http://my-site/script.php</A>

#   Put entire domains in the walled-garden with DNS inspection
# HS_UAMDOMAINS=&quot;.paypal.com,.paypalobjects.com&quot;

#   Optional initial redirect and RADIUS settings
# HS_SSID=&lt;ssid&gt;           # To send to the captive portal
# HS_NASMAC=&lt;mac address&gt;  # To explicitly set Called-Station-Id
# HS_NASIP=&lt;ip address&gt;    # To explicitly set NAS-IP-Address

#   The server to be used in combination with HS_UAMFORMAT to
#   create the final chilli 'uamserver' url configuration.
HS_UAMSERVER=$HS_UAMLISTEN

#   Use HS_UAMFORMAT to define the actual captive portal url.
#   Shell variable replacement takes place when evaluated, so here
#   HS_UAMSERVER is escaped and later replaced by the pre-defined
#   HS_UAMSERVER to form the actual &quot;--uamserver&quot; option in chilli.
#HS_UAMFORMAT=<A HREF="http://\$HS_UAMLISTEN:\$HS_UAMUIPORT/www/login.chi">http://\$HS_UAMLISTEN:\$HS_UAMUIPORT/www/login.chi</A>
#HS_UAMFORMAT=<A HREF="http://\$HS_UAMLISTEN:\$HS_UAMUIPORT/www/mylogin.chi">http://\$HS_UAMLISTEN:\$HS_UAMUIPORT/www/mylogin.chi</A>
#HS_UAMFORMAT=<A HREF="http://\$HS_UAMLISTEN:\$HS_UAMUIPORT/www/index.html">http://\$HS_UAMLISTEN:\$HS_UAMUIPORT/www/index.html</A>
HS_UAMFORMAT=<A HREF="http://\$HS_UAMLISTEN:\$HS_UAMUIPORT/www/hotspotlogin.html">http://\$HS_UAMLISTEN:\$HS_UAMUIPORT/www/hotspotlogin.html</A>

#   Same principal goes for HS_UAMHOMEPAGE.
#HS_UAMHOMEPAGE=<A HREF="http://\$HS_UAMLISTEN:\$HS_UAMPORT/www/coova.html">http://\$HS_UAMLISTEN:\$HS_UAMPORT/www/coova.html</A>

#   This option will be configured to be the WISPr LoginURL as well
#   as provide &quot;uamService&quot; to the ChilliController. The UAM Service is
#   described in: <A HREF="http://www.coova.org/CoovaChilli/UAMService">http://www.coova.org/CoovaChilli/UAMService</A>
#
HS_UAMSERVICE=<A HREF="http://\$HS_UAMLISTEN:\$HS_UAMUIPORT/www/hotspotlogin.html">http://\$HS_UAMLISTEN:\$HS_UAMUIPORT/www/hotspotlogin.html</A>


###
#   Features not activated per-default (default to off)
#
# HS_RADCONF=off           # Get some configurations from RADIUS or a 
URL ('on' and 'url' respectively)
#
# HS_ANYIP=on              # Allow any IP address on subscriber LAN
#
#HS_MACAUTH=on             # To turn on MAC Authentication
#
# HS_MACAUTHDENY=on        # Put client in 'drop' state on MAC Auth 
Access-Reject
#
# HS_MACAUTHMODE=local     # To allow MAC Authentication based on 
macallowed, not RADIUS
#
# HS_MACALLOW=&quot;...&quot;      # List of MAC addresses to authenticate (comma 
seperated)
#
# HS_USELOCALUSERS=on      # To use the /etc/chilli/localusers file
#
# HS_OPENIDAUTH=on         # To inform the RADIUS server to allow OpenID 
Auth
#
HS_WPAGUESTS=on    # To inform the RADIUS server to allow WPA Guests
#
# HS_DNSPARANOIA=on        # To drop DNS packets containing something other
#                          # than A, CNAME, SOA, or MX records
#
# HS_OPENIDAUTH=on         # To inform the RADIUS server to allow OpenID 
Auth
#                          # Will also configure the embedded login 
forms for OpenID
#
# HS_USE_MAP=on            # Short hand for allowing the required google
#                          # sites to use Google maps (adds many google 
sites!)
#
###
#   Other feature settings and their defaults
#
HS_DEFSESSIONTIMEOUT=0   # Default session-timeout if not defined by 
RADIUS (0 for unlimited)
#
# HS_DEFIDLETIMEOUT=0      # Default idle-timeout if not defined by 
RADIUS (0 for unlimited)
#
# HS_DEFBANDWIDTHMAXDOWN=0   # Default WISPr-Bandwidth-Max-Down if not 
defined by RADIUS (0 for unlimited)
#
# HS_DEFBANDWIDTHMAXUP=0           # Default WISPr-Bandwidth-Max-Up if 
not defined by RADIUS (0 for unlimited)

###
# Centralized configuration options examples
#
# HS_RADCONF=url           # requires curl
# HS_RADCONF_URL=<A HREF="https://coova.org/app/ap/config">https://coova.org/app/ap/config</A>

# HS_RADCONF=on            # gather the ChilliSpot-Config attributes in
#                          # Administrative-User login
# HS_RADCONF_SERVER=rad01.coova.org              # RADIUS Server
# HS_RADCONF_SECRET=coova-anonymous              # RADIUS Shared Secret
# HS_RADCONF_AUTHPORT=1812                       # Auth port
# HS_RADCONF_USER=chillispot                     # Username
# HS_RADCONF_PWD=chillispot                      # Password


###
#   Firewall issues
#
# Uncomment the following to add ports to the allowed local ports list
# The up.sh script will allow these local ports to be used, while the 
default
# is to block all unwanted traffic to the tun/tap.
#
HS_TCP_PORTS=&quot;80 443&quot;

###
#   Standard configurations
#
HS_MODE=hotspot
HS_TYPE=chillispot
HS_RADAUTH=1812
HS_RADACCT=1813
# HS_ADMUSR=chillispot
# HS_ADMPWD=chillispot


###
#   Post-Auth proxy settings
#
HS_LAN_ACCESS=allow
# HS_POSTAUTH_PROXY=&lt;host or ip&gt;
# HS_POSTAUTH_PROXYPORT=&lt;port&gt;
HS_POSTAUTH_PROXY=10.1.0.1
HS_POSTAUTH_PROXYPORT=8080

#   Directory specifying where internal web pages can be served
#   by chilli with url /www/&lt;file name&gt;. Only extentions like .html
#   .jpg, .gif, .png, .js are allowed. See below for using .chi as a
#   CGI extension.
HS_WWWDIR=/etc/chilli/www

#   Using this option assumes 'haserl' is installed per-default
#   but, and CGI type program can ran from wwwsh to process requests
#   to chilli with url /www/filename.chi
HS_WWWBIN=/etc/chilli/wwwsh

#   Some configurations used in certain user interfaces
#
HS_PROVIDER=Coova
HS_PROVIDER_LINK=<A HREF="http://www.coova.org/">http://www.coova.org/</A>


###
#   WISPr RADIUS Attribute support
#

HS_LOC_NAME=&quot;My HotSpot&quot;           # WISPr Location Name and used in portal

#   WISPr settings (to form a proper WISPr-Location-Id)
# HS_LOC_NETWORK=&quot;My Network&quot;      # Network name
# HS_LOC_AC=408                    # Phone area code
# HS_LOC_CC=1                      # Phone country code
# HS_LOC_ISOCC=US                  # ISO Country code

# Embedded miniportal
# HS_REG_MODE=&quot;tos&quot; # or self, other
# HS_RAD_PROTO=&quot;pap&quot; # or mschapv2, chap
HS_RAD_PROTO=&quot;mschapv2&quot;
# HS_USE_MAP=on
On 12/09/13 14:12, Sourav wrote:
&gt;<i> BTW the radius exchanges look this way --
</I>&gt;<i>
</I>&gt;<i> rad_recv: Access-Request packet from host 192.168.1.1 port 39125, 
</I>&gt;<i> id=40, length=287
</I>&gt;<i>     ChilliSpot-Version = &quot;1.3.0&quot;
</I>&gt;<i>     User-Name = &quot;hhgk&quot;
</I>&gt;<i>     CHAP-Challenge = 0x4a82bfa6b164f1171f7aa616439a0c21
</I>&gt;<i>     CHAP-Password = 0x00db346919de9293942fc6cf7d5014a228
</I>&gt;<i>     Service-Type = Login-User
</I>&gt;<i>     Acct-Session-Id = &quot;5231317c00000001&quot;
</I>&gt;<i>     Framed-IP-Address = 10.1.0.4
</I>&gt;<i>     NAS-Port-Type = Wireless-802.11
</I>&gt;<i>     NAS-Port = 1
</I>&gt;<i>     NAS-Port-Id = &quot;00000001&quot;
</I>&gt;<i>     Calling-Station-Id = &quot;00-08-CA-46-7D-11&quot;
</I>&gt;<i>     Called-Station-Id = &quot;00-60-64-89-20-60&quot;
</I>&gt;<i>     NAS-IP-Address = 10.1.0.1
</I>&gt;<i>     NAS-Identifier = &quot;nas01&quot;
</I>&gt;<i>     WISPr-Location-ID = &quot;isocc=,cc=,ac=,network=Coova,&quot;
</I>&gt;<i>     WISPr-Location-Name = &quot;My_HotSpot&quot;
</I>&gt;<i>     WISPr-Logoff-URL = &quot;<A HREF="http://10.1.0.1:3990/logoff">http://10.1.0.1:3990/logoff</A>&quot;
</I>&gt;<i>     Message-Authenticator = 0xd50a548a33cf2e0c31d95951ae676f60
</I>&gt;<i> # Executing section authorize from file 
</I>&gt;<i> /usr/local/etc/raddb/sites-enabled/default
</I>&gt;<i> +- entering group authorize {...}
</I>&gt;<i> ++[preprocess] returns ok
</I>&gt;<i> [chap] Setting 'Auth-Type := CHAP'
</I>&gt;<i> ++[chap] returns ok
</I>&gt;<i> ++[mschap] returns noop
</I>&gt;<i> ++[digest] returns noop
</I>&gt;<i> [suffix] No '@' in User-Name = &quot;hhgk&quot;, looking up realm NULL
</I>&gt;<i> [suffix] No such realm &quot;NULL&quot;
</I>&gt;<i> ++[suffix] returns noop
</I>&gt;<i> [eap] No EAP-Message, not doing EAP
</I>&gt;<i> ++[eap] returns noop
</I>&gt;<i> [files] users: Matched entry DEFAULT at line 71
</I>&gt;<i> ++[files] returns ok
</I>&gt;<i> ++[expiration] returns noop
</I>&gt;<i> ++[logintime] returns noop
</I>&gt;<i> [pap] WARNING: Auth-Type already set.  Not setting to PAP
</I>&gt;<i> ++[pap] returns noop
</I>&gt;<i> Found Auth-Type = Accept
</I>&gt;<i> Auth-Type = Accept, accepting the user
</I>&gt;<i> # Executing section post-auth from file 
</I>&gt;<i> /usr/local/etc/raddb/sites-enabled/default
</I>&gt;<i> +- entering group post-auth {...}
</I>&gt;<i> ++[exec] returns noop
</I>&gt;<i> Sending Access-Accept of id 40 to 192.168.1.1 port 39125
</I>&gt;<i>     Idle-Timeout = 1200
</I>&gt;<i>     ChilliSpot-Bandwidth-Max-Down = 1024
</I>&gt;<i>     ChilliSpot-Bandwidth-Max-Up = 512
</I>&gt;<i>     Session-Timeout = 1800
</I>&gt;<i>     Acct-Interim-Interval = 30
</I>&gt;<i> Finished request 8.
</I>&gt;<i> Going to the next request
</I>&gt;<i> Waking up in 4.9 seconds.
</I>&gt;<i> Cleaning up request 8 ID 40 with timestamp +1041
</I>&gt;<i> Ready to process requests.
</I>&gt;<i>
</I>&gt;<i> Warm Regards,
</I>&gt;<i> Sourav
</I>&gt;<i> On 12/09/13 14:02, Sourav wrote:
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i> I have been sending out SOS for the past 2 days ........please help 
</I>&gt;&gt;<i> me out as I am stuck and cannot progress further without your help.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have setup  coova-chilli 1.3.0 with Freeradius and have set up a
</I>&gt;&gt;<i> captive portal page(hotspotlogin.html).
</I>&gt;&gt;<i> On trying to login from a PC using Wireless, Radius Access-Request
</I>&gt;&gt;<i> reaches Freeradius(which sends Access-Accept as I have set up(in users
</I>&gt;&gt;<i> file) --
</I>&gt;&gt;<i> DEFAULT Auth-Type := Accept
</I>&gt;&gt;<i>           
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But no RADIUS &quot;Acct-Status-Type=Start&quot; msg is sent by coovachilli after this, redirection
</I>&gt;&gt;<i> happens to hotspotlogin.html again, after a while. Further browsing to any site, takes
</I>&gt;&gt;<i> me to the captive portal page and not to the site. Please help me
</I>&gt;&gt;<i> resolve this as this is urgently required.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  Please find logs for the problem which I am facing as mentioned in 
</I>&gt;&gt;<i> my mail below------please help me out on this ....
</I>&gt;&gt;<i> dhcp.c: 411: 0 (Debug) dhcp_send() len=54
</I>&gt;&gt;<i> dhcp.c: 4965: 0 (Debug) dhcp_decaps: src=00:08:ca:46:7d:11 
</I>&gt;&gt;<i> dst=00:60:64:89:20:60 pr
</I>&gt;&gt;<i> dhcp.c: 3497: 0 (Debug) function dhcp_receive_ip()
</I>&gt;&gt;<i> tun.c: 1089: 0 (Debug) tun_encaps(tun0) len=52
</I>&gt;&gt;<i> redir.c: 3278: 0 (Debug) Calling redir_getstate()
</I>&gt;&gt;<i> redir.c: 3323: 0 (Debug) Receiving HTTP Request
</I>&gt;&gt;<i> redir.c: 2103: 0 (Debug) The path: json/logon
</I>&gt;&gt;<i> redir.c: 2118: 0 (Debug) The (json format) path: logon
</I>&gt;&gt;<i> redir.c: 2153: 0 (Debug) Query string: 
</I>&gt;&gt;<i> username=hhgk&amp;response=db346919de9293942fc6c
</I>&gt;&gt;<i> redir.c: 2175: 0 (Debug) Host: 10.1.0.1:3990
</I>&gt;&gt;<i> redir.c: 2160: 0 (Debug) end of http-request
</I>&gt;&gt;<i> redir.c: 1877: 0 (Debug) getparam(&amp;lang=)
</I>&gt;&gt;<i> redir.c: 1877: 0 (Debug) getparam(&amp;username=)
</I>&gt;&gt;<i> redir.c: 1903: 0 (Debug) The parameter username is: [hhgk]
</I>&gt;&gt;<i> redir.c: 2267: 0 (Debug) --&gt;&gt; Setting username=[hhgk]
</I>&gt;&gt;<i> redir.c: 1877: 0 (Debug) getparam(&amp;userurl=)
</I>&gt;&gt;<i> redir.c: 1903: 0 (Debug) The parameter userurl is: 
</I>&gt;&gt;<i> [<A HREF="http://www.telegesis.com/">http://www.telegesis.com/</A>]
</I>&gt;&gt;<i> redir.c: 2273: 0 (Debug) --&gt;&gt; Setting 
</I>&gt;&gt;<i> userurl=[<A HREF="http://www.telegesis.com/">http://www.telegesis.com/</A>]
</I>&gt;&gt;<i> redir.c: 1877: 0 (Debug) getparam(&amp;continue=)
</I>&gt;&gt;<i> redir.c: 1877: 0 (Debug) getparam(&amp;WISPrVersion=)
</I>&gt;&gt;<i> redir.c: 2295: 0 (Debug) using uamprotocol: WISPr 1.0 (1)
</I>&gt;&gt;<i> redir.c: 1877: 0 (Debug) getparam(&amp;ntresponse=)
</I>&gt;&gt;<i> redir.c: 1877: 0 (Debug) getparam(&amp;response=)
</I>&gt;&gt;<i> redir.c: 1903: 0 (Debug) The parameter response is: 
</I>&gt;&gt;<i> [db346919de9293942fc6cf7d5014a2
</I>&gt;&gt;<i> redir.c: 1877: 0 (Debug) getparam(&amp;ident=)
</I>&gt;&gt;<i> redir.c: 3388: 0 (Debug) Processing HTTP Request
</I>&gt;&gt;<i> redir.c: 3696: 0 (Debug) Processing received request
</I>&gt;&gt;<i> redir.c: 3794: 0 (Debug) redir_accept: Sending RADIUS request
</I>&gt;&gt;<i> radius.c: 1315: 0 (Debug) RADIUS client 0.0.0.0:0
</I>&gt;&gt;<i> tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=52)
</I>&gt;&gt;<i> chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4
</I>&gt;&gt;<i> dhcp.c: 5321: 0 (Debug) adding 14 to IP frame length 66
</I>&gt;&gt;<i> dhcp.c: 411: 0 (Debug) dhcp_send() len=66
</I>&gt;&gt;<i> redir.c: 2642: 0 (Debug) created radius packet (code=1, id=40, len=33)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> redir.c: 2654: 0 (Debug) SECRET: [change-me]
</I>&gt;&gt;<i> redir.c: 2803: 0 (Debug) sending radius packet (code=1, id=40, len=287)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> radius.c: 321: 0 (Debug) Allocating RADIUS packet
</I>&gt;&gt;<i> radius.c: 1898: 0 (Debug) Received RADIUS packet id=40
</I>&gt;&gt;<i> radius.c: 421: 0 (Debug) Freeing RADIUS packet
</I>&gt;&gt;<i> radius.c: 426: 0 (Debug) RADIUS queue-out id=40 idx=0
</I>&gt;&gt;<i> redir.c: 2431: 0 (Debug) Received RADIUS response
</I>&gt;&gt;<i> chilli.c: 3901: 0 (Debug) Received too small radius 
</I>&gt;&gt;<i> Acct-Interim-Interval: 30;
</I>&gt;&gt;<i> redir.c: 2531: 0 (Debug) +attribute EAP msg (0 bytes):
</I>&gt;&gt;<i> redir.c: 3804: 0 (Debug) Received RADIUS reply
</I>&gt;&gt;<i> redir.c: 3818: 0 (Debug) redir_main handling Access-Accept
</I>&gt;&gt;<i> redir.c: 1877: 0 (Debug) getparam(&amp;callback=)
</I>&gt;&gt;<i> redir.c: 1903: 0 (Debug) The parameter callback is: [chilliJSON.reply]
</I>&gt;&gt;<i> redir.c: 1394: 0 (Debug) sending json: 
</I>&gt;&gt;<i> chilliJSON.reply({&quot;version&quot;:&quot;1.0&quot;,&quot;*clientSta**te&quot;:1*,&quot;redir&quot;:{&quot;originalURL&quot;:&quot;<A HREF="http://www.telegesis.com/">http://www.telegesis.com/</A>&quot;,&quot;redirectionURL&quot;:&quot;&quot;,&quot;logoutURL&quot;:&quot;<A HREF="http://10.1.0.1:3990/logoff">http://10.1.0.1:3990/logoff</A>&quot;,&quot;ipAddress&quot;:&quot;10.1.0.4&quot;,&quot;macAddress&quot;:&quot;00-08-CA-46-7D-11&quot;},&quot;session&quot;:{&quot;sessionId&quot;:&quot;5231317c00000001&quot;,&quot;userName&quot;:&quot;hhgk&quot;,&quot;startTime&quot;:1378955693,&quot;sessionTimeout&quot;:1800,&quot;idleTimeout&quot;:1200},&quot;accounting&quot;:{&quot;sessionTime&quot;:0,&quot;idleTime&quot;:0,&quot;inputOctets&quot;:0,&quot;outputOctets&quot;:0,&quot;inputGigawords&quot;:0,&quot;outputGigawords&quot;:0,&quot;viewPoint&quot;:&quot;client&quot;}}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> redir.c: 1455: 0 (Debug) redir_write(749)
</I>&gt;&gt;<i> tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=789)
</I>&gt;&gt;<i> chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4
</I>&gt;&gt;<i> dhcp.c: 5321: 0 (Debug) adding 14 to IP frame length 803
</I>&gt;&gt;<i> dhcp.c: 411: 0 (Debug) dhcp_send() len=803
</I>&gt;&gt;<i> chilli.c: 5840: 0 (Debug) UAM login with unknown IP address: 10.1.0.4
</I>&gt;&gt;<i> redir.c: 3854: 0 (Debug) --&gt;&gt; Msg userurl=[<A HREF="http://www.telegesis.com/">http://www.telegesis.com/</A>]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> redir.c: 3077: 0 (Debug) close_exit
</I>&gt;&gt;<i> dhcp.c: 4965: 0 (Debug) dhcp_decaps: src=00:08:ca:46:7d:11 
</I>&gt;&gt;<i> dst=00:60:64:89:20:60 pr
</I>&gt;&gt;<i> dhcp.c: 3497: 0 (Debug) function dhcp_receive_ip()
</I>&gt;&gt;<i> tun.c: 1089: 0 (Debug) tun_encaps(tun0) len=40
</I>&gt;&gt;<i> tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=52)
</I>&gt;&gt;<i> chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4
</I>&gt;&gt;<i> dhcp.c: 5321: 0 (Debug) adding 14 to IP frame length 66
</I>&gt;&gt;<i> dhcp.c: 411: 0 (Debug) dhcp_send() len=66
</I>&gt;&gt;<i> tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=40)
</I>&gt;&gt;<i> chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4
</I>&gt;&gt;<i> dhcp.c: 5321: 0 (Debug) adding 14 to IP frame length 54
</I>&gt;&gt;<i> dhcp.c: 411: 0 (Debug) dhcp_send() len=54
</I>&gt;&gt;<i> chilli.c: 379: 0 (Debug) caught 17 via selfpipe
</I>&gt;&gt;<i> chilli.c: 310: 0 (Debug) child 6326 terminated
</I>&gt;&gt;<i> chilli.c: 135: 0 (Debug) Freed child process 6326 [[redir]]
</I>&gt;&gt;<i> dhcp.c: 4965: 0 (Debug) dhcp_decaps: src=00:08:ca:46:7d:11 
</I>&gt;&gt;<i> dst=00:60:64:89:20:60 pr
</I>&gt;&gt;<i> dhcp.c: 3497: 0 (Debug) function dhcp_receive_ip()
</I>&gt;&gt;<i> tun.c: 1089: 0 (Debug) tun_encaps(tun0) len=40
</I>&gt;&gt;<i> tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=40)
</I>&gt;&gt;<i> chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4
</I>&gt;&gt;<i> dhcp.c: 5321: 0 (Debug) adding 14 to IP frame length 54
</I>&gt;&gt;<i> dhcp.c: 411: 0 (Debug) dhcp_send() len=54
</I>&gt;&gt;<i> dhcp.c: 4965: 0 (Debug) dhcp_decaps: src=00:08:ca:46:7d:11 
</I>&gt;&gt;<i> dst=00:60:64:89:20:60 pr
</I>&gt;&gt;<i> dhcp.c: 3497: 0 (Debug) function dhcp_receive_ip()
</I>&gt;&gt;<i> dhcp.c: 2558: 0 (Debug) Resetting connection on port 56160-&gt;443
</I>&gt;&gt;<i> dhcp.c: 411: 0 (Debug) dhcp_send() len=54
</I>&gt;&gt;<i> dhcp.c: 3908: 0 (Debug) dropping packet; not nat'ed
</I>&gt;&gt;<i> dhcp.c: 4965: 0 (Debug) dhcp_decaps: src=00:08:ca:46:7d:11 
</I>&gt;&gt;<i> dst=00:60:64:89:20:60 pr
</I>&gt;&gt;<i> dhcp.c: 3497: 0 (Debug) function dhcp_receive_ip()
</I>&gt;&gt;<i> dhcp.c: 2558: 0 (Debug) Resetting connection on port 56165-&gt;443
</I>&gt;&gt;<i> dhcp.c: 411: 0 (Debug) dhcp_send() len=54
</I>&gt;&gt;<i> dhcp.c: 3908: 0 (Debug) dropping packet; not nat'ed
</I>&gt;&gt;<i> tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=52)
</I>&gt;&gt;<i> chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4
</I>&gt;&gt;<i> dhcp.c: 5321: 0 (Debug) adding 14 to IP frame length 66
</I>&gt;&gt;<i> dhcp.c: 2674: 0 (Debug) Resetting connection on port 443-&gt;56160 (undo)
</I>&gt;&gt;<i> dhcp.c: 411: 0 (Debug) dhcp_send() len=54
</I>&gt;&gt;<i> tun.c: 1089: 0 (Debug) tun_encaps(tun0) len=40
</I>&gt;&gt;<i> dhcp.c: 5390: 0 (Debug) dhcp_undoDNAT() returns true
</I>&gt;&gt;<i> tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=52)
</I>&gt;&gt;<i> chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4
</I>&gt;&gt;<i> dhcp.c: 5321: 0 (Debug) adding 14 to IP frame length 66
</I>&gt;&gt;<i> dhcp.c: 2674: 0 (Debug) Resetting connection on port 443-&gt;56165 (undo)
</I>&gt;&gt;<i> dhcp.c: 411: 0 (Debug) dhcp_send() len=54
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> After a little while --
</I>&gt;&gt;<i> dhcp.c: 4965: 0 (Debug) dhcp_decaps: src=00:08:ca:46:7d:11 
</I>&gt;&gt;<i> dst=00:60:64:89:20:60 pr
</I>&gt;&gt;<i> dhcp.c: 3497: 0 (Debug) function dhcp_receive_ip()
</I>&gt;&gt;<i> tun.c: 1089: 0 (Debug) tun_encaps(tun0) len=52
</I>&gt;&gt;<i> redir.c: 3278: 0 (Debug) Calling redir_getstate()
</I>&gt;&gt;<i> redir.c: 3323: 0 (Debug) Receiving HTTP Request
</I>&gt;&gt;<i> redir.c: 2103: 0 (Debug) The path: json/status
</I>&gt;&gt;<i> redir.c: 2118: 0 (Debug) The (json format) path: status
</I>&gt;&gt;<i> redir.c: 2153: 0 (Debug) Query string: 
</I>&gt;&gt;<i> callback=chilliJSON.reply&amp;0.5259556404780596
</I>&gt;&gt;<i> redir.c: 2175: 0 (Debug) Host: 10.1.0.1:3990
</I>&gt;&gt;<i> redir.c: 2160: 0 (Debug) end of http-request
</I>&gt;&gt;<i> redir.c: 3388: 0 (Debug) Processing HTTP Request
</I>&gt;&gt;<i> redir.c: 3696: 0 (Debug) Processing received request
</I>&gt;&gt;<i> redir.c: 1877: 0 (Debug) getparam(&amp;callback=)
</I>&gt;&gt;<i> redir.c: 1903: 0 (Debug) The parameter callback is: [chilliJSON.reply]
</I>&gt;&gt;<i> redir.c: 1394: 0 (Debug) sending json: 
</I>&gt;&gt;<i> chilliJSON.reply({&quot;version&quot;:&quot;1.0&quot;,&quot;*clientSta**te&quot;:0*,&quot;challenge&quot;:&quot;00000000000000000000000000000000&quot;,&quot;location&quot;:{&quot;name&quot;:&quot;My 
</I>&gt;&gt;<i> HotSpot&quot;},&quot;redir&quot;:{&quot;originalURL&quot;:&quot;&quot;,&quot;redirectionURL&quot;:&quot;&quot;,&quot;logoutURL&quot;:&quot;<A HREF="http://10.1.0.1:3990/logoff">http://10.1.0.1:3990/logoff</A>&quot;,&quot;ipAddress&quot;:&quot;10.1.0.4&quot;,&quot;macAddress&quot;:&quot;00-08-CA-46-7D-11&quot;}})
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> redir.c: 1455: 0 (Debug) redir_write(542)
</I>&gt;&gt;<i> redir.c: 3077: 0 (Debug) close_exit
</I>&gt;&gt;<i> tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=40)
</I>&gt;&gt;<i> chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Warm Regards,
</I>&gt;&gt;<i> Sourav
</I>&gt;&gt;<i> On 11/09/13 13:10, Sourav wrote:
</I>&gt;&gt;&gt;<i> Hi All,
</I>&gt;&gt;&gt;<i> I have setup  coova-chilli 1.3.0 with Freeradius and have set up a
</I>&gt;&gt;&gt;<i> captive portal page(hotspotlogin.html).
</I>&gt;&gt;&gt;<i> On trying to login from a PC using Wireless, Radius Access-Request
</I>&gt;&gt;&gt;<i> reaches Freeradius(which sends Access-Accept as I have set up(in users
</I>&gt;&gt;&gt;<i> file) --
</I>&gt;&gt;&gt;<i> DEFAULT Auth-Type := Accept
</I>&gt;&gt;&gt;<i>           WISPr-Redirection-URL=<A HREF="http://google.com.au">http://google.com.au</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> But instead of getting redirected to google.com.au, the redirection
</I>&gt;&gt;&gt;<i> happens to hotspotlogin.html again. Further browsing to any site, takes
</I>&gt;&gt;&gt;<i> me to the captive portal page and not to the site. Please help me
</I>&gt;&gt;&gt;<i> resolve this as this is urgently required.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -- 
</I>&gt;&gt;<i> Warm Regards,
</I>&gt;&gt;<i> Sourav
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ______________________________________________________________________
</I>&gt;&gt;<i> This communication contains information which may be confidential or 
</I>&gt;&gt;<i> privileged. The information is intended solely for the use of the 
</I>&gt;&gt;<i> individual or entity named above. If you are not the intended 
</I>&gt;&gt;<i> recipient, be aware that any disclosure, copying, distribution or use 
</I>&gt;&gt;<i> of the contents of this information is prohibited. If you have 
</I>&gt;&gt;<i> received this communication in error, please notify me by telephone 
</I>&gt;&gt;<i> immediately.
</I>&gt;&gt;<i> ______________________________________________________________________
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> Warm Regards,
</I>&gt;<i> Sourav
</I>&gt;<i>
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i> This communication contains information which may be confidential or 
</I>&gt;<i> privileged. The information is intended solely for the use of the 
</I>&gt;<i> individual or entity named above. If you are not the intended 
</I>&gt;<i> recipient, be aware that any disclosure, copying, distribution or use 
</I>&gt;<i> of the contents of this information is prohibited. If you have 
</I>&gt;<i> received this communication in error, please notify me by telephone 
</I>&gt;<i> immediately.
</I>&gt;<i> ______________________________________________________________________
</I>

-- 
Warm Regards,
Sourav



______________________________________________________________________
This communication contains information which may be confidential or privileged. The information is intended solely for the use of the individual or entity named above.  If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this information is prohibited.  If you have received this communication in error, please notify me by telephone immediately.
______________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20130913/be2290a7/attachment-0001.html">http://lists.coova.org/pipermail/chilli/attachments/20130913/be2290a7/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002368.html">[Chilli] coova-chilli 1.3.0 problem with WISPr-Redirection-URL
</A></li>
	<LI>Next message: <A HREF="002373.html">[Chilli] coova-chilli 1.3.0 problem with WISPr-Redirection-URL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2371">[ date ]</a>
              <a href="thread.html#2371">[ thread ]</a>
              <a href="subject.html#2371">[ subject ]</a>
              <a href="author.html#2371">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
