<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] coova-chilli 1.3.0 problem with WISPr-Redirection-URL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20coova-chilli%201.3.0%20problem%20with%20WISPr-Redirection-URL&In-Reply-To=%3C52313CE5.70605%40netcommwireless.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002366.html">
   <LINK REL="Next"  HREF="002368.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] coova-chilli 1.3.0 problem with WISPr-Redirection-URL</H1>
    <B>Sourav</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20coova-chilli%201.3.0%20problem%20with%20WISPr-Redirection-URL&In-Reply-To=%3C52313CE5.70605%40netcommwireless.com%3E"
       TITLE="[Chilli] coova-chilli 1.3.0 problem with WISPr-Redirection-URL">sourav.chakraborty at netcommwireless.com
       </A><BR>
    <I>Thu Sep 12 04:02:45 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="002366.html">[Chilli] Fwd: coova-chilli 1.3.0 problem with WISPr-Redirection-URL
</A></li>
        <LI>Next message: <A HREF="002368.html">[Chilli] coova-chilli 1.3.0 problem with WISPr-Redirection-URL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2367">[ date ]</a>
              <a href="thread.html#2367">[ thread ]</a>
              <a href="subject.html#2367">[ subject ]</a>
              <a href="author.html#2367">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
I have been sending out SOS for the past 2 days ........please help me 
out as I am stuck and cannot progress further without your help.

I have setup  coova-chilli 1.3.0 with Freeradius and have set up a
captive portal page(hotspotlogin.html).
On trying to login from a PC using Wireless, Radius Access-Request
reaches Freeradius(which sends Access-Accept as I have set up(in users
file) --
DEFAULT Auth-Type := Accept
          

But no RADIUS &quot;Acct-Status-Type=Start&quot; msg is sent by coovachilli after this, redirection
happens to hotspotlogin.html again, after a while. Further browsing to any site, takes
me to the captive portal page and not to the site. Please help me
resolve this as this is urgently required.


  Please find logs for the problem which I am facing as mentioned in my 
mail below------please help me out on this ....
dhcp.c: 411: 0 (Debug) dhcp_send() len=54
dhcp.c: 4965: 0 (Debug) dhcp_decaps: src=00:08:ca:46:7d:11 
dst=00:60:64:89:20:60 pr
dhcp.c: 3497: 0 (Debug) function dhcp_receive_ip()
tun.c: 1089: 0 (Debug) tun_encaps(tun0) len=52
redir.c: 3278: 0 (Debug) Calling redir_getstate()
redir.c: 3323: 0 (Debug) Receiving HTTP Request
redir.c: 2103: 0 (Debug) The path: json/logon
redir.c: 2118: 0 (Debug) The (json format) path: logon
redir.c: 2153: 0 (Debug) Query string: 
username=hhgk&amp;response=db346919de9293942fc6c
redir.c: 2175: 0 (Debug) Host: 10.1.0.1:3990
redir.c: 2160: 0 (Debug) end of http-request
redir.c: 1877: 0 (Debug) getparam(&amp;lang=)
redir.c: 1877: 0 (Debug) getparam(&amp;username=)
redir.c: 1903: 0 (Debug) The parameter username is: [hhgk]
redir.c: 2267: 0 (Debug) --&gt;&gt; Setting username=[hhgk]
redir.c: 1877: 0 (Debug) getparam(&amp;userurl=)
redir.c: 1903: 0 (Debug) The parameter userurl is: 
[<A HREF="http://www.telegesis.com/">http://www.telegesis.com/</A>]
redir.c: 2273: 0 (Debug) --&gt;&gt; Setting userurl=[<A HREF="http://www.telegesis.com/">http://www.telegesis.com/</A>]
redir.c: 1877: 0 (Debug) getparam(&amp;continue=)
redir.c: 1877: 0 (Debug) getparam(&amp;WISPrVersion=)
redir.c: 2295: 0 (Debug) using uamprotocol: WISPr 1.0 (1)
redir.c: 1877: 0 (Debug) getparam(&amp;ntresponse=)
redir.c: 1877: 0 (Debug) getparam(&amp;response=)
redir.c: 1903: 0 (Debug) The parameter response is: 
[db346919de9293942fc6cf7d5014a2
redir.c: 1877: 0 (Debug) getparam(&amp;ident=)
redir.c: 3388: 0 (Debug) Processing HTTP Request
redir.c: 3696: 0 (Debug) Processing received request
redir.c: 3794: 0 (Debug) redir_accept: Sending RADIUS request
radius.c: 1315: 0 (Debug) RADIUS client 0.0.0.0:0
tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=52)
chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4
dhcp.c: 5321: 0 (Debug) adding 14 to IP frame length 66
dhcp.c: 411: 0 (Debug) dhcp_send() len=66
redir.c: 2642: 0 (Debug) created radius packet (code=1, id=40, len=33)

redir.c: 2654: 0 (Debug) SECRET: [change-me]
redir.c: 2803: 0 (Debug) sending radius packet (code=1, id=40, len=287)

radius.c: 321: 0 (Debug) Allocating RADIUS packet
radius.c: 1898: 0 (Debug) Received RADIUS packet id=40
radius.c: 421: 0 (Debug) Freeing RADIUS packet
radius.c: 426: 0 (Debug) RADIUS queue-out id=40 idx=0
redir.c: 2431: 0 (Debug) Received RADIUS response
chilli.c: 3901: 0 (Debug) Received too small radius 
Acct-Interim-Interval: 30;
redir.c: 2531: 0 (Debug) +attribute EAP msg (0 bytes):
redir.c: 3804: 0 (Debug) Received RADIUS reply
redir.c: 3818: 0 (Debug) redir_main handling Access-Accept
redir.c: 1877: 0 (Debug) getparam(&amp;callback=)
redir.c: 1903: 0 (Debug) The parameter callback is: [chilliJSON.reply]
redir.c: 1394: 0 (Debug) sending json: 
chilliJSON.reply({&quot;version&quot;:&quot;1.0&quot;,&quot;*clientSta**te&quot;:1*,&quot;redir&quot;:{&quot;originalURL&quot;:&quot;<A HREF="http://www.telegesis.com/">http://www.telegesis.com/</A>&quot;,&quot;redirectionURL&quot;:&quot;&quot;,&quot;logoutURL&quot;:&quot;<A HREF="http://10.1.0.1:3990/logoff">http://10.1.0.1:3990/logoff</A>&quot;,&quot;ipAddress&quot;:&quot;10.1.0.4&quot;,&quot;macAddress&quot;:&quot;00-08-CA-46-7D-11&quot;},&quot;session&quot;:{&quot;sessionId&quot;:&quot;5231317c00000001&quot;,&quot;userName&quot;:&quot;hhgk&quot;,&quot;startTime&quot;:1378955693,&quot;sessionTimeout&quot;:1800,&quot;idleTimeout&quot;:1200},&quot;accounting&quot;:{&quot;sessionTime&quot;:0,&quot;idleTime&quot;:0,&quot;inputOctets&quot;:0,&quot;outputOctets&quot;:0,&quot;inputGigawords&quot;:0,&quot;outputGigawords&quot;:0,&quot;viewPoint&quot;:&quot;client&quot;}}




redir.c: 1455: 0 (Debug) redir_write(749)
tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=789)
chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4
dhcp.c: 5321: 0 (Debug) adding 14 to IP frame length 803
dhcp.c: 411: 0 (Debug) dhcp_send() len=803
chilli.c: 5840: 0 (Debug) UAM login with unknown IP address: 10.1.0.4
redir.c: 3854: 0 (Debug) --&gt;&gt; Msg userurl=[<A HREF="http://www.telegesis.com/">http://www.telegesis.com/</A>]

redir.c: 3077: 0 (Debug) close_exit
dhcp.c: 4965: 0 (Debug) dhcp_decaps: src=00:08:ca:46:7d:11 
dst=00:60:64:89:20:60 pr
dhcp.c: 3497: 0 (Debug) function dhcp_receive_ip()
tun.c: 1089: 0 (Debug) tun_encaps(tun0) len=40
tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=52)
chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4
dhcp.c: 5321: 0 (Debug) adding 14 to IP frame length 66
dhcp.c: 411: 0 (Debug) dhcp_send() len=66
tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=40)
chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4
dhcp.c: 5321: 0 (Debug) adding 14 to IP frame length 54
dhcp.c: 411: 0 (Debug) dhcp_send() len=54
chilli.c: 379: 0 (Debug) caught 17 via selfpipe
chilli.c: 310: 0 (Debug) child 6326 terminated
chilli.c: 135: 0 (Debug) Freed child process 6326 [[redir]]
dhcp.c: 4965: 0 (Debug) dhcp_decaps: src=00:08:ca:46:7d:11 
dst=00:60:64:89:20:60 pr
dhcp.c: 3497: 0 (Debug) function dhcp_receive_ip()
tun.c: 1089: 0 (Debug) tun_encaps(tun0) len=40
tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=40)
chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4
dhcp.c: 5321: 0 (Debug) adding 14 to IP frame length 54
dhcp.c: 411: 0 (Debug) dhcp_send() len=54
dhcp.c: 4965: 0 (Debug) dhcp_decaps: src=00:08:ca:46:7d:11 
dst=00:60:64:89:20:60 pr
dhcp.c: 3497: 0 (Debug) function dhcp_receive_ip()
dhcp.c: 2558: 0 (Debug) Resetting connection on port 56160-&gt;443
dhcp.c: 411: 0 (Debug) dhcp_send() len=54
dhcp.c: 3908: 0 (Debug) dropping packet; not nat'ed
dhcp.c: 4965: 0 (Debug) dhcp_decaps: src=00:08:ca:46:7d:11 
dst=00:60:64:89:20:60 pr
dhcp.c: 3497: 0 (Debug) function dhcp_receive_ip()
dhcp.c: 2558: 0 (Debug) Resetting connection on port 56165-&gt;443
dhcp.c: 411: 0 (Debug) dhcp_send() len=54
dhcp.c: 3908: 0 (Debug) dropping packet; not nat'ed
tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=52)
chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4
dhcp.c: 5321: 0 (Debug) adding 14 to IP frame length 66
dhcp.c: 2674: 0 (Debug) Resetting connection on port 443-&gt;56160 (undo)
dhcp.c: 411: 0 (Debug) dhcp_send() len=54
tun.c: 1089: 0 (Debug) tun_encaps(tun0) len=40
dhcp.c: 5390: 0 (Debug) dhcp_undoDNAT() returns true
tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=52)
chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4
dhcp.c: 5321: 0 (Debug) adding 14 to IP frame length 66
dhcp.c: 2674: 0 (Debug) Resetting connection on port 443-&gt;56165 (undo)
dhcp.c: 411: 0 (Debug) dhcp_send() len=54



After a little while --
dhcp.c: 4965: 0 (Debug) dhcp_decaps: src=00:08:ca:46:7d:11 
dst=00:60:64:89:20:60 pr
dhcp.c: 3497: 0 (Debug) function dhcp_receive_ip()
tun.c: 1089: 0 (Debug) tun_encaps(tun0) len=52
redir.c: 3278: 0 (Debug) Calling redir_getstate()
redir.c: 3323: 0 (Debug) Receiving HTTP Request
redir.c: 2103: 0 (Debug) The path: json/status
redir.c: 2118: 0 (Debug) The (json format) path: status
redir.c: 2153: 0 (Debug) Query string: 
callback=chilliJSON.reply&amp;0.5259556404780596
redir.c: 2175: 0 (Debug) Host: 10.1.0.1:3990
redir.c: 2160: 0 (Debug) end of http-request
redir.c: 3388: 0 (Debug) Processing HTTP Request
redir.c: 3696: 0 (Debug) Processing received request
redir.c: 1877: 0 (Debug) getparam(&amp;callback=)
redir.c: 1903: 0 (Debug) The parameter callback is: [chilliJSON.reply]
redir.c: 1394: 0 (Debug) sending json: 
chilliJSON.reply({&quot;version&quot;:&quot;1.0&quot;,&quot;*clientSta**te&quot;:0*,&quot;challenge&quot;:&quot;00000000000000000000000000000000&quot;,&quot;location&quot;:{&quot;name&quot;:&quot;My 
HotSpot&quot;},&quot;redir&quot;:{&quot;originalURL&quot;:&quot;&quot;,&quot;redirectionURL&quot;:&quot;&quot;,&quot;logoutURL&quot;:&quot;<A HREF="http://10.1.0.1:3990/logoff">http://10.1.0.1:3990/logoff</A>&quot;,&quot;ipAddress&quot;:&quot;10.1.0.4&quot;,&quot;macAddress&quot;:&quot;00-08-CA-46-7D-11&quot;}})


redir.c: 1455: 0 (Debug) redir_write(542)
redir.c: 3077: 0 (Debug) close_exit
tun.c: 802: 0 (Debug) tun_decaps(idx=0, len=40)
chilli.c: 2657: 0 (Debug) sending to : 10.1.0.4

Warm Regards,
Sourav
On 11/09/13 13:10, Sourav wrote:
&gt;<i> Hi All,
</I>&gt;<i> I have setup  coova-chilli 1.3.0 with Freeradius and have set up a
</I>&gt;<i> captive portal page(hotspotlogin.html).
</I>&gt;<i> On trying to login from a PC using Wireless, Radius Access-Request
</I>&gt;<i> reaches Freeradius(which sends Access-Accept as I have set up(in users
</I>&gt;<i> file) --
</I>&gt;<i> DEFAULT Auth-Type := Accept
</I>&gt;<i>           WISPr-Redirection-URL=<A HREF="http://google.com.au">http://google.com.au</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> But instead of getting redirected to google.com.au, the redirection
</I>&gt;<i> happens to hotspotlogin.html again. Further browsing to any site, takes
</I>&gt;<i> me to the captive portal page and not to the site. Please help me
</I>&gt;<i> resolve this as this is urgently required.
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>

-- 
Warm Regards,
Sourav



______________________________________________________________________
This communication contains information which may be confidential or privileged. The information is intended solely for the use of the individual or entity named above.  If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this information is prohibited.  If you have received this communication in error, please notify me by telephone immediately.
______________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20130912/4fb7d719/attachment-0001.html">http://lists.coova.org/pipermail/chilli/attachments/20130912/4fb7d719/attachment-0001.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002366.html">[Chilli] Fwd: coova-chilli 1.3.0 problem with WISPr-Redirection-URL
</A></li>
	<LI>Next message: <A HREF="002368.html">[Chilli] coova-chilli 1.3.0 problem with WISPr-Redirection-URL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2367">[ date ]</a>
              <a href="thread.html#2367">[ thread ]</a>
              <a href="subject.html#2367">[ subject ]</a>
              <a href="author.html#2367">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
