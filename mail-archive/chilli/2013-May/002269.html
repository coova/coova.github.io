<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] CoovaChiili Permit Server IP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20CoovaChiili%20Permit%20Server%20IP&In-Reply-To=%3C1369233762.2638.2.camel%40david-XPS%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002268.html">
   <LINK REL="Next"  HREF="002270.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] CoovaChiili Permit Server IP</H1>
    <B>David Bird</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20CoovaChiili%20Permit%20Server%20IP&In-Reply-To=%3C1369233762.2638.2.camel%40david-XPS%3E"
       TITLE="[Chilli] CoovaChiili Permit Server IP">david at coova.com
       </A><BR>
    <I>Wed May 22 14:42:42 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="002268.html">[Chilli] CoovaChiili Permit Server IP
</A></li>
        <LI>Next message: <A HREF="002270.html">[Chilli] CoovaChiili Permit Server IP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2269">[ date ]</a>
              <a href="thread.html#2269">[ thread ]</a>
              <a href="subject.html#2269">[ subject ]</a>
              <a href="author.html#2269">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes, sorry, I confused conup and macup since macup wouldn't be available
in layer3 mode. Hmm... perhaps for layer3 there could be an option
similar to macup but for ip-only (not to confuse with ipup which runs
when chilli sets up the tun interface). 

On Wed, 2013-05-22 at 13:23 +0200, Xabier Oneca -- xOneca wrote:
&gt;<i> Maybe he meant 'macup'. This *does* run after the initial DHCP
</I>&gt;<i> request, but I'm afraid won't work if you have an external DHCP server
</I>&gt;<i> set-up... Neither know when was implemented, as it doesn't still
</I>&gt;<i> appear in the online manual page...
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Xabier Oneca_,,_
</I>&gt;<i> 
</I>&gt;<i> El 22/05/2013 12:59, &quot;Francesc Rom&#224; i Frigol&#233;&quot;
</I>&gt;<i> &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">francesc at socialandbeyond.com</A>&gt; escribi&#243;:
</I>&gt;<i>         Hi,
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         I think that what David is suggesting is to authorize the IPs
</I>&gt;<i>         syncronously, as soon as they show up in the network, rather
</I>&gt;<i>         than polling for them every minute. That would make the system
</I>&gt;<i>         more responsive.
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         What I don't understand is how would it be possible to
</I>&gt;<i>         accomplish that with the conup script. As it is documented
</I>&gt;<i>         here <A HREF="http://coova.org/CoovaChilli/chilli.conf">http://coova.org/CoovaChilli/chilli.conf</A>  the conup
</I>&gt;<i>         script is executed after a session is authorized. I wouldn't
</I>&gt;<i>         expect it to be executed when the device shows up in the
</I>&gt;<i>         network, before is authorized. 
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         Francesc Rom&#224; i Frigol&#233;
</I>&gt;<i>         
</I>&gt;<i>         CTO
</I>&gt;<i>         
</I>&gt;<i>         Torre Telef&#243;nica Diagonal 00, planta 11, Wayra 
</I>&gt;<i>         Pla&#231;a Ernest Lluch i Mart&#237;n, 5
</I>&gt;<i>         
</I>&gt;<i>         08019 Barcelona 
</I>&gt;<i>         
</I>&gt;<i>         Tel. +34 93.1234.962
</I>&gt;<i>         
</I>&gt;<i>         Skype: cescpak
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         On Wed, May 22, 2013 at 9:52 AM, Russell Mike
</I>&gt;<i>         &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">radius.sir at gmail.com</A>&gt; wrote:
</I>&gt;<i>                 Hi Luis &amp; David,
</I>&gt;<i>                 
</I>&gt;<i>                 
</I>&gt;<i>                 Thanks for your inputs, discussion became very
</I>&gt;<i>                 interesting. Thanks for sharing ideas. standing by to
</I>&gt;<i>                 hear more from David. B about conup. 
</I>&gt;<i>                 
</I>&gt;<i>                 
</I>&gt;<i>                 Thanks / Regards   
</I>&gt;<i>                 --RM 
</I>&gt;<i>                 
</I>&gt;<i>                 
</I>&gt;<i>                 
</I>&gt;<i>                 On Tue, May 21, 2013 at 6:10 PM, Luis Ferreira
</I>&gt;<i>                 &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">lferreira at cabocom.cv</A>&gt; wrote:
</I>&gt;<i>                         Hi David,
</I>&gt;<i>                         
</I>&gt;<i>                         Can you clarify on the conup?
</I>&gt;<i>                         
</I>&gt;<i>                         From what I understood, you are saying that is
</I>&gt;<i>                         a script that is run every time a client
</I>&gt;<i>                         connects to the network. (correct?)
</I>&gt;<i>                         
</I>&gt;<i>                         If true, will that work in my case, with
</I>&gt;<i>                         another server running ISC-DHCP?
</I>&gt;<i>                         
</I>&gt;<i>                         Where can I configure it? Where is it located?
</I>&gt;<i>                         
</I>&gt;<i>                         Regards,
</I>&gt;<i>                         
</I>&gt;<i>                         Luis
</I>&gt;<i>                         
</I>&gt;<i>                         -----Mensagem original-----
</I>&gt;<i>                         De: <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli-bounces at coova.org</A>
</I>&gt;<i>                         [mailto:<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli-bounces at coova.org</A>] Em nome de
</I>&gt;<i>                         David Bird
</I>&gt;<i>                         Enviada: ter&#231;a-feira, 21 de Maio de 2013 16:01
</I>&gt;<i>                         Para: <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli at coova.org</A>
</I>&gt;<i>                         Assunto: Re: [Chilli] CoovaChiili Permit
</I>&gt;<i>                         Server IP
</I>&gt;<i>                         
</I>&gt;<i>                         There could be an option similar to macallowed
</I>&gt;<i>                         (plus macallowlocal) but for layer3 mode using
</I>&gt;<i>                         ip addresses. Using a script like the one
</I>&gt;<i>                         suggested would also work - though, I think
</I>&gt;<i>                         you'd want 'authorize'
</I>&gt;<i>                         
</I>&gt;<i>                         instead of 'login' since you don't have
</I>&gt;<i>                         RADIUS. You can also do something similar from
</I>&gt;<i>                         the conup script so that as soon as the
</I>&gt;<i>                         station connects, you authorize it. 
</I>&gt;<i>                         
</I>&gt;<i>                         
</I>&gt;<i>                         On Tue, 2013-05-21 at 09:23 -0100, Luis
</I>&gt;<i>                         Ferreira wrote:
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; Hi Russell,
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;  
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; Here we had the same problem, and were able
</I>&gt;<i>                         to fix it with the 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; following script:
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; #!/bin/bash
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;  
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; usercheck=$(/usr/local/sbin/chilli_query
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; -s /usr/local/var/run/chilli.vlanxx.sock
</I>&gt;<i>                         list |grep -c &quot;1 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; accountusername &quot;)
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;  
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; if [ $usercheck = '0' ];
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; then
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;         echo &quot;Logging in accountname&quot;
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;         /usr/local/sbin/chilli_query
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; -s /usr/local/var/run/chilli.vlanxx.sock
</I>&gt;<i>                         login ip 192.168.10.251 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; username accountusername password
</I>&gt;<i>                         accountpassword
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; fi
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;  
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; Replace account name, account password and
</I>&gt;<i>                         IP for the correct ones.
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; Also check the location of the sock files.
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;  
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; This script is running every minute. If the
</I>&gt;<i>                         IP is not present, Chilli 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; will not perform the login and ignore it.
</I>&gt;<i>                         But if it is present (client
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; connected) it will trigger the account
</I>&gt;<i>                         login.
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;  
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; This is a very dirty hack, but we have been
</I>&gt;<i>                         using it for more than 2 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; years and it never failed (except when the
</I>&gt;<i>                         account would ran out of 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; credit J ).
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;  
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; Btw, if someone as a different (and less
</I>&gt;<i>                         hacked) way of doing this on 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; layer 3, please share it.
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;  
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; Regards,
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; Luis
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;  
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;  
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; Dear Coova Gurus,
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;  
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; CoovaChilli Layer3, Working great. But for
</I>&gt;<i>                         some days now, i am working 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; CoovaChilli to allow some devices to allow
</I>&gt;<i>                         access without 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; authentication AND have Static IP address.
</I>&gt;<i>                         (Servers, IP phones, Apple 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; TV etc..).
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;  
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; MAC auth do not help because of L3 setup.
</I>&gt;<i>                         Have anyone got the idea.
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; How can configure coovachilli to allow
</I>&gt;<i>                         access 10 static ip address out 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; of a subnet by default.
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;  
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; Thanks in advance. 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;  
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; Thanks / Regards
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; 
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;
</I>&gt;<i>                         _______________________________________________
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; Chilli mailing list
</I>&gt;<i>                         
</I>&gt;<i>                         &gt; <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i>                         
</I>&gt;<i>                         &gt;
</I>&gt;<i>                         <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>&gt;<i>                         
</I>&gt;<i>                         --
</I>&gt;<i>                         
</I>&gt;<i>                         --
</I>&gt;<i>                         
</I>&gt;<i>                         David Bird
</I>&gt;<i>                         
</I>&gt;<i>                         <A HREF="http://www.linkedin.com/in/dwbird/">http://www.linkedin.com/in/dwbird/</A>
</I>&gt;<i>                         
</I>&gt;<i>                         _______________________________________________
</I>&gt;<i>                         
</I>&gt;<i>                         Chilli mailing list
</I>&gt;<i>                         
</I>&gt;<i>                         <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i>                         
</I>&gt;<i>                         <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>&gt;<i>                         
</I>&gt;<i>                         
</I>&gt;<i>                         
</I>&gt;<i>                         _______________________________________________
</I>&gt;<i>                         Chilli mailing list
</I>&gt;<i>                         <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i>                         <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>&gt;<i>                         
</I>&gt;<i>                 
</I>&gt;<i>                 
</I>&gt;<i>                 
</I>&gt;<i>                 _______________________________________________
</I>&gt;<i>                 Chilli mailing list
</I>&gt;<i>                 <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i>                 <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>&gt;<i>                 
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         _______________________________________________
</I>&gt;<i>         Chilli mailing list
</I>&gt;<i>         <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i>         <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>&gt;<i>         
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Chilli mailing list
</I>&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002268.html">[Chilli] CoovaChiili Permit Server IP
</A></li>
	<LI>Next message: <A HREF="002270.html">[Chilli] CoovaChiili Permit Server IP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2269">[ date ]</a>
              <a href="thread.html#2269">[ thread ]</a>
              <a href="subject.html#2269">[ subject ]</a>
              <a href="author.html#2269">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
