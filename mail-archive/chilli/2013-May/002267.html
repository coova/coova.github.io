<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] CoovaChiili Permit Server IP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20CoovaChiili%20Permit%20Server%20IP&In-Reply-To=%3CCAJaV1AzeaEXFMuF55uT6U9U0vVOKpiij4-Fd12v1gv9jeR%2BSHw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002266.html">
   <LINK REL="Next"  HREF="002268.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] CoovaChiili Permit Server IP</H1>
    <B>Francesc Rom&#224; i Frigol&#233;</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20CoovaChiili%20Permit%20Server%20IP&In-Reply-To=%3CCAJaV1AzeaEXFMuF55uT6U9U0vVOKpiij4-Fd12v1gv9jeR%2BSHw%40mail.gmail.com%3E"
       TITLE="[Chilli] CoovaChiili Permit Server IP">francesc at socialandbeyond.com
       </A><BR>
    <I>Wed May 22 10:35:03 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="002266.html">[Chilli] CoovaChiili Permit Server IP
</A></li>
        <LI>Next message: <A HREF="002268.html">[Chilli] CoovaChiili Permit Server IP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2267">[ date ]</a>
              <a href="thread.html#2267">[ thread ]</a>
              <a href="subject.html#2267">[ subject ]</a>
              <a href="author.html#2267">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I think that what David is suggesting is to authorize the IPs syncronously,
as soon as they show up in the network, rather than polling for them every
minute. That would make the system more responsive.

What I don't understand is how would it be possible to accomplish that with
the conup script. As it is documented here
<A HREF="http://coova.org/CoovaChilli/chilli.conf">http://coova.org/CoovaChilli/chilli.conf</A>  the conup script is executed
after a session is authorized. I wouldn't expect it to be executed when the
device shows up in the network, before is authorized.


Francesc Rom&#224; i Frigol&#233;
CTO
Torre Telef&#243;nica Diagonal 00, planta 11, Wayra
Pla&#231;a Ernest Lluch i Mart&#237;n, 5
08019 Barcelona
Tel. +34 93.1234.962
Skype: cescpak



On Wed, May 22, 2013 at 9:52 AM, Russell Mike &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">radius.sir at gmail.com</A>&gt; wrote:

&gt;<i> Hi Luis &amp; David,
</I>&gt;<i>
</I>&gt;<i> Thanks for your inputs, discussion became very interesting. Thanks for
</I>&gt;<i> sharing ideas. standing by to hear more from David. B about conup.
</I>&gt;<i>
</I>&gt;<i> Thanks / Regards
</I>&gt;<i> --RM
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, May 21, 2013 at 6:10 PM, Luis Ferreira &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">lferreira at cabocom.cv</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> **
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi David,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Can you clarify on the conup?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> From what I understood, you are saying that is a script that is run every
</I>&gt;&gt;<i> time a client connects to the network. (correct?)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If true, will that work in my case, with another server running ISC-DHCP?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Where can I configure it? Where is it located?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Luis
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -----Mensagem original-----
</I>&gt;&gt;<i> De: <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli-bounces at coova.org</A> [mailto:<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli-bounces at coova.org</A>&lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli-bounces at coova.org</A>&gt;]
</I>&gt;&gt;<i> Em nome de David Bird
</I>&gt;&gt;<i> Enviada: ter&#231;a-feira, 21 de Maio de 2013 16:01
</I>&gt;&gt;<i> Para: <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli at coova.org</A>
</I>&gt;&gt;<i> Assunto: Re: [Chilli] CoovaChiili Permit Server IP
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There could be an option similar to macallowed (plus macallowlocal) but
</I>&gt;&gt;<i> for layer3 mode using ip addresses. Using a script like the one suggested
</I>&gt;&gt;<i> would also work - though, I think you'd want 'authorize'
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> instead of 'login' since you don't have RADIUS. You can also do something
</I>&gt;&gt;<i> similar from the conup script so that as soon as the station connects, you
</I>&gt;&gt;<i> authorize it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Tue, 2013-05-21 at 09:23 -0100, Luis Ferreira wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Hi Russell,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Here we had the same problem, and were able to fix it with the
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; following script:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; #!/bin/bash
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; usercheck=$(/usr/local/sbin/chilli_query
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; -s /usr/local/var/run/chilli.vlanxx.sock list |grep -c &quot;1
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; accountusername &quot;)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; if [ $usercheck = '0' ];
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; then
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;         echo &quot;Logging in accountname&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;         /usr/local/sbin/chilli_query
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; -s /usr/local/var/run/chilli.vlanxx.sock login ip 192.168.10.251
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; username accountusername password accountpassword
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; fi
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Replace account name, account password and IP for the correct ones.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Also check the location of the sock files.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; This script is running every minute. If the IP is not present, Chilli
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; will not perform the login and ignore it. But if it is present (client
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; connected) it will trigger the account login.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; This is a very dirty hack, but we have been using it for more than 2
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; years and it never failed (except when the account would ran out of
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; credit J ).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Btw, if someone as a different (and less hacked) way of doing this on
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; layer 3, please share it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Regards,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Luis
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Dear Coova Gurus,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; CoovaChilli Layer3, Working great. But for some days now, i am working
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; CoovaChilli to allow some devices to allow access without
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; authentication AND have Static IP address. (Servers, IP phones, Apple
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; TV etc..).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; MAC auth do not help because of L3 setup. Have anyone got the idea.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; How can configure coovachilli to allow access 10 static ip address out
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; of a subnet by default.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Thanks in advance.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Thanks / Regards
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Chilli mailing list
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> David Bird
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://www.linkedin.com/in/dwbird/">http://www.linkedin.com/in/dwbird/</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Chilli mailing list
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Chilli mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Chilli mailing list
</I>&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20130522/b8e84119/attachment.html">http://lists.coova.org/pipermail/chilli/attachments/20130522/b8e84119/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002266.html">[Chilli] CoovaChiili Permit Server IP
</A></li>
	<LI>Next message: <A HREF="002268.html">[Chilli] CoovaChiili Permit Server IP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2267">[ date ]</a>
              <a href="thread.html#2267">[ thread ]</a>
              <a href="subject.html#2267">[ subject ]</a>
              <a href="author.html#2267">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
