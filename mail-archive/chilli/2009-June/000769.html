<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [tap mode doesn't work]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5Btap%20mode%20doesn%27t%20work%5D&In-Reply-To=%3C002801c9f583%2447052450%24d50f6cf0%24%40com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000783.html">
   <LINK REL="Next"  HREF="000780.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[tap mode doesn't work]</H1>
    <B>Benoit noteris</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5Btap%20mode%20doesn%27t%20work%5D&In-Reply-To=%3C002801c9f583%2447052450%24d50f6cf0%24%40com%3E"
       TITLE="[tap mode doesn't work]">bnoteris at odbee.com
       </A><BR>
    <I>Thu Jun 25 10:54:13 UTC 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000783.html">CC + FreeRadius - splash page randomly appears
</A></li>
        <LI>Next message: <A HREF="000780.html">[tap mode doesn't work]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#769">[ date ]</a>
              <a href="thread.html#769">[ thread ]</a>
              <a href="subject.html#769">[ subject ]</a>
              <a href="author.html#769">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear coova list,

 

 

I'm using coova on ubuntu 2.6.24.7 kernel and it's working well,

but it that I can't find anytings in the mac table address.

You will tell me yes it's normal you're using tun interface,

and it's ip layer 3 tunneling and so it's normal OK, I'know that.

And so I've try to use tap interface instead to get the layer 2 encapsulated
too,

I'm make my try with only one client and tcpdum and debug in chilli running.

 

Here are the detail of the log : 

 

Jun 25 12:48:24 portailtst coova-chilli[2499]: chilli.c: 3600: ChilliSpot
version 1.0.13 started.

Jun 25 12:48:24 portailtst coova-chilli[2499]: CoovaChilli(ChilliSpot)
1.0.13. Copyright 2002-2005 Mondru AB. Licensed under GPL. Copyright
2006-2008 David Bird &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">dbird at acm.org</A>&gt;. Licensed under GPL. See
<A HREF="http://coova.org/">http://coova.org/</A> for details.

Jun 25 12:48:24 portailtst coova-chilli[2499]: tun.c: 515: TX queue length
set to 100

Jun 25 12:48:24 portailtst coova-chilli[2499]: tun.c: 544: tap-mac: tap0
00-FF-76-B3-CF-DA

Jun 25 12:48:24 portailtst coova-chilli[2499]: ippool.c: 218: Hashlog 8 253
256

Jun 25 12:48:24 portailtst coova-chilli[2499]: chilli.c: 3754: Waiting for
client request...

Jun 25 12:48:35 portailtst kernel: tap0: no IPv6 routers present

Jun 25 12:48:52 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806

Jun 25 12:48:52 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
unknown IP 172.1.2.2

Jun 25 12:48:53 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806

Jun 25 12:48:53 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
unknown IP 172.1.2.2

Jun 25 12:48:54 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806

Jun 25 12:48:54 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
unknown IP 172.1.2.2

Jun 25 12:48:55 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806

Jun 25 12:48:55 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
unknown IP 172.1.2.2

Jun 25 12:48:56 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806

Jun 25 12:48:56 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
unknown IP 172.1.2.2

Jun 25 12:48:57 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806

Jun 25 12:48:57 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
unknown IP 172.1.2.2

Jun 25 12:49:28 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
unknown IP 172.1.2.2

Jun 25 12:49:52 portailtst coova-chilli[2499]: dhcp.c: 2034: Address not
found (172.1.2.2)

Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2822: New DHCP
request from MAC=00-40-63-D8-42-70

Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2825: New DHCP
connection established

Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2700: DHCP request
for IP address

Jun 25 12:49:52 portailtst coova-chilli[2499]: ippool.c: 324: Requesting new
static ip: 172.1.2.2

Jun 25 12:49:52 portailtst coova-chilli[2499]: ippool.c: 344: Static IP
address not allowed

Jun 25 12:49:52 portailtst coova-chilli[2499]: ippool.c: 324: Requesting new
dynamic ip: 172.1.2.2

Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2789: Client
MAC=00-40-63-D8-42-70 assigned IP 172.1.2.2

Jun 25 12:49:52 portailtst coova-chilli[2499]: tun.c: 765: writing to
tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01

Jun 25 12:49:52 portailtst coova-chilli[2499]: dhcp.c: 2520: arp_decaps:
dst=ff:ff:ff:ff:ff:ff src=00:40:63:d8:42:70 prot=0806

Jun 25 12:49:54 portailtst coova-chilli[2499]: tun.c: 765: writing to
tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01

Jun 25 12:49:59 portailtst coova-chilli[2499]: tun.c: 765: writing to
tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01

Jun 25 12:50:01 portailtst /USR/SBIN/CRON[2520]: (root) CMD
(/etc/init.d/chilli checkrunning)

Jun 25 12:50:01 portailtst /USR/SBIN/CRON[2524]: (root) CMD
(/etc/rc2.d/S20chilli checkrunning)

Jun 25 12:50:07 portailtst coova-chilli[2499]: tun.c: 765: writing to
tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01

 

In the tcpdump I can see dns request and web request but nothing appear to
working at all 

Client just get 404 error and no url redirection on the UAM server.

 

Did anybody has an idea on what's not working ? 

 

Chears

 

Benoit noteris

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20090625/4cc1f4e2/attachment.htm">http://lists.coova.org/pipermail/chilli/attachments/20090625/4cc1f4e2/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000783.html">CC + FreeRadius - splash page randomly appears
</A></li>
	<LI>Next message: <A HREF="000780.html">[tap mode doesn't work]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#769">[ date ]</a>
              <a href="thread.html#769">[ thread ]</a>
              <a href="subject.html#769">[ subject ]</a>
              <a href="author.html#769">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
