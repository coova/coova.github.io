<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [tap mode doesn't work]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5Btap%20mode%20doesn%27t%20work%5D&In-Reply-To=%3C1246079112.7703.10.camel%40david-laptop%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000769.html">
   <LINK REL="Next"  HREF="000784.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[tap mode doesn't work]</H1>
    <B>wlanmac</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5Btap%20mode%20doesn%27t%20work%5D&In-Reply-To=%3C1246079112.7703.10.camel%40david-laptop%3E"
       TITLE="[tap mode doesn't work]">wlan at mac.com
       </A><BR>
    <I>Sat Jun 27 05:05:11 UTC 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000769.html">[tap mode doesn't work]
</A></li>
        <LI>Next message: <A HREF="000784.html">[tap mode doesn't work]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#780">[ date ]</a>
              <a href="thread.html#780">[ thread ]</a>
              <a href="subject.html#780">[ subject ]</a>
              <a href="author.html#780">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>To be honest, the tap interface feature hasn't had any real purpose
(this will change in the next release). Why do you need to use a tap
instead of a tun? 




On Thu, 2009-06-25 at 12:54 +0200, Benoit noteris wrote:
&gt;<i> Dear coova list,
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> I&#8217;m using coova on ubuntu 2.6.24.7 kernel and it&#8217;s working well,
</I>&gt;<i> 
</I>&gt;<i> but it that I can&#8217;t find anytings in the mac table address.
</I>&gt;<i> 
</I>&gt;<i> You will tell me yes it&#8217;s normal you&#8217;re using tun interface,
</I>&gt;<i> 
</I>&gt;<i> and it&#8217;s ip layer 3 tunneling and so it&#8217;s normal OK, I&#8217;know that.
</I>&gt;<i> 
</I>&gt;<i> And so I&#8217;ve try to use tap interface instead to get the layer 2
</I>&gt;<i> encapsulated too,
</I>&gt;<i> 
</I>&gt;<i> I&#8217;m make my try with only one client and tcpdum and debug in chilli
</I>&gt;<i> running.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Here are the detail of the log : 
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:24 portailtst coova-chilli[2499]: chilli.c: 3600:
</I>&gt;<i> ChilliSpot version 1.0.13 started.
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:24 portailtst coova-chilli[2499]: CoovaChilli(ChilliSpot)
</I>&gt;<i> 1.0.13. Copyright 2002-2005 Mondru AB. Licensed under GPL. Copyright
</I>&gt;<i> 2006-2008 David Bird &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">dbird at acm.org</A>&gt;. Licensed under GPL. See
</I>&gt;<i> <A HREF="http://coova.org/">http://coova.org/</A> for details.
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:24 portailtst coova-chilli[2499]: tun.c: 515: TX queue
</I>&gt;<i> length set to 100
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:24 portailtst coova-chilli[2499]: tun.c: 544: tap-mac:
</I>&gt;<i> tap0 00-FF-76-B3-CF-DA
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:24 portailtst coova-chilli[2499]: ippool.c: 218: Hashlog
</I>&gt;<i> 8 253 256
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:24 portailtst coova-chilli[2499]: chilli.c: 3754: Waiting
</I>&gt;<i> for client request...
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:35 portailtst kernel: tap0: no IPv6 routers present
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:52 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
</I>&gt;<i> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:52 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
</I>&gt;<i> unknown IP 172.1.2.2
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:53 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
</I>&gt;<i> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:53 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
</I>&gt;<i> unknown IP 172.1.2.2
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:54 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
</I>&gt;<i> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:54 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
</I>&gt;<i> unknown IP 172.1.2.2
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:55 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
</I>&gt;<i> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:55 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
</I>&gt;<i> unknown IP 172.1.2.2
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:56 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
</I>&gt;<i> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:56 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
</I>&gt;<i> unknown IP 172.1.2.2
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:57 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
</I>&gt;<i> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:48:57 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
</I>&gt;<i> unknown IP 172.1.2.2
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:49:28 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
</I>&gt;<i> unknown IP 172.1.2.2
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:49:52 portailtst coova-chilli[2499]: dhcp.c: 2034: Address
</I>&gt;<i> not found (172.1.2.2)
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2822: New
</I>&gt;<i> DHCP request from MAC=00-40-63-D8-42-70
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2825: New
</I>&gt;<i> DHCP connection established
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2700: DHCP
</I>&gt;<i> request for IP address
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:49:52 portailtst coova-chilli[2499]: ippool.c: 324:
</I>&gt;<i> Requesting new static ip: 172.1.2.2
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:49:52 portailtst coova-chilli[2499]: ippool.c: 344: Static
</I>&gt;<i> IP address not allowed
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:49:52 portailtst coova-chilli[2499]: ippool.c: 324:
</I>&gt;<i> Requesting new dynamic ip: 172.1.2.2
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2789: Client
</I>&gt;<i> MAC=00-40-63-D8-42-70 assigned IP 172.1.2.2
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:49:52 portailtst coova-chilli[2499]: tun.c: 765: writing to
</I>&gt;<i> tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:49:52 portailtst coova-chilli[2499]: dhcp.c: 2520:
</I>&gt;<i> arp_decaps: dst=ff:ff:ff:ff:ff:ff src=00:40:63:d8:42:70 prot=0806
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:49:54 portailtst coova-chilli[2499]: tun.c: 765: writing to
</I>&gt;<i> tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:49:59 portailtst coova-chilli[2499]: tun.c: 765: writing to
</I>&gt;<i> tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:50:01 portailtst /USR/SBIN/CRON[2520]: (root) CMD
</I>&gt;<i> (/etc/init.d/chilli checkrunning)
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:50:01 portailtst /USR/SBIN/CRON[2524]: (root) CMD
</I>&gt;<i> (/etc/rc2.d/S20chilli checkrunning)
</I>&gt;<i> 
</I>&gt;<i> Jun 25 12:50:07 portailtst coova-chilli[2499]: tun.c: 765: writing to
</I>&gt;<i> tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> In the tcpdump I can see dns request and web request but nothing
</I>&gt;<i> appear to working at all 
</I>&gt;<i> 
</I>&gt;<i> Client just get 404 error and no url redirection on the UAM server.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Did anybody has an idea on what&#8217;s not working ? 
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Chears
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Benoit noteris
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000769.html">[tap mode doesn't work]
</A></li>
	<LI>Next message: <A HREF="000784.html">[tap mode doesn't work]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#780">[ date ]</a>
              <a href="thread.html#780">[ thread ]</a>
              <a href="subject.html#780">[ subject ]</a>
              <a href="author.html#780">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
