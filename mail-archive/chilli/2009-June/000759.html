<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH] SNAT anyip connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BPATCH%5D%20SNAT%20anyip%20connections&In-Reply-To=%3C4A40FEAB.5050903%40endian.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000758.html">
   <LINK REL="Next"  HREF="000760.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH] SNAT anyip connections</H1>
    <B>Peter Warasin</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BPATCH%5D%20SNAT%20anyip%20connections&In-Reply-To=%3C4A40FEAB.5050903%40endian.com%3E"
       TITLE="[PATCH] SNAT anyip connections">peter at endian.com
       </A><BR>
    <I>Tue Jun 23 16:11:23 UTC 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000758.html">[PATCH] fix of syntax error in current svn
</A></li>
        <LI>Next message: <A HREF="000760.html">[PATCH] SNAT anyip connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#759">[ date ]</a>
              <a href="thread.html#759">[ thread ]</a>
              <a href="subject.html#759">[ subject ]</a>
              <a href="author.html#759">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi List

Attached is a patch which adds the option --uamnatanyip.

If this option is enabled and anyip is also enabled, every anyip
connection will be NATed to an ip address from the dynamic pool.
For each new connection an ip address will be requested from the dynamic
pool which then will be used to SNAT packets of that connection.
This way host routes are not necessary anymore.

This is useful if you have coova-chilli on the same host with a proxy or
a firewall. When you have anyip enabled, that firewall/proxy will see
connections coming from some external ip addresses, which will bypass
your firewall configuration or forces you to disable filters.

Enabling uamnatanyip NATs connections to your dynamic pool subnet, which
allows you to work only with that subnet on the firewall/proxy.

This patch is tested for 1.0.12, where it works flawlessly. The attached
patch is ported to current svn, where I have some problems (hisip is
always 255.255.255.254), but I have the same problems without this
patch, so i assume the patch should be ok.

If you like the 1.0.12 patch also, simply ask.

peter

-- 
::<i> e n d i a n
</I>::<i> open source - open minds
</I>
::<i> peter warasin
</I>::<i> <A HREF="http://www.endian.com">http://www.endian.com</A>   :: <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">peter at endian.com</A>
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: coova-chilli-r203-uamnatanyip.patch
Type: text/x-patch
Size: 11544 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20090623/a7f5c1bb/attachment.bin">http://lists.coova.org/pipermail/chilli/attachments/20090623/a7f5c1bb/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000758.html">[PATCH] fix of syntax error in current svn
</A></li>
	<LI>Next message: <A HREF="000760.html">[PATCH] SNAT anyip connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#759">[ date ]</a>
              <a href="thread.html#759">[ thread ]</a>
              <a href="subject.html#759">[ subject ]</a>
              <a href="author.html#759">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
