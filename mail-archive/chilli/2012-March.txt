From peter at endian.com  Thu Mar  1 15:30:49 2012
From: peter at endian.com (Peter Warasin)
Date: Thu, 01 Mar 2012 16:30:49 +0100
Subject: [Chilli] [PATCH] adds option for chilli query TCP socket
Message-ID: <4F4F9629.2000501@endian.com>

Hi guys

The attached patch adds the option "cmdsocketport" which allows to
configure a TCP port instead of a UNIX socket path for the chilli_query
communication.

If neither "cmdsocket" nor "cmdsocketport" is specified the default TCP
port of 42424 will be opened.

chilli_query accepts now an option -P which allows to specify the tcp
port, if neither -P nor -s <unixsocketpath> is supplied tcp port 42424
will be assumed.


In many circumstances it is possible that somehow this unix socket file
will be deleted by another process or by a second chilli process or by
the sysadmin itself. You can imagine which issues that would cause when
you rely on chilli query for a special service.
Using tcp port this is not possible anymore.

Hope this helps you guys too.


The patch is against 1.2.6. If rebase is required, just tell me

peter

-- 
:: e n d i a n
:: security with passion

:: peter warasin
:: http://www.endian.com   :: peter at endian.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: coova-chilli-1.2.6-cmd-socket-port.patch
Type: text/x-patch
Size: 34256 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120301/aae094f6/attachment-0001.bin>

From peter at endian.com  Thu Mar  1 15:34:13 2012
From: peter at endian.com (Peter Warasin)
Date: Thu, 01 Mar 2012 16:34:13 +0100
Subject: [Chilli] [PATCH] causes chilli to bailout if it was not possible to
 open a query socket
Message-ID: <4F4F96F5.1070100@endian.com>

hi guys

The attached patch (against 1.2.6) makes chilli bailout if it was not
possible to open a query socket.
If you use chilli_query for communication with chilli in order to
display status or allow administrators to interact you would like to
have chilli to exit otherwise this communication would not work but
chilli still is continuing to operate.


This patch is against 1.2.6 with my previous patch applied. If you need
me to rebase to trunk without the other patch, tell me

Hope you find this helpful.


peter


-- 
:: e n d i a n
:: security with passion

:: peter warasin
:: http://www.endian.com   :: peter at endian.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: coova-chilli-1.2.6-chilli-query-bailout-error.patch
Type: text/x-patch
Size: 655 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120301/3448f7d8/attachment.bin>

From david at coova.com  Thu Mar  1 16:05:46 2012
From: david at coova.com (David Bird)
Date: Thu, 01 Mar 2012 08:05:46 -0800
Subject: [Chilli] [PATCH] adds option for chilli query TCP socket
In-Reply-To: <4F4F9629.2000501@endian.com>
References: <4F4F9629.2000501@endian.com>
Message-ID: <1330617946.4246.1.camel@david-laptop>

Hi Peter,

It would be great if you could merge it into the current SVN version and
create a patch. I've recently sync'ed the development branch into the
public repository. 

Thanks for these features! 

David


On Thu, 2012-03-01 at 16:30 +0100, Peter Warasin wrote:
> Hi guys
> 
> The attached patch adds the option "cmdsocketport" which allows to
> configure a TCP port instead of a UNIX socket path for the chilli_query
> communication.
> 
> If neither "cmdsocket" nor "cmdsocketport" is specified the default TCP
> port of 42424 will be opened.
> 
> chilli_query accepts now an option -P which allows to specify the tcp
> port, if neither -P nor -s <unixsocketpath> is supplied tcp port 42424
> will be assumed.
> 
> 
> In many circumstances it is possible that somehow this unix socket file
> will be deleted by another process or by a second chilli process or by
> the sysadmin itself. You can imagine which issues that would cause when
> you rely on chilli query for a special service.
> Using tcp port this is not possible anymore.
> 
> Hope this helps you guys too.
> 
> 
> The patch is against 1.2.6. If rebase is required, just tell me
> 
> peter
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From peter at endian.com  Fri Mar  2 11:38:54 2012
From: peter at endian.com (Peter Warasin)
Date: Fri, 02 Mar 2012 12:38:54 +0100
Subject: [Chilli] [PATCH] causes chilli to bailout if it was not
 possible to open a query socket
In-Reply-To: <4F4F96F5.1070100@endian.com>
References: <4F4F96F5.1070100@endian.com>
Message-ID: <4F50B14E.4010000@endian.com>

Hi Guys

signed-off the patch
rebase was not necessary.


peter


-- 
:: e n d i a n
:: security with passion

:: peter warasin
:: http://www.endian.com   :: peter at endian.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: coova-chilli-1.2.6-chilli-query-bailout-error.patch
Type: text/x-patch
Size: 704 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120302/cde86953/attachment.bin>

From fmacedo at cpd.ufrgs.br  Fri Mar  2 16:51:10 2012
From: fmacedo at cpd.ufrgs.br (Fernando Macedo)
Date: Fri, 02 Mar 2012 13:51:10 -0300
Subject: [Chilli] Segfault Chilli 1.2.9
In-Reply-To: <4F3A636F.1010507@cpd.ufrgs.br>
References: <4F39396F.1070703@cpd.ufrgs.br> <4F396574.6020401@cpd.ufrgs.br>
	<4F3A636F.1010507@cpd.ufrgs.br>
Message-ID: <4F50FA7E.4040508@cpd.ufrgs.br>

Strace of my last segfault:

select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [4], left {0, 999997})
clock_gettime(CLOCK_MONOTONIC, {156370, 941588185}) = 0
read(4, 
"E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176\251\331\0P\300\230jN\25\223:\26a\316"..., 
65497) = 1420
sendto(5, 
"h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176"..., 
1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
addr(6)={0, 68a3c431b7d0}, 20) = 1434
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [4], left {0, 999997})
clock_gettime(CLOCK_MONOTONIC, {156370, 941877024}) = 0
read(4, 
"E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176\251\331\0P\300\230jN\32\367:\26a\316"..., 
65497) = 1420
sendto(5, 
"h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176"..., 
1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
addr(6)={0, 68a3c431b7d0}, 20) = 1434
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [4], left {0, 996370})
clock_gettime(CLOCK_MONOTONIC, {156370, 945791076}) = 0
read(4, 
"E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176\251\331\0P\300\230jN 
[:\26a\316"..., 65497) = 1420
sendto(5, 
"h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176"..., 
1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
addr(6)={0, 68a3c431b7d0}, 20) = 1434
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [4], left {0, 999997})
clock_gettime(CLOCK_MONOTONIC, {156370, 946070102}) = 0
read(4, 
"E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176\251\331\0P\300\230jN%\277:\26a\316"..., 
65497) = 1420
sendto(5, 
"h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176"..., 
1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
addr(6)={0, 68a3c431b7d0}, 20) = 1434
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 2 
(in [4 5], left {0, 999997})
clock_gettime(CLOCK_MONOTONIC, {156370, 946381872}) = 0
read(4, 
"E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176\251\331\0P\300\230jN+#:\26a\316"..., 
65497) = 1420
sendto(5, 
"h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176"..., 
1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
addr(6)={0, 68a3c431b7d0}, 20) = 1434
recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0}, 
msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376"..., 
65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
write(4, 
"E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\n\313"..., 
46) = 46
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [4], left {0, 999997})
clock_gettime(CLOCK_MONOTONIC, {156370, 946868309}) = 0
read(4, 
"E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176\251\331\0P\300\230jN0\207:\26a\316"..., 
65497) = 1420
sendto(5, 
"h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176"..., 
1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
addr(6)={0, 68a3c431b7d0}, 20) = 1434
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [5], left {0, 997678})
clock_gettime(CLOCK_MONOTONIC, {156370, 949470668}) = 0
recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0}, 
msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376"..., 
65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
write(4, 
"E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\25\223"..., 
46) = 46
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [5], left {0, 999332})
clock_gettime(CLOCK_MONOTONIC, {156370, 950476429}) = 0
recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
pkttype=PACKET_HOST, addr(6)={1, 74f06d058e5a}, 
msg_iov(1)=[{"\232M\"\336X\16t\360m\5\216Z\10\0E\0\0)e0@\0\200\6~\362\2176\251\22\310["..., 
65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
write(4, 
"E\0\0)e0@\0\200\6~\362\2176\251\22\310[\26\10\312H\0P~\314HR\377\5\r\313"..., 
46) = 46
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [5], left {0, 999285})
clock_gettime(CLOCK_MONOTONIC, {156370, 951522574}) = 0
recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0}, 
msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376"..., 
65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
write(4, 
"E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN 
["..., 46) = 46
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [5], left {0, 998912})
clock_gettime(CLOCK_MONOTONIC, {156370, 952930646}) = 0
recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
pkttype=PACKET_HOST, addr(6)={1, b407f94804a5}, 
msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\7y@\0\377\21\3\34\2176\251\231\2176"..., 
65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
--- SIGSEGV (Segmentation fault) @ 0 (0) ---
Process 25821 detached

Em 14/02/2012 11:36, Fernando Macedo escreveu:
> Any idea? I'm using chilli_query login toauthenticate the users. It 
> can be related to this bug: http://www.coova.org/node/2653.
>
> Em 13/02/2012 17:33, Fernando Macedo escreveu:
>> More crashes:
>>
>> Feb 13 14:16:07 x kernel: [2788498.078399] chilli[893]: segfault at 
>> 7ffff6a8b058 ip 00007f5621e96d64 sp 00007ffff6a78088 error 4 in 
>> libchilli.so.0.0.0[7f5621e6d000+4a000]
>> Feb 13 16:35:56 x kernel: [2796886.973424] chilli[1317]: segfault at 
>> 7fffd306d02d ip 00007f5f14cb4d64 sp 00007fffd305acf8 error 4 in 
>> libchilli.so.0.0.0[7f5f14c8b000+4a000]
>> Feb 13 16:36:08 x kernel: [2796899.050379] chilli[31138]: segfault at 
>> 7fffeb998019 ip 00007ff00cbdbd64 sp 00007fffeb984cd8 error 4 in 
>> libchilli.so.0.0.0[7ff00cbb2000+4a000]
>> Feb 13 16:40:58 x kernel: [2797189.473169] chilli[31371]: segfault at 
>> 7fff5258202d ip 00007fd99487fd64 sp 00007fff5256f948 error 4 in 
>> libchilli.so.0.0.0[7fd994856000+4a000]
>> Feb 13 16:41:11 x kernel: [2797201.999800] chilli[5316]: segfault at 
>> 7ffff7f38019 ip 00007f27c4ae2d64 sp 00007ffff7f24c08 error 4 in 
>> libchilli.so.0.0.0[7f27c4ab9000+4a000]
>> Feb 13 16:41:27 x kernel: [2797218.491727] chilli[5601]: segfault at 
>> 7fff10237009 ip 00007fbc046d2d64 sp 00007fff10223818 error 4 in 
>> libchilli.so.0.0.0[7fbc046a9000+4a000]
>>
>>
>> Em 13/02/2012 14:25, Fernando Macedo escreveu:
>>> Hi, one month after installing chilli we experienced a segfault in 
>>> the last version.
>>>
>>> kernel: [2788498.078399] chilli[893]: segfault at 7ffff6a8b058 ip 
>>> 00007f5621e96d64 sp 00007ffff6a78088 error 4 in 
>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
>>>
>>> Has anyone the same problem?
>>>
>>> Fernando Macedo
>>> _______________________________________________
>>> Chilli mailing list
>>> Chilli at coova.org
>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From fmacedo at cpd.ufrgs.br  Fri Mar  2 17:13:06 2012
From: fmacedo at cpd.ufrgs.br (Fernando Macedo)
Date: Fri, 02 Mar 2012 14:13:06 -0300
Subject: [Chilli] Segfault Chilli 1.2.9
In-Reply-To: <4F50FA7E.4040508@cpd.ufrgs.br>
References: <4F39396F.1070703@cpd.ufrgs.br> <4F396574.6020401@cpd.ufrgs.br>
	<4F3A636F.1010507@cpd.ufrgs.br> <4F50FA7E.4040508@cpd.ufrgs.br>
Message-ID: <4F50FFA2.5070403@cpd.ufrgs.br>

Again:

recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H"..., 
65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
write(4, 
"E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H\377\326\302\354\1\273c\224\3\350~5\365\241"..., 
1420) = 1420
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [5], left {0, 999997})
clock_gettime(CLOCK_MONOTONIC, {170230, 11114377}) = 0
recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H"..., 
65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
write(4, 
"E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H\377\326\302\354\1\273c\224\tL~5\365\241"..., 
1420) = 1420
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [5], left {0, 999997})
clock_gettime(CLOCK_MONOTONIC, {170230, 11421407}) = 0
recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H"..., 
65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
write(4, 
"E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H\377\326\302\354\1\273c\224\16\260~5\365\241"..., 
1420) = 1420
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [5], left {0, 999997})
clock_gettime(CLOCK_MONOTONIC, {170230, 11759495}) = 0
recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\00146\276@\0\200\6\323\237\2176\250\20\270H"..., 
65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 322
write(4, 
"E\0\00146\276@\0\200\6\323\237\2176\250\20\270H\377\326\302\354\1\273c\224\24\24~5\365\241"..., 
308) = 308
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [5], left {0, 999997})
clock_gettime(CLOCK_MONOTONIC, {170230, 12066338}) = 0
recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H"..., 
65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
write(4, 
"E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H\377\326\302\354\1\273c\224\25 
~5\365\241"..., 1420) = 1420
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [5], left {0, 999997})
clock_gettime(CLOCK_MONOTONIC, {170230, 12373554}) = 0
recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H"..., 
65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 544
write(4, 
"E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H\377\326\302\354\1\273c\224\32\204~5\365\241"..., 
530) = 530
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [5], left {0, 999997})
clock_gettime(CLOCK_MONOTONIC, {170230, 12705270}) = 0
recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H"..., 
65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1358
write(4, 
"E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H\377\326\302\354\1\273c\224\34n~5\365\241"..., 
1344) = 1344
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [5], left {0, 999997})
clock_gettime(CLOCK_MONOTONIC, {170230, 13015073}) = 0
recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H"..., 
65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
write(4, 
"E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H\377\326\302\354\1\273c\224!\206~5\365\241"..., 
1420) = 1420
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [5], left {0, 999997})
clock_gettime(CLOCK_MONOTONIC, {170230, 13360233}) = 0
recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H"..., 
65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
write(4, 
"E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H\377\326\302\354\1\273c\224&\352~5\365\241"..., 
1420) = 1420
select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
(in [5], left {0, 999997})
clock_gettime(CLOCK_MONOTONIC, {170230, 13667642}) = 0
recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
pkttype=PACKET_HOST, addr(6)={1, b407f94804a5}, 
msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\10\26@\0\377\21\2\325\2176\251C\2176"..., 
65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
--- SIGSEGV (Segmentation fault) @ 0 (0) ---
Process 20463 detached

Em 02/03/2012 13:51, Fernando Macedo escreveu:
> Strace of my last segfault:
>
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [4], left {0, 999997})
> clock_gettime(CLOCK_MONOTONIC, {156370, 941588185}) = 0
> read(4, 
> "E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176\251\331\0P\300\230jN\25\223:\26a\316"..., 
> 65497) = 1420
> sendto(5, 
> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176"..., 
> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [4], left {0, 999997})
> clock_gettime(CLOCK_MONOTONIC, {156370, 941877024}) = 0
> read(4, 
> "E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176\251\331\0P\300\230jN\32\367:\26a\316"..., 
> 65497) = 1420
> sendto(5, 
> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176"..., 
> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [4], left {0, 996370})
> clock_gettime(CLOCK_MONOTONIC, {156370, 945791076}) = 0
> read(4, 
> "E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176\251\331\0P\300\230jN 
> [:\26a\316"..., 65497) = 1420
> sendto(5, 
> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176"..., 
> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [4], left {0, 999997})
> clock_gettime(CLOCK_MONOTONIC, {156370, 946070102}) = 0
> read(4, 
> "E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176\251\331\0P\300\230jN%\277:\26a\316"..., 
> 65497) = 1420
> sendto(5, 
> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176"..., 
> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 2 
> (in [4 5], left {0, 999997})
> clock_gettime(CLOCK_MONOTONIC, {156370, 946381872}) = 0
> read(4, 
> "E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176\251\331\0P\300\230jN+#:\26a\316"..., 
> 65497) = 1420
> sendto(5, 
> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176"..., 
> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0}, 
> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376"..., 
> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> write(4, 
> "E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\n\313"..., 
> 46) = 46
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [4], left {0, 999997})
> clock_gettime(CLOCK_MONOTONIC, {156370, 946868309}) = 0
> read(4, 
> "E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176\251\331\0P\300\230jN0\207:\26a\316"..., 
> 65497) = 1420
> sendto(5, 
> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176"..., 
> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [5], left {0, 997678})
> clock_gettime(CLOCK_MONOTONIC, {156370, 949470668}) = 0
> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0}, 
> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376"..., 
> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> write(4, 
> "E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\25\223"..., 
> 46) = 46
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [5], left {0, 999332})
> clock_gettime(CLOCK_MONOTONIC, {156370, 950476429}) = 0
> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> pkttype=PACKET_HOST, addr(6)={1, 74f06d058e5a}, 
> msg_iov(1)=[{"\232M\"\336X\16t\360m\5\216Z\10\0E\0\0)e0@\0\200\6~\362\2176\251\22\310["..., 
> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> write(4, 
> "E\0\0)e0@\0\200\6~\362\2176\251\22\310[\26\10\312H\0P~\314HR\377\5\r\313"..., 
> 46) = 46
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [5], left {0, 999285})
> clock_gettime(CLOCK_MONOTONIC, {156370, 951522574}) = 0
> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0}, 
> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376"..., 
> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> write(4, 
> "E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN 
> ["..., 46) = 46
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [5], left {0, 998912})
> clock_gettime(CLOCK_MONOTONIC, {156370, 952930646}) = 0
> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> pkttype=PACKET_HOST, addr(6)={1, b407f94804a5}, 
> msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\7y@\0\377\21\3\34\2176\251\231\2176"..., 
> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
> Process 25821 detached
>
> Em 14/02/2012 11:36, Fernando Macedo escreveu:
>> Any idea? I'm using chilli_query login toauthenticate the users. It 
>> can be related to this bug: http://www.coova.org/node/2653.
>>
>> Em 13/02/2012 17:33, Fernando Macedo escreveu:
>>> More crashes:
>>>
>>> Feb 13 14:16:07 x kernel: [2788498.078399] chilli[893]: segfault at 
>>> 7ffff6a8b058 ip 00007f5621e96d64 sp 00007ffff6a78088 error 4 in 
>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
>>> Feb 13 16:35:56 x kernel: [2796886.973424] chilli[1317]: segfault at 
>>> 7fffd306d02d ip 00007f5f14cb4d64 sp 00007fffd305acf8 error 4 in 
>>> libchilli.so.0.0.0[7f5f14c8b000+4a000]
>>> Feb 13 16:36:08 x kernel: [2796899.050379] chilli[31138]: segfault 
>>> at 7fffeb998019 ip 00007ff00cbdbd64 sp 00007fffeb984cd8 error 4 in 
>>> libchilli.so.0.0.0[7ff00cbb2000+4a000]
>>> Feb 13 16:40:58 x kernel: [2797189.473169] chilli[31371]: segfault 
>>> at 7fff5258202d ip 00007fd99487fd64 sp 00007fff5256f948 error 4 in 
>>> libchilli.so.0.0.0[7fd994856000+4a000]
>>> Feb 13 16:41:11 x kernel: [2797201.999800] chilli[5316]: segfault at 
>>> 7ffff7f38019 ip 00007f27c4ae2d64 sp 00007ffff7f24c08 error 4 in 
>>> libchilli.so.0.0.0[7f27c4ab9000+4a000]
>>> Feb 13 16:41:27 x kernel: [2797218.491727] chilli[5601]: segfault at 
>>> 7fff10237009 ip 00007fbc046d2d64 sp 00007fff10223818 error 4 in 
>>> libchilli.so.0.0.0[7fbc046a9000+4a000]
>>>
>>>
>>> Em 13/02/2012 14:25, Fernando Macedo escreveu:
>>>> Hi, one month after installing chilli we experienced a segfault in 
>>>> the last version.
>>>>
>>>> kernel: [2788498.078399] chilli[893]: segfault at 7ffff6a8b058 ip 
>>>> 00007f5621e96d64 sp 00007ffff6a78088 error 4 in 
>>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
>>>>
>>>> Has anyone the same problem?
>>>>
>>>> Fernando Macedo
>>>> _______________________________________________
>>>> Chilli mailing list
>>>> Chilli at coova.org
>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>
>>> _______________________________________________
>>> Chilli mailing list
>>> Chilli at coova.org
>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From david at coova.com  Sun Mar  4 14:55:49 2012
From: david at coova.com (David Bird)
Date: Sun, 04 Mar 2012 15:55:49 +0100
Subject: [Chilli] New Forum topic: Strange behaviour with
 WISPr-Redirection-URL in 1.2.9
In-Reply-To: <20120224112003.7B0A64E8AC@ip-10-117-78-50.ec2.internal>
References: <20120224112003.7B0A64E8AC@ip-10-117-78-50.ec2.internal>
Message-ID: <1330872949.3210.17.camel@david-laptop>

Hello,

The following was reported in the forum, but I will discuss it here. The
issue is that chilli supports WISPr-Redirection-URL in several ways; it
can be used, for example, to send users on a per session basis to
alternate URLs based on the attribute not only in an Access-Accept, but
also an Access-Reject. In both cases, it is sometimes desired to have
the user keep going to that URL, even after their session had ended.
However, obviously, that is not always the case. Possible remedies
include: having an option that controls whether or not the URL value
should "survive" after the session ends, making that behavior a compile
time option, using a ChilliSpot-Redirect-URL VSA that can be used
instead of WISPr-Redirection-URL (where the WISPr is only used in
Access-Accept and only used once and the ChilliSpot-Redirect-URL VSA is
the more persistent option). Any preferences or other suggestions?

David


On Fri, 2012-02-24 at 11:20 +0000, support at coova.com wrote:
> Greetings david,
> 
> Hello,
> With the last version of coova this strange behaviour occurs when the  
> WISPr-Redirection-URL is used :
> - When a user is intercepted for the first time : all is ok (he performs the  
> login procedure and he is redirect to the URL defined in the radius attribute  
> "WISPr-Redirection-URL").
> - When he comes back after logs out, coova can't intercept him (the "Move  
> Temporarily" packet is wrong).
> Look at the two "Move Temporarily" packet send by coova :
> - First one - ok (redirect to the uamserver) :
> 
> Read more http://www.coova.org/node/5115 -- This is an automatic message from  
> Coova :: Open Source Captive Portal Access Controller and RADIUS Software To  
> manage your subscriptions, browse to  
> http://www.coova.org/user/1/notifications You can unsubscribe at  
> http://www.coova.org/notifications/unsubscribe/sid/1?signature=7dea0a65b50949c91873109c35fa01b2
> 



From ryan.day at cirrusworks.net  Sun Mar  4 15:17:39 2012
From: ryan.day at cirrusworks.net (Ryan Day)
Date: Sun, 04 Mar 2012 10:17:39 -0500
Subject: [Chilli] New Forum topic: Strange behaviour with
 WISPr-Redirection-URL in 1.2.9
In-Reply-To: <1330872949.3210.17.camel@david-laptop>
References: <20120224112003.7B0A64E8AC@ip-10-117-78-50.ec2.internal>
	<1330872949.3210.17.camel@david-laptop>
Message-ID: <4F538793.3080400@cirrusworks.net>

I'm sure this is related to the problem I've described here

 http://lists.coova.org/pipermail/chilli/2011-November/001775.html


The patch was implemented in 1.2.9 and may be breaking functionality in
some situations.

What I find amazing is that the problem described in
http://www.coova.org/node/5115 is exactly what I was experiencing with
previous versions of chilli(<1.2.9). My uamserver was being replaced by
my WISPr redirect and I could no longer authenticate. This patch seems
to work for me (me being 3 dev servers and 2 production servers).

Any thoughts?



Ryan

On 03/04/2012 09:55 AM, David Bird wrote:
> Hello,
>
> The following was reported in the forum, but I will discuss it here. The
> issue is that chilli supports WISPr-Redirection-URL in several ways; it
> can be used, for example, to send users on a per session basis to
> alternate URLs based on the attribute not only in an Access-Accept, but
> also an Access-Reject. In both cases, it is sometimes desired to have
> the user keep going to that URL, even after their session had ended.
> However, obviously, that is not always the case. Possible remedies
> include: having an option that controls whether or not the URL value
> should "survive" after the session ends, making that behavior a compile
> time option, using a ChilliSpot-Redirect-URL VSA that can be used
> instead of WISPr-Redirection-URL (where the WISPr is only used in
> Access-Accept and only used once and the ChilliSpot-Redirect-URL VSA is
> the more persistent option). Any preferences or other suggestions?
>
> David
>
>
> On Fri, 2012-02-24 at 11:20 +0000, support at coova.com wrote:
>> Greetings david,
>>
>> Hello,
>> With the last version of coova this strange behaviour occurs when the  
>> WISPr-Redirection-URL is used :
>> - When a user is intercepted for the first time : all is ok (he performs the  
>> login procedure and he is redirect to the URL defined in the radius attribute  
>> "WISPr-Redirection-URL").
>> - When he comes back after logs out, coova can't intercept him (the "Move  
>> Temporarily" packet is wrong).
>> Look at the two "Move Temporarily" packet send by coova :
>> - First one - ok (redirect to the uamserver) :
>>
>> Read more http://www.coova.org/node/5115 -- This is an automatic message from  
>> Coova :: Open Source Captive Portal Access Controller and RADIUS Software To  
>> manage your subscriptions, browse to  
>> http://www.coova.org/user/1/notifications You can unsubscribe at  
>> http://www.coova.org/notifications/unsubscribe/sid/1?signature=7dea0a65b50949c91873109c35fa01b2
>>
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


-- 
Ryan Day

CirrusWorks
Beyond Convergence

750 17th Street NW, Suite 1100
Washington, DC 20006


From david at coova.com  Sun Mar  4 16:15:55 2012
From: david at coova.com (David Bird)
Date: Sun, 04 Mar 2012 17:15:55 +0100
Subject: [Chilli] New Forum topic: Strange behaviour with
 WISPr-Redirection-URL in 1.2.9
In-Reply-To: <4F538793.3080400@cirrusworks.net>
References: <20120224112003.7B0A64E8AC@ip-10-117-78-50.ec2.internal>
	<1330872949.3210.17.camel@david-laptop>
	<4F538793.3080400@cirrusworks.net>
Message-ID: <1330877755.3210.20.camel@david-laptop>

Can you try the subversion version? It has that change in it. I assume
you are using the uamhomepage option? If you could also test without
that option, I'd appreciate it. 

On Sun, 2012-03-04 at 10:17 -0500, Ryan Day wrote:
> I'm sure this is related to the problem I've described here
> 
>  http://lists.coova.org/pipermail/chilli/2011-November/001775.html
> 
> 
> The patch was implemented in 1.2.9 and may be breaking functionality in
> some situations.
> 
> What I find amazing is that the problem described in
> http://www.coova.org/node/5115 is exactly what I was experiencing with
> previous versions of chilli(<1.2.9). My uamserver was being replaced by
> my WISPr redirect and I could no longer authenticate. This patch seems
> to work for me (me being 3 dev servers and 2 production servers).
> 
> Any thoughts?
> 
> 
> 
> Ryan
> 
> On 03/04/2012 09:55 AM, David Bird wrote:
> > Hello,
> >
> > The following was reported in the forum, but I will discuss it here. The
> > issue is that chilli supports WISPr-Redirection-URL in several ways; it
> > can be used, for example, to send users on a per session basis to
> > alternate URLs based on the attribute not only in an Access-Accept, but
> > also an Access-Reject. In both cases, it is sometimes desired to have
> > the user keep going to that URL, even after their session had ended.
> > However, obviously, that is not always the case. Possible remedies
> > include: having an option that controls whether or not the URL value
> > should "survive" after the session ends, making that behavior a compile
> > time option, using a ChilliSpot-Redirect-URL VSA that can be used
> > instead of WISPr-Redirection-URL (where the WISPr is only used in
> > Access-Accept and only used once and the ChilliSpot-Redirect-URL VSA is
> > the more persistent option). Any preferences or other suggestions?
> >
> > David
> >
> >
> > On Fri, 2012-02-24 at 11:20 +0000, support at coova.com wrote:
> >> Greetings david,
> >>
> >> Hello,
> >> With the last version of coova this strange behaviour occurs when the  
> >> WISPr-Redirection-URL is used :
> >> - When a user is intercepted for the first time : all is ok (he performs the  
> >> login procedure and he is redirect to the URL defined in the radius attribute  
> >> "WISPr-Redirection-URL").
> >> - When he comes back after logs out, coova can't intercept him (the "Move  
> >> Temporarily" packet is wrong).
> >> Look at the two "Move Temporarily" packet send by coova :
> >> - First one - ok (redirect to the uamserver) :
> >>
> >> Read more http://www.coova.org/node/5115 -- This is an automatic message from  
> >> Coova :: Open Source Captive Portal Access Controller and RADIUS Software To  
> >> manage your subscriptions, browse to  
> >> http://www.coova.org/user/1/notifications You can unsubscribe at  
> >> http://www.coova.org/notifications/unsubscribe/sid/1?signature=7dea0a65b50949c91873109c35fa01b2
> >>
> >
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 
> 



From david at coova.com  Mon Mar  5 08:33:28 2012
From: david at coova.com (David Bird)
Date: Mon, 05 Mar 2012 09:33:28 +0100
Subject: [Chilli] [PATCH] adds option for chilli query TCP socket
In-Reply-To: <4F4F9629.2000501@endian.com>
References: <4F4F9629.2000501@endian.com>
Message-ID: <1330936408.3210.26.camel@david-laptop>

Hi Peter,

I applied and committed your patches. Thanks! However, I'll be making
some changes. For instance, it isn't good that chilli_query will default
to using the TCP port instead of the unix socket... I will change it to
only use the TCP socket if specified. Also, might as well allow for
chilli_query to use an IP other than localhost. It would be great if
you'd make these changes and submit another patch, otherwise I will do
it. 

Cheers,
David


On Thu, 2012-03-01 at 16:30 +0100, Peter Warasin wrote:
> Hi guys
> 
> The attached patch adds the option "cmdsocketport" which allows to
> configure a TCP port instead of a UNIX socket path for the chilli_query
> communication.
> 
> If neither "cmdsocket" nor "cmdsocketport" is specified the default TCP
> port of 42424 will be opened.
> 
> chilli_query accepts now an option -P which allows to specify the tcp
> port, if neither -P nor -s <unixsocketpath> is supplied tcp port 42424
> will be assumed.
> 
> 
> In many circumstances it is possible that somehow this unix socket file
> will be deleted by another process or by a second chilli process or by
> the sysadmin itself. You can imagine which issues that would cause when
> you rely on chilli query for a special service.
> Using tcp port this is not possible anymore.
> 
> Hope this helps you guys too.
> 
> 
> The patch is against 1.2.6. If rebase is required, just tell me
> 
> peter
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From jmayer at loplof.de  Mon Mar  5 11:20:20 2012
From: jmayer at loplof.de (Joerg Mayer)
Date: Mon, 5 Mar 2012 12:20:20 +0100
Subject: [Chilli] [PATCH] adds option for chilli query TCP socket
In-Reply-To: <1330936408.3210.26.camel@david-laptop>
References: <4F4F9629.2000501@endian.com>
	<1330936408.3210.26.camel@david-laptop>
Message-ID: <20120305112020.GZ7642@thot.informatik.uni-kl.de>

On Mon, Mar 05, 2012 at 09:33:28AM +0100, David Bird wrote:
> I applied and committed your patches. Thanks! However, I'll be making
> some changes. For instance, it isn't good that chilli_query will default
> to using the TCP port instead of the unix socket... I will change it to
> only use the TCP socket if specified. Also, might as well allow for
> chilli_query to use an IP other than localhost. It would be great if
> you'd make these changes and submit another patch, otherwise I will do
> it. 

What sort of security mechanism is there to make sure the tcp sockets cannot
be used by any user on localhost or any remote user?

Thanks
   J?rg
-- 
Joerg Mayer                                           <jmayer at loplof.de>
We are stuck with technology when what we really want is just stuff that
works. Some say that should read Microsoft instead of technology.

From david at coova.com  Mon Mar  5 12:21:20 2012
From: david at coova.com (David Bird)
Date: Mon, 05 Mar 2012 13:21:20 +0100
Subject: [Chilli] [PATCH] adds option for chilli query TCP socket
In-Reply-To: <20120305112020.GZ7642@thot.informatik.uni-kl.de>
References: <4F4F9629.2000501@endian.com>
	<1330936408.3210.26.camel@david-laptop>
	<20120305112020.GZ7642@thot.informatik.uni-kl.de>
Message-ID: <1330950080.3210.50.camel@david-laptop>

A valid concern, obviously. The default will remain to be using the unix
socket and file system permissions for security. The patch (on the
client side anyway) was limited to localhost, however, the server side
socket was ANY (so, the patch does in fact have a major security issue
in that regard, and still needs more). I'd like to see the TCP port
protected with SSL cert/ca verifications; if anyone cares to implement,
it would be appreciated. I am also considering making the feature only
available with a compile-time option so that it isn't used lightly or by
mistake; certainly should never be the default. 



On Mon, 2012-03-05 at 12:20 +0100, Joerg Mayer wrote:
> On Mon, Mar 05, 2012 at 09:33:28AM +0100, David Bird wrote:
> > I applied and committed your patches. Thanks! However, I'll be making
> > some changes. For instance, it isn't good that chilli_query will default
> > to using the TCP port instead of the unix socket... I will change it to
> > only use the TCP socket if specified. Also, might as well allow for
> > chilli_query to use an IP other than localhost. It would be great if
> > you'd make these changes and submit another patch, otherwise I will do
> > it. 
> 
> What sort of security mechanism is there to make sure the tcp sockets cannot
> be used by any user on localhost or any remote user?
> 
> Thanks
>    J?rg



From david at coova.com  Mon Mar  5 13:03:43 2012
From: david at coova.com (David Bird)
Date: Mon, 05 Mar 2012 14:03:43 +0100
Subject: [Chilli] [PATCH] adds option for chilli query TCP socket
In-Reply-To: <1330950080.3210.50.camel@david-laptop>
References: <4F4F9629.2000501@endian.com>
	<1330936408.3210.26.camel@david-laptop>
	<20120305112020.GZ7642@thot.informatik.uni-kl.de>
	<1330950080.3210.50.camel@david-laptop>
Message-ID: <1330952623.3210.53.camel@david-laptop>

... or at least a pre-shared key and a cipher. You can refer to and/or
reuse the work-in-progress code found in dhcp.c between ENABLE_CLUSTER
ifdef (requires OpenSSL support). 


On Mon, 2012-03-05 at 13:21 +0100, David Bird wrote:
> A valid concern, obviously. The default will remain to be using the unix
> socket and file system permissions for security. The patch (on the
> client side anyway) was limited to localhost, however, the server side
> socket was ANY (so, the patch does in fact have a major security issue
> in that regard, and still needs more). I'd like to see the TCP port
> protected with SSL cert/ca verifications; if anyone cares to implement,
> it would be appreciated. I am also considering making the feature only
> available with a compile-time option so that it isn't used lightly or by
> mistake; certainly should never be the default. 
> 
> 
> 
> On Mon, 2012-03-05 at 12:20 +0100, Joerg Mayer wrote:
> > On Mon, Mar 05, 2012 at 09:33:28AM +0100, David Bird wrote:
> > > I applied and committed your patches. Thanks! However, I'll be making
> > > some changes. For instance, it isn't good that chilli_query will default
> > > to using the TCP port instead of the unix socket... I will change it to
> > > only use the TCP socket if specified. Also, might as well allow for
> > > chilli_query to use an IP other than localhost. It would be great if
> > > you'd make these changes and submit another patch, otherwise I will do
> > > it. 
> > 
> > What sort of security mechanism is there to make sure the tcp sockets cannot
> > be used by any user on localhost or any remote user?
> > 
> > Thanks
> >    J?rg
> 
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From fmacedo at cpd.ufrgs.br  Tue Mar  6 18:57:02 2012
From: fmacedo at cpd.ufrgs.br (Fernando Macedo)
Date: Tue, 06 Mar 2012 15:57:02 -0300
Subject: [Chilli] Segfault Chilli 1.2.9
In-Reply-To: <4F50FFA2.5070403@cpd.ufrgs.br>
References: <4F39396F.1070703@cpd.ufrgs.br> <4F396574.6020401@cpd.ufrgs.br>
	<4F3A636F.1010507@cpd.ufrgs.br> <4F50FA7E.4040508@cpd.ufrgs.br>
	<4F50FFA2.5070403@cpd.ufrgs.br>
Message-ID: <4F565DFE.1080108@cpd.ufrgs.br>

GDB output of segfault:

root# gdb /usr/local/sbin/chilli

GNU gdb (GDB) 7.1-ubuntu
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later 
<http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /usr/local/sbin/chilli...done.
(gdb) run  -c /usr/local/etc/chilli.conf --maxclients=1024 
--dhcpopt=0104FFFFFC00 --fg
Starting program: /usr/local/sbin/chilli -c /usr/local/etc/chilli.conf 
--maxclients=1024 --dhcpopt=0104FFFFFC00 --fg
[Thread debugging using libthread_db enabled]

Program received signal SIGSEGV, Segmentation fault.
dhcp_gettag (pack=0x7ffffffedc00, length=18446744073709551608, 
tag=0x7ffffffecdc8, tagtype=55 '7') at dhcp.c:2914
2914        if (t->t == tagtype) {
(gdb)


Em 02/03/2012 14:13, Fernando Macedo escreveu:
> Again:
>
> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H"..., 
> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> write(4, 
> "E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H\377\326\302\354\1\273c\224\3\350~5\365\241"..., 
> 1420) = 1420
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [5], left {0, 999997})
> clock_gettime(CLOCK_MONOTONIC, {170230, 11114377}) = 0
> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H"..., 
> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> write(4, 
> "E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H\377\326\302\354\1\273c\224\tL~5\365\241"..., 
> 1420) = 1420
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [5], left {0, 999997})
> clock_gettime(CLOCK_MONOTONIC, {170230, 11421407}) = 0
> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H"..., 
> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> write(4, 
> "E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H\377\326\302\354\1\273c\224\16\260~5\365\241"..., 
> 1420) = 1420
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [5], left {0, 999997})
> clock_gettime(CLOCK_MONOTONIC, {170230, 11759495}) = 0
> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\00146\276@\0\200\6\323\237\2176\250\20\270H"..., 
> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 322
> write(4, 
> "E\0\00146\276@\0\200\6\323\237\2176\250\20\270H\377\326\302\354\1\273c\224\24\24~5\365\241"..., 
> 308) = 308
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [5], left {0, 999997})
> clock_gettime(CLOCK_MONOTONIC, {170230, 12066338}) = 0
> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H"..., 
> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> write(4, 
> "E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H\377\326\302\354\1\273c\224\25 
> ~5\365\241"..., 1420) = 1420
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [5], left {0, 999997})
> clock_gettime(CLOCK_MONOTONIC, {170230, 12373554}) = 0
> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H"..., 
> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 544
> write(4, 
> "E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H\377\326\302\354\1\273c\224\32\204~5\365\241"..., 
> 530) = 530
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [5], left {0, 999997})
> clock_gettime(CLOCK_MONOTONIC, {170230, 12705270}) = 0
> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H"..., 
> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1358
> write(4, 
> "E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H\377\326\302\354\1\273c\224\34n~5\365\241"..., 
> 1344) = 1344
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [5], left {0, 999997})
> clock_gettime(CLOCK_MONOTONIC, {170230, 13015073}) = 0
> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H"..., 
> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> write(4, 
> "E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H\377\326\302\354\1\273c\224!\206~5\365\241"..., 
> 1420) = 1420
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [5], left {0, 999997})
> clock_gettime(CLOCK_MONOTONIC, {170230, 13360233}) = 0
> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H"..., 
> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> write(4, 
> "E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H\377\326\302\354\1\273c\224&\352~5\365\241"..., 
> 1420) = 1420
> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> (in [5], left {0, 999997})
> clock_gettime(CLOCK_MONOTONIC, {170230, 13667642}) = 0
> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> pkttype=PACKET_HOST, addr(6)={1, b407f94804a5}, 
> msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\10\26@\0\377\21\2\325\2176\251C\2176"..., 
> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
> Process 20463 detached
>
> Em 02/03/2012 13:51, Fernando Macedo escreveu:
>> Strace of my last segfault:
>>
>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
>> 1 (in [4], left {0, 999997})
>> clock_gettime(CLOCK_MONOTONIC, {156370, 941588185}) = 0
>> read(4, 
>> "E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176\251\331\0P\300\230jN\25\223:\26a\316"..., 
>> 65497) = 1420
>> sendto(5, 
>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176"..., 
>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
>> 1 (in [4], left {0, 999997})
>> clock_gettime(CLOCK_MONOTONIC, {156370, 941877024}) = 0
>> read(4, 
>> "E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176\251\331\0P\300\230jN\32\367:\26a\316"..., 
>> 65497) = 1420
>> sendto(5, 
>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176"..., 
>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
>> 1 (in [4], left {0, 996370})
>> clock_gettime(CLOCK_MONOTONIC, {156370, 945791076}) = 0
>> read(4, 
>> "E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176\251\331\0P\300\230jN 
>> [:\26a\316"..., 65497) = 1420
>> sendto(5, 
>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176"..., 
>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
>> 1 (in [4], left {0, 999997})
>> clock_gettime(CLOCK_MONOTONIC, {156370, 946070102}) = 0
>> read(4, 
>> "E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176\251\331\0P\300\230jN%\277:\26a\316"..., 
>> 65497) = 1420
>> sendto(5, 
>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176"..., 
>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
>> 2 (in [4 5], left {0, 999997})
>> clock_gettime(CLOCK_MONOTONIC, {156370, 946381872}) = 0
>> read(4, 
>> "E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176\251\331\0P\300\230jN+#:\26a\316"..., 
>> 65497) = 1420
>> sendto(5, 
>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176"..., 
>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0}, 
>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376"..., 
>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>> write(4, 
>> "E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\n\313"..., 
>> 46) = 46
>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
>> 1 (in [4], left {0, 999997})
>> clock_gettime(CLOCK_MONOTONIC, {156370, 946868309}) = 0
>> read(4, 
>> "E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176\251\331\0P\300\230jN0\207:\26a\316"..., 
>> 65497) = 1420
>> sendto(5, 
>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176"..., 
>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
>> 1 (in [5], left {0, 997678})
>> clock_gettime(CLOCK_MONOTONIC, {156370, 949470668}) = 0
>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0}, 
>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376"..., 
>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>> write(4, 
>> "E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\25\223"..., 
>> 46) = 46
>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
>> 1 (in [5], left {0, 999332})
>> clock_gettime(CLOCK_MONOTONIC, {156370, 950476429}) = 0
>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
>> pkttype=PACKET_HOST, addr(6)={1, 74f06d058e5a}, 
>> msg_iov(1)=[{"\232M\"\336X\16t\360m\5\216Z\10\0E\0\0)e0@\0\200\6~\362\2176\251\22\310["..., 
>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>> write(4, 
>> "E\0\0)e0@\0\200\6~\362\2176\251\22\310[\26\10\312H\0P~\314HR\377\5\r\313"..., 
>> 46) = 46
>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
>> 1 (in [5], left {0, 999285})
>> clock_gettime(CLOCK_MONOTONIC, {156370, 951522574}) = 0
>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0}, 
>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376"..., 
>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>> write(4, 
>> "E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN 
>> ["..., 46) = 46
>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
>> 1 (in [5], left {0, 998912})
>> clock_gettime(CLOCK_MONOTONIC, {156370, 952930646}) = 0
>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
>> pkttype=PACKET_HOST, addr(6)={1, b407f94804a5}, 
>> msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\7y@\0\377\21\3\34\2176\251\231\2176"..., 
>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
>> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
>> Process 25821 detached
>>
>> Em 14/02/2012 11:36, Fernando Macedo escreveu:
>>> Any idea? I'm using chilli_query login toauthenticate the users. It 
>>> can be related to this bug: http://www.coova.org/node/2653.
>>>
>>> Em 13/02/2012 17:33, Fernando Macedo escreveu:
>>>> More crashes:
>>>>
>>>> Feb 13 14:16:07 x kernel: [2788498.078399] chilli[893]: segfault at 
>>>> 7ffff6a8b058 ip 00007f5621e96d64 sp 00007ffff6a78088 error 4 in 
>>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
>>>> Feb 13 16:35:56 x kernel: [2796886.973424] chilli[1317]: segfault 
>>>> at 7fffd306d02d ip 00007f5f14cb4d64 sp 00007fffd305acf8 error 4 in 
>>>> libchilli.so.0.0.0[7f5f14c8b000+4a000]
>>>> Feb 13 16:36:08 x kernel: [2796899.050379] chilli[31138]: segfault 
>>>> at 7fffeb998019 ip 00007ff00cbdbd64 sp 00007fffeb984cd8 error 4 in 
>>>> libchilli.so.0.0.0[7ff00cbb2000+4a000]
>>>> Feb 13 16:40:58 x kernel: [2797189.473169] chilli[31371]: segfault 
>>>> at 7fff5258202d ip 00007fd99487fd64 sp 00007fff5256f948 error 4 in 
>>>> libchilli.so.0.0.0[7fd994856000+4a000]
>>>> Feb 13 16:41:11 x kernel: [2797201.999800] chilli[5316]: segfault 
>>>> at 7ffff7f38019 ip 00007f27c4ae2d64 sp 00007ffff7f24c08 error 4 in 
>>>> libchilli.so.0.0.0[7f27c4ab9000+4a000]
>>>> Feb 13 16:41:27 x kernel: [2797218.491727] chilli[5601]: segfault 
>>>> at 7fff10237009 ip 00007fbc046d2d64 sp 00007fff10223818 error 4 in 
>>>> libchilli.so.0.0.0[7fbc046a9000+4a000]
>>>>
>>>>
>>>> Em 13/02/2012 14:25, Fernando Macedo escreveu:
>>>>> Hi, one month after installing chilli we experienced a segfault in 
>>>>> the last version.
>>>>>
>>>>> kernel: [2788498.078399] chilli[893]: segfault at 7ffff6a8b058 ip 
>>>>> 00007f5621e96d64 sp 00007ffff6a78088 error 4 in 
>>>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
>>>>>
>>>>> Has anyone the same problem?
>>>>>
>>>>> Fernando Macedo
>>>>> _______________________________________________
>>>>> Chilli mailing list
>>>>> Chilli at coova.org
>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>
>>>> _______________________________________________
>>>> Chilli mailing list
>>>> Chilli at coova.org
>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>
>>> _______________________________________________
>>> Chilli mailing list
>>> Chilli at coova.org
>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From david at coova.com  Tue Mar  6 19:22:52 2012
From: david at coova.com (David Bird)
Date: Tue, 06 Mar 2012 20:22:52 +0100
Subject: [Chilli] Segfault Chilli 1.2.9
In-Reply-To: <4F565DFE.1080108@cpd.ufrgs.br>
References: <4F39396F.1070703@cpd.ufrgs.br> <4F396574.6020401@cpd.ufrgs.br>
	<4F3A636F.1010507@cpd.ufrgs.br> <4F50FA7E.4040508@cpd.ufrgs.br>
	<4F50FFA2.5070403@cpd.ufrgs.br> <4F565DFE.1080108@cpd.ufrgs.br>
Message-ID: <1331061772.3210.203.camel@david-laptop>

Ouch, that isn't a good length. Can you do a backtrace in gdb ('bt'
command)? 

On Tue, 2012-03-06 at 15:57 -0300, Fernando Macedo wrote:
> GDB output of segfault:
> 
> root# gdb /usr/local/sbin/chilli
> 
> GNU gdb (GDB) 7.1-ubuntu
> Copyright (C) 2010 Free Software Foundation, Inc.
> License GPLv3+: GNU GPL version 3 or later 
> <http://gnu.org/licenses/gpl.html>
> This is free software: you are free to change and redistribute it.
> There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
> and "show warranty" for details.
> This GDB was configured as "x86_64-linux-gnu".
> For bug reporting instructions, please see:
> <http://www.gnu.org/software/gdb/bugs/>...
> Reading symbols from /usr/local/sbin/chilli...done.
> (gdb) run  -c /usr/local/etc/chilli.conf --maxclients=1024 
> --dhcpopt=0104FFFFFC00 --fg
> Starting program: /usr/local/sbin/chilli -c /usr/local/etc/chilli.conf 
> --maxclients=1024 --dhcpopt=0104FFFFFC00 --fg
> [Thread debugging using libthread_db enabled]
> 
> Program received signal SIGSEGV, Segmentation fault.
> dhcp_gettag (pack=0x7ffffffedc00, length=18446744073709551608, 
> tag=0x7ffffffecdc8, tagtype=55 '7') at dhcp.c:2914
> 2914        if (t->t == tagtype) {
> (gdb)
> 
> 
> Em 02/03/2012 14:13, Fernando Macedo escreveu:
> > Again:
> >
> > recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> > pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> > msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H"..., 
> > 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> > cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> > write(4, 
> > "E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H\377\326\302\354\1\273c\224\3\350~5\365\241"..., 
> > 1420) = 1420
> > select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> > (in [5], left {0, 999997})
> > clock_gettime(CLOCK_MONOTONIC, {170230, 11114377}) = 0
> > recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> > pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> > msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H"..., 
> > 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> > cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> > write(4, 
> > "E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H\377\326\302\354\1\273c\224\tL~5\365\241"..., 
> > 1420) = 1420
> > select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> > (in [5], left {0, 999997})
> > clock_gettime(CLOCK_MONOTONIC, {170230, 11421407}) = 0
> > recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> > pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> > msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H"..., 
> > 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> > cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> > write(4, 
> > "E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H\377\326\302\354\1\273c\224\16\260~5\365\241"..., 
> > 1420) = 1420
> > select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> > (in [5], left {0, 999997})
> > clock_gettime(CLOCK_MONOTONIC, {170230, 11759495}) = 0
> > recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> > pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> > msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\00146\276@\0\200\6\323\237\2176\250\20\270H"..., 
> > 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> > cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 322
> > write(4, 
> > "E\0\00146\276@\0\200\6\323\237\2176\250\20\270H\377\326\302\354\1\273c\224\24\24~5\365\241"..., 
> > 308) = 308
> > select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> > (in [5], left {0, 999997})
> > clock_gettime(CLOCK_MONOTONIC, {170230, 12066338}) = 0
> > recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> > pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> > msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H"..., 
> > 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> > cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> > write(4, 
> > "E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H\377\326\302\354\1\273c\224\25 
> > ~5\365\241"..., 1420) = 1420
> > select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> > (in [5], left {0, 999997})
> > clock_gettime(CLOCK_MONOTONIC, {170230, 12373554}) = 0
> > recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> > pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> > msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H"..., 
> > 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> > cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 544
> > write(4, 
> > "E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H\377\326\302\354\1\273c\224\32\204~5\365\241"..., 
> > 530) = 530
> > select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> > (in [5], left {0, 999997})
> > clock_gettime(CLOCK_MONOTONIC, {170230, 12705270}) = 0
> > recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> > pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> > msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H"..., 
> > 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> > cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1358
> > write(4, 
> > "E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H\377\326\302\354\1\273c\224\34n~5\365\241"..., 
> > 1344) = 1344
> > select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> > (in [5], left {0, 999997})
> > clock_gettime(CLOCK_MONOTONIC, {170230, 13015073}) = 0
> > recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> > pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> > msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H"..., 
> > 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> > cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> > write(4, 
> > "E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H\377\326\302\354\1\273c\224!\206~5\365\241"..., 
> > 1420) = 1420
> > select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> > (in [5], left {0, 999997})
> > clock_gettime(CLOCK_MONOTONIC, {170230, 13360233}) = 0
> > recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> > pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0}, 
> > msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H"..., 
> > 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> > cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> > write(4, 
> > "E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H\377\326\302\354\1\273c\224&\352~5\365\241"..., 
> > 1420) = 1420
> > select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1 
> > (in [5], left {0, 999997})
> > clock_gettime(CLOCK_MONOTONIC, {170230, 13667642}) = 0
> > recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> > pkttype=PACKET_HOST, addr(6)={1, b407f94804a5}, 
> > msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\10\26@\0\377\21\2\325\2176\251C\2176"..., 
> > 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> > cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
> > --- SIGSEGV (Segmentation fault) @ 0 (0) ---
> > Process 20463 detached
> >
> > Em 02/03/2012 13:51, Fernando Macedo escreveu:
> >> Strace of my last segfault:
> >>
> >> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
> >> 1 (in [4], left {0, 999997})
> >> clock_gettime(CLOCK_MONOTONIC, {156370, 941588185}) = 0
> >> read(4, 
> >> "E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176\251\331\0P\300\230jN\25\223:\26a\316"..., 
> >> 65497) = 1420
> >> sendto(5, 
> >> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176"..., 
> >> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
> >> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
> >> 1 (in [4], left {0, 999997})
> >> clock_gettime(CLOCK_MONOTONIC, {156370, 941877024}) = 0
> >> read(4, 
> >> "E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176\251\331\0P\300\230jN\32\367:\26a\316"..., 
> >> 65497) = 1420
> >> sendto(5, 
> >> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176"..., 
> >> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
> >> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
> >> 1 (in [4], left {0, 996370})
> >> clock_gettime(CLOCK_MONOTONIC, {156370, 945791076}) = 0
> >> read(4, 
> >> "E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176\251\331\0P\300\230jN 
> >> [:\26a\316"..., 65497) = 1420
> >> sendto(5, 
> >> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176"..., 
> >> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
> >> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
> >> 1 (in [4], left {0, 999997})
> >> clock_gettime(CLOCK_MONOTONIC, {156370, 946070102}) = 0
> >> read(4, 
> >> "E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176\251\331\0P\300\230jN%\277:\26a\316"..., 
> >> 65497) = 1420
> >> sendto(5, 
> >> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176"..., 
> >> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
> >> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
> >> 2 (in [4 5], left {0, 999997})
> >> clock_gettime(CLOCK_MONOTONIC, {156370, 946381872}) = 0
> >> read(4, 
> >> "E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176\251\331\0P\300\230jN+#:\26a\316"..., 
> >> 65497) = 1420
> >> sendto(5, 
> >> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176"..., 
> >> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
> >> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> >> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0}, 
> >> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376"..., 
> >> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> >> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> >> write(4, 
> >> "E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\n\313"..., 
> >> 46) = 46
> >> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
> >> 1 (in [4], left {0, 999997})
> >> clock_gettime(CLOCK_MONOTONIC, {156370, 946868309}) = 0
> >> read(4, 
> >> "E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176\251\331\0P\300\230jN0\207:\26a\316"..., 
> >> 65497) = 1420
> >> sendto(5, 
> >> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176"..., 
> >> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST, 
> >> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
> >> 1 (in [5], left {0, 997678})
> >> clock_gettime(CLOCK_MONOTONIC, {156370, 949470668}) = 0
> >> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> >> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0}, 
> >> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376"..., 
> >> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> >> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> >> write(4, 
> >> "E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\25\223"..., 
> >> 46) = 46
> >> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
> >> 1 (in [5], left {0, 999332})
> >> clock_gettime(CLOCK_MONOTONIC, {156370, 950476429}) = 0
> >> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> >> pkttype=PACKET_HOST, addr(6)={1, 74f06d058e5a}, 
> >> msg_iov(1)=[{"\232M\"\336X\16t\360m\5\216Z\10\0E\0\0)e0@\0\200\6~\362\2176\251\22\310["..., 
> >> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> >> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> >> write(4, 
> >> "E\0\0)e0@\0\200\6~\362\2176\251\22\310[\26\10\312H\0P~\314HR\377\5\r\313"..., 
> >> 46) = 46
> >> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
> >> 1 (in [5], left {0, 999285})
> >> clock_gettime(CLOCK_MONOTONIC, {156370, 951522574}) = 0
> >> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> >> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0}, 
> >> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376"..., 
> >> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> >> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> >> write(4, 
> >> "E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN 
> >> ["..., 46) = 46
> >> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 
> >> 1 (in [5], left {0, 998912})
> >> clock_gettime(CLOCK_MONOTONIC, {156370, 952930646}) = 0
> >> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3, 
> >> pkttype=PACKET_HOST, addr(6)={1, b407f94804a5}, 
> >> msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\7y@\0\377\21\3\34\2176\251\231\2176"..., 
> >> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET, 
> >> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
> >> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
> >> Process 25821 detached
> >>
> >> Em 14/02/2012 11:36, Fernando Macedo escreveu:
> >>> Any idea? I'm using chilli_query login toauthenticate the users. It 
> >>> can be related to this bug: http://www.coova.org/node/2653.
> >>>
> >>> Em 13/02/2012 17:33, Fernando Macedo escreveu:
> >>>> More crashes:
> >>>>
> >>>> Feb 13 14:16:07 x kernel: [2788498.078399] chilli[893]: segfault at 
> >>>> 7ffff6a8b058 ip 00007f5621e96d64 sp 00007ffff6a78088 error 4 in 
> >>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
> >>>> Feb 13 16:35:56 x kernel: [2796886.973424] chilli[1317]: segfault 
> >>>> at 7fffd306d02d ip 00007f5f14cb4d64 sp 00007fffd305acf8 error 4 in 
> >>>> libchilli.so.0.0.0[7f5f14c8b000+4a000]
> >>>> Feb 13 16:36:08 x kernel: [2796899.050379] chilli[31138]: segfault 
> >>>> at 7fffeb998019 ip 00007ff00cbdbd64 sp 00007fffeb984cd8 error 4 in 
> >>>> libchilli.so.0.0.0[7ff00cbb2000+4a000]
> >>>> Feb 13 16:40:58 x kernel: [2797189.473169] chilli[31371]: segfault 
> >>>> at 7fff5258202d ip 00007fd99487fd64 sp 00007fff5256f948 error 4 in 
> >>>> libchilli.so.0.0.0[7fd994856000+4a000]
> >>>> Feb 13 16:41:11 x kernel: [2797201.999800] chilli[5316]: segfault 
> >>>> at 7ffff7f38019 ip 00007f27c4ae2d64 sp 00007ffff7f24c08 error 4 in 
> >>>> libchilli.so.0.0.0[7f27c4ab9000+4a000]
> >>>> Feb 13 16:41:27 x kernel: [2797218.491727] chilli[5601]: segfault 
> >>>> at 7fff10237009 ip 00007fbc046d2d64 sp 00007fff10223818 error 4 in 
> >>>> libchilli.so.0.0.0[7fbc046a9000+4a000]
> >>>>
> >>>>
> >>>> Em 13/02/2012 14:25, Fernando Macedo escreveu:
> >>>>> Hi, one month after installing chilli we experienced a segfault in 
> >>>>> the last version.
> >>>>>
> >>>>> kernel: [2788498.078399] chilli[893]: segfault at 7ffff6a8b058 ip 
> >>>>> 00007f5621e96d64 sp 00007ffff6a78088 error 4 in 
> >>>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
> >>>>>
> >>>>> Has anyone the same problem?
> >>>>>
> >>>>> Fernando Macedo
> >>>>> _______________________________________________
> >>>>> Chilli mailing list
> >>>>> Chilli at coova.org
> >>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>>>
> >>>> _______________________________________________
> >>>> Chilli mailing list
> >>>> Chilli at coova.org
> >>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>>
> >>> _______________________________________________
> >>> Chilli mailing list
> >>> Chilli at coova.org
> >>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>
> >> _______________________________________________
> >> Chilli mailing list
> >> Chilli at coova.org
> >> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From fmacedo at cpd.ufrgs.br  Tue Mar  6 19:41:07 2012
From: fmacedo at cpd.ufrgs.br (Fernando Macedo)
Date: Tue, 06 Mar 2012 16:41:07 -0300
Subject: [Chilli] Segfault Chilli 1.2.9
In-Reply-To: <1331061772.3210.203.camel@david-laptop>
References: <4F39396F.1070703@cpd.ufrgs.br> <4F396574.6020401@cpd.ufrgs.br>
	<4F3A636F.1010507@cpd.ufrgs.br> <4F50FA7E.4040508@cpd.ufrgs.br>
	<4F50FFA2.5070403@cpd.ufrgs.br> <4F565DFE.1080108@cpd.ufrgs.br>
	<1331061772.3210.203.camel@david-laptop>
Message-ID: <4F566853.3020706@cpd.ufrgs.br>

On next crash... Unfortunately, the server was rebooted. I believe it's 
related to a specific client.

Fernando Macedo

Em 06/03/2012 16:22, David Bird escreveu:
> Ouch, that isn't a good length. Can you do a backtrace in gdb ('bt'
> command)?
>
> On Tue, 2012-03-06 at 15:57 -0300, Fernando Macedo wrote:
>> GDB output of segfault:
>>
>> root# gdb /usr/local/sbin/chilli
>>
>> GNU gdb (GDB) 7.1-ubuntu
>> Copyright (C) 2010 Free Software Foundation, Inc.
>> License GPLv3+: GNU GPL version 3 or later
>> <http://gnu.org/licenses/gpl.html>
>> This is free software: you are free to change and redistribute it.
>> There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
>> and "show warranty" for details.
>> This GDB was configured as "x86_64-linux-gnu".
>> For bug reporting instructions, please see:
>> <http://www.gnu.org/software/gdb/bugs/>...
>> Reading symbols from /usr/local/sbin/chilli...done.
>> (gdb) run  -c /usr/local/etc/chilli.conf --maxclients=1024
>> --dhcpopt=0104FFFFFC00 --fg
>> Starting program: /usr/local/sbin/chilli -c /usr/local/etc/chilli.conf
>> --maxclients=1024 --dhcpopt=0104FFFFFC00 --fg
>> [Thread debugging using libthread_db enabled]
>>
>> Program received signal SIGSEGV, Segmentation fault.
>> dhcp_gettag (pack=0x7ffffffedc00, length=18446744073709551608,
>> tag=0x7ffffffecdc8, tagtype=55 '7') at dhcp.c:2914
>> 2914        if (t->t == tagtype) {
>> (gdb)
>>
>>
>> Em 02/03/2012 14:13, Fernando Macedo escreveu:
>>> Again:
>>>
>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H"...,
>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>> write(4,
>>> "E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H\377\326\302\354\1\273c\224\3\350~5\365\241"...,
>>> 1420) = 1420
>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>> (in [5], left {0, 999997})
>>> clock_gettime(CLOCK_MONOTONIC, {170230, 11114377}) = 0
>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H"...,
>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>> write(4,
>>> "E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H\377\326\302\354\1\273c\224\tL~5\365\241"...,
>>> 1420) = 1420
>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>> (in [5], left {0, 999997})
>>> clock_gettime(CLOCK_MONOTONIC, {170230, 11421407}) = 0
>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H"...,
>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>> write(4,
>>> "E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H\377\326\302\354\1\273c\224\16\260~5\365\241"...,
>>> 1420) = 1420
>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>> (in [5], left {0, 999997})
>>> clock_gettime(CLOCK_MONOTONIC, {170230, 11759495}) = 0
>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\00146\276@\0\200\6\323\237\2176\250\20\270H"...,
>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 322
>>> write(4,
>>> "E\0\00146\276@\0\200\6\323\237\2176\250\20\270H\377\326\302\354\1\273c\224\24\24~5\365\241"...,
>>> 308) = 308
>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>> (in [5], left {0, 999997})
>>> clock_gettime(CLOCK_MONOTONIC, {170230, 12066338}) = 0
>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H"...,
>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>> write(4,
>>> "E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H\377\326\302\354\1\273c\224\25
>>> ~5\365\241"..., 1420) = 1420
>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>> (in [5], left {0, 999997})
>>> clock_gettime(CLOCK_MONOTONIC, {170230, 12373554}) = 0
>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H"...,
>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 544
>>> write(4,
>>> "E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H\377\326\302\354\1\273c\224\32\204~5\365\241"...,
>>> 530) = 530
>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>> (in [5], left {0, 999997})
>>> clock_gettime(CLOCK_MONOTONIC, {170230, 12705270}) = 0
>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H"...,
>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1358
>>> write(4,
>>> "E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H\377\326\302\354\1\273c\224\34n~5\365\241"...,
>>> 1344) = 1344
>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>> (in [5], left {0, 999997})
>>> clock_gettime(CLOCK_MONOTONIC, {170230, 13015073}) = 0
>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H"...,
>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>> write(4,
>>> "E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H\377\326\302\354\1\273c\224!\206~5\365\241"...,
>>> 1420) = 1420
>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>> (in [5], left {0, 999997})
>>> clock_gettime(CLOCK_MONOTONIC, {170230, 13360233}) = 0
>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H"...,
>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>> write(4,
>>> "E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H\377\326\302\354\1\273c\224&\352~5\365\241"...,
>>> 1420) = 1420
>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>> (in [5], left {0, 999997})
>>> clock_gettime(CLOCK_MONOTONIC, {170230, 13667642}) = 0
>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>> pkttype=PACKET_HOST, addr(6)={1, b407f94804a5},
>>> msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\10\26@\0\377\21\2\325\2176\251C\2176"...,
>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
>>> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
>>> Process 20463 detached
>>>
>>> Em 02/03/2012 13:51, Fernando Macedo escreveu:
>>>> Strace of my last segfault:
>>>>
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>> 1 (in [4], left {0, 999997})
>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 941588185}) = 0
>>>> read(4,
>>>> "E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176\251\331\0P\300\230jN\25\223:\26a\316"...,
>>>> 65497) = 1420
>>>> sendto(5,
>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176"...,
>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>> 1 (in [4], left {0, 999997})
>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 941877024}) = 0
>>>> read(4,
>>>> "E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176\251\331\0P\300\230jN\32\367:\26a\316"...,
>>>> 65497) = 1420
>>>> sendto(5,
>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176"...,
>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>> 1 (in [4], left {0, 996370})
>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 945791076}) = 0
>>>> read(4,
>>>> "E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176\251\331\0P\300\230jN
>>>> [:\26a\316"..., 65497) = 1420
>>>> sendto(5,
>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176"...,
>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>> 1 (in [4], left {0, 999997})
>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 946070102}) = 0
>>>> read(4,
>>>> "E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176\251\331\0P\300\230jN%\277:\26a\316"...,
>>>> 65497) = 1420
>>>> sendto(5,
>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176"...,
>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>> 2 (in [4 5], left {0, 999997})
>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 946381872}) = 0
>>>> read(4,
>>>> "E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176\251\331\0P\300\230jN+#:\26a\316"...,
>>>> 65497) = 1420
>>>> sendto(5,
>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176"...,
>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0},
>>>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376"...,
>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>>>> write(4,
>>>> "E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\n\313"...,
>>>> 46) = 46
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>> 1 (in [4], left {0, 999997})
>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 946868309}) = 0
>>>> read(4,
>>>> "E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176\251\331\0P\300\230jN0\207:\26a\316"...,
>>>> 65497) = 1420
>>>> sendto(5,
>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176"...,
>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>> 1 (in [5], left {0, 997678})
>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 949470668}) = 0
>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0},
>>>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376"...,
>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>>>> write(4,
>>>> "E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\25\223"...,
>>>> 46) = 46
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>> 1 (in [5], left {0, 999332})
>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 950476429}) = 0
>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>> pkttype=PACKET_HOST, addr(6)={1, 74f06d058e5a},
>>>> msg_iov(1)=[{"\232M\"\336X\16t\360m\5\216Z\10\0E\0\0)e0@\0\200\6~\362\2176\251\22\310["...,
>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>>>> write(4,
>>>> "E\0\0)e0@\0\200\6~\362\2176\251\22\310[\26\10\312H\0P~\314HR\377\5\r\313"...,
>>>> 46) = 46
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>> 1 (in [5], left {0, 999285})
>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 951522574}) = 0
>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0},
>>>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376"...,
>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>>>> write(4,
>>>> "E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN
>>>> ["..., 46) = 46
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>> 1 (in [5], left {0, 998912})
>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 952930646}) = 0
>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>> pkttype=PACKET_HOST, addr(6)={1, b407f94804a5},
>>>> msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\7y@\0\377\21\3\34\2176\251\231\2176"...,
>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
>>>> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
>>>> Process 25821 detached
>>>>
>>>> Em 14/02/2012 11:36, Fernando Macedo escreveu:
>>>>> Any idea? I'm using chilli_query login toauthenticate the users. It
>>>>> can be related to this bug: http://www.coova.org/node/2653.
>>>>>
>>>>> Em 13/02/2012 17:33, Fernando Macedo escreveu:
>>>>>> More crashes:
>>>>>>
>>>>>> Feb 13 14:16:07 x kernel: [2788498.078399] chilli[893]: segfault at
>>>>>> 7ffff6a8b058 ip 00007f5621e96d64 sp 00007ffff6a78088 error 4 in
>>>>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
>>>>>> Feb 13 16:35:56 x kernel: [2796886.973424] chilli[1317]: segfault
>>>>>> at 7fffd306d02d ip 00007f5f14cb4d64 sp 00007fffd305acf8 error 4 in
>>>>>> libchilli.so.0.0.0[7f5f14c8b000+4a000]
>>>>>> Feb 13 16:36:08 x kernel: [2796899.050379] chilli[31138]: segfault
>>>>>> at 7fffeb998019 ip 00007ff00cbdbd64 sp 00007fffeb984cd8 error 4 in
>>>>>> libchilli.so.0.0.0[7ff00cbb2000+4a000]
>>>>>> Feb 13 16:40:58 x kernel: [2797189.473169] chilli[31371]: segfault
>>>>>> at 7fff5258202d ip 00007fd99487fd64 sp 00007fff5256f948 error 4 in
>>>>>> libchilli.so.0.0.0[7fd994856000+4a000]
>>>>>> Feb 13 16:41:11 x kernel: [2797201.999800] chilli[5316]: segfault
>>>>>> at 7ffff7f38019 ip 00007f27c4ae2d64 sp 00007ffff7f24c08 error 4 in
>>>>>> libchilli.so.0.0.0[7f27c4ab9000+4a000]
>>>>>> Feb 13 16:41:27 x kernel: [2797218.491727] chilli[5601]: segfault
>>>>>> at 7fff10237009 ip 00007fbc046d2d64 sp 00007fff10223818 error 4 in
>>>>>> libchilli.so.0.0.0[7fbc046a9000+4a000]
>>>>>>
>>>>>>
>>>>>> Em 13/02/2012 14:25, Fernando Macedo escreveu:
>>>>>>> Hi, one month after installing chilli we experienced a segfault in
>>>>>>> the last version.
>>>>>>>
>>>>>>> kernel: [2788498.078399] chilli[893]: segfault at 7ffff6a8b058 ip
>>>>>>> 00007f5621e96d64 sp 00007ffff6a78088 error 4 in
>>>>>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
>>>>>>>
>>>>>>> Has anyone the same problem?
>>>>>>>
>>>>>>> Fernando Macedo
>>>>>>> _______________________________________________
>>>>>>> Chilli mailing list
>>>>>>> Chilli at coova.org
>>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>>> _______________________________________________
>>>>>> Chilli mailing list
>>>>>> Chilli at coova.org
>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>> _______________________________________________
>>>>> Chilli mailing list
>>>>> Chilli at coova.org
>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>> _______________________________________________
>>>> Chilli mailing list
>>>> Chilli at coova.org
>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>> _______________________________________________
>>> Chilli mailing list
>>> Chilli at coova.org
>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>


From fmacedo at cpd.ufrgs.br  Tue Mar  6 21:38:37 2012
From: fmacedo at cpd.ufrgs.br (Fernando Macedo)
Date: Tue, 06 Mar 2012 18:38:37 -0300
Subject: [Chilli] Segfault Chilli 1.2.9
In-Reply-To: <4F566853.3020706@cpd.ufrgs.br>
References: <4F39396F.1070703@cpd.ufrgs.br> <4F396574.6020401@cpd.ufrgs.br>
	<4F3A636F.1010507@cpd.ufrgs.br> <4F50FA7E.4040508@cpd.ufrgs.br>
	<4F50FFA2.5070403@cpd.ufrgs.br> <4F565DFE.1080108@cpd.ufrgs.br>
	<1331061772.3210.203.camel@david-laptop>
	<4F566853.3020706@cpd.ufrgs.br>
Message-ID: <4F5683DD.2080905@cpd.ufrgs.br>

length=18446744073709551608
lenght = ntohs(pack_udph->len) - PKT_UDP_HLEN
PKT_UDP_HLEN = 8
18446744073709551608 = 2^64 -8 :p

Maybe a zero length UDP packet...

Em 06/03/2012 16:41, Fernando Macedo escreveu:
> On next crash... Unfortunately, the server was rebooted. I believe 
> it's related to a specific client.
>
> Fernando Macedo
>
> Em 06/03/2012 16:22, David Bird escreveu:
>> Ouch, that isn't a good length. Can you do a backtrace in gdb ('bt'
>> command)?
>>
>> On Tue, 2012-03-06 at 15:57 -0300, Fernando Macedo wrote:
>>> GDB output of segfault:
>>>
>>> root# gdb /usr/local/sbin/chilli
>>>
>>> GNU gdb (GDB) 7.1-ubuntu
>>> Copyright (C) 2010 Free Software Foundation, Inc.
>>> License GPLv3+: GNU GPL version 3 or later
>>> <http://gnu.org/licenses/gpl.html>
>>> This is free software: you are free to change and redistribute it.
>>> There is NO WARRANTY, to the extent permitted by law.  Type "show 
>>> copying"
>>> and "show warranty" for details.
>>> This GDB was configured as "x86_64-linux-gnu".
>>> For bug reporting instructions, please see:
>>> <http://www.gnu.org/software/gdb/bugs/>...
>>> Reading symbols from /usr/local/sbin/chilli...done.
>>> (gdb) run  -c /usr/local/etc/chilli.conf --maxclients=1024
>>> --dhcpopt=0104FFFFFC00 --fg
>>> Starting program: /usr/local/sbin/chilli -c /usr/local/etc/chilli.conf
>>> --maxclients=1024 --dhcpopt=0104FFFFFC00 --fg
>>> [Thread debugging using libthread_db enabled]
>>>
>>> Program received signal SIGSEGV, Segmentation fault.
>>> dhcp_gettag (pack=0x7ffffffedc00, length=18446744073709551608,
>>> tag=0x7ffffffecdc8, tagtype=55 '7') at dhcp.c:2914
>>> 2914        if (t->t == tagtype) {
>>> (gdb)
>>>
>>>
>>> Em 02/03/2012 14:13, Fernando Macedo escreveu:
>>>> Again:
>>>>
>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H"..., 
>>>>
>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>>> write(4,
>>>> "E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H\377\326\302\354\1\273c\224\3\350~5\365\241"..., 
>>>>
>>>> 1420) = 1420
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>> (in [5], left {0, 999997})
>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 11114377}) = 0
>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H"..., 
>>>>
>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>>> write(4,
>>>> "E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H\377\326\302\354\1\273c\224\tL~5\365\241"..., 
>>>>
>>>> 1420) = 1420
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>> (in [5], left {0, 999997})
>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 11421407}) = 0
>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H"..., 
>>>>
>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>>> write(4,
>>>> "E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H\377\326\302\354\1\273c\224\16\260~5\365\241"..., 
>>>>
>>>> 1420) = 1420
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>> (in [5], left {0, 999997})
>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 11759495}) = 0
>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\00146\276@\0\200\6\323\237\2176\250\20\270H"..., 
>>>>
>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 322
>>>> write(4,
>>>> "E\0\00146\276@\0\200\6\323\237\2176\250\20\270H\377\326\302\354\1\273c\224\24\24~5\365\241"..., 
>>>>
>>>> 308) = 308
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>> (in [5], left {0, 999997})
>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 12066338}) = 0
>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H"..., 
>>>>
>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>>> write(4,
>>>> "E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H\377\326\302\354\1\273c\224\25 
>>>>
>>>> ~5\365\241"..., 1420) = 1420
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>> (in [5], left {0, 999997})
>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 12373554}) = 0
>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H"..., 
>>>>
>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 544
>>>> write(4,
>>>> "E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H\377\326\302\354\1\273c\224\32\204~5\365\241"..., 
>>>>
>>>> 530) = 530
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>> (in [5], left {0, 999997})
>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 12705270}) = 0
>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H"..., 
>>>>
>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1358
>>>> write(4,
>>>> "E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H\377\326\302\354\1\273c\224\34n~5\365\241"..., 
>>>>
>>>> 1344) = 1344
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>> (in [5], left {0, 999997})
>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 13015073}) = 0
>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H"..., 
>>>>
>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>>> write(4,
>>>> "E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H\377\326\302\354\1\273c\224!\206~5\365\241"..., 
>>>>
>>>> 1420) = 1420
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>> (in [5], left {0, 999997})
>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 13360233}) = 0
>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H"..., 
>>>>
>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>>> write(4,
>>>> "E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H\377\326\302\354\1\273c\224&\352~5\365\241"..., 
>>>>
>>>> 1420) = 1420
>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>> (in [5], left {0, 999997})
>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 13667642}) = 0
>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>> pkttype=PACKET_HOST, addr(6)={1, b407f94804a5},
>>>> msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\10\26@\0\377\21\2\325\2176\251C\2176"..., 
>>>>
>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
>>>> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
>>>> Process 20463 detached
>>>>
>>>> Em 02/03/2012 13:51, Fernando Macedo escreveu:
>>>>> Strace of my last segfault:
>>>>>
>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>> 1 (in [4], left {0, 999997})
>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 941588185}) = 0
>>>>> read(4,
>>>>> "E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176\251\331\0P\300\230jN\25\223:\26a\316"..., 
>>>>>
>>>>> 65497) = 1420
>>>>> sendto(5,
>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176"..., 
>>>>>
>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>> 1 (in [4], left {0, 999997})
>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 941877024}) = 0
>>>>> read(4,
>>>>> "E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176\251\331\0P\300\230jN\32\367:\26a\316"..., 
>>>>>
>>>>> 65497) = 1420
>>>>> sendto(5,
>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176"..., 
>>>>>
>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>> 1 (in [4], left {0, 996370})
>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 945791076}) = 0
>>>>> read(4,
>>>>> "E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176\251\331\0P\300\230jN
>>>>> [:\26a\316"..., 65497) = 1420
>>>>> sendto(5,
>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176"..., 
>>>>>
>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>> 1 (in [4], left {0, 999997})
>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 946070102}) = 0
>>>>> read(4,
>>>>> "E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176\251\331\0P\300\230jN%\277:\26a\316"..., 
>>>>>
>>>>> 65497) = 1420
>>>>> sendto(5,
>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176"..., 
>>>>>
>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>> 2 (in [4 5], left {0, 999997})
>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 946381872}) = 0
>>>>> read(4,
>>>>> "E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176\251\331\0P\300\230jN+#:\26a\316"..., 
>>>>>
>>>>> 65497) = 1420
>>>>> sendto(5,
>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176"..., 
>>>>>
>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0},
>>>>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376"..., 
>>>>>
>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>>>>> write(4,
>>>>> "E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\n\313"..., 
>>>>>
>>>>> 46) = 46
>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>> 1 (in [4], left {0, 999997})
>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 946868309}) = 0
>>>>> read(4,
>>>>> "E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176\251\331\0P\300\230jN0\207:\26a\316"..., 
>>>>>
>>>>> 65497) = 1420
>>>>> sendto(5,
>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176"..., 
>>>>>
>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>> 1 (in [5], left {0, 997678})
>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 949470668}) = 0
>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0},
>>>>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376"..., 
>>>>>
>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>>>>> write(4,
>>>>> "E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\25\223"..., 
>>>>>
>>>>> 46) = 46
>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>> 1 (in [5], left {0, 999332})
>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 950476429}) = 0
>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>> pkttype=PACKET_HOST, addr(6)={1, 74f06d058e5a},
>>>>> msg_iov(1)=[{"\232M\"\336X\16t\360m\5\216Z\10\0E\0\0)e0@\0\200\6~\362\2176\251\22\310["..., 
>>>>>
>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>>>>> write(4,
>>>>> "E\0\0)e0@\0\200\6~\362\2176\251\22\310[\26\10\312H\0P~\314HR\377\5\r\313"..., 
>>>>>
>>>>> 46) = 46
>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>> 1 (in [5], left {0, 999285})
>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 951522574}) = 0
>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0},
>>>>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376"..., 
>>>>>
>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>>>>> write(4,
>>>>> "E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN 
>>>>>
>>>>> ["..., 46) = 46
>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>> 1 (in [5], left {0, 998912})
>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 952930646}) = 0
>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>> pkttype=PACKET_HOST, addr(6)={1, b407f94804a5},
>>>>> msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\7y@\0\377\21\3\34\2176\251\231\2176"..., 
>>>>>
>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
>>>>> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
>>>>> Process 25821 detached
>>>>>
>>>>> Em 14/02/2012 11:36, Fernando Macedo escreveu:
>>>>>> Any idea? I'm using chilli_query login toauthenticate the users. It
>>>>>> can be related to this bug: http://www.coova.org/node/2653.
>>>>>>
>>>>>> Em 13/02/2012 17:33, Fernando Macedo escreveu:
>>>>>>> More crashes:
>>>>>>>
>>>>>>> Feb 13 14:16:07 x kernel: [2788498.078399] chilli[893]: segfault at
>>>>>>> 7ffff6a8b058 ip 00007f5621e96d64 sp 00007ffff6a78088 error 4 in
>>>>>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
>>>>>>> Feb 13 16:35:56 x kernel: [2796886.973424] chilli[1317]: segfault
>>>>>>> at 7fffd306d02d ip 00007f5f14cb4d64 sp 00007fffd305acf8 error 4 in
>>>>>>> libchilli.so.0.0.0[7f5f14c8b000+4a000]
>>>>>>> Feb 13 16:36:08 x kernel: [2796899.050379] chilli[31138]: segfault
>>>>>>> at 7fffeb998019 ip 00007ff00cbdbd64 sp 00007fffeb984cd8 error 4 in
>>>>>>> libchilli.so.0.0.0[7ff00cbb2000+4a000]
>>>>>>> Feb 13 16:40:58 x kernel: [2797189.473169] chilli[31371]: segfault
>>>>>>> at 7fff5258202d ip 00007fd99487fd64 sp 00007fff5256f948 error 4 in
>>>>>>> libchilli.so.0.0.0[7fd994856000+4a000]
>>>>>>> Feb 13 16:41:11 x kernel: [2797201.999800] chilli[5316]: segfault
>>>>>>> at 7ffff7f38019 ip 00007f27c4ae2d64 sp 00007ffff7f24c08 error 4 in
>>>>>>> libchilli.so.0.0.0[7f27c4ab9000+4a000]
>>>>>>> Feb 13 16:41:27 x kernel: [2797218.491727] chilli[5601]: segfault
>>>>>>> at 7fff10237009 ip 00007fbc046d2d64 sp 00007fff10223818 error 4 in
>>>>>>> libchilli.so.0.0.0[7fbc046a9000+4a000]
>>>>>>>
>>>>>>>
>>>>>>> Em 13/02/2012 14:25, Fernando Macedo escreveu:
>>>>>>>> Hi, one month after installing chilli we experienced a segfault in
>>>>>>>> the last version.
>>>>>>>>
>>>>>>>> kernel: [2788498.078399] chilli[893]: segfault at 7ffff6a8b058 ip
>>>>>>>> 00007f5621e96d64 sp 00007ffff6a78088 error 4 in
>>>>>>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
>>>>>>>>
>>>>>>>> Has anyone the same problem?
>>>>>>>>
>>>>>>>> Fernando Macedo
>>>>>>>> _______________________________________________
>>>>>>>> Chilli mailing list
>>>>>>>> Chilli at coova.org
>>>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>>>> _______________________________________________
>>>>>>> Chilli mailing list
>>>>>>> Chilli at coova.org
>>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>>> _______________________________________________
>>>>>> Chilli mailing list
>>>>>> Chilli at coova.org
>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>> _______________________________________________
>>>>> Chilli mailing list
>>>>> Chilli at coova.org
>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>> _______________________________________________
>>>> Chilli mailing list
>>>> Chilli at coova.org
>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>> _______________________________________________
>>> Chilli mailing list
>>> Chilli at coova.org
>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From david at coova.com  Wed Mar  7 08:50:52 2012
From: david at coova.com (David Bird)
Date: Wed, 07 Mar 2012 09:50:52 +0100
Subject: [Chilli] Segfault Chilli 1.2.9
In-Reply-To: <4F5683DD.2080905@cpd.ufrgs.br>
References: <4F39396F.1070703@cpd.ufrgs.br> <4F396574.6020401@cpd.ufrgs.br>
	<4F3A636F.1010507@cpd.ufrgs.br> <4F50FA7E.4040508@cpd.ufrgs.br>
	<4F50FFA2.5070403@cpd.ufrgs.br> <4F565DFE.1080108@cpd.ufrgs.br>
	<1331061772.3210.203.camel@david-laptop>
	<4F566853.3020706@cpd.ufrgs.br> <4F5683DD.2080905@cpd.ufrgs.br>
Message-ID: <1331110252.3210.247.camel@david-laptop>

Thanks for helping analyze. Check out the most recent version from
subversion and please test. I was able to reproduce the problem, which
only happened when using dhcpopt option and fixed it. 

Best regards,
David


On Tue, 2012-03-06 at 18:38 -0300, Fernando Macedo wrote:
> length=18446744073709551608
> lenght = ntohs(pack_udph->len) - PKT_UDP_HLEN
> PKT_UDP_HLEN = 8
> 18446744073709551608 = 2^64 -8 :p
> 
> Maybe a zero length UDP packet...
> 
> Em 06/03/2012 16:41, Fernando Macedo escreveu:
> > On next crash... Unfortunately, the server was rebooted. I believe 
> > it's related to a specific client.
> >
> > Fernando Macedo
> >
> > Em 06/03/2012 16:22, David Bird escreveu:
> >> Ouch, that isn't a good length. Can you do a backtrace in gdb ('bt'
> >> command)?
> >>
> >> On Tue, 2012-03-06 at 15:57 -0300, Fernando Macedo wrote:
> >>> GDB output of segfault:
> >>>
> >>> root# gdb /usr/local/sbin/chilli
> >>>
> >>> GNU gdb (GDB) 7.1-ubuntu
> >>> Copyright (C) 2010 Free Software Foundation, Inc.
> >>> License GPLv3+: GNU GPL version 3 or later
> >>> <http://gnu.org/licenses/gpl.html>
> >>> This is free software: you are free to change and redistribute it.
> >>> There is NO WARRANTY, to the extent permitted by law.  Type "show 
> >>> copying"
> >>> and "show warranty" for details.
> >>> This GDB was configured as "x86_64-linux-gnu".
> >>> For bug reporting instructions, please see:
> >>> <http://www.gnu.org/software/gdb/bugs/>...
> >>> Reading symbols from /usr/local/sbin/chilli...done.
> >>> (gdb) run  -c /usr/local/etc/chilli.conf --maxclients=1024
> >>> --dhcpopt=0104FFFFFC00 --fg
> >>> Starting program: /usr/local/sbin/chilli -c /usr/local/etc/chilli.conf
> >>> --maxclients=1024 --dhcpopt=0104FFFFFC00 --fg
> >>> [Thread debugging using libthread_db enabled]
> >>>
> >>> Program received signal SIGSEGV, Segmentation fault.
> >>> dhcp_gettag (pack=0x7ffffffedc00, length=18446744073709551608,
> >>> tag=0x7ffffffecdc8, tagtype=55 '7') at dhcp.c:2914
> >>> 2914        if (t->t == tagtype) {
> >>> (gdb)
> >>>
> >>>
> >>> Em 02/03/2012 14:13, Fernando Macedo escreveu:
> >>>> Again:
> >>>>
> >>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H"..., 
> >>>>
> >>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> >>>> write(4,
> >>>> "E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H\377\326\302\354\1\273c\224\3\350~5\365\241"..., 
> >>>>
> >>>> 1420) = 1420
> >>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>> (in [5], left {0, 999997})
> >>>> clock_gettime(CLOCK_MONOTONIC, {170230, 11114377}) = 0
> >>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H"..., 
> >>>>
> >>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> >>>> write(4,
> >>>> "E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H\377\326\302\354\1\273c\224\tL~5\365\241"..., 
> >>>>
> >>>> 1420) = 1420
> >>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>> (in [5], left {0, 999997})
> >>>> clock_gettime(CLOCK_MONOTONIC, {170230, 11421407}) = 0
> >>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H"..., 
> >>>>
> >>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> >>>> write(4,
> >>>> "E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H\377\326\302\354\1\273c\224\16\260~5\365\241"..., 
> >>>>
> >>>> 1420) = 1420
> >>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>> (in [5], left {0, 999997})
> >>>> clock_gettime(CLOCK_MONOTONIC, {170230, 11759495}) = 0
> >>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\00146\276@\0\200\6\323\237\2176\250\20\270H"..., 
> >>>>
> >>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 322
> >>>> write(4,
> >>>> "E\0\00146\276@\0\200\6\323\237\2176\250\20\270H\377\326\302\354\1\273c\224\24\24~5\365\241"..., 
> >>>>
> >>>> 308) = 308
> >>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>> (in [5], left {0, 999997})
> >>>> clock_gettime(CLOCK_MONOTONIC, {170230, 12066338}) = 0
> >>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H"..., 
> >>>>
> >>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> >>>> write(4,
> >>>> "E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H\377\326\302\354\1\273c\224\25 
> >>>>
> >>>> ~5\365\241"..., 1420) = 1420
> >>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>> (in [5], left {0, 999997})
> >>>> clock_gettime(CLOCK_MONOTONIC, {170230, 12373554}) = 0
> >>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H"..., 
> >>>>
> >>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 544
> >>>> write(4,
> >>>> "E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H\377\326\302\354\1\273c\224\32\204~5\365\241"..., 
> >>>>
> >>>> 530) = 530
> >>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>> (in [5], left {0, 999997})
> >>>> clock_gettime(CLOCK_MONOTONIC, {170230, 12705270}) = 0
> >>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H"..., 
> >>>>
> >>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1358
> >>>> write(4,
> >>>> "E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H\377\326\302\354\1\273c\224\34n~5\365\241"..., 
> >>>>
> >>>> 1344) = 1344
> >>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>> (in [5], left {0, 999997})
> >>>> clock_gettime(CLOCK_MONOTONIC, {170230, 13015073}) = 0
> >>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H"..., 
> >>>>
> >>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> >>>> write(4,
> >>>> "E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H\377\326\302\354\1\273c\224!\206~5\365\241"..., 
> >>>>
> >>>> 1420) = 1420
> >>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>> (in [5], left {0, 999997})
> >>>> clock_gettime(CLOCK_MONOTONIC, {170230, 13360233}) = 0
> >>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H"..., 
> >>>>
> >>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> >>>> write(4,
> >>>> "E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H\377\326\302\354\1\273c\224&\352~5\365\241"..., 
> >>>>
> >>>> 1420) = 1420
> >>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>> (in [5], left {0, 999997})
> >>>> clock_gettime(CLOCK_MONOTONIC, {170230, 13667642}) = 0
> >>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>> pkttype=PACKET_HOST, addr(6)={1, b407f94804a5},
> >>>> msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\10\26@\0\377\21\2\325\2176\251C\2176"..., 
> >>>>
> >>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
> >>>> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
> >>>> Process 20463 detached
> >>>>
> >>>> Em 02/03/2012 13:51, Fernando Macedo escreveu:
> >>>>> Strace of my last segfault:
> >>>>>
> >>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>> 1 (in [4], left {0, 999997})
> >>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 941588185}) = 0
> >>>>> read(4,
> >>>>> "E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176\251\331\0P\300\230jN\25\223:\26a\316"..., 
> >>>>>
> >>>>> 65497) = 1420
> >>>>> sendto(5,
> >>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176"..., 
> >>>>>
> >>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
> >>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>> 1 (in [4], left {0, 999997})
> >>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 941877024}) = 0
> >>>>> read(4,
> >>>>> "E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176\251\331\0P\300\230jN\32\367:\26a\316"..., 
> >>>>>
> >>>>> 65497) = 1420
> >>>>> sendto(5,
> >>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176"..., 
> >>>>>
> >>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
> >>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>> 1 (in [4], left {0, 996370})
> >>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 945791076}) = 0
> >>>>> read(4,
> >>>>> "E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176\251\331\0P\300\230jN
> >>>>> [:\26a\316"..., 65497) = 1420
> >>>>> sendto(5,
> >>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176"..., 
> >>>>>
> >>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
> >>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>> 1 (in [4], left {0, 999997})
> >>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 946070102}) = 0
> >>>>> read(4,
> >>>>> "E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176\251\331\0P\300\230jN%\277:\26a\316"..., 
> >>>>>
> >>>>> 65497) = 1420
> >>>>> sendto(5,
> >>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176"..., 
> >>>>>
> >>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
> >>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>> 2 (in [4 5], left {0, 999997})
> >>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 946381872}) = 0
> >>>>> read(4,
> >>>>> "E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176\251\331\0P\300\230jN+#:\26a\316"..., 
> >>>>>
> >>>>> 65497) = 1420
> >>>>> sendto(5,
> >>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176"..., 
> >>>>>
> >>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
> >>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0},
> >>>>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376"..., 
> >>>>>
> >>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> >>>>> write(4,
> >>>>> "E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\n\313"..., 
> >>>>>
> >>>>> 46) = 46
> >>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>> 1 (in [4], left {0, 999997})
> >>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 946868309}) = 0
> >>>>> read(4,
> >>>>> "E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176\251\331\0P\300\230jN0\207:\26a\316"..., 
> >>>>>
> >>>>> 65497) = 1420
> >>>>> sendto(5,
> >>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176"..., 
> >>>>>
> >>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
> >>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>> 1 (in [5], left {0, 997678})
> >>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 949470668}) = 0
> >>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0},
> >>>>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376"..., 
> >>>>>
> >>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> >>>>> write(4,
> >>>>> "E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\25\223"..., 
> >>>>>
> >>>>> 46) = 46
> >>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>> 1 (in [5], left {0, 999332})
> >>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 950476429}) = 0
> >>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>> pkttype=PACKET_HOST, addr(6)={1, 74f06d058e5a},
> >>>>> msg_iov(1)=[{"\232M\"\336X\16t\360m\5\216Z\10\0E\0\0)e0@\0\200\6~\362\2176\251\22\310["..., 
> >>>>>
> >>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> >>>>> write(4,
> >>>>> "E\0\0)e0@\0\200\6~\362\2176\251\22\310[\26\10\312H\0P~\314HR\377\5\r\313"..., 
> >>>>>
> >>>>> 46) = 46
> >>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>> 1 (in [5], left {0, 999285})
> >>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 951522574}) = 0
> >>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0},
> >>>>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376"..., 
> >>>>>
> >>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> >>>>> write(4,
> >>>>> "E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN 
> >>>>>
> >>>>> ["..., 46) = 46
> >>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>> 1 (in [5], left {0, 998912})
> >>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 952930646}) = 0
> >>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>> pkttype=PACKET_HOST, addr(6)={1, b407f94804a5},
> >>>>> msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\7y@\0\377\21\3\34\2176\251\231\2176"..., 
> >>>>>
> >>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
> >>>>> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
> >>>>> Process 25821 detached
> >>>>>
> >>>>> Em 14/02/2012 11:36, Fernando Macedo escreveu:
> >>>>>> Any idea? I'm using chilli_query login toauthenticate the users. It
> >>>>>> can be related to this bug: http://www.coova.org/node/2653.
> >>>>>>
> >>>>>> Em 13/02/2012 17:33, Fernando Macedo escreveu:
> >>>>>>> More crashes:
> >>>>>>>
> >>>>>>> Feb 13 14:16:07 x kernel: [2788498.078399] chilli[893]: segfault at
> >>>>>>> 7ffff6a8b058 ip 00007f5621e96d64 sp 00007ffff6a78088 error 4 in
> >>>>>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
> >>>>>>> Feb 13 16:35:56 x kernel: [2796886.973424] chilli[1317]: segfault
> >>>>>>> at 7fffd306d02d ip 00007f5f14cb4d64 sp 00007fffd305acf8 error 4 in
> >>>>>>> libchilli.so.0.0.0[7f5f14c8b000+4a000]
> >>>>>>> Feb 13 16:36:08 x kernel: [2796899.050379] chilli[31138]: segfault
> >>>>>>> at 7fffeb998019 ip 00007ff00cbdbd64 sp 00007fffeb984cd8 error 4 in
> >>>>>>> libchilli.so.0.0.0[7ff00cbb2000+4a000]
> >>>>>>> Feb 13 16:40:58 x kernel: [2797189.473169] chilli[31371]: segfault
> >>>>>>> at 7fff5258202d ip 00007fd99487fd64 sp 00007fff5256f948 error 4 in
> >>>>>>> libchilli.so.0.0.0[7fd994856000+4a000]
> >>>>>>> Feb 13 16:41:11 x kernel: [2797201.999800] chilli[5316]: segfault
> >>>>>>> at 7ffff7f38019 ip 00007f27c4ae2d64 sp 00007ffff7f24c08 error 4 in
> >>>>>>> libchilli.so.0.0.0[7f27c4ab9000+4a000]
> >>>>>>> Feb 13 16:41:27 x kernel: [2797218.491727] chilli[5601]: segfault
> >>>>>>> at 7fff10237009 ip 00007fbc046d2d64 sp 00007fff10223818 error 4 in
> >>>>>>> libchilli.so.0.0.0[7fbc046a9000+4a000]
> >>>>>>>
> >>>>>>>
> >>>>>>> Em 13/02/2012 14:25, Fernando Macedo escreveu:
> >>>>>>>> Hi, one month after installing chilli we experienced a segfault in
> >>>>>>>> the last version.
> >>>>>>>>
> >>>>>>>> kernel: [2788498.078399] chilli[893]: segfault at 7ffff6a8b058 ip
> >>>>>>>> 00007f5621e96d64 sp 00007ffff6a78088 error 4 in
> >>>>>>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
> >>>>>>>>
> >>>>>>>> Has anyone the same problem?
> >>>>>>>>
> >>>>>>>> Fernando Macedo
> >>>>>>>> _______________________________________________
> >>>>>>>> Chilli mailing list
> >>>>>>>> Chilli at coova.org
> >>>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>>>>>> _______________________________________________
> >>>>>>> Chilli mailing list
> >>>>>>> Chilli at coova.org
> >>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>>>>> _______________________________________________
> >>>>>> Chilli mailing list
> >>>>>> Chilli at coova.org
> >>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>>>> _______________________________________________
> >>>>> Chilli mailing list
> >>>>> Chilli at coova.org
> >>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>>> _______________________________________________
> >>>> Chilli mailing list
> >>>> Chilli at coova.org
> >>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>> _______________________________________________
> >>> Chilli mailing list
> >>> Chilli at coova.org
> >>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>
> >
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From fmacedo at cpd.ufrgs.br  Wed Mar  7 15:26:20 2012
From: fmacedo at cpd.ufrgs.br (Fernando Macedo)
Date: Wed, 07 Mar 2012 12:26:20 -0300
Subject: [Chilli] Segfault Chilli 1.2.9
In-Reply-To: <1331110252.3210.247.camel@david-laptop>
References: <4F39396F.1070703@cpd.ufrgs.br> <4F396574.6020401@cpd.ufrgs.br>
	<4F3A636F.1010507@cpd.ufrgs.br> <4F50FA7E.4040508@cpd.ufrgs.br>
	<4F50FFA2.5070403@cpd.ufrgs.br> <4F565DFE.1080108@cpd.ufrgs.br>
	<1331061772.3210.203.camel@david-laptop>
	<4F566853.3020706@cpd.ufrgs.br> <4F5683DD.2080905@cpd.ufrgs.br>
	<1331110252.3210.247.camel@david-laptop>
Message-ID: <4F577E1C.1000800@cpd.ufrgs.br>

I was trying to compile from svn, but I have some errors:

main-opt.c: In function ?options_print_version?:
main-opt.c:217: error: ?CMDLINE_PARSER_PACKAGE? undeclared (first use in 
this function)
main-opt.c:217: error: (Each undeclared identifier is reported only once
main-opt.c:217: error: for each function it appears in.)
main-opt.c:217: error: ?CMDLINE_PARSER_VERSION? undeclared (first use in 
this function)
main-opt.c: In function ?main?:
main-opt.c:240: error: storage size of ?args_info? isn?t known
cc1: warnings being treated as errors
main-opt.c:250: error: implicit declaration of function ?cmdline_parser2?
main-opt.c:265: error: implicit declaration of function 
?cmdline_parser_configfile?
main-opt.c:624: error: left-hand operand of comma expression has no effect
main-opt.c:624: error: value computed is not used
main-opt.c:624: error: left-hand operand of comma expression has no effect
main-opt.c:1246: error: implicit declaration of function 
?cmdline_parser_free?
main-opt.c:240: error: unused variable ?args_info?
make[3]: *** [main-opt.o] Error 1
make[3]: Leaving directory `/usr/src/chilli-20120307/coova-chilli/src'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/usr/src/chilli-20120307/coova-chilli/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/usr/src/chilli-20120307/coova-chilli'
make: *** [all] Error 2

I believe that all errors are related to src/cmdline.c and src/cmdline.c 
. They are blank files. I tried to use a old version, but 
gengetopt_args_info has some new members.

Em 07/03/2012 05:50, David Bird escreveu:
> Thanks for helping analyze. Check out the most recent version from
> subversion and please test. I was able to reproduce the problem, which
> only happened when using dhcpopt option and fixed it.
>
> Best regards,
> David
>
>
> On Tue, 2012-03-06 at 18:38 -0300, Fernando Macedo wrote:
>> length=18446744073709551608
>> lenght = ntohs(pack_udph->len) - PKT_UDP_HLEN
>> PKT_UDP_HLEN = 8
>> 18446744073709551608 = 2^64 -8 :p
>>
>> Maybe a zero length UDP packet...
>>
>> Em 06/03/2012 16:41, Fernando Macedo escreveu:
>>> On next crash... Unfortunately, the server was rebooted. I believe
>>> it's related to a specific client.
>>>
>>> Fernando Macedo
>>>
>>> Em 06/03/2012 16:22, David Bird escreveu:
>>>> Ouch, that isn't a good length. Can you do a backtrace in gdb ('bt'
>>>> command)?
>>>>
>>>> On Tue, 2012-03-06 at 15:57 -0300, Fernando Macedo wrote:
>>>>> GDB output of segfault:
>>>>>
>>>>> root# gdb /usr/local/sbin/chilli
>>>>>
>>>>> GNU gdb (GDB) 7.1-ubuntu
>>>>> Copyright (C) 2010 Free Software Foundation, Inc.
>>>>> License GPLv3+: GNU GPL version 3 or later
>>>>> <http://gnu.org/licenses/gpl.html>
>>>>> This is free software: you are free to change and redistribute it.
>>>>> There is NO WARRANTY, to the extent permitted by law.  Type "show
>>>>> copying"
>>>>> and "show warranty" for details.
>>>>> This GDB was configured as "x86_64-linux-gnu".
>>>>> For bug reporting instructions, please see:
>>>>> <http://www.gnu.org/software/gdb/bugs/>...
>>>>> Reading symbols from /usr/local/sbin/chilli...done.
>>>>> (gdb) run  -c /usr/local/etc/chilli.conf --maxclients=1024
>>>>> --dhcpopt=0104FFFFFC00 --fg
>>>>> Starting program: /usr/local/sbin/chilli -c /usr/local/etc/chilli.conf
>>>>> --maxclients=1024 --dhcpopt=0104FFFFFC00 --fg
>>>>> [Thread debugging using libthread_db enabled]
>>>>>
>>>>> Program received signal SIGSEGV, Segmentation fault.
>>>>> dhcp_gettag (pack=0x7ffffffedc00, length=18446744073709551608,
>>>>> tag=0x7ffffffecdc8, tagtype=55 '7') at dhcp.c:2914
>>>>> 2914        if (t->t == tagtype) {
>>>>> (gdb)
>>>>>
>>>>>
>>>>> Em 02/03/2012 14:13, Fernando Macedo escreveu:
>>>>>> Again:
>>>>>>
>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H"...,
>>>>>>
>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>>>>> write(4,
>>>>>> "E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H\377\326\302\354\1\273c\224\3\350~5\365\241"...,
>>>>>>
>>>>>> 1420) = 1420
>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>>>> (in [5], left {0, 999997})
>>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 11114377}) = 0
>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H"...,
>>>>>>
>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>>>>> write(4,
>>>>>> "E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H\377\326\302\354\1\273c\224\tL~5\365\241"...,
>>>>>>
>>>>>> 1420) = 1420
>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>>>> (in [5], left {0, 999997})
>>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 11421407}) = 0
>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H"...,
>>>>>>
>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>>>>> write(4,
>>>>>> "E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H\377\326\302\354\1\273c\224\16\260~5\365\241"...,
>>>>>>
>>>>>> 1420) = 1420
>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>>>> (in [5], left {0, 999997})
>>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 11759495}) = 0
>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\00146\276@\0\200\6\323\237\2176\250\20\270H"...,
>>>>>>
>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 322
>>>>>> write(4,
>>>>>> "E\0\00146\276@\0\200\6\323\237\2176\250\20\270H\377\326\302\354\1\273c\224\24\24~5\365\241"...,
>>>>>>
>>>>>> 308) = 308
>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>>>> (in [5], left {0, 999997})
>>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 12066338}) = 0
>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H"...,
>>>>>>
>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>>>>> write(4,
>>>>>> "E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H\377\326\302\354\1\273c\224\25
>>>>>>
>>>>>> ~5\365\241"..., 1420) = 1420
>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>>>> (in [5], left {0, 999997})
>>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 12373554}) = 0
>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H"...,
>>>>>>
>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 544
>>>>>> write(4,
>>>>>> "E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H\377\326\302\354\1\273c\224\32\204~5\365\241"...,
>>>>>>
>>>>>> 530) = 530
>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>>>> (in [5], left {0, 999997})
>>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 12705270}) = 0
>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H"...,
>>>>>>
>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1358
>>>>>> write(4,
>>>>>> "E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H\377\326\302\354\1\273c\224\34n~5\365\241"...,
>>>>>>
>>>>>> 1344) = 1344
>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>>>> (in [5], left {0, 999997})
>>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 13015073}) = 0
>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H"...,
>>>>>>
>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>>>>> write(4,
>>>>>> "E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H\377\326\302\354\1\273c\224!\206~5\365\241"...,
>>>>>>
>>>>>> 1420) = 1420
>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>>>> (in [5], left {0, 999997})
>>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 13360233}) = 0
>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
>>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H"...,
>>>>>>
>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
>>>>>> write(4,
>>>>>> "E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H\377\326\302\354\1\273c\224&\352~5\365\241"...,
>>>>>>
>>>>>> 1420) = 1420
>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
>>>>>> (in [5], left {0, 999997})
>>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 13667642}) = 0
>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>>> pkttype=PACKET_HOST, addr(6)={1, b407f94804a5},
>>>>>> msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\10\26@\0\377\21\2\325\2176\251C\2176"...,
>>>>>>
>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
>>>>>> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
>>>>>> Process 20463 detached
>>>>>>
>>>>>> Em 02/03/2012 13:51, Fernando Macedo escreveu:
>>>>>>> Strace of my last segfault:
>>>>>>>
>>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>>>> 1 (in [4], left {0, 999997})
>>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 941588185}) = 0
>>>>>>> read(4,
>>>>>>> "E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176\251\331\0P\300\230jN\25\223:\26a\316"...,
>>>>>>>
>>>>>>> 65497) = 1420
>>>>>>> sendto(5,
>>>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176"...,
>>>>>>>
>>>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>>>> 1 (in [4], left {0, 999997})
>>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 941877024}) = 0
>>>>>>> read(4,
>>>>>>> "E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176\251\331\0P\300\230jN\32\367:\26a\316"...,
>>>>>>>
>>>>>>> 65497) = 1420
>>>>>>> sendto(5,
>>>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176"...,
>>>>>>>
>>>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>>>> 1 (in [4], left {0, 996370})
>>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 945791076}) = 0
>>>>>>> read(4,
>>>>>>> "E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176\251\331\0P\300\230jN
>>>>>>> [:\26a\316"..., 65497) = 1420
>>>>>>> sendto(5,
>>>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176"...,
>>>>>>>
>>>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>>>> 1 (in [4], left {0, 999997})
>>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 946070102}) = 0
>>>>>>> read(4,
>>>>>>> "E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176\251\331\0P\300\230jN%\277:\26a\316"...,
>>>>>>>
>>>>>>> 65497) = 1420
>>>>>>> sendto(5,
>>>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176"...,
>>>>>>>
>>>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>>>> 2 (in [4 5], left {0, 999997})
>>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 946381872}) = 0
>>>>>>> read(4,
>>>>>>> "E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176\251\331\0P\300\230jN+#:\26a\316"...,
>>>>>>>
>>>>>>> 65497) = 1420
>>>>>>> sendto(5,
>>>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176"...,
>>>>>>>
>>>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>>>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0},
>>>>>>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376"...,
>>>>>>>
>>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>>>>>>> write(4,
>>>>>>> "E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\n\313"...,
>>>>>>>
>>>>>>> 46) = 46
>>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>>>> 1 (in [4], left {0, 999997})
>>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 946868309}) = 0
>>>>>>> read(4,
>>>>>>> "E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176\251\331\0P\300\230jN0\207:\26a\316"...,
>>>>>>>
>>>>>>> 65497) = 1420
>>>>>>> sendto(5,
>>>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176"...,
>>>>>>>
>>>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
>>>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
>>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>>>> 1 (in [5], left {0, 997678})
>>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 949470668}) = 0
>>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>>>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0},
>>>>>>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376"...,
>>>>>>>
>>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>>>>>>> write(4,
>>>>>>> "E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\25\223"...,
>>>>>>>
>>>>>>> 46) = 46
>>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>>>> 1 (in [5], left {0, 999332})
>>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 950476429}) = 0
>>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>>>> pkttype=PACKET_HOST, addr(6)={1, 74f06d058e5a},
>>>>>>> msg_iov(1)=[{"\232M\"\336X\16t\360m\5\216Z\10\0E\0\0)e0@\0\200\6~\362\2176\251\22\310["...,
>>>>>>>
>>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>>>>>>> write(4,
>>>>>>> "E\0\0)e0@\0\200\6~\362\2176\251\22\310[\26\10\312H\0P~\314HR\377\5\r\313"...,
>>>>>>>
>>>>>>> 46) = 46
>>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>>>> 1 (in [5], left {0, 999285})
>>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 951522574}) = 0
>>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>>>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0},
>>>>>>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376"...,
>>>>>>>
>>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
>>>>>>> write(4,
>>>>>>> "E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN
>>>>>>>
>>>>>>> ["..., 46) = 46
>>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
>>>>>>> 1 (in [5], left {0, 998912})
>>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 952930646}) = 0
>>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
>>>>>>> pkttype=PACKET_HOST, addr(6)={1, b407f94804a5},
>>>>>>> msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\7y@\0\377\21\3\34\2176\251\231\2176"...,
>>>>>>>
>>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
>>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
>>>>>>> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
>>>>>>> Process 25821 detached
>>>>>>>
>>>>>>> Em 14/02/2012 11:36, Fernando Macedo escreveu:
>>>>>>>> Any idea? I'm using chilli_query login toauthenticate the users. It
>>>>>>>> can be related to this bug: http://www.coova.org/node/2653.
>>>>>>>>
>>>>>>>> Em 13/02/2012 17:33, Fernando Macedo escreveu:
>>>>>>>>> More crashes:
>>>>>>>>>
>>>>>>>>> Feb 13 14:16:07 x kernel: [2788498.078399] chilli[893]: segfault at
>>>>>>>>> 7ffff6a8b058 ip 00007f5621e96d64 sp 00007ffff6a78088 error 4 in
>>>>>>>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
>>>>>>>>> Feb 13 16:35:56 x kernel: [2796886.973424] chilli[1317]: segfault
>>>>>>>>> at 7fffd306d02d ip 00007f5f14cb4d64 sp 00007fffd305acf8 error 4 in
>>>>>>>>> libchilli.so.0.0.0[7f5f14c8b000+4a000]
>>>>>>>>> Feb 13 16:36:08 x kernel: [2796899.050379] chilli[31138]: segfault
>>>>>>>>> at 7fffeb998019 ip 00007ff00cbdbd64 sp 00007fffeb984cd8 error 4 in
>>>>>>>>> libchilli.so.0.0.0[7ff00cbb2000+4a000]
>>>>>>>>> Feb 13 16:40:58 x kernel: [2797189.473169] chilli[31371]: segfault
>>>>>>>>> at 7fff5258202d ip 00007fd99487fd64 sp 00007fff5256f948 error 4 in
>>>>>>>>> libchilli.so.0.0.0[7fd994856000+4a000]
>>>>>>>>> Feb 13 16:41:11 x kernel: [2797201.999800] chilli[5316]: segfault
>>>>>>>>> at 7ffff7f38019 ip 00007f27c4ae2d64 sp 00007ffff7f24c08 error 4 in
>>>>>>>>> libchilli.so.0.0.0[7f27c4ab9000+4a000]
>>>>>>>>> Feb 13 16:41:27 x kernel: [2797218.491727] chilli[5601]: segfault
>>>>>>>>> at 7fff10237009 ip 00007fbc046d2d64 sp 00007fff10223818 error 4 in
>>>>>>>>> libchilli.so.0.0.0[7fbc046a9000+4a000]
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Em 13/02/2012 14:25, Fernando Macedo escreveu:
>>>>>>>>>> Hi, one month after installing chilli we experienced a segfault in
>>>>>>>>>> the last version.
>>>>>>>>>>
>>>>>>>>>> kernel: [2788498.078399] chilli[893]: segfault at 7ffff6a8b058 ip
>>>>>>>>>> 00007f5621e96d64 sp 00007ffff6a78088 error 4 in
>>>>>>>>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
>>>>>>>>>>
>>>>>>>>>> Has anyone the same problem?
>>>>>>>>>>
>>>>>>>>>> Fernando Macedo
>>>>>>>>>> _______________________________________________
>>>>>>>>>> Chilli mailing list
>>>>>>>>>> Chilli at coova.org
>>>>>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>>>>>> _______________________________________________
>>>>>>>>> Chilli mailing list
>>>>>>>>> Chilli at coova.org
>>>>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>>>>> _______________________________________________
>>>>>>>> Chilli mailing list
>>>>>>>> Chilli at coova.org
>>>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>>>> _______________________________________________
>>>>>>> Chilli mailing list
>>>>>>> Chilli at coova.org
>>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>>> _______________________________________________
>>>>>> Chilli mailing list
>>>>>> Chilli at coova.org
>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>> _______________________________________________
>>>>> Chilli mailing list
>>>>> Chilli at coova.org
>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>> _______________________________________________
>>> Chilli mailing list
>>> Chilli at coova.org
>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>


From david at coova.com  Wed Mar  7 15:49:36 2012
From: david at coova.com (David Bird)
Date: Wed, 07 Mar 2012 16:49:36 +0100
Subject: [Chilli] Segfault Chilli 1.2.9
In-Reply-To: <4F577E1C.1000800@cpd.ufrgs.br>
References: <4F39396F.1070703@cpd.ufrgs.br> <4F396574.6020401@cpd.ufrgs.br>
	<4F3A636F.1010507@cpd.ufrgs.br> <4F50FA7E.4040508@cpd.ufrgs.br>
	<4F50FFA2.5070403@cpd.ufrgs.br> <4F565DFE.1080108@cpd.ufrgs.br>
	<1331061772.3210.203.camel@david-laptop>
	<4F566853.3020706@cpd.ufrgs.br> <4F5683DD.2080905@cpd.ufrgs.br>
	<1331110252.3210.247.camel@david-laptop>
	<4F577E1C.1000800@cpd.ufrgs.br>
Message-ID: <1331135376.3473.6.camel@david-laptop>

Those files are generated (using gengetopt package). Here is a
distribution archive for testing.

http://coova-chilli.s3.amazonaws.com/coova-chilli-1.3.0-svn.tar.gz

Cheers,
David


On Wed, 2012-03-07 at 12:26 -0300, Fernando Macedo wrote:
> I was trying to compile from svn, but I have some errors:
> 
> main-opt.c: In function ?options_print_version?:
> main-opt.c:217: error: ?CMDLINE_PARSER_PACKAGE? undeclared (first use in 
> this function)
> main-opt.c:217: error: (Each undeclared identifier is reported only once
> main-opt.c:217: error: for each function it appears in.)
> main-opt.c:217: error: ?CMDLINE_PARSER_VERSION? undeclared (first use in 
> this function)
> main-opt.c: In function ?main?:
> main-opt.c:240: error: storage size of ?args_info? isn?t known
> cc1: warnings being treated as errors
> main-opt.c:250: error: implicit declaration of function ?cmdline_parser2?
> main-opt.c:265: error: implicit declaration of function 
> ?cmdline_parser_configfile?
> main-opt.c:624: error: left-hand operand of comma expression has no effect
> main-opt.c:624: error: value computed is not used
> main-opt.c:624: error: left-hand operand of comma expression has no effect
> main-opt.c:1246: error: implicit declaration of function 
> ?cmdline_parser_free?
> main-opt.c:240: error: unused variable ?args_info?
> make[3]: *** [main-opt.o] Error 1
> make[3]: Leaving directory `/usr/src/chilli-20120307/coova-chilli/src'
> make[2]: *** [all-recursive] Error 1
> make[2]: Leaving directory `/usr/src/chilli-20120307/coova-chilli/src'
> make[1]: *** [all-recursive] Error 1
> make[1]: Leaving directory `/usr/src/chilli-20120307/coova-chilli'
> make: *** [all] Error 2
> 
> I believe that all errors are related to src/cmdline.c and src/cmdline.c 
> . They are blank files. I tried to use a old version, but 
> gengetopt_args_info has some new members.
> 
> Em 07/03/2012 05:50, David Bird escreveu:
> > Thanks for helping analyze. Check out the most recent version from
> > subversion and please test. I was able to reproduce the problem, which
> > only happened when using dhcpopt option and fixed it.
> >
> > Best regards,
> > David
> >
> >
> > On Tue, 2012-03-06 at 18:38 -0300, Fernando Macedo wrote:
> >> length=18446744073709551608
> >> lenght = ntohs(pack_udph->len) - PKT_UDP_HLEN
> >> PKT_UDP_HLEN = 8
> >> 18446744073709551608 = 2^64 -8 :p
> >>
> >> Maybe a zero length UDP packet...
> >>
> >> Em 06/03/2012 16:41, Fernando Macedo escreveu:
> >>> On next crash... Unfortunately, the server was rebooted. I believe
> >>> it's related to a specific client.
> >>>
> >>> Fernando Macedo
> >>>
> >>> Em 06/03/2012 16:22, David Bird escreveu:
> >>>> Ouch, that isn't a good length. Can you do a backtrace in gdb ('bt'
> >>>> command)?
> >>>>
> >>>> On Tue, 2012-03-06 at 15:57 -0300, Fernando Macedo wrote:
> >>>>> GDB output of segfault:
> >>>>>
> >>>>> root# gdb /usr/local/sbin/chilli
> >>>>>
> >>>>> GNU gdb (GDB) 7.1-ubuntu
> >>>>> Copyright (C) 2010 Free Software Foundation, Inc.
> >>>>> License GPLv3+: GNU GPL version 3 or later
> >>>>> <http://gnu.org/licenses/gpl.html>
> >>>>> This is free software: you are free to change and redistribute it.
> >>>>> There is NO WARRANTY, to the extent permitted by law.  Type "show
> >>>>> copying"
> >>>>> and "show warranty" for details.
> >>>>> This GDB was configured as "x86_64-linux-gnu".
> >>>>> For bug reporting instructions, please see:
> >>>>> <http://www.gnu.org/software/gdb/bugs/>...
> >>>>> Reading symbols from /usr/local/sbin/chilli...done.
> >>>>> (gdb) run  -c /usr/local/etc/chilli.conf --maxclients=1024
> >>>>> --dhcpopt=0104FFFFFC00 --fg
> >>>>> Starting program: /usr/local/sbin/chilli -c /usr/local/etc/chilli.conf
> >>>>> --maxclients=1024 --dhcpopt=0104FFFFFC00 --fg
> >>>>> [Thread debugging using libthread_db enabled]
> >>>>>
> >>>>> Program received signal SIGSEGV, Segmentation fault.
> >>>>> dhcp_gettag (pack=0x7ffffffedc00, length=18446744073709551608,
> >>>>> tag=0x7ffffffecdc8, tagtype=55 '7') at dhcp.c:2914
> >>>>> 2914        if (t->t == tagtype) {
> >>>>> (gdb)
> >>>>>
> >>>>>
> >>>>> Em 02/03/2012 14:13, Fernando Macedo escreveu:
> >>>>>> Again:
> >>>>>>
> >>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H"...,
> >>>>>>
> >>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> >>>>>> write(4,
> >>>>>> "E\0\5\2146\273@\0\200\6\317J\2176\250\20\270H\377\326\302\354\1\273c\224\3\350~5\365\241"...,
> >>>>>>
> >>>>>> 1420) = 1420
> >>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>>>> (in [5], left {0, 999997})
> >>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 11114377}) = 0
> >>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H"...,
> >>>>>>
> >>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> >>>>>> write(4,
> >>>>>> "E\0\5\2146\274@\0\200\6\317I\2176\250\20\270H\377\326\302\354\1\273c\224\tL~5\365\241"...,
> >>>>>>
> >>>>>> 1420) = 1420
> >>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>>>> (in [5], left {0, 999997})
> >>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 11421407}) = 0
> >>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H"...,
> >>>>>>
> >>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> >>>>>> write(4,
> >>>>>> "E\0\5\2146\275@\0\200\6\317H\2176\250\20\270H\377\326\302\354\1\273c\224\16\260~5\365\241"...,
> >>>>>>
> >>>>>> 1420) = 1420
> >>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>>>> (in [5], left {0, 999997})
> >>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 11759495}) = 0
> >>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\00146\276@\0\200\6\323\237\2176\250\20\270H"...,
> >>>>>>
> >>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 322
> >>>>>> write(4,
> >>>>>> "E\0\00146\276@\0\200\6\323\237\2176\250\20\270H\377\326\302\354\1\273c\224\24\24~5\365\241"...,
> >>>>>>
> >>>>>> 308) = 308
> >>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>>>> (in [5], left {0, 999997})
> >>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 12066338}) = 0
> >>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H"...,
> >>>>>>
> >>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> >>>>>> write(4,
> >>>>>> "E\0\5\2146\277@\0\200\6\317F\2176\250\20\270H\377\326\302\354\1\273c\224\25
> >>>>>>
> >>>>>> ~5\365\241"..., 1420) = 1420
> >>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>>>> (in [5], left {0, 999997})
> >>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 12373554}) = 0
> >>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H"...,
> >>>>>>
> >>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 544
> >>>>>> write(4,
> >>>>>> "E\0\2\0226\300@\0\200\6\322\277\2176\250\20\270H\377\326\302\354\1\273c\224\32\204~5\365\241"...,
> >>>>>>
> >>>>>> 530) = 530
> >>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>>>> (in [5], left {0, 999997})
> >>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 12705270}) = 0
> >>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H"...,
> >>>>>>
> >>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1358
> >>>>>> write(4,
> >>>>>> "E\0\5 at 6\301@\0\200\6\317\220\2176\250\20\270H\377\326\302\354\1\273c\224\34n~5\365\241"...,
> >>>>>>
> >>>>>> 1344) = 1344
> >>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>>>> (in [5], left {0, 999997})
> >>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 13015073}) = 0
> >>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H"...,
> >>>>>>
> >>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> >>>>>> write(4,
> >>>>>> "E\0\5\2146\302@\0\200\6\317C\2176\250\20\270H\377\326\302\354\1\273c\224!\206~5\365\241"...,
> >>>>>>
> >>>>>> 1420) = 1420
> >>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>>>> (in [5], left {0, 999997})
> >>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 13360233}) = 0
> >>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>>> pkttype=PACKET_HOST, addr(6)={1, 0022fbce29a0},
> >>>>>> msg_iov(1)=[{"\232M\"\336X\16\0\"\373\316)\240\10\0E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H"...,
> >>>>>>
> >>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 1434
> >>>>>> write(4,
> >>>>>> "E\0\5\2146\303@\0\200\6\317B\2176\250\20\270H\377\326\302\354\1\273c\224&\352~5\365\241"...,
> >>>>>>
> >>>>>> 1420) = 1420
> >>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) = 1
> >>>>>> (in [5], left {0, 999997})
> >>>>>> clock_gettime(CLOCK_MONOTONIC, {170230, 13667642}) = 0
> >>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>>> pkttype=PACKET_HOST, addr(6)={1, b407f94804a5},
> >>>>>> msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\10\26@\0\377\21\2\325\2176\251C\2176"...,
> >>>>>>
> >>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
> >>>>>> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
> >>>>>> Process 20463 detached
> >>>>>>
> >>>>>> Em 02/03/2012 13:51, Fernando Macedo escreveu:
> >>>>>>> Strace of my last segfault:
> >>>>>>>
> >>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>>>> 1 (in [4], left {0, 999997})
> >>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 941588185}) = 0
> >>>>>>> read(4,
> >>>>>>> "E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176\251\331\0P\300\230jN\25\223:\26a\316"...,
> >>>>>>>
> >>>>>>> 65497) = 1420
> >>>>>>> sendto(5,
> >>>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147y\0\0005\6\361\347\10\376\24\376\2176"...,
> >>>>>>>
> >>>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
> >>>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>>>> 1 (in [4], left {0, 999997})
> >>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 941877024}) = 0
> >>>>>>> read(4,
> >>>>>>> "E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176\251\331\0P\300\230jN\32\367:\26a\316"...,
> >>>>>>>
> >>>>>>> 65497) = 1420
> >>>>>>> sendto(5,
> >>>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147z\0\0005\6\361\346\10\376\24\376\2176"...,
> >>>>>>>
> >>>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
> >>>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>>>> 1 (in [4], left {0, 996370})
> >>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 945791076}) = 0
> >>>>>>> read(4,
> >>>>>>> "E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176\251\331\0P\300\230jN
> >>>>>>> [:\26a\316"..., 65497) = 1420
> >>>>>>> sendto(5,
> >>>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147{\0\0005\6\361\345\10\376\24\376\2176"...,
> >>>>>>>
> >>>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
> >>>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>>>> 1 (in [4], left {0, 999997})
> >>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 946070102}) = 0
> >>>>>>> read(4,
> >>>>>>> "E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176\251\331\0P\300\230jN%\277:\26a\316"...,
> >>>>>>>
> >>>>>>> 65497) = 1420
> >>>>>>> sendto(5,
> >>>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147|\0\0005\6\361\344\10\376\24\376\2176"...,
> >>>>>>>
> >>>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
> >>>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>>>> 2 (in [4 5], left {0, 999997})
> >>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 946381872}) = 0
> >>>>>>> read(4,
> >>>>>>> "E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176\251\331\0P\300\230jN+#:\26a\316"...,
> >>>>>>>
> >>>>>>> 65497) = 1420
> >>>>>>> sendto(5,
> >>>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147}\0\0005\6\361\343\10\376\24\376\2176"...,
> >>>>>>>
> >>>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
> >>>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>>>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0},
> >>>>>>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376"...,
> >>>>>>>
> >>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> >>>>>>> write(4,
> >>>>>>> "E\0\0(\20M@\0\200\6\223w\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\n\313"...,
> >>>>>>>
> >>>>>>> 46) = 46
> >>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>>>> 1 (in [4], left {0, 999997})
> >>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 946868309}) = 0
> >>>>>>> read(4,
> >>>>>>> "E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176\251\331\0P\300\230jN0\207:\26a\316"...,
> >>>>>>>
> >>>>>>> 65497) = 1420
> >>>>>>> sendto(5,
> >>>>>>> "h\243\3041\267\320\232M\"\336X\16\10\0E\0\5\2147~\0\0005\6\361\342\10\376\24\376\2176"...,
> >>>>>>>
> >>>>>>> 1434, 0, {sa_family=AF_PACKET, proto=0x03, if3, pkttype=PACKET_HOST,
> >>>>>>> addr(6)={0, 68a3c431b7d0}, 20) = 1434
> >>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>>>> 1 (in [5], left {0, 997678})
> >>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 949470668}) = 0
> >>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>>>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0},
> >>>>>>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376"...,
> >>>>>>>
> >>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> >>>>>>> write(4,
> >>>>>>> "E\0\0(\20N@\0\200\6\223v\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN\25\223"...,
> >>>>>>>
> >>>>>>> 46) = 46
> >>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>>>> 1 (in [5], left {0, 999332})
> >>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 950476429}) = 0
> >>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>>>> pkttype=PACKET_HOST, addr(6)={1, 74f06d058e5a},
> >>>>>>> msg_iov(1)=[{"\232M\"\336X\16t\360m\5\216Z\10\0E\0\0)e0@\0\200\6~\362\2176\251\22\310["...,
> >>>>>>>
> >>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> >>>>>>> write(4,
> >>>>>>> "E\0\0)e0@\0\200\6~\362\2176\251\22\310[\26\10\312H\0P~\314HR\377\5\r\313"...,
> >>>>>>>
> >>>>>>> 46) = 46
> >>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>>>> 1 (in [5], left {0, 999285})
> >>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 951522574}) = 0
> >>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>>>> pkttype=PACKET_HOST, addr(6)={1, 68a3c431b7d0},
> >>>>>>> msg_iov(1)=[{"\232M\"\336X\16h\243\3041\267\320\10\0E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376"...,
> >>>>>>>
> >>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 60
> >>>>>>> write(4,
> >>>>>>> "E\0\0(\20O@\0\200\6\223u\2176\251\331\10\376\24\376\300\230\0P:\26a\316jN
> >>>>>>>
> >>>>>>> ["..., 46) = 46
> >>>>>>> select(13, [4 5 6 8 9 10 11 12], [], [4 5 6 8 9 10 11 12], {1, 0}) =
> >>>>>>> 1 (in [5], left {0, 998912})
> >>>>>>> clock_gettime(CLOCK_MONOTONIC, {156370, 952930646}) = 0
> >>>>>>> recvmsg(5, {msg_name(18)={sa_family=AF_PACKET, proto=0x800, if3,
> >>>>>>> pkttype=PACKET_HOST, addr(6)={1, b407f94804a5},
> >>>>>>> msg_iov(1)=[{"\232M\"\336X\16\264\7\371H\4\245\10\0E\0\1P\7y@\0\377\21\3\34\2176\251\231\2176"...,
> >>>>>>>
> >>>>>>> 65497}], msg_controllen=40, {cmsg_len=36, cmsg_level=SOL_PACKET,
> >>>>>>> cmsg_type=, ...}, msg_flags=0}, MSG_TRUNC) = 350
> >>>>>>> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
> >>>>>>> Process 25821 detached
> >>>>>>>
> >>>>>>> Em 14/02/2012 11:36, Fernando Macedo escreveu:
> >>>>>>>> Any idea? I'm using chilli_query login toauthenticate the users. It
> >>>>>>>> can be related to this bug: http://www.coova.org/node/2653.
> >>>>>>>>
> >>>>>>>> Em 13/02/2012 17:33, Fernando Macedo escreveu:
> >>>>>>>>> More crashes:
> >>>>>>>>>
> >>>>>>>>> Feb 13 14:16:07 x kernel: [2788498.078399] chilli[893]: segfault at
> >>>>>>>>> 7ffff6a8b058 ip 00007f5621e96d64 sp 00007ffff6a78088 error 4 in
> >>>>>>>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
> >>>>>>>>> Feb 13 16:35:56 x kernel: [2796886.973424] chilli[1317]: segfault
> >>>>>>>>> at 7fffd306d02d ip 00007f5f14cb4d64 sp 00007fffd305acf8 error 4 in
> >>>>>>>>> libchilli.so.0.0.0[7f5f14c8b000+4a000]
> >>>>>>>>> Feb 13 16:36:08 x kernel: [2796899.050379] chilli[31138]: segfault
> >>>>>>>>> at 7fffeb998019 ip 00007ff00cbdbd64 sp 00007fffeb984cd8 error 4 in
> >>>>>>>>> libchilli.so.0.0.0[7ff00cbb2000+4a000]
> >>>>>>>>> Feb 13 16:40:58 x kernel: [2797189.473169] chilli[31371]: segfault
> >>>>>>>>> at 7fff5258202d ip 00007fd99487fd64 sp 00007fff5256f948 error 4 in
> >>>>>>>>> libchilli.so.0.0.0[7fd994856000+4a000]
> >>>>>>>>> Feb 13 16:41:11 x kernel: [2797201.999800] chilli[5316]: segfault
> >>>>>>>>> at 7ffff7f38019 ip 00007f27c4ae2d64 sp 00007ffff7f24c08 error 4 in
> >>>>>>>>> libchilli.so.0.0.0[7f27c4ab9000+4a000]
> >>>>>>>>> Feb 13 16:41:27 x kernel: [2797218.491727] chilli[5601]: segfault
> >>>>>>>>> at 7fff10237009 ip 00007fbc046d2d64 sp 00007fff10223818 error 4 in
> >>>>>>>>> libchilli.so.0.0.0[7fbc046a9000+4a000]
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>> Em 13/02/2012 14:25, Fernando Macedo escreveu:
> >>>>>>>>>> Hi, one month after installing chilli we experienced a segfault in
> >>>>>>>>>> the last version.
> >>>>>>>>>>
> >>>>>>>>>> kernel: [2788498.078399] chilli[893]: segfault at 7ffff6a8b058 ip
> >>>>>>>>>> 00007f5621e96d64 sp 00007ffff6a78088 error 4 in
> >>>>>>>>>> libchilli.so.0.0.0[7f5621e6d000+4a000]
> >>>>>>>>>>
> >>>>>>>>>> Has anyone the same problem?
> >>>>>>>>>>
> >>>>>>>>>> Fernando Macedo
> >>>>>>>>>> _______________________________________________
> >>>>>>>>>> Chilli mailing list
> >>>>>>>>>> Chilli at coova.org
> >>>>>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>>>>>>>> _______________________________________________
> >>>>>>>>> Chilli mailing list
> >>>>>>>>> Chilli at coova.org
> >>>>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>>>>>>> _______________________________________________
> >>>>>>>> Chilli mailing list
> >>>>>>>> Chilli at coova.org
> >>>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>>>>>> _______________________________________________
> >>>>>>> Chilli mailing list
> >>>>>>> Chilli at coova.org
> >>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>>>>> _______________________________________________
> >>>>>> Chilli mailing list
> >>>>>> Chilli at coova.org
> >>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>>>> _______________________________________________
> >>>>> Chilli mailing list
> >>>>> Chilli at coova.org
> >>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>> _______________________________________________
> >>> Chilli mailing list
> >>> Chilli at coova.org
> >>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >> _______________________________________________
> >> Chilli mailing list
> >> Chilli at coova.org
> >> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >
> 



From fmacedo at cpd.ufrgs.br  Wed Mar  7 17:09:28 2012
From: fmacedo at cpd.ufrgs.br (Fernando Macedo)
Date: Wed, 07 Mar 2012 14:09:28 -0300
Subject: [Chilli] Chilli 1.3.0 and chilli_query
Message-ID: <4F579648.3080201@cpd.ufrgs.br>

The NEW default behavior of chilli_query is connect to port 45424 and 
not use the UNIX sock. Don't be surprised if you see a "connect: 
Connection refused" error when running "chilli_query list". If you're 
using sock, use "chilli_query -s /var/run/chilli.sock list".

Fernando Macedo

From david at coova.com  Wed Mar  7 17:13:24 2012
From: david at coova.com (David Bird)
Date: Wed, 07 Mar 2012 18:13:24 +0100
Subject: [Chilli] Chilli 1.3.0 and chilli_query
In-Reply-To: <4F579648.3080201@cpd.ufrgs.br>
References: <4F579648.3080201@cpd.ufrgs.br>
Message-ID: <1331140404.3473.17.camel@david-laptop>

Apologies, that will not be the behavior in 1.3.0 when final. Peter, do
you care to fix? I will try to find the time to fix, or may reverse the
patch. Thanks.


On Wed, 2012-03-07 at 14:09 -0300, Fernando Macedo wrote:
> The NEW default behavior of chilli_query is connect to port 45424 and 
> not use the UNIX sock. Don't be surprised if you see a "connect: 
> Connection refused" error when running "chilli_query list". If you're 
> using sock, use "chilli_query -s /var/run/chilli.sock list".
> 
> Fernando Macedo
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From maxxer at ufficyo.com  Wed Mar  7 17:13:18 2012
From: maxxer at ufficyo.com (Lorenzo Milesi)
Date: Wed, 7 Mar 2012 18:13:18 +0100 (CET)
Subject: [Chilli] Limiting some users at certain hours of the day
In-Reply-To: <1838813394.1118.1331140332728.JavaMail.root@quaglia>
Message-ID: <1947424150.1121.1331140398183.JavaMail.root@quaglia>

Hi.
IS there a radius parameter to limit hours of the day? 
I.e. in a school students shouldn't be allowed to login during class hours, but teachers should be allowed.

thanks
maxxer

From david at coova.com  Wed Mar  7 17:17:30 2012
From: david at coova.com (David Bird)
Date: Wed, 07 Mar 2012 18:17:30 +0100
Subject: [Chilli] Chilli 1.3.0 and chilli_query
In-Reply-To: <1331140404.3473.17.camel@david-laptop>
References: <4F579648.3080201@cpd.ufrgs.br>
	<1331140404.3473.17.camel@david-laptop>
Message-ID: <1331140650.3473.18.camel@david-laptop>

I quickly changed the default behavior for the chilli_query program..
You have to use -P <port> to use that feature, otherwise defaults to
unix socket. 

On Wed, 2012-03-07 at 18:13 +0100, David Bird wrote:
> Apologies, that will not be the behavior in 1.3.0 when final. Peter, do
> you care to fix? I will try to find the time to fix, or may reverse the
> patch. Thanks.
> 
> 
> On Wed, 2012-03-07 at 14:09 -0300, Fernando Macedo wrote:
> > The NEW default behavior of chilli_query is connect to port 45424 and 
> > not use the UNIX sock. Don't be surprised if you see a "connect: 
> > Connection refused" error when running "chilli_query list". If you're 
> > using sock, use "chilli_query -s /var/run/chilli.sock list".
> > 
> > Fernando Macedo
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From david at coova.com  Thu Mar  8 09:05:51 2012
From: david at coova.com (David Bird)
Date: Thu, 08 Mar 2012 10:05:51 +0100
Subject: [Chilli] Limiting some users at certain hours of the day
In-Reply-To: <1947424150.1121.1331140398183.JavaMail.root@quaglia>
References: <1947424150.1121.1331140398183.JavaMail.root@quaglia>
Message-ID: <1331197551.19733.0.camel@david-laptop>

No, but your RADIUS server can implement such logic...


On Wed, 2012-03-07 at 18:13 +0100, Lorenzo Milesi wrote:
> Hi.
> IS there a radius parameter to limit hours of the day? 
> I.e. in a school students shouldn't be allowed to login during class hours, but teachers should be allowed.
> 
> thanks
> maxxer
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From maxxer at ufficyo.com  Thu Mar  8 09:10:21 2012
From: maxxer at ufficyo.com (Lorenzo Milesi)
Date: Thu, 8 Mar 2012 10:10:21 +0100 (CET)
Subject: [Chilli] Limiting some users at certain hours of the day
In-Reply-To: <1331197551.19733.0.camel@david-laptop>
Message-ID: <191104011.2953.1331197821337.JavaMail.root@quaglia>

> No, but your RADIUS server can implement such logic...

isn't login-time usable?
http://www.gnu.org/software/radius/manual/html_node/radius_236.html

From david at coova.com  Thu Mar  8 09:14:46 2012
From: david at coova.com (David Bird)
Date: Thu, 08 Mar 2012 10:14:46 +0100
Subject: [Chilli] New Forum topic: Strange behaviour with
 WISPr-Redirection-URL in 1.2.9
In-Reply-To: <4F538793.3080400@cirrusworks.net>
References: <20120224112003.7B0A64E8AC@ip-10-117-78-50.ec2.internal>
	<1330872949.3210.17.camel@david-laptop>
	<4F538793.3080400@cirrusworks.net>
Message-ID: <1331198086.19733.3.camel@david-laptop>

The issue should be fixed in:
http://coova-chilli.s3.amazonaws.com/coova-chilli-1.3.0-svn.tar.gz

.. if you can verify. There is also a new run-time option --redirurl
which will have the WISPr-Redirection-URL put into the UAM success query
string parameter &redirurl=... When the option is not used, chilli will
do a HTTP redirect. 


On Sun, 2012-03-04 at 10:17 -0500, Ryan Day wrote:
> I'm sure this is related to the problem I've described here
> 
>  http://lists.coova.org/pipermail/chilli/2011-November/001775.html
> 
> 
> The patch was implemented in 1.2.9 and may be breaking functionality in
> some situations.
> 
> What I find amazing is that the problem described in
> http://www.coova.org/node/5115 is exactly what I was experiencing with
> previous versions of chilli(<1.2.9). My uamserver was being replaced by
> my WISPr redirect and I could no longer authenticate. This patch seems
> to work for me (me being 3 dev servers and 2 production servers).
> 
> Any thoughts?
> 
> 
> 
> Ryan
> 
> On 03/04/2012 09:55 AM, David Bird wrote:
> > Hello,
> >
> > The following was reported in the forum, but I will discuss it here. The
> > issue is that chilli supports WISPr-Redirection-URL in several ways; it
> > can be used, for example, to send users on a per session basis to
> > alternate URLs based on the attribute not only in an Access-Accept, but
> > also an Access-Reject. In both cases, it is sometimes desired to have
> > the user keep going to that URL, even after their session had ended.
> > However, obviously, that is not always the case. Possible remedies
> > include: having an option that controls whether or not the URL value
> > should "survive" after the session ends, making that behavior a compile
> > time option, using a ChilliSpot-Redirect-URL VSA that can be used
> > instead of WISPr-Redirection-URL (where the WISPr is only used in
> > Access-Accept and only used once and the ChilliSpot-Redirect-URL VSA is
> > the more persistent option). Any preferences or other suggestions?
> >
> > David
> >
> >
> > On Fri, 2012-02-24 at 11:20 +0000, support at coova.com wrote:
> >> Greetings david,
> >>
> >> Hello,
> >> With the last version of coova this strange behaviour occurs when the  
> >> WISPr-Redirection-URL is used :
> >> - When a user is intercepted for the first time : all is ok (he performs the  
> >> login procedure and he is redirect to the URL defined in the radius attribute  
> >> "WISPr-Redirection-URL").
> >> - When he comes back after logs out, coova can't intercept him (the "Move  
> >> Temporarily" packet is wrong).
> >> Look at the two "Move Temporarily" packet send by coova :
> >> - First one - ok (redirect to the uamserver) :
> >>
> >> Read more http://www.coova.org/node/5115 -- This is an automatic message from  
> >> Coova :: Open Source Captive Portal Access Controller and RADIUS Software To  
> >> manage your subscriptions, browse to  
> >> http://www.coova.org/user/1/notifications You can unsubscribe at  
> >> http://www.coova.org/notifications/unsubscribe/sid/1?signature=7dea0a65b50949c91873109c35fa01b2
> >>
> >
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 
> 



From ryan.day at cirrusworks.net  Thu Mar  8 12:24:50 2012
From: ryan.day at cirrusworks.net (Ryan Day)
Date: Thu, 08 Mar 2012 07:24:50 -0500
Subject: [Chilli] New Forum topic: Strange behaviour with
 WISPr-Redirection-URL in 1.2.9
In-Reply-To: <1331198086.19733.3.camel@david-laptop>
References: <20120224112003.7B0A64E8AC@ip-10-117-78-50.ec2.internal>	
	<1330872949.3210.17.camel@david-laptop>
	<4F538793.3080400@cirrusworks.net>
	<1331198086.19733.3.camel@david-laptop>
Message-ID: <4F58A512.1010504@cirrusworks.net>

We'll take a look at this, thanks!

We've been testing the SVN, 1.2.9, and 1.2.8 releases over the past
couple days to try to get a comprehensive picture of the issue, I'll let
you know how 1.3 works.


Ryan

On 03/08/2012 04:14 AM, David Bird wrote:
> The issue should be fixed in:
> http://coova-chilli.s3.amazonaws.com/coova-chilli-1.3.0-svn.tar.gz
>
> .. if you can verify. There is also a new run-time option --redirurl
> which will have the WISPr-Redirection-URL put into the UAM success query
> string parameter &redirurl=... When the option is not used, chilli will
> do a HTTP redirect. 
>
>
> On Sun, 2012-03-04 at 10:17 -0500, Ryan Day wrote:
>> I'm sure this is related to the problem I've described here
>>
>>  http://lists.coova.org/pipermail/chilli/2011-November/001775.html
>>
>>
>> The patch was implemented in 1.2.9 and may be breaking functionality in
>> some situations.
>>
>> What I find amazing is that the problem described in
>> http://www.coova.org/node/5115 is exactly what I was experiencing with
>> previous versions of chilli(<1.2.9). My uamserver was being replaced by
>> my WISPr redirect and I could no longer authenticate. This patch seems
>> to work for me (me being 3 dev servers and 2 production servers).
>>
>> Any thoughts?
>>
>>
>>
>> Ryan
>>
>> On 03/04/2012 09:55 AM, David Bird wrote:
>>> Hello,
>>>
>>> The following was reported in the forum, but I will discuss it here. The
>>> issue is that chilli supports WISPr-Redirection-URL in several ways; it
>>> can be used, for example, to send users on a per session basis to
>>> alternate URLs based on the attribute not only in an Access-Accept, but
>>> also an Access-Reject. In both cases, it is sometimes desired to have
>>> the user keep going to that URL, even after their session had ended.
>>> However, obviously, that is not always the case. Possible remedies
>>> include: having an option that controls whether or not the URL value
>>> should "survive" after the session ends, making that behavior a compile
>>> time option, using a ChilliSpot-Redirect-URL VSA that can be used
>>> instead of WISPr-Redirection-URL (where the WISPr is only used in
>>> Access-Accept and only used once and the ChilliSpot-Redirect-URL VSA is
>>> the more persistent option). Any preferences or other suggestions?
>>>
>>> David
>>>
>>>
>>> On Fri, 2012-02-24 at 11:20 +0000, support at coova.com wrote:
>>>> Greetings david,
>>>>
>>>> Hello,
>>>> With the last version of coova this strange behaviour occurs when the  
>>>> WISPr-Redirection-URL is used :
>>>> - When a user is intercepted for the first time : all is ok (he performs the  
>>>> login procedure and he is redirect to the URL defined in the radius attribute  
>>>> "WISPr-Redirection-URL").
>>>> - When he comes back after logs out, coova can't intercept him (the "Move  
>>>> Temporarily" packet is wrong).
>>>> Look at the two "Move Temporarily" packet send by coova :
>>>> - First one - ok (redirect to the uamserver) :
>>>>
>>>> Read more http://www.coova.org/node/5115 -- This is an automatic message from  
>>>> Coova :: Open Source Captive Portal Access Controller and RADIUS Software To  
>>>> manage your subscriptions, browse to  
>>>> http://www.coova.org/user/1/notifications You can unsubscribe at  
>>>> http://www.coova.org/notifications/unsubscribe/sid/1?signature=7dea0a65b50949c91873109c35fa01b2
>>>>
>>> _______________________________________________
>>> Chilli mailing list
>>> Chilli at coova.org
>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>
>


-- 
Ryan Day

CirrusWorks
Beyond Convergence

750 17th Street NW, Suite 1100
Washington, DC 20006


From miguel.lopes at cabocom.cv  Fri Mar  9 12:21:22 2012
From: miguel.lopes at cabocom.cv (Miguel Lopes - Cabocom)
Date: Fri, 9 Mar 2012 11:21:22 -0100
Subject: [Chilli] UAMDOMAIN not working
Message-ID: <003001ccfdef$248c0930$6da41b90$@lopes@cabocom.cv>

Hi,

 

We want to use UAMDOMAIN because of the Paypal website. In chilli 1.2.6 we
never had trouble with this option. But now with 1.2.9 it isn't working, we
use multiple instances of chilli in separate VLAN's, we have like this in
Chilli/config:

 

HS_UAMDOMAINS=".paypal.com,.paypalobjects.com,.mediaplex.com,.112.2o7.net"

 

Since it is the same for all instances we didn't add it to each individual
config file, but all of them get the option because in the
Chilli/VLANXX/main.conf it shows:

 

uamdomain .paypal.com

uamdomain .paypalobjects.com

uamdomain .mediaplex.com

uamdomain .112.2o7.net

 

As soon as I type any of those addresses above it redirects me to the login
page. The only way that we used around this was to add them to the
HS_UAMALLOWED, but I know this is not the best solution since I wanted this
to be done based on domain name.

 

We use our choovachilli in layer 3 mode and it was compiled with the
following options:

 

Compiled with ENABLE_CHILLIQUERY ENABLE_COA ENABLE_RADPROXY
ENABLE_DHCPRADIUS ENABLE_IEEE8021Q ENABLE_JSON ENABLE_LARGELIMITS
ENABLE_LAYER3 ENABLE_LEAKYBUCKET ENABLE_UAMANYIP ENABLE_UAMUIPORT

 

We tried it once cmpliling with -enable-uamdomainfile and tried the option
but it didn't work either.

 

Any ideas on this?

 

Kind Regards / Atentamente,

 

Miguel Lopes

 

marca_teste

 

Tel - +2382428087

Fax - +2382428088

Email -  <mailto:miguel.lopes at cabocom.cv> miguel.lopes at cabocom.cv

Web -  <http://www.cabocom.cv/> www.cabocom.cv

Facebook -  <http://facebook.cabocom.cv/> facebook.cabocom.cv

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120309/fbecae5f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 9197 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120309/fbecae5f/attachment.jpg>

From david at coova.com  Fri Mar  9 14:08:51 2012
From: david at coova.com (David Bird)
Date: Fri, 09 Mar 2012 15:08:51 +0100
Subject: [Chilli] UAMDOMAIN not working
In-Reply-To: <003001ccfdef$248c0930$6da41b90$@lopes@cabocom.cv>
References: <003001ccfdef$248c0930$6da41b90$@lopes@cabocom.cv>
Message-ID: <1331302131.3267.11.camel@david-laptop>

Please be sure you are testing correctly.. The uamdomain option requires
for clients to first resolve the hostname under the domain so that
chilli learns the IP. If the client has the IP cached (because it
resolved it, then you restarted chilli), it may seem it does not work.
You can review the current garden with 'chilli_query listgarden'

On Fri, 2012-03-09 at 11:21 -0100, Miguel Lopes - Cabocom wrote:
> Hi,
> 
>  
> 
> We want to use UAMDOMAIN because of the Paypal website. In chilli
> 1.2.6 we never had trouble with this option. But now with 1.2.9 it
> isn?t working, we use multiple instances of chilli in separate VLAN?s,
> we have like this in Chilli/config:
> 
>  
> 
> HS_UAMDOMAINS=?.paypal.com,.paypalobjects.com,.mediaplex.com,.112.2o7.net?
> 
>  
> 
> Since it is the same for all instances we didn?t add it to each
> individual config file, but all of them get the option because in the
> Chilli/VLANXX/main.conf it shows:
> 
>  
> 
> uamdomain .paypal.com
> 
> uamdomain .paypalobjects.com
> 
> uamdomain .mediaplex.com
> 
> uamdomain .112.2o7.net
> 
>  
> 
> As soon as I type any of those addresses above it redirects me to the
> login page. The only way that we used around this was to add them to
> the HS_UAMALLOWED, but I know this is not the best solution since I
> wanted this to be done based on domain name.
> 
>  
> 
> We use our choovachilli in layer 3 mode and it was compiled with the
> following options:
> 
>  
> 
> Compiled with ENABLE_CHILLIQUERY ENABLE_COA ENABLE_RADPROXY
> ENABLE_DHCPRADIUS ENABLE_IEEE8021Q ENABLE_JSON ENABLE_LARGELIMITS
> ENABLE_LAYER3 ENABLE_LEAKYBUCKET ENABLE_UAMANYIP ENABLE_UAMUIPORT
> 
>  
> 
> We tried it once cmpliling with ?enable-uamdomainfile and tried the
> option but it didn?t work either.
> 
>  
> 
> Any ideas on this?
> 
>  
> 
> Kind Regards / Atentamente,
> 
>  
> 
> Miguel Lopes
> 
>  
> 
> marca_teste
> 
>  
> 
> Tel - +2382428087
> 
> Fax - +2382428088
> 
> Email - miguel.lopes at cabocom.cv
> 
> Web - www.cabocom.cv
> 
> Facebook - facebook.cabocom.cv
> 
>  
> 
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From miguel.lopes at cabocom.cv  Fri Mar  9 15:20:57 2012
From: miguel.lopes at cabocom.cv (Miguel Lopes - Cabocom)
Date: Fri, 9 Mar 2012 14:20:57 -0100
Subject: [Chilli] UAMDOMAIN not working
In-Reply-To: <1331302131.3267.11.camel@david-laptop>
References: <003001ccfdef$248c0930$6da41b90$@lopes@cabocom.cv>
	<1331302131.3267.11.camel@david-laptop>
Message-ID: <004801ccfe08$3b7ec920$b27c5b60$@lopes@cabocom.cv>

Thanks for the tip David, later today I will try again, I will restart chilli and flush my pc dns cache to give it a proper test. I will show you the results as soon as I get them.

Kind Regards / Atentamente,

Miguel Lopes


Tel - +2382428087
Fax - +2382428088
Email - miguel.lopes at cabocom.cv
Web - www.cabocom.cv
Facebook - facebook.cabocom.cv

-----Mensagem original-----
De: David Bird [mailto:david at coova.com] 
Enviada: sexta-feira, 9 de Mar?o de 2012 13:09
Para: Miguel Lopes - Cabocom
Cc: chilli at coova.org
Assunto: Re: [Chilli] UAMDOMAIN not working

Please be sure you are testing correctly.. The uamdomain option requires
for clients to first resolve the hostname under the domain so that
chilli learns the IP. If the client has the IP cached (because it
resolved it, then you restarted chilli), it may seem it does not work.
You can review the current garden with 'chilli_query listgarden'

On Fri, 2012-03-09 at 11:21 -0100, Miguel Lopes - Cabocom wrote:
> Hi,
> 
>  
> 
> We want to use UAMDOMAIN because of the Paypal website. In chilli
> 1.2.6 we never had trouble with this option. But now with 1.2.9 it
> isn?t working, we use multiple instances of chilli in separate VLAN?s,
> we have like this in Chilli/config:
> 
>  
> 
> HS_UAMDOMAINS=?.paypal.com,.paypalobjects.com,.mediaplex.com,.112.2o7.net?
> 
>  
> 
> Since it is the same for all instances we didn?t add it to each
> individual config file, but all of them get the option because in the
> Chilli/VLANXX/main.conf it shows:
> 
>  
> 
> uamdomain .paypal.com
> 
> uamdomain .paypalobjects.com
> 
> uamdomain .mediaplex.com
> 
> uamdomain .112.2o7.net
> 
>  
> 
> As soon as I type any of those addresses above it redirects me to the
> login page. The only way that we used around this was to add them to
> the HS_UAMALLOWED, but I know this is not the best solution since I
> wanted this to be done based on domain name.
> 
>  
> 
> We use our choovachilli in layer 3 mode and it was compiled with the
> following options:
> 
>  
> 
> Compiled with ENABLE_CHILLIQUERY ENABLE_COA ENABLE_RADPROXY
> ENABLE_DHCPRADIUS ENABLE_IEEE8021Q ENABLE_JSON ENABLE_LARGELIMITS
> ENABLE_LAYER3 ENABLE_LEAKYBUCKET ENABLE_UAMANYIP ENABLE_UAMUIPORT
> 
>  
> 
> We tried it once cmpliling with ?enable-uamdomainfile and tried the
> option but it didn?t work either.
> 
>  
> 
> Any ideas on this?
> 
>  
> 
> Kind Regards / Atentamente,
> 
>  
> 
> Miguel Lopes
> 
>  
> 
> marca_teste
> 
>  
> 
> Tel - +2382428087
> 
> Fax - +2382428088
> 
> Email - miguel.lopes at cabocom.cv
> 
> Web - www.cabocom.cv
> 
> Facebook - facebook.cabocom.cv
> 
>  
> 
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From timwhite88 at gmail.com  Sat Mar 10 07:21:41 2012
From: timwhite88 at gmail.com (Tim White)
Date: Sat, 10 Mar 2012 17:21:41 +1000
Subject: [Chilli] Limiting some users at certain hours of the day
In-Reply-To: <191104011.2953.1331197821337.JavaMail.root@quaglia>
References: <191104011.2953.1331197821337.JavaMail.root@quaglia>
Message-ID: <4F5B0105.2060402@gmail.com>

On 08/03/12 19:10, Lorenzo Milesi wrote:
>> No, but your RADIUS server can implement such logic...
> isn't login-time usable?
> http://www.gnu.org/software/radius/manual/html_node/radius_236.html
That is your RADIUS server doing the work. And yes, it does work. It'll 
just return a Session-Timeout that will ensure the user is "kicked off" 
at the end of the valid login period. It needs to be a radcheck not a 
radreply (as it "checks" if we are allowed to login at that time).

Tim

From richard at rexy.fr  Sat Mar 10 16:51:39 2012
From: richard at rexy.fr (Richard REY)
Date: Sat, 10 Mar 2012 17:51:39 +0100
Subject: [Chilli] New Forum topic: Strange behaviour with
 WISPr-Redirection-URL in 1.2.9
In-Reply-To: <4F58A512.1010504@cirrusworks.net>
References: <20120224112003.7B0A64E8AC@ip-10-117-78-50.ec2.internal>	
	<1330872949.3210.17.camel@david-laptop>
	<4F538793.3080400@cirrusworks.net>
	<1331198086.19733.3.camel@david-laptop>
	<4F58A512.1010504@cirrusworks.net>
Message-ID: <4F5B869B.7090103@rexy.fr>

As i've written in the Forum, the loop in the "http-redirect" has 
disappeared. I see an other "very" little problem with that parameter 
due to cache memory in coova (i think). For each equipment, Coova keeps 
in mind the redirect-url even if the "WISPr-Redirection-URL" parameter 
has disappeared (ok when it changes).

I've an other question : the 1.3 archive compiles fine, but not the svn 
archive. Here are the errors when i run "make" :

main-opt.c: In function ?options_print_version?:
main-opt.c:217:22: erreur: ?CMDLINE_PARSER_PACKAGE? undeclared (first 
use in this function)
main-opt.c:217:22: note: each undeclared identifier is reported only 
once for each function it appears in
main-opt.c:217:46: erreur: ?CMDLINE_PARSER_VERSION? undeclared (first 
use in this function)
main-opt.c: In function ?main?:
main-opt.c:240:30: erreur: storage size of ?args_info? isn?t known

Have i forgotten something?

           _._
          /_ _`.
          (.X.)|
          |\_/'|
          )____`\
         //_V _\ \
        ((  |  `(_)
       / \> '   / \
       \  \.__./  /
        `-'    `-'
      Mandriva Linux :
l'ind?pendance informatique
  fran?aise et europ?enne
     richard at rexy.fr


Le 08/03/2012 13:24, Ryan Day a ?crit :
> We'll take a look at this, thanks!
>
> We've been testing the SVN, 1.2.9, and 1.2.8 releases over the past
> couple days to try to get a comprehensive picture of the issue, I'll let
> you know how 1.3 works.
>
>
> Ryan
>
> On 03/08/2012 04:14 AM, David Bird wrote:
>> The issue should be fixed in:
>> http://coova-chilli.s3.amazonaws.com/coova-chilli-1.3.0-svn.tar.gz
>>
>> .. if you can verify. There is also a new run-time option --redirurl
>> which will have the WISPr-Redirection-URL put into the UAM success query
>> string parameter&redirurl=... When the option is not used, chilli will
>> do a HTTP redirect.
>>
>>
>> On Sun, 2012-03-04 at 10:17 -0500, Ryan Day wrote:
>>> I'm sure this is related to the problem I've described here
>>>
>>>   http://lists.coova.org/pipermail/chilli/2011-November/001775.html
>>>
>>>
>>> The patch was implemented in 1.2.9 and may be breaking functionality in
>>> some situations.
>>>
>>> What I find amazing is that the problem described in
>>> http://www.coova.org/node/5115 is exactly what I was experiencing with
>>> previous versions of chilli(<1.2.9). My uamserver was being replaced by
>>> my WISPr redirect and I could no longer authenticate. This patch seems
>>> to work for me (me being 3 dev servers and 2 production servers).
>>>
>>> Any thoughts?
>>>
>>>
>>>
>>> Ryan
>>>
>>> On 03/04/2012 09:55 AM, David Bird wrote:
>>>> Hello,
>>>>
>>>> The following was reported in the forum, but I will discuss it here. The
>>>> issue is that chilli supports WISPr-Redirection-URL in several ways; it
>>>> can be used, for example, to send users on a per session basis to
>>>> alternate URLs based on the attribute not only in an Access-Accept, but
>>>> also an Access-Reject. In both cases, it is sometimes desired to have
>>>> the user keep going to that URL, even after their session had ended.
>>>> However, obviously, that is not always the case. Possible remedies
>>>> include: having an option that controls whether or not the URL value
>>>> should "survive" after the session ends, making that behavior a compile
>>>> time option, using a ChilliSpot-Redirect-URL VSA that can be used
>>>> instead of WISPr-Redirection-URL (where the WISPr is only used in
>>>> Access-Accept and only used once and the ChilliSpot-Redirect-URL VSA is
>>>> the more persistent option). Any preferences or other suggestions?
>>>>
>>>> David
>>>>
>>>>
>>>> On Fri, 2012-02-24 at 11:20 +0000, support at coova.com wrote:
>>>>> Greetings david,
>>>>>
>>>>> Hello,
>>>>> With the last version of coova this strange behaviour occurs when the
>>>>> WISPr-Redirection-URL is used :
>>>>> - When a user is intercepted for the first time : all is ok (he performs the
>>>>> login procedure and he is redirect to the URL defined in the radius attribute
>>>>> "WISPr-Redirection-URL").
>>>>> - When he comes back after logs out, coova can't intercept him (the "Move
>>>>> Temporarily" packet is wrong).
>>>>> Look at the two "Move Temporarily" packet send by coova :
>>>>> - First one - ok (redirect to the uamserver) :
>>>>>
>>>>> Read more http://www.coova.org/node/5115 -- This is an automatic message from
>>>>> Coova :: Open Source Captive Portal Access Controller and RADIUS Software To
>>>>> manage your subscriptions, browse to
>>>>> http://www.coova.org/user/1/notifications You can unsubscribe at
>>>>> http://www.coova.org/notifications/unsubscribe/sid/1?signature=7dea0a65b50949c91873109c35fa01b2
>>>>>
>>>> _______________________________________________
>>>> Chilli mailing list
>>>> Chilli at coova.org
>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>
>>
>
>

From richard at rexy.fr  Sat Mar 10 17:12:06 2012
From: richard at rexy.fr (Richard REY)
Date: Sat, 10 Mar 2012 18:12:06 +0100
Subject: [Chilli]  'UAMallowed' and 'Ether file' together
Message-ID: <4F5B8B66.2040602@rexy.fr>

Hello,
About one year ago, David said : in subversion trunk "Addresses in the 
ethers file will be MAC-auth'ed during start-up now.". This feature 
doesn't work in coova V1.2.9. Have i forgotten something?

Rexy

From ryan.day at cirrusworks.net  Sat Mar 10 20:33:26 2012
From: ryan.day at cirrusworks.net (Ryan Day)
Date: Sat, 10 Mar 2012 15:33:26 -0500
Subject: [Chilli] New Forum topic: Strange behaviour with
 WISPr-Redirection-URL in 1.2.9
In-Reply-To: <4F5B869B.7090103@rexy.fr>
References: <20120224112003.7B0A64E8AC@ip-10-117-78-50.ec2.internal>		<1330872949.3210.17.camel@david-laptop>	<4F538793.3080400@cirrusworks.net>	<1331198086.19733.3.camel@david-laptop>	<4F58A512.1010504@cirrusworks.net>
	<4F5B869B.7090103@rexy.fr>
Message-ID: <4F5BBA96.7090903@cirrusworks.net>

Sorry I missed the forum post, I'll have to look there. Are we able to
merge the forum and mailing lists?

I also received the CMDLINE_PARSER_PACKAGE compile err from the SVN
build. I was able to substitute the cmdline.ggo (I think it was) from
1.2.9, but I don't think thats a very good test. I've gone with the 1.3
archive.

On 03/10/2012 11:51 AM, Richard REY wrote:
> As i've written in the Forum, the loop in the "http-redirect" has
> disappeared. I see an other "very" little problem with that parameter
> due to cache memory in coova (i think). For each equipment, Coova
> keeps in mind the redirect-url even if the "WISPr-Redirection-URL"
> parameter has disappeared (ok when it changes).
>
> I've an other question : the 1.3 archive compiles fine, but not the
> svn archive. Here are the errors when i run "make" :
>
> main-opt.c: In function ?options_print_version?:
> main-opt.c:217:22: erreur: ?CMDLINE_PARSER_PACKAGE? undeclared (first
> use in this function)
> main-opt.c:217:22: note: each undeclared identifier is reported only
> once for each function it appears in
> main-opt.c:217:46: erreur: ?CMDLINE_PARSER_VERSION? undeclared (first
> use in this function)
> main-opt.c: In function ?main?:
> main-opt.c:240:30: erreur: storage size of ?args_info? isn?t known
>
> Have i forgotten something?
>
>           _._
>          /_ _`.
>          (.X.)|
>          |\_/'|
>          )____`\
>         //_V _\ \
>        ((  |  `(_)
>       / \> '   / \
>       \  \.__./  /
>        `-'    `-'
>      Mandriva Linux :
> l'ind?pendance informatique
>  fran?aise et europ?enne
>     richard at rexy.fr
>
>
> Le 08/03/2012 13:24, Ryan Day a ?crit :
>> We'll take a look at this, thanks!
>>
>> We've been testing the SVN, 1.2.9, and 1.2.8 releases over the past
>> couple days to try to get a comprehensive picture of the issue, I'll let
>> you know how 1.3 works.
>>
>>
>> Ryan
>>
>> On 03/08/2012 04:14 AM, David Bird wrote:
>>> The issue should be fixed in:
>>> http://coova-chilli.s3.amazonaws.com/coova-chilli-1.3.0-svn.tar.gz
>>>
>>> .. if you can verify. There is also a new run-time option --redirurl
>>> which will have the WISPr-Redirection-URL put into the UAM success
>>> query
>>> string parameter&redirurl=... When the option is not used, chilli will
>>> do a HTTP redirect.
>>>
>>>
>>> On Sun, 2012-03-04 at 10:17 -0500, Ryan Day wrote:
>>>> I'm sure this is related to the problem I've described here
>>>>
>>>>   http://lists.coova.org/pipermail/chilli/2011-November/001775.html
>>>>
>>>>
>>>> The patch was implemented in 1.2.9 and may be breaking
>>>> functionality in
>>>> some situations.
>>>>
>>>> What I find amazing is that the problem described in
>>>> http://www.coova.org/node/5115 is exactly what I was experiencing with
>>>> previous versions of chilli(<1.2.9). My uamserver was being
>>>> replaced by
>>>> my WISPr redirect and I could no longer authenticate. This patch seems
>>>> to work for me (me being 3 dev servers and 2 production servers).
>>>>
>>>> Any thoughts?
>>>>
>>>>
>>>>
>>>> Ryan
>>>>
>>>> On 03/04/2012 09:55 AM, David Bird wrote:
>>>>> Hello,
>>>>>
>>>>> The following was reported in the forum, but I will discuss it
>>>>> here. The
>>>>> issue is that chilli supports WISPr-Redirection-URL in several
>>>>> ways; it
>>>>> can be used, for example, to send users on a per session basis to
>>>>> alternate URLs based on the attribute not only in an
>>>>> Access-Accept, but
>>>>> also an Access-Reject. In both cases, it is sometimes desired to have
>>>>> the user keep going to that URL, even after their session had ended.
>>>>> However, obviously, that is not always the case. Possible remedies
>>>>> include: having an option that controls whether or not the URL value
>>>>> should "survive" after the session ends, making that behavior a
>>>>> compile
>>>>> time option, using a ChilliSpot-Redirect-URL VSA that can be used
>>>>> instead of WISPr-Redirection-URL (where the WISPr is only used in
>>>>> Access-Accept and only used once and the ChilliSpot-Redirect-URL
>>>>> VSA is
>>>>> the more persistent option). Any preferences or other suggestions?
>>>>>
>>>>> David
>>>>>
>>>>>
>>>>> On Fri, 2012-02-24 at 11:20 +0000, support at coova.com wrote:
>>>>>> Greetings david,
>>>>>>
>>>>>> Hello,
>>>>>> With the last version of coova this strange behaviour occurs when
>>>>>> the
>>>>>> WISPr-Redirection-URL is used :
>>>>>> - When a user is intercepted for the first time : all is ok (he
>>>>>> performs the
>>>>>> login procedure and he is redirect to the URL defined in the
>>>>>> radius attribute
>>>>>> "WISPr-Redirection-URL").
>>>>>> - When he comes back after logs out, coova can't intercept him
>>>>>> (the "Move
>>>>>> Temporarily" packet is wrong).
>>>>>> Look at the two "Move Temporarily" packet send by coova :
>>>>>> - First one - ok (redirect to the uamserver) :
>>>>>>
>>>>>> Read more http://www.coova.org/node/5115 -- This is an automatic
>>>>>> message from
>>>>>> Coova :: Open Source Captive Portal Access Controller and RADIUS
>>>>>> Software To
>>>>>> manage your subscriptions, browse to
>>>>>> http://www.coova.org/user/1/notifications You can unsubscribe at
>>>>>> http://www.coova.org/notifications/unsubscribe/sid/1?signature=7dea0a65b50949c91873109c35fa01b2
>>>>>>
>>>>>>
>>>>> _______________________________________________
>>>>> Chilli mailing list
>>>>> Chilli at coova.org
>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>
>>>
>>
>>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


-- 
Ryan Day

CirrusWorks
Beyond Convergence

750 17th Street NW, Suite 1100
Washington, DC 20006


From david at coova.com  Sat Mar 10 21:15:03 2012
From: david at coova.com (David Bird)
Date: Sat, 10 Mar 2012 22:15:03 +0100
Subject: [Chilli] New Forum topic: Strange behaviour with
 WISPr-Redirection-URL in 1.2.9
Message-ID: <21any7vsfy8df2vy5smxm8v1.1331414103119@email.android.com>

You need gengetopt package installed and be sure to run bootstrap script to setup automake. 

Ryan Day <ryan.day at cirrusworks.net> wrote:

>Sorry I missed the forum post, I'll have to look there. Are we able to
>merge the forum and mailing lists?
>
>I also received the CMDLINE_PARSER_PACKAGE compile err from the SVN
>build. I was able to substitute the cmdline.ggo (I think it was) from
>1.2.9, but I don't think thats a very good test. I've gone with the 1.3
>archive.
>
>On 03/10/2012 11:51 AM, Richard REY wrote:
>> As i've written in the Forum, the loop in the "http-redirect" has
>> disappeared. I see an other "very" little problem with that parameter
>> due to cache memory in coova (i think). For each equipment, Coova
>> keeps in mind the redirect-url even if the "WISPr-Redirection-URL"
>> parameter has disappeared (ok when it changes).
>>
>> I've an other question : the 1.3 archive compiles fine, but not the
>> svn archive. Here are the errors when i run "make" :
>>
>> main-opt.c: In function ?options_print_version?:
>> main-opt.c:217:22: erreur: ?CMDLINE_PARSER_PACKAGE? undeclared (first
>> use in this function)
>> main-opt.c:217:22: note: each undeclared identifier is reported only
>> once for each function it appears in
>> main-opt.c:217:46: erreur: ?CMDLINE_PARSER_VERSION? undeclared (first
>> use in this function)
>> main-opt.c: In function ?main?:
>> main-opt.c:240:30: erreur: storage size of ?args_info? isn?t known
>>
>> Have i forgotten something?
>>
>>           _._
>>          /_ _`.
>>          (.X.)|
>>          |\_/'|
>>          )____`\
>>         //_V _\ \
>>        ((  |  `(_)
>>       / \> '   / \
>>       \  \.__./  /
>>        `-'    `-'
>>      Mandriva Linux :
>> l'ind?pendance informatique
>>  fran?aise et europ?enne
>>     richard at rexy.fr
>>
>>
>> Le 08/03/2012 13:24, Ryan Day a ?crit :
>>> We'll take a look at this, thanks!
>>>
>>> We've been testing the SVN, 1.2.9, and 1.2.8 releases over the past
>>> couple days to try to get a comprehensive picture of the issue, I'll let
>>> you know how 1.3 works.
>>>
>>>
>>> Ryan
>>>
>>> On 03/08/2012 04:14 AM, David Bird wrote:
>>>> The issue should be fixed in:
>>>> http://coova-chilli.s3.amazonaws.com/coova-chilli-1.3.0-svn.tar.gz
>>>>
>>>> .. if you can verify. There is also a new run-time option --redirurl
>>>> which will have the WISPr-Redirection-URL put into the UAM success
>>>> query
>>>> string parameter&redirurl=... When the option is not used, chilli will
>>>> do a HTTP redirect.
>>>>
>>>>
>>>> On Sun, 2012-03-04 at 10:17 -0500, Ryan Day wrote:
>>>>> I'm sure this is related to the problem I've described here
>>>>>
>>>>>   http://lists.coova.org/pipermail/chilli/2011-November/001775.html
>>>>>
>>>>>
>>>>> The patch was implemented in 1.2.9 and may be breaking
>>>>> functionality in
>>>>> some situations.
>>>>>
>>>>> What I find amazing is that the problem described in
>>>>> http://www.coova.org/node/5115 is exactly what I was experiencing with
>>>>> previous versions of chilli(<1.2.9). My uamserver was being
>>>>> replaced by
>>>>> my WISPr redirect and I could no longer authenticate. This patch seems
>>>>> to work for me (me being 3 dev servers and 2 production servers).
>>>>>
>>>>> Any thoughts?
>>>>>
>>>>>
>>>>>
>>>>> Ryan
>>>>>
>>>>> On 03/04/2012 09:55 AM, David Bird wrote:
>>>>>> Hello,
>>>>>>
>>>>>> The following was reported in the forum, but I will discuss it
>>>>>> here. The
>>>>>> issue is that chilli supports WISPr-Redirection-URL in several
>>>>>> ways; it
>>>>>> can be used, for example, to send users on a per session basis to
>>>>>> alternate URLs based on the attribute not only in an
>>>>>> Access-Accept, but
>>>>>> also an Access-Reject. In both cases, it is sometimes desired to have
>>>>>> the user keep going to that URL, even after their session had ended.
>>>>>> However, obviously, that is not always the case. Possible remedies
>>>>>> include: having an option that controls whether or not the URL value
>>>>>> should "survive" after the session ends, making that behavior a
>>>>>> compile
>>>>>> time option, using a ChilliSpot-Redirect-URL VSA that can be used
>>>>>> instead of WISPr-Redirection-URL (where the WISPr is only used in
>>>>>> Access-Accept and only used once and the ChilliSpot-Redirect-URL
>>>>>> VSA is
>>>>>> the more persistent option). Any preferences or other suggestions?
>>>>>>
>>>>>> David
>>>>>>
>>>>>>
>>>>>> On Fri, 2012-02-24 at 11:20 +0000, support at coova.com wrote:
>>>>>>> Greetings david,
>>>>>>>
>>>>>>> Hello,
>>>>>>> With the last version of coova this strange behaviour occurs when
>>>>>>> the
>>>>>>> WISPr-Redirection-URL is used :
>>>>>>> - When a user is intercepted for the first time : all is ok (he
>>>>>>> performs the
>>>>>>> login procedure and he is redirect to the URL defined in the
>>>>>>> radius attribute
>>>>>>> "WISPr-Redirection-URL").
>>>>>>> - When he comes back after logs out, coova can't intercept him
>>>>>>> (the "Move
>>>>>>> Temporarily" packet is wrong).
>>>>>>> Look at the two "Move Temporarily" packet send by coova :
>>>>>>> - First one - ok (redirect to the uamserver) :
>>>>>>>
>>>>>>> Read more http://www.coova.org/node/5115 -- This is an automatic
>>>>>>> message from
>>>>>>> Coova :: Open Source Captive Portal Access Controller and RADIUS
>>>>>>> Software To
>>>>>>> manage your subscriptions, browse to
>>>>>>> http://www.coova.org/user/1/notifications You can unsubscribe at
>>>>>>> http://www.coova.org/notifications/unsubscribe/sid/1?signature=7dea0a65b50949c91873109c35fa01b2
>>>>>>>
>>>>>>>
>>>>>> _______________________________________________
>>>>>> Chilli mailing list
>>>>>> Chilli at coova.org
>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>>
>>>>
>>>
>>>
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>
>-- 
>Ryan Day
>
>CirrusWorks
>Beyond Convergence
>
>750 17th Street NW, Suite 1100
>Washington, DC 20006
>
>_______________________________________________
>Chilli mailing list
>Chilli at coova.org
>http://lists.coova.org/cgi-bin/mailman/listinfo/chilli

From tm at fwt.fr  Sun Mar 11 19:18:17 2012
From: tm at fwt.fr (Thierry Museux - www.fwt.fr -)
Date: Sun, 11 Mar 2012 20:18:17 +0100
Subject: [Chilli] New Forum topic: Strange behaviour with
	WISPr-Redirection-URL in 1.2.9
In-Reply-To: <21any7vsfy8df2vy5smxm8v1.1331414103119@email.android.com>
References: <21any7vsfy8df2vy5smxm8v1.1331414103119@email.android.com>
Message-ID: <035301ccffbb$b6fbbc20$24f33460$@fr>

I have the same problem.
To compile fine I need

aptitude install gengetopt
svn checkout http://dev.coova.org/svn/coova-chilli/
cd coova-chilli/
./bootstrap
./configure
cd src
cat cmdline.ggo | gengetopt -C
cd ..
make

if I miss
cd src
cat cmdline.ggo | gengetopt -C
cd ..

I have the problem



Thierry Museux
France Wireless Technologies
www.fwt.fr
msn: tm at fwt.fr
Tel: + 33 (0) 1 41 08 70 78
Gsm: + 33 (0) 6 15 22 09 62


-----Message d'origine-----
De : chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] De la part de David Bird
Envoy? : samedi 10 mars 2012 22:15
? : Ryan Day; chilli at coova.org; Kevin Williams
Objet : Re: [Chilli] New Forum topic: Strange behaviour with WISPr-Redirection-URL in 1.2.9

You need gengetopt package installed and be sure to run bootstrap script to setup automake. 

Ryan Day <ryan.day at cirrusworks.net> wrote:

>Sorry I missed the forum post, I'll have to look there. Are we able to 
>merge the forum and mailing lists?
>
>I also received the CMDLINE_PARSER_PACKAGE compile err from the SVN 
>build. I was able to substitute the cmdline.ggo (I think it was) from 
>1.2.9, but I don't think thats a very good test. I've gone with the 1.3 
>archive.
>
>On 03/10/2012 11:51 AM, Richard REY wrote:
>> As i've written in the Forum, the loop in the "http-redirect" has 
>> disappeared. I see an other "very" little problem with that parameter 
>> due to cache memory in coova (i think). For each equipment, Coova 
>> keeps in mind the redirect-url even if the "WISPr-Redirection-URL"
>> parameter has disappeared (ok when it changes).
>>
>> I've an other question : the 1.3 archive compiles fine, but not the 
>> svn archive. Here are the errors when i run "make" :
>>
>> main-opt.c: In function ?options_print_version?:
>> main-opt.c:217:22: erreur: ?CMDLINE_PARSER_PACKAGE? undeclared (first 
>> use in this function)
>> main-opt.c:217:22: note: each undeclared identifier is reported only 
>> once for each function it appears in
>> main-opt.c:217:46: erreur: ?CMDLINE_PARSER_VERSION? undeclared (first 
>> use in this function)
>> main-opt.c: In function ?main?:
>> main-opt.c:240:30: erreur: storage size of ?args_info? isn?t known
>>
>> Have i forgotten something?
>>
>>           _._
>>          /_ _`.
>>          (.X.)|
>>          |\_/'|
>>          )____`\
>>         //_V _\ \
>>        ((  |  `(_)
>>       / \> '   / \
>>       \  \.__./  /
>>        `-'    `-'
>>      Mandriva Linux :
>> l'ind?pendance informatique
>>  fran?aise et europ?enne
>>     richard at rexy.fr
>>
>>
>> Le 08/03/2012 13:24, Ryan Day a ?crit :
>>> We'll take a look at this, thanks!
>>>
>>> We've been testing the SVN, 1.2.9, and 1.2.8 releases over the past 
>>> couple days to try to get a comprehensive picture of the issue, I'll 
>>> let you know how 1.3 works.
>>>
>>>
>>> Ryan
>>>
>>> On 03/08/2012 04:14 AM, David Bird wrote:
>>>> The issue should be fixed in:
>>>> http://coova-chilli.s3.amazonaws.com/coova-chilli-1.3.0-svn.tar.gz
>>>>
>>>> .. if you can verify. There is also a new run-time option 
>>>> --redirurl which will have the WISPr-Redirection-URL put into the 
>>>> UAM success query string parameter&redirurl=... When the option is 
>>>> not used, chilli will do a HTTP redirect.
>>>>
>>>>
>>>> On Sun, 2012-03-04 at 10:17 -0500, Ryan Day wrote:
>>>>> I'm sure this is related to the problem I've described here
>>>>>
>>>>>   
>>>>> http://lists.coova.org/pipermail/chilli/2011-November/001775.html
>>>>>
>>>>>
>>>>> The patch was implemented in 1.2.9 and may be breaking 
>>>>> functionality in some situations.
>>>>>
>>>>> What I find amazing is that the problem described in
>>>>> http://www.coova.org/node/5115 is exactly what I was experiencing 
>>>>> with previous versions of chilli(<1.2.9). My uamserver was being 
>>>>> replaced by my WISPr redirect and I could no longer authenticate. 
>>>>> This patch seems to work for me (me being 3 dev servers and 2 
>>>>> production servers).
>>>>>
>>>>> Any thoughts?
>>>>>
>>>>>
>>>>>
>>>>> Ryan
>>>>>
>>>>> On 03/04/2012 09:55 AM, David Bird wrote:
>>>>>> Hello,
>>>>>>
>>>>>> The following was reported in the forum, but I will discuss it 
>>>>>> here. The issue is that chilli supports WISPr-Redirection-URL in 
>>>>>> several ways; it can be used, for example, to send users on a per 
>>>>>> session basis to alternate URLs based on the attribute not only 
>>>>>> in an Access-Accept, but also an Access-Reject. In both cases, it 
>>>>>> is sometimes desired to have the user keep going to that URL, 
>>>>>> even after their session had ended.
>>>>>> However, obviously, that is not always the case. Possible 
>>>>>> remedies
>>>>>> include: having an option that controls whether or not the URL 
>>>>>> value should "survive" after the session ends, making that 
>>>>>> behavior a compile time option, using a ChilliSpot-Redirect-URL 
>>>>>> VSA that can be used instead of WISPr-Redirection-URL (where the 
>>>>>> WISPr is only used in Access-Accept and only used once and the 
>>>>>> ChilliSpot-Redirect-URL VSA is the more persistent option). Any 
>>>>>> preferences or other suggestions?
>>>>>>
>>>>>> David
>>>>>>
>>>>>>
>>>>>> On Fri, 2012-02-24 at 11:20 +0000, support at coova.com wrote:
>>>>>>> Greetings david,
>>>>>>>
>>>>>>> Hello,
>>>>>>> With the last version of coova this strange behaviour occurs 
>>>>>>> when the WISPr-Redirection-URL is used :
>>>>>>> - When a user is intercepted for the first time : all is ok (he 
>>>>>>> performs the login procedure and he is redirect to the URL 
>>>>>>> defined in the radius attribute "WISPr-Redirection-URL").
>>>>>>> - When he comes back after logs out, coova can't intercept him 
>>>>>>> (the "Move Temporarily" packet is wrong).
>>>>>>> Look at the two "Move Temporarily" packet send by coova :
>>>>>>> - First one - ok (redirect to the uamserver) :
>>>>>>>
>>>>>>> Read more http://www.coova.org/node/5115 -- This is an automatic 
>>>>>>> message from Coova :: Open Source Captive Portal Access 
>>>>>>> Controller and RADIUS Software To manage your subscriptions, 
>>>>>>> browse to http://www.coova.org/user/1/notifications You can 
>>>>>>> unsubscribe at
>>>>>>> http://www.coova.org/notifications/unsubscribe/sid/1?signature=7
>>>>>>> dea0a65b50949c91873109c35fa01b2
>>>>>>>
>>>>>>>
>>>>>> _______________________________________________
>>>>>> Chilli mailing list
>>>>>> Chilli at coova.org
>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>>
>>>>
>>>
>>>
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>
>--
>Ryan Day
>
>CirrusWorks
>Beyond Convergence
>
>750 17th Street NW, Suite 1100
>Washington, DC 20006
>
>_______________________________________________
>Chilli mailing list
>Chilli at coova.org
>http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
_______________________________________________
Chilli mailing list
Chilli at coova.org
http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From richard at rexy.fr  Sun Mar 11 20:33:46 2012
From: richard at rexy.fr (Richard REY)
Date: Sun, 11 Mar 2012 21:33:46 +0100
Subject: [Chilli] New Forum topic: Strange behaviour with
 WISPr-Redirection-URL in 1.2.9
In-Reply-To: <035301ccffbb$b6fbbc20$24f33460$@fr>
References: <21any7vsfy8df2vy5smxm8v1.1331414103119@email.android.com>
	<035301ccffbb$b6fbbc20$24f33460$@fr>
Message-ID: <4F5D0C2A.30702@rexy.fr>

Ok, thank you Thierry for this problem bypass. It compiles fine now.

Merci.

Rexy - alcasar project


Le 11/03/2012 20:18, Thierry Museux - www.fwt.fr - a ?crit :
> I have the same problem.
> To compile fine I need
>
> aptitude install gengetopt
> svn checkout http://dev.coova.org/svn/coova-chilli/
> cd coova-chilli/
> ./bootstrap
> ./configure
> cd src
> cat cmdline.ggo | gengetopt -C
> cd ..
> make
>
> if I miss
> cd src
> cat cmdline.ggo | gengetopt -C
> cd ..
>
> I have the problem
>
>
>
> Thierry Museux
> France Wireless Technologies
> www.fwt.fr
> msn: tm at fwt.fr
> Tel: + 33 (0) 1 41 08 70 78
> Gsm: + 33 (0) 6 15 22 09 62
>
>
> -----Message d'origine-----
> De : chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] De la part de David Bird
> Envoy? : samedi 10 mars 2012 22:15
> ? : Ryan Day; chilli at coova.org; Kevin Williams
> Objet : Re: [Chilli] New Forum topic: Strange behaviour with WISPr-Redirection-URL in 1.2.9
>
> You need gengetopt package installed and be sure to run bootstrap script to setup automake.
>
> Ryan Day<ryan.day at cirrusworks.net>  wrote:
>
>> Sorry I missed the forum post, I'll have to look there. Are we able to
>> merge the forum and mailing lists?
>>
>> I also received the CMDLINE_PARSER_PACKAGE compile err from the SVN
>> build. I was able to substitute the cmdline.ggo (I think it was) from
>> 1.2.9, but I don't think thats a very good test. I've gone with the 1.3
>> archive.
>>
>> On 03/10/2012 11:51 AM, Richard REY wrote:
>>> As i've written in the Forum, the loop in the "http-redirect" has
>>> disappeared. I see an other "very" little problem with that parameter
>>> due to cache memory in coova (i think). For each equipment, Coova
>>> keeps in mind the redirect-url even if the "WISPr-Redirection-URL"
>>> parameter has disappeared (ok when it changes).
>>>
>>> I've an other question : the 1.3 archive compiles fine, but not the
>>> svn archive. Here are the errors when i run "make" :
>>>
>>> main-opt.c: In function ?options_print_version?:
>>> main-opt.c:217:22: erreur: ?CMDLINE_PARSER_PACKAGE? undeclared (first
>>> use in this function)
>>> main-opt.c:217:22: note: each undeclared identifier is reported only
>>> once for each function it appears in
>>> main-opt.c:217:46: erreur: ?CMDLINE_PARSER_VERSION? undeclared (first
>>> use in this function)
>>> main-opt.c: In function ?main?:
>>> main-opt.c:240:30: erreur: storage size of ?args_info? isn?t known
>>>
>>> Have i forgotten something?
>>>
>>>            _._
>>>           /_ _`.
>>>           (.X.)|
>>>           |\_/'|
>>>           )____`\
>>>          //_V _\ \
>>>         ((  |  `(_)
>>>        / \>  '   / \
>>>        \  \.__./  /
>>>         `-'    `-'
>>>       Mandriva Linux :
>>> l'ind?pendance informatique
>>>   fran?aise et europ?enne
>>>      richard at rexy.fr
>>>
>>>
>>> Le 08/03/2012 13:24, Ryan Day a ?crit :
>>>> We'll take a look at this, thanks!
>>>>
>>>> We've been testing the SVN, 1.2.9, and 1.2.8 releases over the past
>>>> couple days to try to get a comprehensive picture of the issue, I'll
>>>> let you know how 1.3 works.
>>>>
>>>>
>>>> Ryan
>>>>
>>>> On 03/08/2012 04:14 AM, David Bird wrote:
>>>>> The issue should be fixed in:
>>>>> http://coova-chilli.s3.amazonaws.com/coova-chilli-1.3.0-svn.tar.gz
>>>>>
>>>>> .. if you can verify. There is also a new run-time option
>>>>> --redirurl which will have the WISPr-Redirection-URL put into the
>>>>> UAM success query string parameter&redirurl=... When the option is
>>>>> not used, chilli will do a HTTP redirect.
>>>>>
>>>>>
>>>>> On Sun, 2012-03-04 at 10:17 -0500, Ryan Day wrote:
>>>>>> I'm sure this is related to the problem I've described here
>>>>>>
>>>>>>
>>>>>> http://lists.coova.org/pipermail/chilli/2011-November/001775.html
>>>>>>
>>>>>>
>>>>>> The patch was implemented in 1.2.9 and may be breaking
>>>>>> functionality in some situations.
>>>>>>
>>>>>> What I find amazing is that the problem described in
>>>>>> http://www.coova.org/node/5115 is exactly what I was experiencing
>>>>>> with previous versions of chilli(<1.2.9). My uamserver was being
>>>>>> replaced by my WISPr redirect and I could no longer authenticate.
>>>>>> This patch seems to work for me (me being 3 dev servers and 2
>>>>>> production servers).
>>>>>>
>>>>>> Any thoughts?
>>>>>>
>>>>>>
>>>>>>
>>>>>> Ryan
>>>>>>
>>>>>> On 03/04/2012 09:55 AM, David Bird wrote:
>>>>>>> Hello,
>>>>>>>
>>>>>>> The following was reported in the forum, but I will discuss it
>>>>>>> here. The issue is that chilli supports WISPr-Redirection-URL in
>>>>>>> several ways; it can be used, for example, to send users on a per
>>>>>>> session basis to alternate URLs based on the attribute not only
>>>>>>> in an Access-Accept, but also an Access-Reject. In both cases, it
>>>>>>> is sometimes desired to have the user keep going to that URL,
>>>>>>> even after their session had ended.
>>>>>>> However, obviously, that is not always the case. Possible
>>>>>>> remedies
>>>>>>> include: having an option that controls whether or not the URL
>>>>>>> value should "survive" after the session ends, making that
>>>>>>> behavior a compile time option, using a ChilliSpot-Redirect-URL
>>>>>>> VSA that can be used instead of WISPr-Redirection-URL (where the
>>>>>>> WISPr is only used in Access-Accept and only used once and the
>>>>>>> ChilliSpot-Redirect-URL VSA is the more persistent option). Any
>>>>>>> preferences or other suggestions?
>>>>>>>
>>>>>>> David
>>>>>>>
>>>>>>>
>>>>>>> On Fri, 2012-02-24 at 11:20 +0000, support at coova.com wrote:
>>>>>>>> Greetings david,
>>>>>>>>
>>>>>>>> Hello,
>>>>>>>> With the last version of coova this strange behaviour occurs
>>>>>>>> when the WISPr-Redirection-URL is used :
>>>>>>>> - When a user is intercepted for the first time : all is ok (he
>>>>>>>> performs the login procedure and he is redirect to the URL
>>>>>>>> defined in the radius attribute "WISPr-Redirection-URL").
>>>>>>>> - When he comes back after logs out, coova can't intercept him
>>>>>>>> (the "Move Temporarily" packet is wrong).
>>>>>>>> Look at the two "Move Temporarily" packet send by coova :
>>>>>>>> - First one - ok (redirect to the uamserver) :
>>>>>>>>
>>>>>>>> Read more http://www.coova.org/node/5115 -- This is an automatic
>>>>>>>> message from Coova :: Open Source Captive Portal Access
>>>>>>>> Controller and RADIUS Software To manage your subscriptions,
>>>>>>>> browse to http://www.coova.org/user/1/notifications You can
>>>>>>>> unsubscribe at
>>>>>>>> http://www.coova.org/notifications/unsubscribe/sid/1?signature=7
>>>>>>>> dea0a65b50949c91873109c35fa01b2
>>>>>>>>
>>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> Chilli mailing list
>>>>>>> Chilli at coova.org
>>>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>>>>>
>>>>>
>>>>
>>>>
>>> _______________________________________________
>>> Chilli mailing list
>>> Chilli at coova.org
>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>
>>
>> --
>> Ryan Day
>>
>> CirrusWorks
>> Beyond Convergence
>>
>> 750 17th Street NW, Suite 1100
>> Washington, DC 20006
>>
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli

From david at coova.com  Mon Mar 12 08:58:21 2012
From: david at coova.com (David Bird)
Date: Mon, 12 Mar 2012 09:58:21 +0100
Subject: [Chilli] 'UAMallowed' and 'Ether file' together
In-Reply-To: <4F5B8B66.2040602@rexy.fr>
References: <4F5B8B66.2040602@rexy.fr>
Message-ID: <1331542701.3267.36.camel@david-laptop>

It's currently only supported when using --macauth option, not the
macallowed option.. 

On Sat, 2012-03-10 at 18:12 +0100, Richard REY wrote:
> Hello,
> About one year ago, David said : in subversion trunk "Addresses in the 
> ethers file will be MAC-auth'ed during start-up now.". This feature 
> doesn't work in coova V1.2.9. Have i forgotten something?
> 
> Rexy
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From dagmid_d at yahoo.com  Mon Mar 12 09:25:07 2012
From: dagmid_d at yahoo.com (Dagia Dorjsuren)
Date: Mon, 12 Mar 2012 02:25:07 -0700 (PDT)
Subject: [Chilli] about multiple nas
Message-ID: <1331544307.61554.YahooMailNeo@web33903.mail.mud.yahoo.com>

Hello all,

??? Does anyone know how to configure the users on the multiple nas/clients in freeradius?


for example :

my nas type (client type) is coova chilli access points.


my first nas ip address is 192.168.1.1

my second nas ip address is 192.168.1.2

my third nas ip address is 192.168.1.3


"bot" user must be valid from these NASs/Clients.


So, I inserted below rows in radcheck table. But it is not working.


Username?????? | Attribute???? |?? op |?? value |

|?? bot ??????????? | NAS-IP-Address???? | == | 192.168.1.1|192.168.1.2|192.168.1.3 |


Anyone help me pls?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120312/e5dec50f/attachment.html>

From david at coova.com  Mon Mar 12 12:03:15 2012
From: david at coova.com (David Bird)
Date: Mon, 12 Mar 2012 13:03:15 +0100
Subject: [Chilli] New Forum topic: Strange behaviour with
 WISPr-Redirection-URL in 1.2.9
In-Reply-To: <035301ccffbb$b6fbbc20$24f33460$@fr>
References: <21any7vsfy8df2vy5smxm8v1.1331414103119@email.android.com>
	<035301ccffbb$b6fbbc20$24f33460$@fr>
Message-ID: <1331553795.3267.39.camel@david-laptop>

Then 'touch src/cmdline.ggo; make' should also work. Then gengetopt
command is managed by the Makefile. 

On Sun, 2012-03-11 at 20:18 +0100, Thierry Museux - www.fwt.fr - wrote:
> I have the same problem.
> To compile fine I need
> 
> aptitude install gengetopt
> svn checkout http://dev.coova.org/svn/coova-chilli/
> cd coova-chilli/
> ./bootstrap
> ./configure
> cd src
> cat cmdline.ggo | gengetopt -C
> cd ..
> make
> 
> if I miss
> cd src
> cat cmdline.ggo | gengetopt -C
> cd ..
> 
> I have the problem
> 
> 
> 
> Thierry Museux
> France Wireless Technologies
> www.fwt.fr
> msn: tm at fwt.fr
> Tel: + 33 (0) 1 41 08 70 78
> Gsm: + 33 (0) 6 15 22 09 62
> 
> 
> -----Message d'origine-----
> De : chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] De la part de David Bird
> Envoy? : samedi 10 mars 2012 22:15
> ? : Ryan Day; chilli at coova.org; Kevin Williams
> Objet : Re: [Chilli] New Forum topic: Strange behaviour with WISPr-Redirection-URL in 1.2.9
> 
> You need gengetopt package installed and be sure to run bootstrap script to setup automake. 
> 
> Ryan Day <ryan.day at cirrusworks.net> wrote:
> 
> >Sorry I missed the forum post, I'll have to look there. Are we able to 
> >merge the forum and mailing lists?
> >
> >I also received the CMDLINE_PARSER_PACKAGE compile err from the SVN 
> >build. I was able to substitute the cmdline.ggo (I think it was) from 
> >1.2.9, but I don't think thats a very good test. I've gone with the 1.3 
> >archive.
> >
> >On 03/10/2012 11:51 AM, Richard REY wrote:
> >> As i've written in the Forum, the loop in the "http-redirect" has 
> >> disappeared. I see an other "very" little problem with that parameter 
> >> due to cache memory in coova (i think). For each equipment, Coova 
> >> keeps in mind the redirect-url even if the "WISPr-Redirection-URL"
> >> parameter has disappeared (ok when it changes).
> >>
> >> I've an other question : the 1.3 archive compiles fine, but not the 
> >> svn archive. Here are the errors when i run "make" :
> >>
> >> main-opt.c: In function ?options_print_version?:
> >> main-opt.c:217:22: erreur: ?CMDLINE_PARSER_PACKAGE? undeclared (first 
> >> use in this function)
> >> main-opt.c:217:22: note: each undeclared identifier is reported only 
> >> once for each function it appears in
> >> main-opt.c:217:46: erreur: ?CMDLINE_PARSER_VERSION? undeclared (first 
> >> use in this function)
> >> main-opt.c: In function ?main?:
> >> main-opt.c:240:30: erreur: storage size of ?args_info? isn?t known
> >>
> >> Have i forgotten something?
> >>
> >>           _._
> >>          /_ _`.
> >>          (.X.)|
> >>          |\_/'|
> >>          )____`\
> >>         //_V _\ \
> >>        ((  |  `(_)
> >>       / \> '   / \
> >>       \  \.__./  /
> >>        `-'    `-'
> >>      Mandriva Linux :
> >> l'ind?pendance informatique
> >>  fran?aise et europ?enne
> >>     richard at rexy.fr
> >>
> >>
> >> Le 08/03/2012 13:24, Ryan Day a ?crit :
> >>> We'll take a look at this, thanks!
> >>>
> >>> We've been testing the SVN, 1.2.9, and 1.2.8 releases over the past 
> >>> couple days to try to get a comprehensive picture of the issue, I'll 
> >>> let you know how 1.3 works.
> >>>
> >>>
> >>> Ryan
> >>>
> >>> On 03/08/2012 04:14 AM, David Bird wrote:
> >>>> The issue should be fixed in:
> >>>> http://coova-chilli.s3.amazonaws.com/coova-chilli-1.3.0-svn.tar.gz
> >>>>
> >>>> .. if you can verify. There is also a new run-time option 
> >>>> --redirurl which will have the WISPr-Redirection-URL put into the 
> >>>> UAM success query string parameter&redirurl=... When the option is 
> >>>> not used, chilli will do a HTTP redirect.
> >>>>
> >>>>
> >>>> On Sun, 2012-03-04 at 10:17 -0500, Ryan Day wrote:
> >>>>> I'm sure this is related to the problem I've described here
> >>>>>
> >>>>>   
> >>>>> http://lists.coova.org/pipermail/chilli/2011-November/001775.html
> >>>>>
> >>>>>
> >>>>> The patch was implemented in 1.2.9 and may be breaking 
> >>>>> functionality in some situations.
> >>>>>
> >>>>> What I find amazing is that the problem described in
> >>>>> http://www.coova.org/node/5115 is exactly what I was experiencing 
> >>>>> with previous versions of chilli(<1.2.9). My uamserver was being 
> >>>>> replaced by my WISPr redirect and I could no longer authenticate. 
> >>>>> This patch seems to work for me (me being 3 dev servers and 2 
> >>>>> production servers).
> >>>>>
> >>>>> Any thoughts?
> >>>>>
> >>>>>
> >>>>>
> >>>>> Ryan
> >>>>>
> >>>>> On 03/04/2012 09:55 AM, David Bird wrote:
> >>>>>> Hello,
> >>>>>>
> >>>>>> The following was reported in the forum, but I will discuss it 
> >>>>>> here. The issue is that chilli supports WISPr-Redirection-URL in 
> >>>>>> several ways; it can be used, for example, to send users on a per 
> >>>>>> session basis to alternate URLs based on the attribute not only 
> >>>>>> in an Access-Accept, but also an Access-Reject. In both cases, it 
> >>>>>> is sometimes desired to have the user keep going to that URL, 
> >>>>>> even after their session had ended.
> >>>>>> However, obviously, that is not always the case. Possible 
> >>>>>> remedies
> >>>>>> include: having an option that controls whether or not the URL 
> >>>>>> value should "survive" after the session ends, making that 
> >>>>>> behavior a compile time option, using a ChilliSpot-Redirect-URL 
> >>>>>> VSA that can be used instead of WISPr-Redirection-URL (where the 
> >>>>>> WISPr is only used in Access-Accept and only used once and the 
> >>>>>> ChilliSpot-Redirect-URL VSA is the more persistent option). Any 
> >>>>>> preferences or other suggestions?
> >>>>>>
> >>>>>> David
> >>>>>>
> >>>>>>
> >>>>>> On Fri, 2012-02-24 at 11:20 +0000, support at coova.com wrote:
> >>>>>>> Greetings david,
> >>>>>>>
> >>>>>>> Hello,
> >>>>>>> With the last version of coova this strange behaviour occurs 
> >>>>>>> when the WISPr-Redirection-URL is used :
> >>>>>>> - When a user is intercepted for the first time : all is ok (he 
> >>>>>>> performs the login procedure and he is redirect to the URL 
> >>>>>>> defined in the radius attribute "WISPr-Redirection-URL").
> >>>>>>> - When he comes back after logs out, coova can't intercept him 
> >>>>>>> (the "Move Temporarily" packet is wrong).
> >>>>>>> Look at the two "Move Temporarily" packet send by coova :
> >>>>>>> - First one - ok (redirect to the uamserver) :
> >>>>>>>
> >>>>>>> Read more http://www.coova.org/node/5115 -- This is an automatic 
> >>>>>>> message from Coova :: Open Source Captive Portal Access 
> >>>>>>> Controller and RADIUS Software To manage your subscriptions, 
> >>>>>>> browse to http://www.coova.org/user/1/notifications You can 
> >>>>>>> unsubscribe at
> >>>>>>> http://www.coova.org/notifications/unsubscribe/sid/1?signature=7
> >>>>>>> dea0a65b50949c91873109c35fa01b2
> >>>>>>>
> >>>>>>>
> >>>>>> _______________________________________________
> >>>>>> Chilli mailing list
> >>>>>> Chilli at coova.org
> >>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>>>>
> >>>>
> >>>
> >>>
> >> _______________________________________________
> >> Chilli mailing list
> >> Chilli at coova.org
> >> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >
> >
> >--
> >Ryan Day
> >
> >CirrusWorks
> >Beyond Convergence
> >
> >750 17th Street NW, Suite 1100
> >Washington, DC 20006
> >
> >_______________________________________________
> >Chilli mailing list
> >Chilli at coova.org
> >http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 



From tm at fwt.fr  Mon Mar 12 12:27:04 2012
From: tm at fwt.fr (Thierry Museux - www.fwt.fr -)
Date: Mon, 12 Mar 2012 13:27:04 +0100
Subject: [Chilli] New Forum topic: Strange behaviour with
	WISPr-Redirection-URL in 1.2.9
In-Reply-To: <1331553795.3267.39.camel@david-laptop>
References: <21any7vsfy8df2vy5smxm8v1.1331414103119@email.android.com>	
	<035301ccffbb$b6fbbc20$24f33460$@fr>
	<1331553795.3267.39.camel@david-laptop>
Message-ID: <069a01cd004b$6ee8cc30$4cba6490$@fr>

Failed with:
svn checkout http://dev.coova.org/svn/coova-chilli/
cd coova-chilli/
./bootstrap
touch src/cmdline.ggo
./configure
make

failed with:
svn checkout http://dev.coova.org/svn/coova-chilli/
cd coova-chilli/
./bootstrap
./configure
touch src/cmdline.ggo
make


touch src/cmdline.ggo is already in ./bootstrap
cat bootstrap
#! /bin/sh
# Run this script to setup the automake environment.
# ./configure
# make
# make install

libtoolize --force --copy
aclocal
autoconf
automake --add-missing
automake

touch src/cmdline.c
touch src/cmdline.h
touch src/cmdline.ggo



Thierry Museux
France Wireless Technologies
www.fwt.fr
msn: tm at fwt.fr
Tel: + 33 (0) 1 41 08 70 78
Gsm: + 33 (0) 6 15 22 09 62


-----Message d'origine-----
De : David Bird [mailto:david at coova.com] 
Envoy? : lundi 12 mars 2012 13:03
? : Thierry Museux - www.fwt.fr -
Cc : 'Ryan Day'; chilli at coova.org; 'Kevin Williams'
Objet : RE: [Chilli] New Forum topic: Strange behaviour with WISPr-Redirection-URL in 1.2.9

Then 'touch src/cmdline.ggo; make' should also work. Then gengetopt command is managed by the Makefile. 

On Sun, 2012-03-11 at 20:18 +0100, Thierry Museux - www.fwt.fr - wrote:
> I have the same problem.
> To compile fine I need
> 
> aptitude install gengetopt
> svn checkout http://dev.coova.org/svn/coova-chilli/
> cd coova-chilli/
> ./bootstrap
> ./configure
> cd src
> cat cmdline.ggo | gengetopt -C
> cd ..
> make
> 
> if I miss
> cd src
> cat cmdline.ggo | gengetopt -C
> cd ..
> 
> I have the problem
> 
> 
> 
> Thierry Museux
> France Wireless Technologies
> www.fwt.fr
> msn: tm at fwt.fr
> Tel: + 33 (0) 1 41 08 70 78
> Gsm: + 33 (0) 6 15 22 09 62
> 
> 
> -----Message d'origine-----
> De : chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] De la 
> part de David Bird Envoy? : samedi 10 mars 2012 22:15 ? : Ryan Day; 
> chilli at coova.org; Kevin Williams Objet : Re: [Chilli] New Forum topic: 
> Strange behaviour with WISPr-Redirection-URL in 1.2.9
> 
> You need gengetopt package installed and be sure to run bootstrap script to setup automake. 
> 
> Ryan Day <ryan.day at cirrusworks.net> wrote:
> 
> >Sorry I missed the forum post, I'll have to look there. Are we able 
> >to merge the forum and mailing lists?
> >
> >I also received the CMDLINE_PARSER_PACKAGE compile err from the SVN 
> >build. I was able to substitute the cmdline.ggo (I think it was) from 
> >1.2.9, but I don't think thats a very good test. I've gone with the 
> >1.3 archive.
> >
> >On 03/10/2012 11:51 AM, Richard REY wrote:
> >> As i've written in the Forum, the loop in the "http-redirect" has 
> >> disappeared. I see an other "very" little problem with that 
> >> parameter due to cache memory in coova (i think). For each 
> >> equipment, Coova keeps in mind the redirect-url even if the "WISPr-Redirection-URL"
> >> parameter has disappeared (ok when it changes).
> >>
> >> I've an other question : the 1.3 archive compiles fine, but not the 
> >> svn archive. Here are the errors when i run "make" :
> >>
> >> main-opt.c: In function ?options_print_version?:
> >> main-opt.c:217:22: erreur: ?CMDLINE_PARSER_PACKAGE? undeclared 
> >> (first use in this function)
> >> main-opt.c:217:22: note: each undeclared identifier is reported 
> >> only once for each function it appears in
> >> main-opt.c:217:46: erreur: ?CMDLINE_PARSER_VERSION? undeclared 
> >> (first use in this function)
> >> main-opt.c: In function ?main?:
> >> main-opt.c:240:30: erreur: storage size of ?args_info? isn?t known
> >>
> >> Have i forgotten something?
> >>
> >>           _._
> >>          /_ _`.
> >>          (.X.)|
> >>          |\_/'|
> >>          )____`\
> >>         //_V _\ \
> >>        ((  |  `(_)
> >>       / \> '   / \
> >>       \  \.__./  /
> >>        `-'    `-'
> >>      Mandriva Linux :
> >> l'ind?pendance informatique
> >>  fran?aise et europ?enne
> >>     richard at rexy.fr
> >>
> >>
> >> Le 08/03/2012 13:24, Ryan Day a ?crit :
> >>> We'll take a look at this, thanks!
> >>>
> >>> We've been testing the SVN, 1.2.9, and 1.2.8 releases over the 
> >>> past couple days to try to get a comprehensive picture of the 
> >>> issue, I'll let you know how 1.3 works.
> >>>
> >>>
> >>> Ryan
> >>>
> >>> On 03/08/2012 04:14 AM, David Bird wrote:
> >>>> The issue should be fixed in:
> >>>> http://coova-chilli.s3.amazonaws.com/coova-chilli-1.3.0-svn.tar.g
> >>>> z
> >>>>
> >>>> .. if you can verify. There is also a new run-time option 
> >>>> --redirurl which will have the WISPr-Redirection-URL put into the 
> >>>> UAM success query string parameter&redirurl=... When the option 
> >>>> is not used, chilli will do a HTTP redirect.
> >>>>
> >>>>
> >>>> On Sun, 2012-03-04 at 10:17 -0500, Ryan Day wrote:
> >>>>> I'm sure this is related to the problem I've described here
> >>>>>
> >>>>>   
> >>>>> http://lists.coova.org/pipermail/chilli/2011-November/001775.htm
> >>>>> l
> >>>>>
> >>>>>
> >>>>> The patch was implemented in 1.2.9 and may be breaking 
> >>>>> functionality in some situations.
> >>>>>
> >>>>> What I find amazing is that the problem described in
> >>>>> http://www.coova.org/node/5115 is exactly what I was 
> >>>>> experiencing with previous versions of chilli(<1.2.9). My 
> >>>>> uamserver was being replaced by my WISPr redirect and I could no longer authenticate.
> >>>>> This patch seems to work for me (me being 3 dev servers and 2 
> >>>>> production servers).
> >>>>>
> >>>>> Any thoughts?
> >>>>>
> >>>>>
> >>>>>
> >>>>> Ryan
> >>>>>
> >>>>> On 03/04/2012 09:55 AM, David Bird wrote:
> >>>>>> Hello,
> >>>>>>
> >>>>>> The following was reported in the forum, but I will discuss it 
> >>>>>> here. The issue is that chilli supports WISPr-Redirection-URL 
> >>>>>> in several ways; it can be used, for example, to send users on 
> >>>>>> a per session basis to alternate URLs based on the attribute 
> >>>>>> not only in an Access-Accept, but also an Access-Reject. In 
> >>>>>> both cases, it is sometimes desired to have the user keep going 
> >>>>>> to that URL, even after their session had ended.
> >>>>>> However, obviously, that is not always the case. Possible 
> >>>>>> remedies
> >>>>>> include: having an option that controls whether or not the URL 
> >>>>>> value should "survive" after the session ends, making that 
> >>>>>> behavior a compile time option, using a ChilliSpot-Redirect-URL 
> >>>>>> VSA that can be used instead of WISPr-Redirection-URL (where 
> >>>>>> the WISPr is only used in Access-Accept and only used once and 
> >>>>>> the ChilliSpot-Redirect-URL VSA is the more persistent option). 
> >>>>>> Any preferences or other suggestions?
> >>>>>>
> >>>>>> David
> >>>>>>
> >>>>>>
> >>>>>> On Fri, 2012-02-24 at 11:20 +0000, support at coova.com wrote:
> >>>>>>> Greetings david,
> >>>>>>>
> >>>>>>> Hello,
> >>>>>>> With the last version of coova this strange behaviour occurs 
> >>>>>>> when the WISPr-Redirection-URL is used :
> >>>>>>> - When a user is intercepted for the first time : all is ok 
> >>>>>>> (he performs the login procedure and he is redirect to the URL 
> >>>>>>> defined in the radius attribute "WISPr-Redirection-URL").
> >>>>>>> - When he comes back after logs out, coova can't intercept him 
> >>>>>>> (the "Move Temporarily" packet is wrong).
> >>>>>>> Look at the two "Move Temporarily" packet send by coova :
> >>>>>>> - First one - ok (redirect to the uamserver) :
> >>>>>>>
> >>>>>>> Read more http://www.coova.org/node/5115 -- This is an 
> >>>>>>> automatic message from Coova :: Open Source Captive Portal 
> >>>>>>> Access Controller and RADIUS Software To manage your 
> >>>>>>> subscriptions, browse to 
> >>>>>>> http://www.coova.org/user/1/notifications You can unsubscribe 
> >>>>>>> at
> >>>>>>> http://www.coova.org/notifications/unsubscribe/sid/1?signature
> >>>>>>> =7
> >>>>>>> dea0a65b50949c91873109c35fa01b2
> >>>>>>>
> >>>>>>>
> >>>>>> _______________________________________________
> >>>>>> Chilli mailing list
> >>>>>> Chilli at coova.org
> >>>>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >>>>>
> >>>>
> >>>
> >>>
> >> _______________________________________________
> >> Chilli mailing list
> >> Chilli at coova.org
> >> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >
> >
> >--
> >Ryan Day
> >
> >CirrusWorks
> >Beyond Convergence
> >
> >750 17th Street NW, Suite 1100
> >Washington, DC 20006
> >
> >_______________________________________________
> >Chilli mailing list
> >Chilli at coova.org
> >http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 




From mohsen.saeedi at gmail.com  Mon Mar 12 12:37:43 2012
From: mohsen.saeedi at gmail.com (Mohsen Saeedi)
Date: Mon, 12 Mar 2012 16:07:43 +0330
Subject: [Chilli] about multiple nas
In-Reply-To: <1331544307.61554.YahooMailNeo@web33903.mail.mud.yahoo.com>
References: <1331544307.61554.YahooMailNeo@web33903.mail.mud.yahoo.com>
Message-ID: <4F5DEE17.1050403@gmail.com>

An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120312/51a49a8f/attachment.html>

From david at coova.com  Mon Mar 12 13:11:44 2012
From: david at coova.com (David Bird)
Date: Mon, 12 Mar 2012 14:11:44 +0100
Subject: [Chilli] New Forum topic: Strange behaviour with
 WISPr-Redirection-URL in 1.2.9
In-Reply-To: <069a01cd004b$6ee8cc30$4cba6490$@fr>
References: <21any7vsfy8df2vy5smxm8v1.1331414103119@email.android.com>
	<035301ccffbb$b6fbbc20$24f33460$@fr>
	<1331553795.3267.39.camel@david-laptop>
	<069a01cd004b$6ee8cc30$4cba6490$@fr>
Message-ID: <1331557904.3267.40.camel@david-laptop>

try again..

On Mon, 2012-03-12 at 13:27 +0100, Thierry Museux - www.fwt.fr - wrote:
> svn checkout http://dev.coova.org/svn/coova-chilli/
> cd coova-chilli/
> ./bootstrap
> ./configure
> make 


From miguel.lopes at cabocom.cv  Mon Mar 12 13:32:16 2012
From: miguel.lopes at cabocom.cv (Miguel Lopes - Cabocom)
Date: Mon, 12 Mar 2012 12:32:16 -0100
Subject: [Chilli] UAMDOMAIN not working
In-Reply-To: <004801ccfe08$3b7ec920$b27c5b60$@lopes@cabocom.cv>
References: <003001ccfdef$248c0930$6da41b90$@lopes@cabocom.cv>	<1331302131.3267.11.camel@david-laptop>
	<004801ccfe08$3b7ec920$b27c5b60$@lopes@cabocom.cv>
Message-ID: <003001cd0054$8ba60aa0$a2f21fe0$@lopes@cabocom.cv>

Hi David,

Tested again and it seems ok. We had a DNS server that cached query results and since paypal has multiple IP's we were getting the same result even when the IP should be different. One thing I noticed is when the UAMDOMAIN redirects to a HTTPS page it take a long time to open, anything that is HTTP goes really fast, e.g. if I put www.cnn.com on the uamdomain, even being a page filled with images, etc, it opens fast, when I open www.paypal.com, the HTTP part opens really quick but as soon as the page redirects to the HTTPS, it takes a while to open. 

Important thing is people can access it and buy the access vouchers.

Kind Regards / Atentamente,

Miguel Lopes



Tel - +2382428087
Fax - +2382428088
Email - miguel.lopes at cabocom.cv
Web - www.cabocom.cv
Facebook - facebook.cabocom.cv

-----Mensagem original-----
De: chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] Em nome de Miguel Lopes - Cabocom
Enviada: sexta-feira, 9 de Mar?o de 2012 14:21
Para: 'David Bird'
Cc: chilli at coova.org
Assunto: Re: [Chilli] UAMDOMAIN not working

Thanks for the tip David, later today I will try again, I will restart chilli and flush my pc dns cache to give it a proper test. I will show you the results as soon as I get them.

Kind Regards / Atentamente,

Miguel Lopes


Tel - +2382428087
Fax - +2382428088
Email - miguel.lopes at cabocom.cv
Web - www.cabocom.cv
Facebook - facebook.cabocom.cv

-----Mensagem original-----
De: David Bird [mailto:david at coova.com] 
Enviada: sexta-feira, 9 de Mar?o de 2012 13:09
Para: Miguel Lopes - Cabocom
Cc: chilli at coova.org
Assunto: Re: [Chilli] UAMDOMAIN not working

Please be sure you are testing correctly.. The uamdomain option requires
for clients to first resolve the hostname under the domain so that
chilli learns the IP. If the client has the IP cached (because it
resolved it, then you restarted chilli), it may seem it does not work.
You can review the current garden with 'chilli_query listgarden'

On Fri, 2012-03-09 at 11:21 -0100, Miguel Lopes - Cabocom wrote:
> Hi,
> 
>  
> 
> We want to use UAMDOMAIN because of the Paypal website. In chilli
> 1.2.6 we never had trouble with this option. But now with 1.2.9 it
> isn?t working, we use multiple instances of chilli in separate VLAN?s,
> we have like this in Chilli/config:
> 
>  
> 
> HS_UAMDOMAINS=?.paypal.com,.paypalobjects.com,.mediaplex.com,.112.2o7.net?
> 
>  
> 
> Since it is the same for all instances we didn?t add it to each
> individual config file, but all of them get the option because in the
> Chilli/VLANXX/main.conf it shows:
> 
>  
> 
> uamdomain .paypal.com
> 
> uamdomain .paypalobjects.com
> 
> uamdomain .mediaplex.com
> 
> uamdomain .112.2o7.net
> 
>  
> 
> As soon as I type any of those addresses above it redirects me to the
> login page. The only way that we used around this was to add them to
> the HS_UAMALLOWED, but I know this is not the best solution since I
> wanted this to be done based on domain name.
> 
>  
> 
> We use our choovachilli in layer 3 mode and it was compiled with the
> following options:
> 
>  
> 
> Compiled with ENABLE_CHILLIQUERY ENABLE_COA ENABLE_RADPROXY
> ENABLE_DHCPRADIUS ENABLE_IEEE8021Q ENABLE_JSON ENABLE_LARGELIMITS
> ENABLE_LAYER3 ENABLE_LEAKYBUCKET ENABLE_UAMANYIP ENABLE_UAMUIPORT
> 
>  
> 
> We tried it once cmpliling with ?enable-uamdomainfile and tried the
> option but it didn?t work either.
> 
>  
> 
> Any ideas on this?
> 
>  
> 
> Kind Regards / Atentamente,
> 
>  
> 
> Miguel Lopes
> 
>  
> 
> marca_teste
> 
>  
> 
> Tel - +2382428087
> 
> Fax - +2382428088
> 
> Email - miguel.lopes at cabocom.cv
> 
> Web - www.cabocom.cv
> 
> Facebook - facebook.cabocom.cv
> 
>  
> 
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


_______________________________________________
Chilli mailing list
Chilli at coova.org
http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From richard at rexy.fr  Mon Mar 12 21:40:39 2012
From: richard at rexy.fr (Richard REY)
Date: Mon, 12 Mar 2012 22:40:39 +0100
Subject: [Chilli] 'UAMallowed' and 'Ether file' together
In-Reply-To: <1331542701.3267.36.camel@david-laptop>
References: <4F5B8B66.2040602@rexy.fr> <1331542701.3267.36.camel@david-laptop>
Message-ID: <4F5E6D57.2000509@rexy.fr>

I've just test it with macauth, and, as you said : it's working fine. 
Thanks. I will change the behaviour of the project "alcasar" with 
"macauth" instead of "macallowed".

           _._
          /_ _`.
          (.X.)|
          |\_/'|
          )____`\
         //_V _\ \
        ((  |  `(_)
       / \> '   / \
       \  \.__./  /
        `-'    `-'
      Mandriva Linux :
l'ind?pendance informatique
  fran?aise et europ?enne
     richard at rexy.fr


Le 12/03/2012 09:58, David Bird a ?crit :
> It's currently only supported when using --macauth option, not the
> macallowed option..
>
> On Sat, 2012-03-10 at 18:12 +0100, Richard REY wrote:
>> Hello,
>> About one year ago, David said : in subversion trunk "Addresses in the
>> ethers file will be MAC-auth'ed during start-up now.". This feature
>> doesn't work in coova V1.2.9. Have i forgotten something?
>>
>> Rexy
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>
>

From dagmid_d at yahoo.com  Tue Mar 13 02:35:46 2012
From: dagmid_d at yahoo.com (Dagia Dorjsuren)
Date: Mon, 12 Mar 2012 19:35:46 -0700 (PDT)
Subject: [Chilli] about multiple nas
In-Reply-To: <4F5DEE17.1050403@gmail.com>
References: <1331544307.61554.YahooMailNeo@web33903.mail.mud.yahoo.com>
	<4F5DEE17.1050403@gmail.com>
Message-ID: <1331606146.77311.YahooMailNeo@web33908.mail.mud.yahoo.com>

Yeah, I already set nas information with secret key in clients.conf



________________________________
 From: Mohsen Saeedi <mohsen.saeedi at gmail.com>
To: chilli at coova.org 
Sent: Monday, March 12, 2012 8:37 PM
Subject: Re: [Chilli] about multiple nas
 

 
You must set nas information with secret key in clients.conf or you can use sql module and nas.sql as schema for storing your nas information on mysql for example.


Dagia Dorjsuren <dagmid_d at yahoo.com> wrote on Mon, 12 Mar 2012 02:25:07 -0700 (PDT):
Hello all,
>
>??? Does anyone know how to configure the users on the
          multiple nas/clients in freeradius?
>
>
>for example :
>
>my nas type (client type) is coova chilli access points.
>
>
>my first nas ip address is 192.168.1.1
>
>my second nas ip address is 192.168.1.2
>
>my third nas ip address is 192.168.1.3
>
>
>"bot" user must be valid from these NASs/Clients.
>
>
>So, I inserted below rows in radcheck table. But it is not
          working.
>
>
>Username?????? | Attribute???? |?? op |?? value |
>
>|?? bot ??????????? | NAS-IP-Address???? | == |
          192.168.1.1|192.168.1.2|192.168.1.3 |
>
>
>Anyone help me pls?
>
>
>_______________________________________________
Chilli mailing list Chilli at coova.org http://lists.coova.org/cgi-bin/mailman/listinfo/chilli 
_______________________________________________
Chilli mailing list
Chilli at coova.org
http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120312/7089501a/attachment.html>

From maxxer at ufficyo.com  Thu Mar 15 11:36:26 2012
From: maxxer at ufficyo.com (Lorenzo Milesi)
Date: Thu, 15 Mar 2012 12:36:26 +0100 (CET)
Subject: [Chilli] [patch] Debian startup script missing LSB standard header
In-Reply-To: <1453791219.1336.1331811286894.JavaMail.root@quaglia>
Message-ID: <1965790778.1355.1331811386387.JavaMail.root@quaglia>

Please add on top of debian/coova-chilli/etc/init.d/chilli just below the first line the standard LSB tags:

#
# chilli        Startup script for the Coova Chilli access controller
#
### BEGIN INIT INFO
# Provides:       chilli
# Required-Start: network 
# Should-Start: 
# Required-Stop:  network
# Should-Stop: 
# Default-Start:  2 3 5
# Default-Stop:
# Description:    CoovaChilli access controller
### END INIT INFO


otherwise debian will complain at every change :)

thanks

From davidseira at gmail.com  Thu Mar 15 16:59:27 2012
From: davidseira at gmail.com (David Seira)
Date: Thu, 15 Mar 2012 17:59:27 +0100
Subject: [Chilli] Hot reload of CoovaChilli config
Message-ID: <CAN9kZecx=UqgrhdqRpqTA=HwCBFNL47PHuj2kBw1hShZ_oasrg@mail.gmail.com>

Hi,

I've installed correctly the CoovaChilli 1.2.9 from the source in a debian
distro. I've configured the config file without allowed URL and started the
program.

Now I want to add some allowed URL; the problem is that if I've tried to
reload the config, the changes isn't applied. I've tried with
/etc/init.d/chilli reload and chilli_query reload.

Are there any way for apply this changes in hot?

Thanks,
David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120315/56294679/attachment.html>

From david at coova.com  Mon Mar 19 08:34:28 2012
From: david at coova.com (David Bird)
Date: Mon, 19 Mar 2012 09:34:28 +0100
Subject: [Chilli] Hot reload of CoovaChilli config
In-Reply-To: <CAN9kZecx=UqgrhdqRpqTA=HwCBFNL47PHuj2kBw1hShZ_oasrg@mail.gmail.com>
References: <CAN9kZecx=UqgrhdqRpqTA=HwCBFNL47PHuj2kBw1hShZ_oasrg@mail.gmail.com>
Message-ID: <1332146068.4938.1.camel@david-laptop>

You should be able to kill -HUP <chilli-pid> to have it reload some
configuration. It can't reload certain changes, like primary network
info, but you can change walled garden related values. 

On Thu, 2012-03-15 at 17:59 +0100, David Seira wrote:
> Hi,
> 
> 
> I've installed correctly the CoovaChilli 1.2.9 from the source in a
> debian distro. I've configured the config file without allowed URL and
> started the program.
> 
> 
> Now I want to add some allowed URL; the problem is that if I've tried
> to reload the config, the changes isn't applied. I've tried
> with /etc/init.d/chilli reload and chilli_query reload.
> 
> 
> Are there any way for apply this changes in hot?
> 
> 
> Thanks,
> David
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From oguzhank at bilkent.edu.tr  Mon Mar 19 16:36:41 2012
From: oguzhank at bilkent.edu.tr (Oguzhan Kayhan)
Date: Mon, 19 Mar 2012 18:36:41 +0200
Subject: [Chilli] Hot reload of CoovaChilli config
In-Reply-To: <1332146068.4938.1.camel@david-laptop>
References: <CAN9kZecx=UqgrhdqRpqTA=HwCBFNL47PHuj2kBw1hShZ_oasrg@mail.gmail.com>
	<1332146068.4938.1.camel@david-laptop>
Message-ID: <4f6fb5a0154b149a718a488fb6224757.squirrel@newmail.bilkent.edu.tr>

And also, if you write the same urls to config and main.conf and reload,
coova reads this config from main.conf file and allowed urls works.
It you only write it to config file, u need to retart coova to apply the
config to main.conf.



> You should be able to kill -HUP <chilli-pid> to have it reload some
> configuration. It can't reload certain changes, like primary network
> info, but you can change walled garden related values.
>
> On Thu, 2012-03-15 at 17:59 +0100, David Seira wrote:
>> Hi,
>>
>>
>> I've installed correctly the CoovaChilli 1.2.9 from the source in a
>> debian distro. I've configured the config file without allowed URL and
>> started the program.
>>
>>
>> Now I want to add some allowed URL; the problem is that if I've tried
>> to reload the config, the changes isn't applied. I've tried
>> with /etc/init.d/chilli reload and chilli_query reload.
>>
>>
>> Are there any way for apply this changes in hot?
>>
>>
>> Thanks,
>> David
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>



From davidseira at gmail.com  Tue Mar 20 11:35:35 2012
From: davidseira at gmail.com (David Seira)
Date: Tue, 20 Mar 2012 12:35:35 +0100
Subject: [Chilli] Hot reload of CoovaChilli config
In-Reply-To: <4f6fb5a0154b149a718a488fb6224757.squirrel@newmail.bilkent.edu.tr>
References: <CAN9kZecx=UqgrhdqRpqTA=HwCBFNL47PHuj2kBw1hShZ_oasrg@mail.gmail.com>
	<1332146068.4938.1.camel@david-laptop>
	<4f6fb5a0154b149a718a488fb6224757.squirrel@newmail.bilkent.edu.tr>
Message-ID: <CAN9kZedrj37tPpU6728+Lw8Turp33gU154L5HpNLzibEh+Moag@mail.gmail.com>

Ok. Thanks.

It works perfectly.

El 19 de marzo de 2012 17:36, Oguzhan Kayhan <oguzhank at bilkent.edu.tr>escribi?:

> And also, if you write the same urls to config and main.conf and reload,
> coova reads this config from main.conf file and allowed urls works.
> It you only write it to config file, u need to retart coova to apply the
> config to main.conf.
>
>
>
> > You should be able to kill -HUP <chilli-pid> to have it reload some
> > configuration. It can't reload certain changes, like primary network
> > info, but you can change walled garden related values.
> >
> > On Thu, 2012-03-15 at 17:59 +0100, David Seira wrote:
> >> Hi,
> >>
> >>
> >> I've installed correctly the CoovaChilli 1.2.9 from the source in a
> >> debian distro. I've configured the config file without allowed URL and
> >> started the program.
> >>
> >>
> >> Now I want to add some allowed URL; the problem is that if I've tried
> >> to reload the config, the changes isn't applied. I've tried
> >> with /etc/init.d/chilli reload and chilli_query reload.
> >>
> >>
> >> Are there any way for apply this changes in hot?
> >>
> >>
> >> Thanks,
> >> David
> >> _______________________________________________
> >> Chilli mailing list
> >> Chilli at coova.org
> >> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >
> >
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> >
>
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120320/4bc3b764/attachment.html>

From davidseira at gmail.com  Tue Mar 20 16:55:34 2012
From: davidseira at gmail.com (David Seira)
Date: Tue, 20 Mar 2012 17:55:34 +0100
Subject: [Chilli] Several vlans login page
Message-ID: <CAN9kZec_Tn-rhVBWa4JHeKbwnwpfObGPu3n_oKyqoot-m8yT2A@mail.gmail.com>

Hi.

I have a question about the coova chilli integration with vlans.

I've configured two vlans in the coovachilli device but with the same
external login page:

WAN: 192.168.1.1

LAN:

vlan 10 10.1.0.1 --------->
                                  | ----> login page 192.168.1.10
vlan 20 10.2.0.1 --------->

I have a simple login page that redirect to:

http://10.1.0.1:3990?username=$username&password=$enc_pwd&userurl=$redir

This works when I'm in the vlan 10, but not in the vlan 20. I've tried to
allow the 10.1.0.1 ip in the vlan 20 interface config but it doesn't work.

What can I do for resolve it? Can I have one external login page for
several vlans?

Thanks,
David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120320/41bc0cac/attachment.html>

From miguel.lopes at cabocom.cv  Tue Mar 20 18:50:46 2012
From: miguel.lopes at cabocom.cv (Miguel Lopes - Cabocom)
Date: Tue, 20 Mar 2012 17:50:46 -0100
Subject: [Chilli] Several vlans login page
In-Reply-To: <CAN9kZec_Tn-rhVBWa4JHeKbwnwpfObGPu3n_oKyqoot-m8yT2A@mail.gmail.com>
References: <CAN9kZec_Tn-rhVBWa4JHeKbwnwpfObGPu3n_oKyqoot-m8yT2A@mail.gmail.com>
Message-ID: <003b01cd06ca$5d185a90$17490fb0$@lopes@cabocom.cv>

Hi,

 

I can help with that since we have 7 different VLAN?s in one machine and use
the same login page for all. Create multiple instances of chilli, if you
take a look at chilli folder you have a file called newmulti.sh, it?s a
great tool to create multiple chilli instances configs, example:

 

If you have two VLAN interfaces called VLAN10 and VLAN20 do this:

 

Bash#>./newmulti.sh VLAN10

Bash#>./newmulti.sh VLAN20

 

It will create two folders called VLAN10 and VLAN20 with a separate
configurations for each chilli instance. You can configure them individually
while using the same login page.

 

Check  <http://manajung.blogspot.com/2010/11/setup-vlan-in-coova.html>
http://manajung.blogspot.com/2010/11/setup-vlan-in-coova.html

 

 

Kind Regards / Atentamente,

 

Miguel Lopes

CEO - Director

 

marca_teste

 

Tel - +2382428087

Fax - +2382428088

Email -  <mailto:miguel.lopes at cabocom.cv> miguel.lopes at cabocom.cv

Web -  <http://www.cabocom.cv/> www.cabocom.cv

Facebook -  <http://facebook.cabocom.cv/> facebook.cabocom.cv

 

De: chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] Em nome de
David Seira
Enviada: ter?a-feira, 20 de Mar?o de 2012 15:56
Para: chilli
Assunto: [Chilli] Several vlans login page

 

Hi.

 

I have a question about the coova chilli integration with vlans.

 

I've configured two vlans in the coovachilli device but with the same
external login page:

 

WAN: 192.168.1.1

 

LAN:

 

vlan 10 10.1.0.1 --------->

                                  | ----> login page 192.168.1.10

vlan 20 10.2.0.1 --------->

 

I have a simple login page that redirect to:

 

http://10.1.0.1:3990?username=$username
<http://10.1.0.1:3990?username=$username&password=$enc_pwd&userurl=$redir>
&password=$enc_pwd&userurl=$redir

 

This works when I'm in the vlan 10, but not in the vlan 20. I've tried to
allow the 10.1.0.1 ip in the vlan 20 interface config but it doesn't work.

 

What can I do for resolve it? Can I have one external login page for several
vlans?

 

Thanks,

David

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120320/605fda20/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 9197 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120320/605fda20/attachment-0001.jpg>

From danny at sb-ps.ae  Wed Mar 21 07:08:02 2012
From: danny at sb-ps.ae (Danny Magat)
Date: Wed, 21 Mar 2012 11:08:02 +0400
Subject: [Chilli] Several vlans login page
In-Reply-To: <mailman.38.1332269478.2032.chilli@coova.org>
References: <mailman.38.1332269478.2032.chilli@coova.org>
Message-ID: <000c01cd0731$5d3af7f0$17b0e7d0$@ae>

Hi,

http://manajung.blogspot.com/2010/11/setup-vlan-in-coova.html

this might help...

-----Original Message-----
From: chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] On Behalf
Of chilli-request at coova.org
Sent: Tuesday, March 20, 2012 10:51 PM
To: chilli at coova.org
Subject: Chilli Digest, Vol 28, Issue 22

Send Chilli mailing list submissions to
	chilli at coova.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
or, via email, send a message with subject or body 'help' to
	chilli-request at coova.org

You can reach the person managing the list at
	chilli-owner at coova.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of Chilli digest..."


Today's Topics:

   1. Several vlans login page (David Seira)
   2. Re: Several vlans login page (Miguel Lopes - Cabocom)


----------------------------------------------------------------------

Message: 1
Date: Tue, 20 Mar 2012 17:55:34 +0100
From: David Seira <davidseira at gmail.com>
To: chilli <chilli at coova.org>
Subject: [Chilli] Several vlans login page
Message-ID:
	<CAN9kZec_Tn-rhVBWa4JHeKbwnwpfObGPu3n_oKyqoot-m8yT2A at mail.gmail.com>
Content-Type: text/plain; charset="iso-8859-1"

Hi.

I have a question about the coova chilli integration with vlans.

I've configured two vlans in the coovachilli device but with the same
external login page:

WAN: 192.168.1.1

LAN:

vlan 10 10.1.0.1 --------->
                                  | ----> login page 192.168.1.10
vlan 20 10.2.0.1 --------->

I have a simple login page that redirect to:

http://10.1.0.1:3990?username=$username&password=$enc_pwd&userurl=$redir

This works when I'm in the vlan 10, but not in the vlan 20. I've tried to
allow the 10.1.0.1 ip in the vlan 20 interface config but it doesn't work.

What can I do for resolve it? Can I have one external login page for
several vlans?

Thanks,
David
-------------- next part --------------
An HTML attachment was scrubbed...
URL:
<http://lists.coova.org/pipermail/chilli/attachments/20120320/41bc0cac/attac
hment-0001.html>

------------------------------

Message: 2
Date: Tue, 20 Mar 2012 17:50:46 -0100
From: "Miguel Lopes - Cabocom" <miguel.lopes at cabocom.cv>
To: "'David Seira'" <davidseira at gmail.com>,	"'chilli'"
	<chilli at coova.org>
Subject: Re: [Chilli] Several vlans login page
Message-ID: <003b01cd06ca$5d185a90$17490fb0$@lopes at cabocom.cv>
Content-Type: text/plain; charset="iso-8859-1"

Hi,

 

I can help with that since we have 7 different VLAN?s in one machine and use
the same login page for all. Create multiple instances of chilli, if you
take a look at chilli folder you have a file called newmulti.sh, it?s a
great tool to create multiple chilli instances configs, example:

 

If you have two VLAN interfaces called VLAN10 and VLAN20 do this:

 

Bash#>./newmulti.sh VLAN10

Bash#>./newmulti.sh VLAN20

 

It will create two folders called VLAN10 and VLAN20 with a separate
configurations for each chilli instance. You can configure them individually
while using the same login page.

 

Check  <http://manajung.blogspot.com/2010/11/setup-vlan-in-coova.html>
http://manajung.blogspot.com/2010/11/setup-vlan-in-coova.html

 

 

Kind Regards / Atentamente,

 

Miguel Lopes

CEO - Director

 

marca_teste

 

Tel - +2382428087

Fax - +2382428088

Email -  <mailto:miguel.lopes at cabocom.cv> miguel.lopes at cabocom.cv

Web -  <http://www.cabocom.cv/> www.cabocom.cv

Facebook -  <http://facebook.cabocom.cv/> facebook.cabocom.cv

 

De: chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] Em nome de
David Seira
Enviada: ter?a-feira, 20 de Mar?o de 2012 15:56
Para: chilli
Assunto: [Chilli] Several vlans login page

 

Hi.

 

I have a question about the coova chilli integration with vlans.

 

I've configured two vlans in the coovachilli device but with the same
external login page:

 

WAN: 192.168.1.1

 

LAN:

 

vlan 10 10.1.0.1 --------->

                                  | ----> login page 192.168.1.10

vlan 20 10.2.0.1 --------->

 

I have a simple login page that redirect to:

 

http://10.1.0.1:3990?username=$username
<http://10.1.0.1:3990?username=$username&password=$enc_pwd&userurl=$redir>
&password=$enc_pwd&userurl=$redir

 

This works when I'm in the vlan 10, but not in the vlan 20. I've tried to
allow the 10.1.0.1 ip in the vlan 20 interface config but it doesn't work.

 

What can I do for resolve it? Can I have one external login page for several
vlans?

 

Thanks,

David

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL:
<http://lists.coova.org/pipermail/chilli/attachments/20120320/605fda20/attac
hment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 9197 bytes
Desc: not available
URL:
<http://lists.coova.org/pipermail/chilli/attachments/20120320/605fda20/attac
hment.jpg>

------------------------------

_______________________________________________
Chilli mailing list
Chilli at coova.org
http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


End of Chilli Digest, Vol 28, Issue 22
**************************************



From davidseira at gmail.com  Wed Mar 21 08:30:52 2012
From: davidseira at gmail.com (David Seira)
Date: Wed, 21 Mar 2012 09:30:52 +0100
Subject: [Chilli] Several vlans login page
In-Reply-To: <000c01cd0731$5d3af7f0$17b0e7d0$@ae>
References: <mailman.38.1332269478.2032.chilli@coova.org>
	<000c01cd0731$5d3af7f0$17b0e7d0$@ae>
Message-ID: <CAN9kZeckHvFoEU19ANNFb+Ax8XLNc_P5ENUwHBGW1+PnYr8Mig@mail.gmail.com>

Miguel/Danny,

Thanks for your help. I know how to configure vlans with coova chilli; the
problem is how to configure the coovachilli login page for share the same
external login web page for both vlans.

The problem is when I make the login request to the
IP:3990/logon?username=XXX&password=XXX; if I have 2 vlans I don't know to
which IP make the request. I've tried putting one (10.1.0.1 for example)
and in the other vlan (10.2.0.1) adding to allowed IPs but don't work.

Regards,
David


El 21 de marzo de 2012 08:08, Danny Magat <danny at sb-ps.ae> escribi?:

> Hi,
>
> http://manajung.blogspot.com/2010/11/setup-vlan-in-coova.html
>
> this might help...
>
> -----Original Message-----
> From: chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] On Behalf
> Of chilli-request at coova.org
> Sent: Tuesday, March 20, 2012 10:51 PM
> To: chilli at coova.org
> Subject: Chilli Digest, Vol 28, Issue 22
>
> Send Chilli mailing list submissions to
>        chilli at coova.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>        http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> or, via email, send a message with subject or body 'help' to
>        chilli-request at coova.org
>
> You can reach the person managing the list at
>        chilli-owner at coova.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Chilli digest..."
>
>
> Today's Topics:
>
>   1. Several vlans login page (David Seira)
>   2. Re: Several vlans login page (Miguel Lopes - Cabocom)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Tue, 20 Mar 2012 17:55:34 +0100
> From: David Seira <davidseira at gmail.com>
> To: chilli <chilli at coova.org>
> Subject: [Chilli] Several vlans login page
> Message-ID:
>        <CAN9kZec_Tn-rhVBWa4JHeKbwnwpfObGPu3n_oKyqoot-m8yT2A at mail.gmail.com
> >
> Content-Type: text/plain; charset="iso-8859-1"
>
> Hi.
>
> I have a question about the coova chilli integration with vlans.
>
> I've configured two vlans in the coovachilli device but with the same
> external login page:
>
> WAN: 192.168.1.1
>
> LAN:
>
> vlan 10 10.1.0.1 --------->
>                                  | ----> login page 192.168.1.10
> vlan 20 10.2.0.1 --------->
>
> I have a simple login page that redirect to:
>
> http://10.1.0.1:3990?username=$username&password=$enc_pwd&userurl=$redir
>
> This works when I'm in the vlan 10, but not in the vlan 20. I've tried to
> allow the 10.1.0.1 ip in the vlan 20 interface config but it doesn't work.
>
> What can I do for resolve it? Can I have one external login page for
> several vlans?
>
> Thanks,
> David
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> <
> http://lists.coova.org/pipermail/chilli/attachments/20120320/41bc0cac/attac
> hment-0001.html>
>
> ------------------------------
>
> Message: 2
> Date: Tue, 20 Mar 2012 17:50:46 -0100
> From: "Miguel Lopes - Cabocom" <miguel.lopes at cabocom.cv>
> To: "'David Seira'" <davidseira at gmail.com>,     "'chilli'"
>        <chilli at coova.org>
> Subject: Re: [Chilli] Several vlans login page
> Message-ID: <003b01cd06ca$5d185a90$17490fb0$@lopes at cabocom.cv>
> Content-Type: text/plain; charset="iso-8859-1"
>
> Hi,
>
>
>
> I can help with that since we have 7 different VLAN?s in one machine and
> use
> the same login page for all. Create multiple instances of chilli, if you
> take a look at chilli folder you have a file called newmulti.sh, it?s a
> great tool to create multiple chilli instances configs, example:
>
>
>
> If you have two VLAN interfaces called VLAN10 and VLAN20 do this:
>
>
>
> Bash#>./newmulti.sh VLAN10
>
> Bash#>./newmulti.sh VLAN20
>
>
>
> It will create two folders called VLAN10 and VLAN20 with a separate
> configurations for each chilli instance. You can configure them
> individually
> while using the same login page.
>
>
>
> Check  <http://manajung.blogspot.com/2010/11/setup-vlan-in-coova.html>
> http://manajung.blogspot.com/2010/11/setup-vlan-in-coova.html
>
>
>
>
>
> Kind Regards / Atentamente,
>
>
>
> Miguel Lopes
>
> CEO - Director
>
>
>
> marca_teste
>
>
>
> Tel - +2382428087
>
> Fax - +2382428088
>
> Email -  <mailto:miguel.lopes at cabocom.cv> miguel.lopes at cabocom.cv
>
> Web -  <http://www.cabocom.cv/> www.cabocom.cv
>
> Facebook -  <http://facebook.cabocom.cv/> facebook.cabocom.cv
>
>
>
> De: chilli-bounces at coova.org [mailto:chilli-bounces at coova.org] Em nome de
> David Seira
> Enviada: ter?a-feira, 20 de Mar?o de 2012 15:56
> Para: chilli
> Assunto: [Chilli] Several vlans login page
>
>
>
> Hi.
>
>
>
> I have a question about the coova chilli integration with vlans.
>
>
>
> I've configured two vlans in the coovachilli device but with the same
> external login page:
>
>
>
> WAN: 192.168.1.1
>
>
>
> LAN:
>
>
>
> vlan 10 10.1.0.1 --------->
>
>                                  | ----> login page 192.168.1.10
>
> vlan 20 10.2.0.1 --------->
>
>
>
> I have a simple login page that redirect to:
>
>
>
> http://10.1.0.1:3990?username=$username
> <http://10.1.0.1:3990?username=$username&password=$enc_pwd&userurl=$redir>
> &password=$enc_pwd&userurl=$redir
>
>
>
> This works when I'm in the vlan 10, but not in the vlan 20. I've tried to
> allow the 10.1.0.1 ip in the vlan 20 interface config but it doesn't work.
>
>
>
> What can I do for resolve it? Can I have one external login page for
> several
> vlans?
>
>
>
> Thanks,
>
> David
>
>
>
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> <
> http://lists.coova.org/pipermail/chilli/attachments/20120320/605fda20/attac
> hment.html>
> -------------- next part --------------
> A non-text attachment was scrubbed...
> Name: image001.jpg
> Type: image/jpeg
> Size: 9197 bytes
> Desc: not available
> URL:
> <
> http://lists.coova.org/pipermail/chilli/attachments/20120320/605fda20/attac
> hment.jpg>
>
> ------------------------------
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
>
> End of Chilli Digest, Vol 28, Issue 22
> **************************************
>
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120321/9facbb6c/attachment.html>

From david at coova.com  Wed Mar 21 09:42:51 2012
From: david at coova.com (David Bird)
Date: Wed, 21 Mar 2012 10:42:51 +0100
Subject: [Chilli] Several vlans login page
In-Reply-To: <CAN9kZeckHvFoEU19ANNFb+Ax8XLNc_P5ENUwHBGW1+PnYr8Mig@mail.gmail.com>
References: <mailman.38.1332269478.2032.chilli@coova.org>
	<000c01cd0731$5d3af7f0$17b0e7d0$@ae>
	<CAN9kZeckHvFoEU19ANNFb+Ax8XLNc_P5ENUwHBGW1+PnYr8Mig@mail.gmail.com>
Message-ID: <1332322971.10014.7.camel@david-laptop>

You are given the IP and port of the chilli controller in the initial
redirect query string parameter uamip and uamport. 


On Wed, 2012-03-21 at 09:30 +0100, David Seira wrote:
> Miguel/Danny,
> 
> 
> Thanks for your help. I know how to configure vlans with coova chilli;
> the problem is how to configure the coovachilli login page for share
> the same external login web page for both vlans.
> 
> 
> The problem is when I make the login request to the
> IP:3990/logon?username=XXX&password=XXX; if I have 2 vlans I don't
> know to which IP make the request. I've tried putting one (10.1.0.1
> for example) and in the other vlan (10.2.0.1) adding to allowed IPs
> but don't work.
> 
> 
> Regards,
> David
> 
> 
> El 21 de marzo de 2012 08:08, Danny Magat <danny at sb-ps.ae> escribi?:
>         Hi,
>         
>         http://manajung.blogspot.com/2010/11/setup-vlan-in-coova.html
>         
>         this might help...
>         
>         -----Original Message-----
>         From: chilli-bounces at coova.org
>         [mailto:chilli-bounces at coova.org] On Behalf
>         Of chilli-request at coova.org
>         Sent: Tuesday, March 20, 2012 10:51 PM
>         To: chilli at coova.org
>         Subject: Chilli Digest, Vol 28, Issue 22
>         
>         Send Chilli mailing list submissions to
>                chilli at coova.org
>         
>         To subscribe or unsubscribe via the World Wide Web, visit
>                http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>         or, via email, send a message with subject or body 'help' to
>                chilli-request at coova.org
>         
>         You can reach the person managing the list at
>                chilli-owner at coova.org
>         
>         When replying, please edit your Subject line so it is more
>         specific
>         than "Re: Contents of Chilli digest..."
>         
>         
>         Today's Topics:
>         
>           1. Several vlans login page (David Seira)
>           2. Re: Several vlans login page (Miguel Lopes - Cabocom)
>         
>         
>         ----------------------------------------------------------------------
>         
>         Message: 1
>         Date: Tue, 20 Mar 2012 17:55:34 +0100
>         From: David Seira <davidseira at gmail.com>
>         To: chilli <chilli at coova.org>
>         Subject: [Chilli] Several vlans login page
>         Message-ID:
>         
>          <CAN9kZec_Tn-rhVBWa4JHeKbwnwpfObGPu3n_oKyqoot-m8yT2A at mail.gmail.com>
>         Content-Type: text/plain; charset="iso-8859-1"
>         
>         Hi.
>         
>         I have a question about the coova chilli integration with
>         vlans.
>         
>         I've configured two vlans in the coovachilli device but with
>         the same
>         external login page:
>         
>         WAN: 192.168.1.1
>         
>         LAN:
>         
>         vlan 10 10.1.0.1 --------->
>                                          | ----> login page
>         192.168.1.10
>         vlan 20 10.2.0.1 --------->
>         
>         I have a simple login page that redirect to:
>         
>         http://10.1.0.1:3990?username=$username&password=
>         $enc_pwd&userurl=$redir
>         
>         This works when I'm in the vlan 10, but not in the vlan 20.
>         I've tried to
>         allow the 10.1.0.1 ip in the vlan 20 interface config but it
>         doesn't work.
>         
>         What can I do for resolve it? Can I have one external login
>         page for
>         several vlans?
>         
>         Thanks,
>         David
>         
>         -------------- next part --------------
>         An HTML attachment was scrubbed...
>         URL:
>         <http://lists.coova.org/pipermail/chilli/attachments/20120320/41bc0cac/attac
>         hment-0001.html>
>         
>         ------------------------------
>         
>         Message: 2
>         Date: Tue, 20 Mar 2012 17:50:46 -0100
>         From: "Miguel Lopes - Cabocom" <miguel.lopes at cabocom.cv>
>         To: "'David Seira'" <davidseira at gmail.com>,     "'chilli'"
>                <chilli at coova.org>
>         Subject: Re: [Chilli] Several vlans login page
>         Message-ID: <003b01cd06ca$5d185a90$17490fb0$@lopes at cabocom.cv>
>         Content-Type: text/plain; charset="iso-8859-1"
>         
>         Hi,
>         
>         
>         
>         I can help with that since we have 7 different VLAN?s in one
>         machine and use
>         the same login page for all. Create multiple instances of
>         chilli, if you
>         
>         take a look at chilli folder you have a file called
>         newmulti.sh, it?s a
>         great tool to create multiple chilli instances configs,
>         example:
>         
>         
>         
>         If you have two VLAN interfaces called VLAN10 and VLAN20 do
>         this:
>         
>         
>         
>         Bash#>./newmulti.sh VLAN10
>         
>         Bash#>./newmulti.sh VLAN20
>         
>         
>         
>         It will create two folders called VLAN10 and VLAN20 with a
>         separate
>         configurations for each chilli instance. You can configure
>         them individually
>         while using the same login page.
>         
>         
>         
>         Check
>          <http://manajung.blogspot.com/2010/11/setup-vlan-in-coova.html>
>         http://manajung.blogspot.com/2010/11/setup-vlan-in-coova.html
>         
>         
>         
>         
>         
>         Kind Regards / Atentamente,
>         
>         
>         
>         Miguel Lopes
>         
>         CEO - Director
>         
>         
>         
>         
>         marca_teste
>         
>         
>         
>         Tel - +2382428087
>         
>         Fax - +2382428088
>         
>         
>         Email -  <mailto:miguel.lopes at cabocom.cv>
>         miguel.lopes at cabocom.cv
>         
>         Web -  <http://www.cabocom.cv/> www.cabocom.cv
>         
>         Facebook -  <http://facebook.cabocom.cv/> facebook.cabocom.cv
>         
>         
>         
>         De: chilli-bounces at coova.org [mailto:chilli-bounces at coova.org]
>         Em nome de
>         David Seira
>         
>         Enviada: ter?a-feira, 20 de Mar?o de 2012 15:56
>         Para: chilli
>         Assunto: [Chilli] Several vlans login page
>         
>         
>         
>         Hi.
>         
>         
>         
>         I have a question about the coova chilli integration with
>         vlans.
>         
>         
>         
>         I've configured two vlans in the coovachilli device but with
>         the same
>         external login page:
>         
>         
>         
>         WAN: 192.168.1.1
>         
>         
>         
>         LAN:
>         
>         
>         
>         vlan 10 10.1.0.1 --------->
>         
>                                          | ----> login page
>         192.168.1.10
>         
>         vlan 20 10.2.0.1 --------->
>         
>         
>         
>         I have a simple login page that redirect to:
>         
>         
>         
>         http://10.1.0.1:3990?username=$username
>         
>         <http://10.1.0.1:3990?username=$username&password=
>         $enc_pwd&userurl=$redir>
>         &password=$enc_pwd&userurl=$redir
>         
>         
>         
>         This works when I'm in the vlan 10, but not in the vlan 20.
>         I've tried to
>         allow the 10.1.0.1 ip in the vlan 20 interface config but it
>         doesn't work.
>         
>         
>         
>         What can I do for resolve it? Can I have one external login
>         page for several
>         vlans?
>         
>         
>         
>         Thanks,
>         
>         David
>         
>         
>         
>         
>         -------------- next part --------------
>         An HTML attachment was scrubbed...
>         URL:
>         <http://lists.coova.org/pipermail/chilli/attachments/20120320/605fda20/attac
>         hment.html>
>         -------------- next part --------------
>         A non-text attachment was scrubbed...
>         Name: image001.jpg
>         Type: image/jpeg
>         Size: 9197 bytes
>         Desc: not available
>         URL:
>         <http://lists.coova.org/pipermail/chilli/attachments/20120320/605fda20/attac
>         hment.jpg>
>         
>         ------------------------------
>         
>         _______________________________________________
>         Chilli mailing list
>         Chilli at coova.org
>         http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>         
>         
>         End of Chilli Digest, Vol 28, Issue 22
>         **************************************
>         
>         
>         _______________________________________________
>         Chilli mailing list
>         Chilli at coova.org
>         http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From puchol at me.com  Wed Mar 21 12:51:13 2012
From: puchol at me.com (Mike Puchol)
Date: Wed, 21 Mar 2012 13:51:13 +0100
Subject: [Chilli] Repeated,
	rapid-fire mac-auth requests received by the RADIUS server
Message-ID: <906B2CC4AADA4BCFAE9D2F816005BD8C@me.com>

Hi all,

I'm having an odd problem with my setup, involving Ubiquiti routers and a Radiator server, with MAC authentication against RADIUS enabled. The server will receive a seemingly random number of access-request packets, in rapid succession (even less than 1 second between them), usually between one and six packets.

My first thought is that chilli is sending out requests without a reply wait timer, or a timer set too low, and so it fires away until it gets a reply from the server.

Has anyone else come across this?

Cheers,

Mike
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120321/632b1bc9/attachment.html>

From adam at freerunr.com  Wed Mar 21 17:46:41 2012
From: adam at freerunr.com (Adam Hammond)
Date: Wed, 21 Mar 2012 17:46:41 +0000
Subject: [Chilli] Repeated,
	rapid-fire mac-auth requests received by the RADIUS server
In-Reply-To: <906B2CC4AADA4BCFAE9D2F816005BD8C@me.com>
References: <906B2CC4AADA4BCFAE9D2F816005BD8C@me.com>
Message-ID: <388C3422-26CC-485E-890B-06E5F8235E4D@freerunr.com>

Hi Mike,

If my understanding is correct coova-chilli implements basic mac-auth functionality by sending an authentication packet every time is receives a DHCPREQUEST. If you look at your debug output you'll probably see that devices actually ask for all sorts of ip addresses when talking to dhcp servers and receiving an ip address (self signed, old addresses, the address that are given etc etc). Each request results in an auth attempt. 

I was looking into this the other day as I wanted a system where I only get one access request per device. There is an option that changes the way the macauth process works in chilli:

--strictmacauth	Be strict about MAC Auth (no DHCP reply until we get RADIUS reply)  (default=off)

... which implements macauth functionality how it should be (IMO).

Unfortunately I can't get it to work on 1.2.9 (I haven't tried older versions). When added as an additional option to --macauth I still see lots of auth packets flying around. When I replace --macauth with --strictmacauth then mac auth functionality is un-enabled. I don't see any reference to this 'strictmacauth' in the 'functions' file so I'm not even sure it's implemented any more.

Hopefully David can clear this up and it's a feature I'd really like to use.

cheers,
Adam




On 21 Mar 2012, at 12:51, Mike Puchol wrote:

> Hi all,
> 
> I'm having an odd problem with my setup, involving Ubiquiti routers and a Radiator server, with MAC authentication against RADIUS enabled. The server will receive a seemingly random number of access-request packets, in rapid succession (even less than 1 second between them), usually between one and six packets.
> 
> My first thought is that chilli is sending out requests without a reply wait timer, or a timer set too low, and so it fires away until it gets a reply from the server.
> 
> Has anyone else come across this?
> 
> Cheers,
> 
> Mike
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From david at coova.com  Thu Mar 22 05:45:21 2012
From: david at coova.com (David Bird)
Date: Thu, 22 Mar 2012 06:45:21 +0100
Subject: [Chilli] Repeated,
 rapid-fire mac-auth requests received by the RADIUS server
Message-ID: <dtb3fau1x8x9d2h1lnqhycij.1332395121088@email.android.com>

Using strictmacauth (with macauth) should limit some radius requests. Chilli used to always be 'strict' in that it would not respond to the first dhcp request (instead sends radius which may return setting the IP to use). This made dhcp 'slow' even though most people do not probably use the IP setting feature. I will look into why chilli is sending too many macauth quickly. Though, it may be good for it to not just do it once and never again for the session (may seem to use macauth as primary auth mechanism after adding visitor Macs to database. Maybe I offer a new option for 'dhcpmacauth' that will continue to send auth for dhcp requests, ?with the default being only one Mac auth at first dhcp association (after IP was assigned) , and strictmacauth will have the one (or two) auths - one before IP assignment and possibly one after chilli had assigned an IP (if not otherwise assigned by first radius response).

-------- Original message --------
Subject: Re: [Chilli] Repeated,	rapid-fire mac-auth requests received by the RADIUS server 
From: Adam Hammond <adam at freerunr.com> 
To: Mike Puchol <puchol at me.com> 
CC: chilli at coova.org 

Hi Mike,

If my understanding is correct coova-chilli implements basic mac-auth functionality by sending an authentication packet every time is receives a DHCPREQUEST. If you look at your debug output you'll probably see that devices actually ask for all sorts of ip addresses when talking to dhcp servers and receiving an ip address (self signed, old addresses, the address that are given etc etc). Each request results in an auth attempt. 

I was looking into this the other day as I wanted a system where I only get one access request per device. There is an option that changes the way the macauth process works in chilli:

--strictmacauth	Be strict about MAC Auth (no DHCP reply until we get RADIUS reply)? (default=off)

... which implements macauth functionality how it should be (IMO).

Unfortunately I can't get it to work on 1.2.9 (I haven't tried older versions). When added as an additional option to --macauth I still see lots of auth packets flying around. When I replace --macauth with --strictmacauth then mac auth functionality is un-enabled. I don't see any reference to this 'strictmacauth' in the 'functions' file so I'm not even sure it's implemented any more.

Hopefully David can clear this up and it's a feature I'd really like to use.

cheers,
Adam




On 21 Mar 2012, at 12:51, Mike Puchol wrote:

> Hi all,
> 
> I'm having an odd problem with my setup, involving Ubiquiti routers and a Radiator server, with MAC authentication against RADIUS enabled. The server will receive a seemingly random number of access-request packets, in rapid succession (even less than 1 second between them), usually between one and six packets.
> 
> My first thought is that chilli is sending out requests without a reply wait timer, or a timer set too low, and so it fires away until it gets a reply from the server.
> 
> Has anyone else come across this?
> 
> Cheers,
> 
> Mike
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli

_______________________________________________
Chilli mailing list
Chilli at coova.org
http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120322/12458bfc/attachment.html>

From adam at freerunr.com  Thu Mar 22 11:00:55 2012
From: adam at freerunr.com (Adam Hammond)
Date: Thu, 22 Mar 2012 11:00:55 +0000
Subject: [Chilli] Repeated,
	rapid-fire mac-auth requests received by the RADIUS server
In-Reply-To: <dtb3fau1x8x9d2h1lnqhycij.1332395121088@email.android.com>
References: <dtb3fau1x8x9d2h1lnqhycij.1332395121088@email.android.com>
Message-ID: <EB5BA438-E4BE-4755-A2D7-48C534D1CB7C@freerunr.com>

Great, thanks David.

I'll be happy to help test any of this functionality if/when you implement it in the future.

Adam

On 22 Mar 2012, at 05:45, David Bird wrote:

> Using strictmacauth (with macauth) should limit some radius requests. Chilli used to always be 'strict' in that it would not respond to the first dhcp request (instead sends radius which may return setting the IP to use). This made dhcp 'slow' even though most people do not probably use the IP setting feature. I will look into why chilli is sending too many macauth quickly. Though, it may be good for it to not just do it once and never again for the session (may seem to use macauth as primary auth mechanism after adding visitor Macs to database. Maybe I offer a new option for 'dhcpmacauth' that will continue to send auth for dhcp requests,  with the default being only one Mac auth at first dhcp association (after IP was assigned) , and strictmacauth will have the one (or two) auths - one before IP assignment and possibly one after chilli had assigned an IP (if not otherwise assigned by first radius response).
> 
> 
> -------- Original message --------
> Subject: Re: [Chilli] Repeated,	rapid-fire mac-auth requests received by the RADIUS server 
> From: Adam Hammond <adam at freerunr.com> 
> To: Mike Puchol <puchol at me.com> 
> CC: chilli at coova.org 
> 
> 
> Hi Mike,
> 
> If my understanding is correct coova-chilli implements basic mac-auth functionality by sending an authentication packet every time is receives a DHCPREQUEST. If you look at your debug output you'll probably see that devices actually ask for all sorts of ip addresses when talking to dhcp servers and receiving an ip address (self signed, old addresses, the address that are given etc etc). Each request results in an auth attempt. 
> 
> I was looking into this the other day as I wanted a system where I only get one access request per device. There is an option that changes the way the macauth process works in chilli:
> 
> --strictmacauth	Be strict about MAC Auth (no DHCP reply until we get RADIUS reply)  (default=off)
> 
> ... which implements macauth functionality how it should be (IMO).
> 
> Unfortunately I can't get it to work on 1.2.9 (I haven't tried older versions). When added as an additional option to --macauth I still see lots of auth packets flying around. When I replace --macauth with --strictmacauth then mac auth functionality is un-enabled. I don't see any reference to this 'strictmacauth' in the 'functions' file so I'm not even sure it's implemented any more.
> 
> Hopefully David can clear this up and it's a feature I'd really like to use.
> 
> cheers,
> Adam
> 
> 
> 
> 
> On 21 Mar 2012, at 12:51, Mike Puchol wrote:
> 
> > Hi all,
> > 
> > I'm having an odd problem with my setup, involving Ubiquiti routers and a Radiator server, with MAC authentication against RADIUS enabled. The server will receive a seemingly random number of access-request packets, in rapid succession (even less than 1 second between them), usually between one and six packets.
> > 
> > My first thought is that chilli is sending out requests without a reply wait timer, or a timer set too low, and so it fires away until it gets a reply from the server.
> > 
> > Has anyone else come across this?
> > 
> > Cheers,
> > 
> > Mike
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From maxxer at ufficyo.com  Thu Mar 22 12:57:17 2012
From: maxxer at ufficyo.com (Lorenzo Milesi)
Date: Thu, 22 Mar 2012 13:57:17 +0100 (CET)
Subject: [Chilli] WPAD support
In-Reply-To: <567143066.381001.1332420922417.JavaMail.root@quaglia>
Message-ID: <36936165.381005.1332421037070.JavaMail.root@quaglia>

Hi.

I currently do http filtering using dansguardian+squid and iptables for transparent redirection. 
This solution won't work for https, so I'd like to auto-configure the users' browser to use the proxy using WPAD.

>From what I understand online this can be accomplished using DNS or DHCP.
The DNS solution should be easily achievable, but what about the DHCP one? Coova doesn't support sending such reply I suppose, so if I really want to implement that solution I should setup a local dhcp server and have coova forward dhcp request to it, right?

thanks

From fmacedo at cpd.ufrgs.br  Thu Mar 22 13:01:46 2012
From: fmacedo at cpd.ufrgs.br (Fernando Dutra Fagundes Macedo)
Date: Thu, 22 Mar 2012 10:01:46 -0300
Subject: [Chilli] WPAD support
In-Reply-To: <36936165.381005.1332421037070.JavaMail.root@quaglia>
References: <36936165.381005.1332421037070.JavaMail.root@quaglia>
Message-ID: <4F6B22BA.3020506@cpd.ufrgs.br>

Did you try the dhcpopt line option?

== ChangeLog (CoovaChilli-v1.2.6 svn revision 433) ==
..
* Build time option ''--enable-dhcpopt'' to use the command line option ''--dhcpopt<hex-encoded-binary-dhcp-option>''

Fernando Macedo

Em 22/03/2012 09:57, Lorenzo Milesi escreveu:
> Hi.
>
> I currently do http filtering using dansguardian+squid and iptables for transparent redirection.
> This solution won't work for https, so I'd like to auto-configure the users' browser to use the proxy using WPAD.
>
>  From what I understand online this can be accomplished using DNS or DHCP.
> The DNS solution should be easily achievable, but what about the DHCP one? Coova doesn't support sending such reply I suppose, so if I really want to implement that solution I should setup a local dhcp server and have coova forward dhcp request to it, right?
>
> thanks
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From guy_kamanda at yahoo.com  Thu Mar 22 13:15:55 2012
From: guy_kamanda at yahoo.com (Guy Kamanda)
Date: Thu, 22 Mar 2012 06:15:55 -0700 (PDT)
Subject: [Chilli] Repeated,
	rapid-fire mac-auth requests received by the RADIUS server
In-Reply-To: <EB5BA438-E4BE-4755-A2D7-48C534D1CB7C@freerunr.com>
References: <dtb3fau1x8x9d2h1lnqhycij.1332395121088@email.android.com>
	<EB5BA438-E4BE-4755-A2D7-48C534D1CB7C@freerunr.com>
Message-ID: <1332422155.73147.YahooMailNeo@web160803.mail.bf1.yahoo.com>

Dear All, 


I have a project for hotspot deployment. How can I get help for setting Access control, Raduis, and payment with credits cards, paypal and cash. And what is the price for this?
Forward me to someone who can work here.


BR

Guy



________________________________
 From: Adam Hammond <adam at freerunr.com>
To: David Bird <david at coova.com> 
Cc: chilli at coova.org 
Sent: Thursday, March 22, 2012 12:00 PM
Subject: Re: [Chilli] Repeated, rapid-fire mac-auth requests received by the RADIUS server
 
Great, thanks David.

I'll be happy to help test any of this functionality if/when you implement it in the future.

Adam

On 22 Mar 2012, at 05:45, David Bird wrote:

> Using strictmacauth (with macauth) should limit some radius requests. Chilli used to always be 'strict' in that it would not respond to the first dhcp request (instead sends radius which may return setting the IP to use). This made dhcp 'slow' even though most people do not probably use the IP setting feature. I will look into why chilli is sending too many macauth quickly. Though, it may be good for it to not just do it once and never again for the session (may seem to use macauth as primary auth mechanism after adding visitor Macs to database. Maybe I offer a new option for 'dhcpmacauth' that will continue to send auth for dhcp requests,? with the default being only one Mac auth at first dhcp association (after IP was assigned) , and strictmacauth will have the one (or two) auths - one before IP assignment and possibly one after chilli had assigned an IP (if not otherwise assigned by first radius response).
> 
> 
> -------- Original message --------
> Subject: Re: [Chilli] Repeated,??? rapid-fire mac-auth requests received by the RADIUS server 
> From: Adam Hammond <adam at freerunr.com> 
> To: Mike Puchol <puchol at me.com> 
> CC: chilli at coova.org 
> 
> 
> Hi Mike,
> 
> If my understanding is correct coova-chilli implements basic mac-auth functionality by sending an authentication packet every time is receives a DHCPREQUEST. If you look at your debug output you'll probably see that devices actually ask for all sorts of ip addresses when talking to dhcp servers and receiving an ip address (self signed, old addresses, the address that are given etc etc). Each request results in an auth attempt. 
> 
> I was looking into this the other day as I wanted a system where I only get one access request per device. There is an option that changes the way the macauth process works in chilli:
> 
> --strictmacauth??? Be strict about MAC Auth (no DHCP reply until we get RADIUS reply)? (default=off)
> 
> ... which implements macauth functionality how it should be (IMO).
> 
> Unfortunately I can't get it to work on 1.2.9 (I haven't tried older versions). When added as an additional option to --macauth I still see lots of auth packets flying around. When I replace --macauth with --strictmacauth then mac auth functionality is un-enabled. I don't see any reference to this 'strictmacauth' in the 'functions' file so I'm not even sure it's implemented any more.
> 
> Hopefully David can clear this up and it's a feature I'd really like to use.
> 
> cheers,
> Adam
> 
> 
> 
> 
> On 21 Mar 2012, at 12:51, Mike Puchol wrote:
> 
> > Hi all,
> > 
> > I'm having an odd problem with my setup, involving Ubiquiti routers and a Radiator server, with MAC authentication against RADIUS enabled. The server will receive a seemingly random number of access-request packets, in rapid succession (even less than 1 second between them), usually between one and six packets.
> > 
> > My first thought is that chilli is sending out requests without a reply wait timer, or a timer set too low, and so it fires away until it gets a reply from the server.
> > 
> > Has anyone else come across this?
> > 
> > Cheers,
> > 
> > Mike
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli

_______________________________________________
Chilli mailing list
Chilli at coova.org
http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120322/efc81a8b/attachment.html>

From puchol at me.com  Thu Mar 22 12:26:57 2012
From: puchol at me.com (Mike Puchol)
Date: Thu, 22 Mar 2012 13:26:57 +0100
Subject: [Chilli] Repeated,
 apid-fire mac-auth requests received by the RADIUS server
In-Reply-To: <EB5BA438-E4BE-4755-A2D7-48C534D1CB7C@freerunr.com>
References: <dtb3fau1x8x9d2h1lnqhycij.1332395121088@email.android.com>
	<EB5BA438-E4BE-4755-A2D7-48C534D1CB7C@freerunr.com>
Message-ID: <733E9540DABA48F78D569361ED6D4A81@me.com>

Hi David, 

Thanks for the proposed solution, I think that's the best way to make macauth work, gives scaled flexibility as required.

Cheers,

Mike


On Thursday, March 22, 2012 at 12:00 PM, Adam Hammond wrote:

> Great, thanks David.
> 
> I'll be happy to help test any of this functionality if/when you implement it in the future.
> 
> Adam
> 
> On 22 Mar 2012, at 05:45, David Bird wrote:
> 
> > Using strictmacauth (with macauth) should limit some radius requests. Chilli used to always be 'strict' in that it would not respond to the first dhcp request (instead sends radius which may return setting the IP to use). This made dhcp 'slow' even though most people do not probably use the IP setting feature. I will look into why chilli is sending too many macauth quickly. Though, it may be good for it to not just do it once and never again for the session (may seem to use macauth as primary auth mechanism after adding visitor Macs to database. Maybe I offer a new option for 'dhcpmacauth' that will continue to send auth for dhcp requests, with the default being only one Mac auth at first dhcp association (after IP was assigned) , and strictmacauth will have the one (or two) auths - one before IP assignment and possibly one after chilli had assigned an IP (if not otherwise assigned by first radius response).
> > 
> > 
> > -------- Original message --------
> > Subject: Re: [Chilli] Repeated, rapid-fire mac-auth requests received by the RADIUS server 
> > From: Adam Hammond <adam at freerunr.com (mailto:adam at freerunr.com)> 
> > To: Mike Puchol <puchol at me.com (mailto:puchol at me.com)> 
> > CC: chilli at coova.org (mailto:chilli at coova.org) 
> > 
> > 
> > Hi Mike,
> > 
> > If my understanding is correct coova-chilli implements basic mac-auth functionality by sending an authentication packet every time is receives a DHCPREQUEST. If you look at your debug output you'll probably see that devices actually ask for all sorts of ip addresses when talking to dhcp servers and receiving an ip address (self signed, old addresses, the address that are given etc etc). Each request results in an auth attempt. 
> > 
> > I was looking into this the other day as I wanted a system where I only get one access request per device. There is an option that changes the way the macauth process works in chilli:
> > 
> > --strictmacauth Be strict about MAC Auth (no DHCP reply until we get RADIUS reply) (default=off)
> > 
> > ... which implements macauth functionality how it should be (IMO).
> > 
> > Unfortunately I can't get it to work on 1.2.9 (I haven't tried older versions). When added as an additional option to --macauth I still see lots of auth packets flying around. When I replace --macauth with --strictmacauth then mac auth functionality is un-enabled. I don't see any reference to this 'strictmacauth' in the 'functions' file so I'm not even sure it's implemented any more.
> > 
> > Hopefully David can clear this up and it's a feature I'd really like to use.
> > 
> > cheers,
> > Adam
> > 
> > 
> > 
> > 
> > On 21 Mar 2012, at 12:51, Mike Puchol wrote:
> > 
> > > Hi all,
> > > 
> > > I'm having an odd problem with my setup, involving Ubiquiti routers and a Radiator server, with MAC authentication against RADIUS enabled. The server will receive a seemingly random number of access-request packets, in rapid succession (even less than 1 second between them), usually between one and six packets.
> > > 
> > > My first thought is that chilli is sending out requests without a reply wait timer, or a timer set too low, and so it fires away until it gets a reply from the server.
> > > 
> > > Has anyone else come across this?
> > > 
> > > Cheers,
> > > 
> > > Mike
> > > _______________________________________________
> > > Chilli mailing list
> > > Chilli at coova.org (mailto:Chilli at coova.org)
> > > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> > > 
> > 
> > 
> > _______________________________________________
> > Chilli mailing list
> > Chilli at coova.org (mailto:Chilli at coova.org)
> > http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> > 
> 
> 
> 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120322/0b70690b/attachment-0001.html>

From maxxer at ufficyo.com  Thu Mar 22 13:36:23 2012
From: maxxer at ufficyo.com (Lorenzo Milesi)
Date: Thu, 22 Mar 2012 14:36:23 +0100 (CET)
Subject: [Chilli] WPAD support
In-Reply-To: <4F6B22BA.3020506@cpd.ufrgs.br>
Message-ID: <112705851.381444.1332423383711.JavaMail.root@quaglia>

> Did you try the dhcpopt line option?

I wasn't aware of this! thank you very much, I'll give a look!

From ryan.day at cirrusworks.net  Thu Mar 22 14:26:43 2012
From: ryan.day at cirrusworks.net (Ryan Day)
Date: Thu, 22 Mar 2012 10:26:43 -0400
Subject: [Chilli] iOS
Message-ID: <4F6B36A3.2080500@cirrusworks.net>


I've been supporting a customer using Coova Chilli 1.2.5 for a few
months now. The system works 99.99% of the time, simply because we
haven't put enough customers through to prove higher. They have had 10
instances of connection problems, all iOS devices. The customers are
using a pretty fair split between laptops, Droids, and iOS. There is a
scattering of other devices in the mix.

So my question is, has anyone else seen problems with iOS devices not
registering with Chilli, or suddenly ceasing to access the internet? The
few times where this does happen, users are moving between VLANs while
the SSID stays constant.

Thanks for any insight!

-- 
Ryan Day

CirrusWorks
Beyond Convergence

750 17th Street NW, Suite 1100
Washington, DC 20006


From davidseira at gmail.com  Thu Mar 22 17:25:10 2012
From: davidseira at gmail.com (David Seira)
Date: Thu, 22 Mar 2012 18:25:10 +0100
Subject: [Chilli] ChilliSpot-Max-Input-Gigawords problem
Message-ID: <CAN9kZeejDvTKNSad80PzrZ__3bWE7pUJGVG903m70jqttsn5nw@mail.gmail.com>

Hi.

I'm trying to implement the max bytes limitation in the coova chilli. I've
tried with the ChilliSpot-Max-Input-Octets attribute and it works correctly
until 4GB; then I've tried with the ChilliSpot-Max-Input-Gigawords
attribute but, I don't know why, the coovachilli reset the connection
sending a session timeout accounting packet.

What is the correct way to use this attribute?

Thanks,

David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120322/8f09a006/attachment.html>

From beber at meleeweb.net  Sat Mar 24 00:39:23 2012
From: beber at meleeweb.net (Bertrand Jacquin)
Date: Sat, 24 Mar 2012 01:39:23 +0100
Subject: [Chilli] Compilation issues with 1.2.9
Message-ID: <20120324003921.GD3604@lemonhead.scabb>

Hi,

I'm getting some troubles building Coova Chilli 1.2.9 :

# Case 1 (attached complete log file case1.log)

--enable-statusfile --with-mmap --with-poll --with-ipc-msg :

Making all in src
make[2]: Entering directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'
make[3]: Entering directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o chilli.lo chilli.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c chilli.c  -fPIC -DPIC -o .libs/chilli.o
chilli.c: In function 'chilli_main':
chilli.c:7526:26: error: 'struct tun_t' has no member named '_interface_count'
chilli.c:7527:16: error: 'struct tun_t' has no member named '_interfaces'
make[3]: *** [chilli.lo] Error 1
make[3]: Leaving directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'

tun_t has member _interfaces and _interface_count only if
ENABLE_MULTIROUTE is defined (tun.h) so if --enable-multiroute
is passed to configure

# Case 2 (attached complete log file case2.log)

--enable-statusfile --with-mmap --with-poll --with-ipc-msg --enable-multiroute

/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o net.lo net.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c net.c  -fPIC -DPIC -o .libs/net.o
cc1: warnings being treated as errors
net.c: In function 'net_open_eth':
net.c:1186:22: error: unused variable 'mr'
net.c: In function 'rx_ring':
net.c:1610:5: error: too many arguments to function 'func'
net.c: In function 'setup_rings':
net.c:1826:15: error: unused variable 'unit'
net.c: In function 'set_buffer':
net.c:1915:15: error: unused variable 'unit'
net.c: At top level:
net.c:1935:13: error: 'setup_filter' defined but not used
make[3]: *** [net.lo] Error 1
make[3]: Leaving directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'

net.c:1610 made this function call :

  func(ctx, data + h->tp_mac, h->tp_snaplen);

func is a net_handler that is defined as (net.h) :

  typedef int (*net_handler)(void *ctx, struct pkt_buffer *pb);

net.c should make a 2 parameter call.

This issue can be avoid by undefining USING_MMAP so --without-mmap
passed to configure

# Case 3 (attached complete log file case3.log)

--enable-statusfile --without-mmap --with-poll --with-ipc-msg --enable-multiroute --with-curl --with-ipv6 --enable-miniportal --without-nfqueue --with-pcap

/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o net.lo net.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c net.c  -fPIC -DPIC -o .libs/net.o
net.c: In function 'net_pcap_handler':
net.c:648:5: error: too many arguments to function 'np->func'
cc1: warnings being treated as errors
net.c: In function 'net_read_eth':
net.c:718:5: error: passing argument 4 of 'pcap_dispatch' from incompatible pointer type
/usr/i586-pc-linux-gnu/usr/include/pcap/pcap.h:298:5: note: expected 'u_char *' but argument is of type 'struct netpcap *'
make[3]: *** [net.lo] Error 1
make[3]: Leaving directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'

net.c:648 does :

  np->read = np->func(np->d, (void *)bytes, hdr->caplen);

np is a struct netpcap *
struct netpcap has a func member declared as in net.c:621:

  struct netpcap {
    void *d;
    size_t dlen;
    size_t read;
    net_handler func;
  };

So we should have a 2 parameters call to this net_handler func as case #2.

-- 
Beber
-------------- next part --------------
[32;01m * [39;49;00mPackage:    net-wireless/coova-chilli-1.2.9
[32;01m * [39;49;00mRepository: meleeweb
[32;01m * [39;49;00mMaintainer: maintainer-wanted at gentoo.org
[32;01m * [39;49;00mUSE:        curl elibc_glibc ipv6 kernel_linux miniportal pcap ssl userland_GNU x86
[32;01m * [39;49;00mFEATURES:   sandbox
 [32;01m*[0m Determining =net-wireless/coova-chilli-1.2.9 SYSROOT dependencies ...
 [32;01m*[0m Extracting app-misc/ca-certificates-20111025 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m Extracting net-misc/curl-7.24.0 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./usr/include/curl/curlrules.h
 [32;01m*[0m   ./usr/include/curl/curlbuild.h
 [32;01m*[0m   ./usr/include/curl/typecheck-gcc.h
 [32;01m*[0m   ./usr/include/curl/multi.h
 [32;01m*[0m   ./usr/include/curl/stdcheaders.h
 [32;01m*[0m   ./usr/include/curl/mprintf.h
 [32;01m*[0m   ./usr/include/curl/easy.h
 [32;01m*[0m   ./usr/include/curl/curlver.h
 [32;01m*[0m   ./usr/include/curl/curl.h
 [32;01m*[0m   ./usr/lib/libcurl.so.4.2.0
 [32;01m*[0m   ./usr/lib/pkgconfig/libcurl.pc
 [32;01m*[0m   ./usr/lib/libcurl.so
 [32;01m*[0m   ./usr/lib/libcurl.so.4
 [32;01m*[0m Extracting dev-libs/openssl-1.0.0h to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./usr/include/openssl/kssl.h
 [32;01m*[0m   ./usr/include/openssl/dtls1.h
 [32;01m*[0m   ./usr/include/openssl/tls1.h
 [32;01m*[0m   ./usr/include/openssl/ssl23.h
 [32;01m*[0m   ./usr/include/openssl/ssl3.h
 [32;01m*[0m   ./usr/include/openssl/ssl2.h
 [32;01m*[0m   ./usr/include/openssl/ssl.h
 [32;01m*[0m   ./usr/include/openssl/ts.h
 [32;01m*[0m   ./usr/include/openssl/pqueue.h
 [32;01m*[0m   ./usr/include/openssl/cms.h
 [32;01m*[0m   ./usr/include/openssl/krb5_asn.h
 [32;01m*[0m   ./usr/include/openssl/ui_compat.h
 [32;01m*[0m   ./usr/include/openssl/ui.h
 [32;01m*[0m   ./usr/include/openssl/ocsp.h
 [32;01m*[0m   ./usr/include/openssl/comp.h
 [32;01m*[0m   ./usr/include/openssl/pkcs12.h
 [32;01m*[0m   ./usr/include/openssl/pkcs7.h
 [32;01m*[0m   ./usr/include/openssl/txt_db.h
 [32;01m*[0m   ./usr/include/openssl/conf_api.h
 [32;01m*[0m   ./usr/include/openssl/conf.h
 [32;01m*[0m   ./usr/include/openssl/x509v3.h
 [32;01m*[0m   ./usr/include/openssl/x509_vfy.h
 [32;01m*[0m   ./usr/include/openssl/x509.h
 [32;01m*[0m   ./usr/include/openssl/pem2.h
 [32;01m*[0m   ./usr/include/openssl/pem.h
 [32;01m*[0m   ./usr/include/openssl/asn1t.h
 [32;01m*[0m   ./usr/include/openssl/asn1_mac.h
 [32;01m*[0m   ./usr/include/openssl/asn1.h
 [32;01m*[0m   ./usr/include/openssl/evp.h
 [32;01m*[0m   ./usr/include/openssl/err.h
 [32;01m*[0m   ./usr/include/openssl/rand.h
 [32;01m*[0m   ./usr/include/openssl/lhash.h
 [32;01m*[0m   ./usr/include/openssl/safestack.h
 [32;01m*[0m   ./usr/include/openssl/stack.h
 [32;01m*[0m   ./usr/include/openssl/bio.h
 [32;01m*[0m   ./usr/include/openssl/buffer.h
 [32;01m*[0m   ./usr/include/openssl/engine.h
 [32;01m*[0m   ./usr/include/openssl/dso.h
 [32;01m*[0m   ./usr/include/openssl/ecdh.h
 [32;01m*[0m   ./usr/include/openssl/dh.h
 [32;01m*[0m   ./usr/include/openssl/ecdsa.h
 [32;01m*[0m   ./usr/include/openssl/dsa.h
 [32;01m*[0m   ./usr/include/openssl/rsa.h
 [32;01m*[0m   ./usr/include/openssl/ec.h
 [32;01m*[0m   ./usr/include/openssl/bn.h
 [32;01m*[0m   ./usr/include/openssl/modes.h
 [32;01m*[0m   ./usr/include/openssl/seed.h
 [32;01m*[0m   ./usr/include/openssl/camellia.h
 [32;01m*[0m   ./usr/include/openssl/cast.h
 [32;01m*[0m   ./usr/include/openssl/blowfish.h
 [32;01m*[0m   ./usr/include/openssl/idea.h
 [32;01m*[0m   ./usr/include/openssl/rc5.h
 [32;01m*[0m   ./usr/include/openssl/rc4.h
 [32;01m*[0m   ./usr/include/openssl/rc2.h
 [32;01m*[0m   ./usr/include/openssl/aes.h
 [32;01m*[0m   ./usr/include/openssl/des_old.h
 [32;01m*[0m   ./usr/include/openssl/des.h
 [32;01m*[0m   ./usr/include/openssl/whrlpool.h
 [32;01m*[0m   ./usr/include/openssl/ripemd.h
 [32;01m*[0m   ./usr/include/openssl/hmac.h
 [32;01m*[0m   ./usr/include/openssl/mdc2.h
 [32;01m*[0m   ./usr/include/openssl/sha.h
 [32;01m*[0m   ./usr/include/openssl/md5.h
 [32;01m*[0m   ./usr/include/openssl/md4.h
 [32;01m*[0m   ./usr/include/openssl/obj_mac.h
 [32;01m*[0m   ./usr/include/openssl/objects.h
 [32;01m*[0m   ./usr/include/openssl/ossl_typ.h
 [32;01m*[0m   ./usr/include/openssl/symhacks.h
 [32;01m*[0m   ./usr/include/openssl/ebcdic.h
 [32;01m*[0m   ./usr/include/openssl/opensslconf.h
 [32;01m*[0m   ./usr/include/openssl/opensslv.h
 [32;01m*[0m   ./usr/include/openssl/crypto.h
 [32;01m*[0m   ./usr/include/openssl/e_os2.h
 [32;01m*[0m   ./usr/lib/libssl.so
 [32;01m*[0m   ./usr/lib/libcrypto.so
 [32;01m*[0m   ./usr/lib/libssl.so.1.0.0
 [32;01m*[0m   ./usr/lib/libcrypto.so.1.0.0
 [32;01m*[0m   ./usr/lib/pkgconfig/openssl.pc
 [32;01m*[0m   ./usr/lib/pkgconfig/libssl.pc
 [32;01m*[0m   ./usr/lib/pkgconfig/libcrypto.pc
 [32;01m*[0m   ./usr/lib/engines/libgost.so
 [32;01m*[0m   ./usr/lib/engines/libcapi.so
 [32;01m*[0m   ./usr/lib/engines/libpadlock.so
 [32;01m*[0m   ./usr/lib/engines/libubsec.so
 [32;01m*[0m   ./usr/lib/engines/libsureware.so
 [32;01m*[0m   ./usr/lib/engines/libnuron.so
 [32;01m*[0m   ./usr/lib/engines/libchil.so
 [32;01m*[0m   ./usr/lib/engines/libgmp.so
 [32;01m*[0m   ./usr/lib/engines/libcswift.so
 [32;01m*[0m   ./usr/lib/engines/libatalla.so
 [32;01m*[0m   ./usr/lib/engines/libaep.so
 [32;01m*[0m   ./usr/lib/engines/lib4758cca.so
 [32;01m*[0m Extracting sys-apps/debianutils-3.4.4 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m Extracting sys-apps/coreutils-8.14 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m Extracting sys-libs/libcap-2.22 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./lib/libcap.so.2.22
 [32;01m*[0m   ./lib/libcap.so.2
 [32;01m*[0m   ./usr/lib/libcap.a
 [32;01m*[0m   ./usr/lib/libcap.so
 [32;01m*[0m   ./usr/include/sys/capability.h
 [32;01m*[0m Extracting sys-apps/attr-2.4.46-r1 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./lib/libattr.so.1.1.0
 [32;01m*[0m   ./lib/libattr.so.1
 [32;01m*[0m   ./usr/include/attr/libattr.h
 [32;01m*[0m   ./usr/include/attr/error_context.h
 [32;01m*[0m   ./usr/include/attr/xattr.h
 [32;01m*[0m   ./usr/include/attr/attributes.h
 [32;01m*[0m   ./usr/lib/libattr.so
 [32;01m*[0m Extracting sys-libs/zlib-1.2.5-r2 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./lib/libz.so.1.2.5
 [32;01m*[0m   ./lib/libz.so.1
 [32;01m*[0m   ./usr/include/zconf.h
 [32;01m*[0m   ./usr/include/zlib.h
 [32;01m*[0m   ./usr/lib/libz.a
 [32;01m*[0m   ./usr/lib/libz.so
 [32;01m*[0m   ./usr/lib/pkgconfig/zlib.pc
 [32;01m*[0m Extracting net-libs/libpcap-1.1.1-r1 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./usr/include/pcap-namedb.h
 [32;01m*[0m   ./usr/include/pcap-bpf.h
 [32;01m*[0m   ./usr/include/pcap.h
 [32;01m*[0m   ./usr/include/pcap/usb.h
 [32;01m*[0m   ./usr/include/pcap/vlan.h
 [32;01m*[0m   ./usr/include/pcap/sll.h
 [32;01m*[0m   ./usr/include/pcap/pcap.h
 [32;01m*[0m   ./usr/include/pcap/namedb.h
 [32;01m*[0m   ./usr/include/pcap/ipnet.h
 [32;01m*[0m   ./usr/include/pcap/bluetooth.h
 [32;01m*[0m   ./usr/include/pcap/bpf.h
 [32;01m*[0m   ./usr/lib/libpcap.a
 [32;01m*[0m   ./usr/lib/libpcap.so.1.1.1
 [32;01m*[0m   ./usr/lib/libpcap.so
 [32;01m*[0m   ./usr/lib/libpcap.so.1
 [32;01m*[0m Extracting dev-libs/libnl-1.1-r2 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./usr/include/netlink/utils.h
 [32;01m*[0m   ./usr/include/netlink/types.h
 [32;01m*[0m   ./usr/include/netlink/socket.h
 [32;01m*[0m   ./usr/include/netlink/object.h
 [32;01m*[0m   ./usr/include/netlink/object-api.h
 [32;01m*[0m   ./usr/include/netlink/netlink.h
 [32;01m*[0m   ./usr/include/netlink/netlink-kernel.h
 [32;01m*[0m   ./usr/include/netlink/netlink-compat.h
 [32;01m*[0m   ./usr/include/netlink/msg.h
 [32;01m*[0m   ./usr/include/netlink/list.h
 [32;01m*[0m   ./usr/include/netlink/handlers.h
 [32;01m*[0m   ./usr/include/netlink/data.h
 [32;01m*[0m   ./usr/include/netlink/cache.h
 [32;01m*[0m   ./usr/include/netlink/cache-api.h
 [32;01m*[0m   ./usr/include/netlink/attr.h
 [32;01m*[0m   ./usr/include/netlink/addr.h
 [32;01m*[0m   ./usr/include/netlink/fib_lookup/request.h
 [32;01m*[0m   ./usr/include/netlink/fib_lookup/lookup.h
 [32;01m*[0m   ./usr/include/netlink/genl/mngt.h
 [32;01m*[0m   ./usr/include/netlink/genl/genl.h
 [32;01m*[0m   ./usr/include/netlink/genl/family.h
 [32;01m*[0m   ./usr/include/netlink/genl/ctrl.h
 [32;01m*[0m   ./usr/include/netlink/route/tc.h
 [32;01m*[0m   ./usr/include/netlink/route/rule.h
 [32;01m*[0m   ./usr/include/netlink/route/rtnl.h
 [32;01m*[0m   ./usr/include/netlink/route/route.h
 [32;01m*[0m   ./usr/include/netlink/route/qdisc.h
 [32;01m*[0m   ./usr/include/netlink/route/qdisc-modules.h
 [32;01m*[0m   ./usr/include/netlink/route/nexthop.h
 [32;01m*[0m   ./usr/include/netlink/route/neightbl.h
 [32;01m*[0m   ./usr/include/netlink/route/neighbour.h
 [32;01m*[0m   ./usr/include/netlink/route/link.h
 [32;01m*[0m   ./usr/include/netlink/route/classifier.h
 [32;01m*[0m   ./usr/include/netlink/route/classifier-modules.h
 [32;01m*[0m   ./usr/include/netlink/route/class.h
 [32;01m*[0m   ./usr/include/netlink/route/class-modules.h
 [32;01m*[0m   ./usr/include/netlink/route/addr.h
 [32;01m*[0m   ./usr/include/netlink/route/cls/u32.h
 [32;01m*[0m   ./usr/include/netlink/route/cls/police.h
 [32;01m*[0m   ./usr/include/netlink/route/cls/fw.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/tbf.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/sfq.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/red.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/prio.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/netem.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/htb.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/fifo.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/dsmark.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/cbq.h
 [32;01m*[0m   ./usr/lib/libnl.so.1.1
 [32;01m*[0m   ./usr/lib/pkgconfig/libnl-1.pc
 [32;01m*[0m   ./usr/lib/libnl.so
 [32;01m*[0m   ./usr/lib/libnl.so.1
 [32;01m*[0m Fixing SYSROOT .la files
>>> Unpacking source...
>>> Unpacking coova-chilli-1.2.9.tar.gz to /var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work
>>> Source unpacked in /var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work
>>> Preparing source in /var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9 ...
>>> Source prepared.
>>> Configuring source in /var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9 ...
 * econf: updating coova-chilli-1.2.9/config.sub with /usr/share/gnuconfig/config.sub
 * econf: updating coova-chilli-1.2.9/config.guess with /usr/share/gnuconfig/config.guess
./configure --prefix=/usr --build=x86_64-pc-linux-gnu --host=i586-pc-linux-gnu --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --disable-dependency-tracking --enable-statusfile --with-mmap --with-poll --with-ipc-msg
configure: loading site script /usr/share/config.site
configure: loading site script /usr/share/crossdev/include/site/linux
configure: loading site script /usr/share/crossdev/include/site/linux-gnu
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for i586-pc-linux-gnu-strip... i586-pc-linux-gnu-strip
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking for i586-pc-linux-gnu-gcc... i586-pc-linux-gnu-gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... yes
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether i586-pc-linux-gnu-gcc accepts -g... yes
checking for i586-pc-linux-gnu-gcc option to accept ISO C89... none needed
checking for style of include used by make... GNU
checking dependency style of i586-pc-linux-gnu-gcc... none
checking build system type... x86_64-pc-linux-gnu
checking host system type... i586-pc-linux-gnu
checking how to print strings... printf
checking for a sed that does not truncate output... /bin/sed
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for fgrep... /bin/grep -F
checking for ld used by i586-pc-linux-gnu-gcc... /usr/libexec/gcc/i586-pc-linux-gnu/ld
checking if the linker (/usr/libexec/gcc/i586-pc-linux-gnu/ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/bin/i586-pc-linux-gnu-nm -B
checking the name lister (/usr/bin/i586-pc-linux-gnu-nm -B) interface... BSD nm
checking whether ln -s works... yes
checking the maximum length of command line arguments... 1572864
checking whether the shell understands some XSI constructs... yes
checking whether the shell understands "+="... yes
checking how to convert x86_64-pc-linux-gnu file names to i586-pc-linux-gnu format... func_convert_file_noop
checking how to convert x86_64-pc-linux-gnu file names to toolchain format... func_convert_file_noop
checking for /usr/libexec/gcc/i586-pc-linux-gnu/ld option to reload object files... -r
checking for i586-pc-linux-gnu-objdump... i586-pc-linux-gnu-objdump
checking how to recognize dependent libraries... pass_all
checking for i586-pc-linux-gnu-dlltool... no
checking for dlltool... no
checking how to associate runtime and link libraries... printf %s\n
checking for i586-pc-linux-gnu-ar... i586-pc-linux-gnu-ar
checking for archiver @FILE support... @
checking for i586-pc-linux-gnu-strip... (cached) i586-pc-linux-gnu-strip
checking for i586-pc-linux-gnu-ranlib... i586-pc-linux-gnu-ranlib
checking command to parse /usr/bin/i586-pc-linux-gnu-nm -B output from i586-pc-linux-gnu-gcc object... ok
checking for sysroot... no
checking for i586-pc-linux-gnu-mt... no
checking for mt... no
checking if : is a manifest tool... no
checking how to run the C preprocessor... i586-pc-linux-gnu-gcc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking for objdir... .libs
checking if i586-pc-linux-gnu-gcc supports -fno-rtti -fno-exceptions... no
checking for i586-pc-linux-gnu-gcc option to produce PIC... -fPIC -DPIC
checking if i586-pc-linux-gnu-gcc PIC flag -fPIC -DPIC works... yes
checking if i586-pc-linux-gnu-gcc static flag -static works... yes
checking if i586-pc-linux-gnu-gcc supports -c -o file.o... yes
checking if i586-pc-linux-gnu-gcc supports -c -o file.o... (cached) yes
checking whether the i586-pc-linux-gnu-gcc linker (/usr/libexec/gcc/i586-pc-linux-gnu/ld) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
linux
checking if if_packet.h has tpacket_stats defined... yes
checking if tpacket_auxdata struct has tp_vlan_tci member... yes
checking for ANSI C header files... (cached) yes
checking arpa/inet.h usability... yes
checking arpa/inet.h presence... yes
checking for arpa/inet.h... yes
checking errno.h usability... yes
checking errno.h presence... yes
checking for errno.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking dirent.h usability... yes
checking dirent.h presence... yes
checking for dirent.h... yes
checking netdb.h usability... yes
checking netdb.h presence... yes
checking for netdb.h... yes
checking netinet/in.h usability... yes
checking netinet/in.h presence... yes
checking for netinet/in.h... yes
checking netinet/tcp.h usability... yes
checking netinet/tcp.h presence... yes
checking for netinet/tcp.h... yes
checking for stdint.h... (cached) yes
checking stddef.h usability... yes
checking stddef.h presence... yes
checking for stddef.h... yes
checking for stdlib.h... (cached) yes
checking for string.h... (cached) yes
checking sys/ioctl.h usability... yes
checking sys/ioctl.h presence... yes
checking for sys/ioctl.h... yes
checking sys/socket.h usability... yes
checking sys/socket.h presence... yes
checking for sys/socket.h... yes
checking sys/sysinfo.h usability... yes
checking sys/sysinfo.h presence... yes
checking for sys/sysinfo.h... yes
checking sys/param.h usability... yes
checking sys/param.h presence... yes
checking for sys/param.h... yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking time.h usability... yes
checking time.h presence... yes
checking for time.h... yes
checking sys/ipc.h usability... yes
checking sys/ipc.h presence... yes
checking for sys/ipc.h... yes
checking sys/msg.h usability... yes
checking sys/msg.h presence... yes
checking for sys/msg.h... yes
checking signal.h usability... yes
checking signal.h presence... yes
checking for signal.h... yes
checking sys/wait.h usability... yes
checking sys/wait.h presence... yes
checking for sys/wait.h... yes
checking sys/un.h usability... yes
checking sys/un.h presence... yes
checking for sys/un.h... yes
checking ifaddrs.h usability... yes
checking ifaddrs.h presence... yes
checking for ifaddrs.h... yes
checking for sys/stat.h... (cached) yes
checking for sys/types.h... (cached) yes
checking regex.h usability... yes
checking regex.h presence... yes
checking for regex.h... yes
checking syslog.h usability... yes
checking syslog.h presence... yes
checking for syslog.h... yes
checking poll.h usability... yes
checking poll.h presence... yes
checking for poll.h... yes
checking sys/epoll.h usability... yes
checking sys/epoll.h presence... yes
checking for sys/epoll.h... yes
checking for unistd.h... (cached) yes
checking endian.h usability... yes
checking endian.h presence... yes
checking for endian.h... yes
checking libgen.h usability... yes
checking libgen.h presence... yes
checking for libgen.h... yes
checking asm/types.h usability... yes
checking asm/types.h presence... yes
checking for asm/types.h... yes
checking for pwd.h... (cached) yes
checking grp.h usability... yes
checking grp.h presence... yes
checking for grp.h... yes
checking for resolv.h... yes
checking for net/route.h... yes
checking for net/if.h... yes
checking for net/if_arp.h... yes
checking for net/if_tun.h... no
checking for net/ethernet.h... yes
checking for an ANSI C-conforming const... yes
checking for mode_t... yes
checking whether time.h and sys/time.h may both be included... yes
checking for pid_t... yes
checking vfork.h usability... no
checking vfork.h presence... no
checking for vfork.h... no
checking for fork... yes
checking for vfork... yes
checking for working fork... (cached) yes
checking for working vfork... (cached) yes
checking whether i586-pc-linux-gnu-gcc needs -traditional... no
checking for working memcmp... no
checking sys/select.h usability... yes
checking sys/select.h presence... yes
checking for sys/select.h... yes
checking for sys/socket.h... (cached) yes
checking types of arguments for select... int,fd_set *,struct timeval *
checking for gethostbyname... yes
checking for getprotoent... yes
checking for gettimeofday... yes
checking for inet_ntoa... yes
checking for memset... yes
checking for select... yes
checking for socket... yes
checking for strdup... yes
checking for strerror... yes
checking for strstr... yes
checking for strtol... yes
checking for getline... yes
checking for dirname... yes
checking for glob... yes
checking for getaddrinfo... (cached) yes
checking for getnameinfo... yes
checking for getifaddrs... yes
checking for sysinfo... yes
checking for res_init in -lresolv... no
checking for clock_gettime in -lrt... yes
configure: creating ./config.status
config.status: creating Makefile
config.status: creating bstring/Makefile
config.status: creating src/Makefile
config.status: creating src/mssl/Makefile
config.status: creating www/Makefile
config.status: creating doc/Makefile
config.status: creating conf/Makefile
config.status: creating debian/Makefile
config.status: creating miniportal/Makefile
config.status: creating json/Makefile
config.status: creating distro/Makefile
config.status: creating distro/suse/coova-chilli.spec
config.status: creating distro/redhat/coova-chilli.spec
config.status: creating config.h
config.status: executing depfiles commands
config.status: executing libtool commands
>>> Source configured.
>>> Compiling source in /var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9 ...
make -j1 
make  all-recursive
make[1]: Entering directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9'
Making all in bstring
make[2]: Entering directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/bstring'
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..     -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o bstrlib.lo bstrlib.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c bstrlib.c  -fPIC -DPIC -o .libs/bstrlib.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c bstrlib.c -o bstrlib.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..     -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o snprintf.lo snprintf.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c snprintf.c  -fPIC -DPIC -o .libs/snprintf.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c snprintf.c -o snprintf.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=link i586-pc-linux-gnu-gcc  -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer  -L/usr/i586-pc-linux-gnu/lib -L/usr/i586-pc-linux-gnu/usr/lib -o libbstring.la -rpath /usr/lib bstrlib.lo snprintf.lo  -lrt 
libtool: link: i586-pc-linux-gnu-gcc -shared  -fPIC -DPIC  .libs/bstrlib.o .libs/snprintf.o   -L/usr/i586-pc-linux-gnu/lib -L/usr/i586-pc-linux-gnu/usr/lib -lrt  -march=geode -Os -mmmx -m3dnow   -Wl,-soname -Wl,libbstring.so.0 -o .libs/libbstring.so.0.0.0
libtool: link: (cd ".libs" && rm -f "libbstring.so.0" && ln -s "libbstring.so.0.0.0" "libbstring.so.0")
libtool: link: (cd ".libs" && rm -f "libbstring.so" && ln -s "libbstring.so.0.0.0" "libbstring.so")
libtool: link: i586-pc-linux-gnu-ar cru .libs/libbstring.a  bstrlib.o snprintf.o
libtool: link: i586-pc-linux-gnu-ranlib .libs/libbstring.a
libtool: link: ( cd ".libs" && rm -f "libbstring.la" && ln -s "../libbstring.la" "libbstring.la" )
make[2]: Leaving directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/bstring'
Making all in src
make[2]: Entering directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'
make[3]: Entering directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o chilli.lo chilli.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c chilli.c  -fPIC -DPIC -o .libs/chilli.o
chilli.c: In function 'chilli_main':
chilli.c:7526:26: error: 'struct tun_t' has no member named '_interface_count'
chilli.c:7527:16: error: 'struct tun_t' has no member named '_interfaces'
make[3]: *** [chilli.lo] Error 1
make[3]: Leaving directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9'
make: *** [all] Error 2
 [31;01m*[0m ERROR: net-wireless/coova-chilli-1.2.9 failed (compile phase):
 [31;01m*[0m   emake failed
 [31;01m*[0m 
 [31;01m*[0m If you need support, post the output of 'emerge --info =net-wireless/coova-chilli-1.2.9',
 [31;01m*[0m the complete build log and the output of 'emerge -pqv =net-wireless/coova-chilli-1.2.9'.
 [31;01m*[0m The complete build log is located at '/data/cross/alix3-i586/firmware/var/log/portage/net-wireless:coova-chilli-1.2.9:20120324-001230.log'.
 [31;01m*[0m The ebuild environment file is located at '/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/temp/environment'.
 [31;01m*[0m S: '/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9'
-------------- next part --------------
[32;01m * [39;49;00mPackage:    net-wireless/coova-chilli-1.2.9
[32;01m * [39;49;00mRepository: meleeweb
[32;01m * [39;49;00mMaintainer: maintainer-wanted at gentoo.org
[32;01m * [39;49;00mUSE:        curl elibc_glibc ipv6 kernel_linux miniportal pcap ssl userland_GNU x86
[32;01m * [39;49;00mFEATURES:   sandbox
 [32;01m*[0m Determining =net-wireless/coova-chilli-1.2.9 SYSROOT dependencies ...
 [32;01m*[0m Extracting app-misc/ca-certificates-20111025 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m Extracting net-misc/curl-7.24.0 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./usr/include/curl/curlrules.h
 [32;01m*[0m   ./usr/include/curl/curlbuild.h
 [32;01m*[0m   ./usr/include/curl/typecheck-gcc.h
 [32;01m*[0m   ./usr/include/curl/multi.h
 [32;01m*[0m   ./usr/include/curl/stdcheaders.h
 [32;01m*[0m   ./usr/include/curl/mprintf.h
 [32;01m*[0m   ./usr/include/curl/easy.h
 [32;01m*[0m   ./usr/include/curl/curlver.h
 [32;01m*[0m   ./usr/include/curl/curl.h
 [32;01m*[0m   ./usr/lib/libcurl.so.4.2.0
 [32;01m*[0m   ./usr/lib/pkgconfig/libcurl.pc
 [32;01m*[0m   ./usr/lib/libcurl.so
 [32;01m*[0m   ./usr/lib/libcurl.so.4
 [32;01m*[0m Extracting dev-libs/openssl-1.0.0h to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./usr/include/openssl/kssl.h
 [32;01m*[0m   ./usr/include/openssl/dtls1.h
 [32;01m*[0m   ./usr/include/openssl/tls1.h
 [32;01m*[0m   ./usr/include/openssl/ssl23.h
 [32;01m*[0m   ./usr/include/openssl/ssl3.h
 [32;01m*[0m   ./usr/include/openssl/ssl2.h
 [32;01m*[0m   ./usr/include/openssl/ssl.h
 [32;01m*[0m   ./usr/include/openssl/ts.h
 [32;01m*[0m   ./usr/include/openssl/pqueue.h
 [32;01m*[0m   ./usr/include/openssl/cms.h
 [32;01m*[0m   ./usr/include/openssl/krb5_asn.h
 [32;01m*[0m   ./usr/include/openssl/ui_compat.h
 [32;01m*[0m   ./usr/include/openssl/ui.h
 [32;01m*[0m   ./usr/include/openssl/ocsp.h
 [32;01m*[0m   ./usr/include/openssl/comp.h
 [32;01m*[0m   ./usr/include/openssl/pkcs12.h
 [32;01m*[0m   ./usr/include/openssl/pkcs7.h
 [32;01m*[0m   ./usr/include/openssl/txt_db.h
 [32;01m*[0m   ./usr/include/openssl/conf_api.h
 [32;01m*[0m   ./usr/include/openssl/conf.h
 [32;01m*[0m   ./usr/include/openssl/x509v3.h
 [32;01m*[0m   ./usr/include/openssl/x509_vfy.h
 [32;01m*[0m   ./usr/include/openssl/x509.h
 [32;01m*[0m   ./usr/include/openssl/pem2.h
 [32;01m*[0m   ./usr/include/openssl/pem.h
 [32;01m*[0m   ./usr/include/openssl/asn1t.h
 [32;01m*[0m   ./usr/include/openssl/asn1_mac.h
 [32;01m*[0m   ./usr/include/openssl/asn1.h
 [32;01m*[0m   ./usr/include/openssl/evp.h
 [32;01m*[0m   ./usr/include/openssl/err.h
 [32;01m*[0m   ./usr/include/openssl/rand.h
 [32;01m*[0m   ./usr/include/openssl/lhash.h
 [32;01m*[0m   ./usr/include/openssl/safestack.h
 [32;01m*[0m   ./usr/include/openssl/stack.h
 [32;01m*[0m   ./usr/include/openssl/bio.h
 [32;01m*[0m   ./usr/include/openssl/buffer.h
 [32;01m*[0m   ./usr/include/openssl/engine.h
 [32;01m*[0m   ./usr/include/openssl/dso.h
 [32;01m*[0m   ./usr/include/openssl/ecdh.h
 [32;01m*[0m   ./usr/include/openssl/dh.h
 [32;01m*[0m   ./usr/include/openssl/ecdsa.h
 [32;01m*[0m   ./usr/include/openssl/dsa.h
 [32;01m*[0m   ./usr/include/openssl/rsa.h
 [32;01m*[0m   ./usr/include/openssl/ec.h
 [32;01m*[0m   ./usr/include/openssl/bn.h
 [32;01m*[0m   ./usr/include/openssl/modes.h
 [32;01m*[0m   ./usr/include/openssl/seed.h
 [32;01m*[0m   ./usr/include/openssl/camellia.h
 [32;01m*[0m   ./usr/include/openssl/cast.h
 [32;01m*[0m   ./usr/include/openssl/blowfish.h
 [32;01m*[0m   ./usr/include/openssl/idea.h
 [32;01m*[0m   ./usr/include/openssl/rc5.h
 [32;01m*[0m   ./usr/include/openssl/rc4.h
 [32;01m*[0m   ./usr/include/openssl/rc2.h
 [32;01m*[0m   ./usr/include/openssl/aes.h
 [32;01m*[0m   ./usr/include/openssl/des_old.h
 [32;01m*[0m   ./usr/include/openssl/des.h
 [32;01m*[0m   ./usr/include/openssl/whrlpool.h
 [32;01m*[0m   ./usr/include/openssl/ripemd.h
 [32;01m*[0m   ./usr/include/openssl/hmac.h
 [32;01m*[0m   ./usr/include/openssl/mdc2.h
 [32;01m*[0m   ./usr/include/openssl/sha.h
 [32;01m*[0m   ./usr/include/openssl/md5.h
 [32;01m*[0m   ./usr/include/openssl/md4.h
 [32;01m*[0m   ./usr/include/openssl/obj_mac.h
 [32;01m*[0m   ./usr/include/openssl/objects.h
 [32;01m*[0m   ./usr/include/openssl/ossl_typ.h
 [32;01m*[0m   ./usr/include/openssl/symhacks.h
 [32;01m*[0m   ./usr/include/openssl/ebcdic.h
 [32;01m*[0m   ./usr/include/openssl/opensslconf.h
 [32;01m*[0m   ./usr/include/openssl/opensslv.h
 [32;01m*[0m   ./usr/include/openssl/crypto.h
 [32;01m*[0m   ./usr/include/openssl/e_os2.h
 [32;01m*[0m   ./usr/lib/libssl.so
 [32;01m*[0m   ./usr/lib/libcrypto.so
 [32;01m*[0m   ./usr/lib/libssl.so.1.0.0
 [32;01m*[0m   ./usr/lib/libcrypto.so.1.0.0
 [32;01m*[0m   ./usr/lib/pkgconfig/openssl.pc
 [32;01m*[0m   ./usr/lib/pkgconfig/libssl.pc
 [32;01m*[0m   ./usr/lib/pkgconfig/libcrypto.pc
 [32;01m*[0m   ./usr/lib/engines/libgost.so
 [32;01m*[0m   ./usr/lib/engines/libcapi.so
 [32;01m*[0m   ./usr/lib/engines/libpadlock.so
 [32;01m*[0m   ./usr/lib/engines/libubsec.so
 [32;01m*[0m   ./usr/lib/engines/libsureware.so
 [32;01m*[0m   ./usr/lib/engines/libnuron.so
 [32;01m*[0m   ./usr/lib/engines/libchil.so
 [32;01m*[0m   ./usr/lib/engines/libgmp.so
 [32;01m*[0m   ./usr/lib/engines/libcswift.so
 [32;01m*[0m   ./usr/lib/engines/libatalla.so
 [32;01m*[0m   ./usr/lib/engines/libaep.so
 [32;01m*[0m   ./usr/lib/engines/lib4758cca.so
 [32;01m*[0m Extracting sys-apps/debianutils-3.4.4 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m Extracting sys-apps/coreutils-8.14 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m Extracting sys-libs/libcap-2.22 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./lib/libcap.so.2.22
 [32;01m*[0m   ./lib/libcap.so.2
 [32;01m*[0m   ./usr/lib/libcap.a
 [32;01m*[0m   ./usr/lib/libcap.so
 [32;01m*[0m   ./usr/include/sys/capability.h
 [32;01m*[0m Extracting sys-apps/attr-2.4.46-r1 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./lib/libattr.so.1.1.0
 [32;01m*[0m   ./lib/libattr.so.1
 [32;01m*[0m   ./usr/include/attr/libattr.h
 [32;01m*[0m   ./usr/include/attr/error_context.h
 [32;01m*[0m   ./usr/include/attr/xattr.h
 [32;01m*[0m   ./usr/include/attr/attributes.h
 [32;01m*[0m   ./usr/lib/libattr.so
 [32;01m*[0m Extracting sys-libs/zlib-1.2.5-r2 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./lib/libz.so.1.2.5
 [32;01m*[0m   ./lib/libz.so.1
 [32;01m*[0m   ./usr/include/zconf.h
 [32;01m*[0m   ./usr/include/zlib.h
 [32;01m*[0m   ./usr/lib/libz.a
 [32;01m*[0m   ./usr/lib/libz.so
 [32;01m*[0m   ./usr/lib/pkgconfig/zlib.pc
 [32;01m*[0m Extracting net-libs/libpcap-1.1.1-r1 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./usr/include/pcap-namedb.h
 [32;01m*[0m   ./usr/include/pcap-bpf.h
 [32;01m*[0m   ./usr/include/pcap.h
 [32;01m*[0m   ./usr/include/pcap/usb.h
 [32;01m*[0m   ./usr/include/pcap/vlan.h
 [32;01m*[0m   ./usr/include/pcap/sll.h
 [32;01m*[0m   ./usr/include/pcap/pcap.h
 [32;01m*[0m   ./usr/include/pcap/namedb.h
 [32;01m*[0m   ./usr/include/pcap/ipnet.h
 [32;01m*[0m   ./usr/include/pcap/bluetooth.h
 [32;01m*[0m   ./usr/include/pcap/bpf.h
 [32;01m*[0m   ./usr/lib/libpcap.a
 [32;01m*[0m   ./usr/lib/libpcap.so.1.1.1
 [32;01m*[0m   ./usr/lib/libpcap.so
 [32;01m*[0m   ./usr/lib/libpcap.so.1
 [32;01m*[0m Extracting dev-libs/libnl-1.1-r2 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./usr/include/netlink/utils.h
 [32;01m*[0m   ./usr/include/netlink/types.h
 [32;01m*[0m   ./usr/include/netlink/socket.h
 [32;01m*[0m   ./usr/include/netlink/object.h
 [32;01m*[0m   ./usr/include/netlink/object-api.h
 [32;01m*[0m   ./usr/include/netlink/netlink.h
 [32;01m*[0m   ./usr/include/netlink/netlink-kernel.h
 [32;01m*[0m   ./usr/include/netlink/netlink-compat.h
 [32;01m*[0m   ./usr/include/netlink/msg.h
 [32;01m*[0m   ./usr/include/netlink/list.h
 [32;01m*[0m   ./usr/include/netlink/handlers.h
 [32;01m*[0m   ./usr/include/netlink/data.h
 [32;01m*[0m   ./usr/include/netlink/cache.h
 [32;01m*[0m   ./usr/include/netlink/cache-api.h
 [32;01m*[0m   ./usr/include/netlink/attr.h
 [32;01m*[0m   ./usr/include/netlink/addr.h
 [32;01m*[0m   ./usr/include/netlink/fib_lookup/request.h
 [32;01m*[0m   ./usr/include/netlink/fib_lookup/lookup.h
 [32;01m*[0m   ./usr/include/netlink/genl/mngt.h
 [32;01m*[0m   ./usr/include/netlink/genl/genl.h
 [32;01m*[0m   ./usr/include/netlink/genl/family.h
 [32;01m*[0m   ./usr/include/netlink/genl/ctrl.h
 [32;01m*[0m   ./usr/include/netlink/route/tc.h
 [32;01m*[0m   ./usr/include/netlink/route/rule.h
 [32;01m*[0m   ./usr/include/netlink/route/rtnl.h
 [32;01m*[0m   ./usr/include/netlink/route/route.h
 [32;01m*[0m   ./usr/include/netlink/route/qdisc.h
 [32;01m*[0m   ./usr/include/netlink/route/qdisc-modules.h
 [32;01m*[0m   ./usr/include/netlink/route/nexthop.h
 [32;01m*[0m   ./usr/include/netlink/route/neightbl.h
 [32;01m*[0m   ./usr/include/netlink/route/neighbour.h
 [32;01m*[0m   ./usr/include/netlink/route/link.h
 [32;01m*[0m   ./usr/include/netlink/route/classifier.h
 [32;01m*[0m   ./usr/include/netlink/route/classifier-modules.h
 [32;01m*[0m   ./usr/include/netlink/route/class.h
 [32;01m*[0m   ./usr/include/netlink/route/class-modules.h
 [32;01m*[0m   ./usr/include/netlink/route/addr.h
 [32;01m*[0m   ./usr/include/netlink/route/cls/u32.h
 [32;01m*[0m   ./usr/include/netlink/route/cls/police.h
 [32;01m*[0m   ./usr/include/netlink/route/cls/fw.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/tbf.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/sfq.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/red.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/prio.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/netem.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/htb.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/fifo.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/dsmark.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/cbq.h
 [32;01m*[0m   ./usr/lib/libnl.so.1.1
 [32;01m*[0m   ./usr/lib/pkgconfig/libnl-1.pc
 [32;01m*[0m   ./usr/lib/libnl.so
 [32;01m*[0m   ./usr/lib/libnl.so.1
 [32;01m*[0m Fixing SYSROOT .la files
>>> Unpacking source...
>>> Unpacking coova-chilli-1.2.9.tar.gz to /var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work
>>> Source unpacked in /var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work
>>> Preparing source in /var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9 ...
>>> Source prepared.
>>> Configuring source in /var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9 ...
 * econf: updating coova-chilli-1.2.9/config.sub with /usr/share/gnuconfig/config.sub
 * econf: updating coova-chilli-1.2.9/config.guess with /usr/share/gnuconfig/config.guess
./configure --prefix=/usr --build=x86_64-pc-linux-gnu --host=i586-pc-linux-gnu --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --disable-dependency-tracking --enable-statusfile --with-mmap --with-poll --with-ipc-msg --enable-multiroute
configure: loading site script /usr/share/config.site
configure: loading site script /usr/share/crossdev/include/site/linux
configure: loading site script /usr/share/crossdev/include/site/linux-gnu
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for i586-pc-linux-gnu-strip... i586-pc-linux-gnu-strip
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking for i586-pc-linux-gnu-gcc... i586-pc-linux-gnu-gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... yes
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether i586-pc-linux-gnu-gcc accepts -g... yes
checking for i586-pc-linux-gnu-gcc option to accept ISO C89... none needed
checking for style of include used by make... GNU
checking dependency style of i586-pc-linux-gnu-gcc... none
checking build system type... x86_64-pc-linux-gnu
checking host system type... i586-pc-linux-gnu
checking how to print strings... printf
checking for a sed that does not truncate output... /bin/sed
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for fgrep... /bin/grep -F
checking for ld used by i586-pc-linux-gnu-gcc... /usr/libexec/gcc/i586-pc-linux-gnu/ld
checking if the linker (/usr/libexec/gcc/i586-pc-linux-gnu/ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/bin/i586-pc-linux-gnu-nm -B
checking the name lister (/usr/bin/i586-pc-linux-gnu-nm -B) interface... BSD nm
checking whether ln -s works... yes
checking the maximum length of command line arguments... 1572864
checking whether the shell understands some XSI constructs... yes
checking whether the shell understands "+="... yes
checking how to convert x86_64-pc-linux-gnu file names to i586-pc-linux-gnu format... func_convert_file_noop
checking how to convert x86_64-pc-linux-gnu file names to toolchain format... func_convert_file_noop
checking for /usr/libexec/gcc/i586-pc-linux-gnu/ld option to reload object files... -r
checking for i586-pc-linux-gnu-objdump... i586-pc-linux-gnu-objdump
checking how to recognize dependent libraries... pass_all
checking for i586-pc-linux-gnu-dlltool... no
checking for dlltool... no
checking how to associate runtime and link libraries... printf %s\n
checking for i586-pc-linux-gnu-ar... i586-pc-linux-gnu-ar
checking for archiver @FILE support... @
checking for i586-pc-linux-gnu-strip... (cached) i586-pc-linux-gnu-strip
checking for i586-pc-linux-gnu-ranlib... i586-pc-linux-gnu-ranlib
checking command to parse /usr/bin/i586-pc-linux-gnu-nm -B output from i586-pc-linux-gnu-gcc object... ok
checking for sysroot... no
checking for i586-pc-linux-gnu-mt... no
checking for mt... no
checking if : is a manifest tool... no
checking how to run the C preprocessor... i586-pc-linux-gnu-gcc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking for objdir... .libs
checking if i586-pc-linux-gnu-gcc supports -fno-rtti -fno-exceptions... no
checking for i586-pc-linux-gnu-gcc option to produce PIC... -fPIC -DPIC
checking if i586-pc-linux-gnu-gcc PIC flag -fPIC -DPIC works... yes
checking if i586-pc-linux-gnu-gcc static flag -static works... yes
checking if i586-pc-linux-gnu-gcc supports -c -o file.o... yes
checking if i586-pc-linux-gnu-gcc supports -c -o file.o... (cached) yes
checking whether the i586-pc-linux-gnu-gcc linker (/usr/libexec/gcc/i586-pc-linux-gnu/ld) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
linux
checking if if_packet.h has tpacket_stats defined... yes
checking if tpacket_auxdata struct has tp_vlan_tci member... yes
checking for ANSI C header files... (cached) yes
checking arpa/inet.h usability... yes
checking arpa/inet.h presence... yes
checking for arpa/inet.h... yes
checking errno.h usability... yes
checking errno.h presence... yes
checking for errno.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking dirent.h usability... yes
checking dirent.h presence... yes
checking for dirent.h... yes
checking netdb.h usability... yes
checking netdb.h presence... yes
checking for netdb.h... yes
checking netinet/in.h usability... yes
checking netinet/in.h presence... yes
checking for netinet/in.h... yes
checking netinet/tcp.h usability... yes
checking netinet/tcp.h presence... yes
checking for netinet/tcp.h... yes
checking for stdint.h... (cached) yes
checking stddef.h usability... yes
checking stddef.h presence... yes
checking for stddef.h... yes
checking for stdlib.h... (cached) yes
checking for string.h... (cached) yes
checking sys/ioctl.h usability... yes
checking sys/ioctl.h presence... yes
checking for sys/ioctl.h... yes
checking sys/socket.h usability... yes
checking sys/socket.h presence... yes
checking for sys/socket.h... yes
checking sys/sysinfo.h usability... yes
checking sys/sysinfo.h presence... yes
checking for sys/sysinfo.h... yes
checking sys/param.h usability... yes
checking sys/param.h presence... yes
checking for sys/param.h... yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking time.h usability... yes
checking time.h presence... yes
checking for time.h... yes
checking sys/ipc.h usability... yes
checking sys/ipc.h presence... yes
checking for sys/ipc.h... yes
checking sys/msg.h usability... yes
checking sys/msg.h presence... yes
checking for sys/msg.h... yes
checking signal.h usability... yes
checking signal.h presence... yes
checking for signal.h... yes
checking sys/wait.h usability... yes
checking sys/wait.h presence... yes
checking for sys/wait.h... yes
checking sys/un.h usability... yes
checking sys/un.h presence... yes
checking for sys/un.h... yes
checking ifaddrs.h usability... yes
checking ifaddrs.h presence... yes
checking for ifaddrs.h... yes
checking for sys/stat.h... (cached) yes
checking for sys/types.h... (cached) yes
checking regex.h usability... yes
checking regex.h presence... yes
checking for regex.h... yes
checking syslog.h usability... yes
checking syslog.h presence... yes
checking for syslog.h... yes
checking poll.h usability... yes
checking poll.h presence... yes
checking for poll.h... yes
checking sys/epoll.h usability... yes
checking sys/epoll.h presence... yes
checking for sys/epoll.h... yes
checking for unistd.h... (cached) yes
checking endian.h usability... yes
checking endian.h presence... yes
checking for endian.h... yes
checking libgen.h usability... yes
checking libgen.h presence... yes
checking for libgen.h... yes
checking asm/types.h usability... yes
checking asm/types.h presence... yes
checking for asm/types.h... yes
checking for pwd.h... (cached) yes
checking grp.h usability... yes
checking grp.h presence... yes
checking for grp.h... yes
checking for resolv.h... yes
checking for net/route.h... yes
checking for net/if.h... yes
checking for net/if_arp.h... yes
checking for net/if_tun.h... no
checking for net/ethernet.h... yes
checking for an ANSI C-conforming const... yes
checking for mode_t... yes
checking whether time.h and sys/time.h may both be included... yes
checking for pid_t... yes
checking vfork.h usability... no
checking vfork.h presence... no
checking for vfork.h... no
checking for fork... yes
checking for vfork... yes
checking for working fork... (cached) yes
checking for working vfork... (cached) yes
checking whether i586-pc-linux-gnu-gcc needs -traditional... no
checking for working memcmp... no
checking sys/select.h usability... yes
checking sys/select.h presence... yes
checking for sys/select.h... yes
checking for sys/socket.h... (cached) yes
checking types of arguments for select... int,fd_set *,struct timeval *
checking for gethostbyname... yes
checking for getprotoent... yes
checking for gettimeofday... yes
checking for inet_ntoa... yes
checking for memset... yes
checking for select... yes
checking for socket... yes
checking for strdup... yes
checking for strerror... yes
checking for strstr... yes
checking for strtol... yes
checking for getline... yes
checking for dirname... yes
checking for glob... yes
checking for getaddrinfo... (cached) yes
checking for getnameinfo... yes
checking for getifaddrs... yes
checking for sysinfo... yes
checking for res_init in -lresolv... no
checking for clock_gettime in -lrt... yes
configure: creating ./config.status
config.status: creating Makefile
config.status: creating bstring/Makefile
config.status: creating src/Makefile
config.status: creating src/mssl/Makefile
config.status: creating www/Makefile
config.status: creating doc/Makefile
config.status: creating conf/Makefile
config.status: creating debian/Makefile
config.status: creating miniportal/Makefile
config.status: creating json/Makefile
config.status: creating distro/Makefile
config.status: creating distro/suse/coova-chilli.spec
config.status: creating distro/redhat/coova-chilli.spec
config.status: creating config.h
config.status: executing depfiles commands
config.status: executing libtool commands
>>> Source configured.
>>> Compiling source in /var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9 ...
make -j1 
make  all-recursive
make[1]: Entering directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9'
Making all in bstring
make[2]: Entering directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/bstring'
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..     -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o bstrlib.lo bstrlib.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c bstrlib.c  -fPIC -DPIC -o .libs/bstrlib.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c bstrlib.c -o bstrlib.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..     -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o snprintf.lo snprintf.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c snprintf.c  -fPIC -DPIC -o .libs/snprintf.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c snprintf.c -o snprintf.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=link i586-pc-linux-gnu-gcc  -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer  -L/usr/i586-pc-linux-gnu/lib -L/usr/i586-pc-linux-gnu/usr/lib -o libbstring.la -rpath /usr/lib bstrlib.lo snprintf.lo  -lrt 
libtool: link: i586-pc-linux-gnu-gcc -shared  -fPIC -DPIC  .libs/bstrlib.o .libs/snprintf.o   -L/usr/i586-pc-linux-gnu/lib -L/usr/i586-pc-linux-gnu/usr/lib -lrt  -march=geode -Os -mmmx -m3dnow   -Wl,-soname -Wl,libbstring.so.0 -o .libs/libbstring.so.0.0.0
libtool: link: (cd ".libs" && rm -f "libbstring.so.0" && ln -s "libbstring.so.0.0.0" "libbstring.so.0")
libtool: link: (cd ".libs" && rm -f "libbstring.so" && ln -s "libbstring.so.0.0.0" "libbstring.so")
libtool: link: i586-pc-linux-gnu-ar cru .libs/libbstring.a  bstrlib.o snprintf.o
libtool: link: i586-pc-linux-gnu-ranlib .libs/libbstring.a
libtool: link: ( cd ".libs" && rm -f "libbstring.la" && ln -s "../libbstring.la" "libbstring.la" )
make[2]: Leaving directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/bstring'
Making all in src
make[2]: Entering directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'
make[3]: Entering directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o chilli.lo chilli.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c chilli.c  -fPIC -DPIC -o .libs/chilli.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c chilli.c -o chilli.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o tun.lo tun.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c tun.c  -fPIC -DPIC -o .libs/tun.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c tun.c -o tun.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o ippool.lo ippool.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c ippool.c  -fPIC -DPIC -o .libs/ippool.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c ippool.c -o ippool.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o radius.lo radius.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c radius.c  -fPIC -DPIC -o .libs/radius.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c radius.c -o radius.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o md5.lo md5.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c md5.c  -fPIC -DPIC -o .libs/md5.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c md5.c -o md5.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o redir.lo redir.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c redir.c  -fPIC -DPIC -o .libs/redir.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c redir.c -o redir.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o dhcp.lo dhcp.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c dhcp.c  -fPIC -DPIC -o .libs/dhcp.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c dhcp.c -o dhcp.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o syserr.lo syserr.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c syserr.c  -fPIC -DPIC -o .libs/syserr.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c syserr.c -o syserr.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o iphash.lo iphash.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c iphash.c  -fPIC -DPIC -o .libs/iphash.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c iphash.c -o iphash.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o lookup.lo lookup.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c lookup.c  -fPIC -DPIC -o .libs/lookup.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c lookup.c -o lookup.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o util.lo util.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c util.c  -fPIC -DPIC -o .libs/util.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c util.c -o util.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o options.lo options.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c options.c  -fPIC -DPIC -o .libs/options.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c options.c -o options.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o statusfile.lo statusfile.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c statusfile.c  -fPIC -DPIC -o .libs/statusfile.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c statusfile.c -o statusfile.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o conn.lo conn.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c conn.c  -fPIC -DPIC -o .libs/conn.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c conn.c -o conn.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o sig.lo sig.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c sig.c  -fPIC -DPIC -o .libs/sig.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c sig.c -o sig.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o garden.lo garden.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c garden.c  -fPIC -DPIC -o .libs/garden.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c garden.c -o garden.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o dns.lo dns.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c dns.c  -fPIC -DPIC -o .libs/dns.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c dns.c -o dns.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o session.lo session.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c session.c  -fPIC -DPIC -o .libs/session.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c session.c -o session.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o pkt.lo pkt.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c pkt.c  -fPIC -DPIC -o .libs/pkt.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c pkt.c -o pkt.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o chksum.lo chksum.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c chksum.c  -fPIC -DPIC -o .libs/chksum.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c chksum.c -o chksum.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o net.lo net.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c net.c  -fPIC -DPIC -o .libs/net.o
cc1: warnings being treated as errors
net.c: In function 'net_open_eth':
net.c:1186:22: error: unused variable 'mr'
net.c: In function 'rx_ring':
net.c:1610:5: error: too many arguments to function 'func'
net.c: In function 'setup_rings':
net.c:1826:15: error: unused variable 'unit'
net.c: In function 'set_buffer':
net.c:1915:15: error: unused variable 'unit'
net.c: At top level:
net.c:1935:13: error: 'setup_filter' defined but not used
make[3]: *** [net.lo] Error 1
make[3]: Leaving directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9'
make: *** [all] Error 2
 [31;01m*[0m ERROR: net-wireless/coova-chilli-1.2.9 failed (compile phase):
 [31;01m*[0m   emake failed
 [31;01m*[0m 
 [31;01m*[0m If you need support, post the output of 'emerge --info =net-wireless/coova-chilli-1.2.9',
 [31;01m*[0m the complete build log and the output of 'emerge -pqv =net-wireless/coova-chilli-1.2.9'.
 [31;01m*[0m The complete build log is located at '/data/cross/alix3-i586/firmware/var/log/portage/net-wireless:coova-chilli-1.2.9:20120324-001520.log'.
 [31;01m*[0m The ebuild environment file is located at '/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/temp/environment'.
 [31;01m*[0m S: '/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9'
-------------- next part --------------
[32;01m * [39;49;00mPackage:    net-wireless/coova-chilli-1.2.9
[32;01m * [39;49;00mRepository: meleeweb
[32;01m * [39;49;00mMaintainer: maintainer-wanted at gentoo.org
[32;01m * [39;49;00mUSE:        curl elibc_glibc ipv6 kernel_linux miniportal pcap ssl userland_GNU x86
[32;01m * [39;49;00mFEATURES:   sandbox
 [32;01m*[0m Determining =net-wireless/coova-chilli-1.2.9 SYSROOT dependencies ...
 [32;01m*[0m Extracting app-misc/ca-certificates-20111025 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m Extracting net-misc/curl-7.24.0 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./usr/include/curl/curlrules.h
 [32;01m*[0m   ./usr/include/curl/curlbuild.h
 [32;01m*[0m   ./usr/include/curl/typecheck-gcc.h
 [32;01m*[0m   ./usr/include/curl/multi.h
 [32;01m*[0m   ./usr/include/curl/stdcheaders.h
 [32;01m*[0m   ./usr/include/curl/mprintf.h
 [32;01m*[0m   ./usr/include/curl/easy.h
 [32;01m*[0m   ./usr/include/curl/curlver.h
 [32;01m*[0m   ./usr/include/curl/curl.h
 [32;01m*[0m   ./usr/lib/libcurl.so.4.2.0
 [32;01m*[0m   ./usr/lib/pkgconfig/libcurl.pc
 [32;01m*[0m   ./usr/lib/libcurl.so
 [32;01m*[0m   ./usr/lib/libcurl.so.4
 [32;01m*[0m Extracting dev-libs/openssl-1.0.0h to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./usr/include/openssl/kssl.h
 [32;01m*[0m   ./usr/include/openssl/dtls1.h
 [32;01m*[0m   ./usr/include/openssl/tls1.h
 [32;01m*[0m   ./usr/include/openssl/ssl23.h
 [32;01m*[0m   ./usr/include/openssl/ssl3.h
 [32;01m*[0m   ./usr/include/openssl/ssl2.h
 [32;01m*[0m   ./usr/include/openssl/ssl.h
 [32;01m*[0m   ./usr/include/openssl/ts.h
 [32;01m*[0m   ./usr/include/openssl/pqueue.h
 [32;01m*[0m   ./usr/include/openssl/cms.h
 [32;01m*[0m   ./usr/include/openssl/krb5_asn.h
 [32;01m*[0m   ./usr/include/openssl/ui_compat.h
 [32;01m*[0m   ./usr/include/openssl/ui.h
 [32;01m*[0m   ./usr/include/openssl/ocsp.h
 [32;01m*[0m   ./usr/include/openssl/comp.h
 [32;01m*[0m   ./usr/include/openssl/pkcs12.h
 [32;01m*[0m   ./usr/include/openssl/pkcs7.h
 [32;01m*[0m   ./usr/include/openssl/txt_db.h
 [32;01m*[0m   ./usr/include/openssl/conf_api.h
 [32;01m*[0m   ./usr/include/openssl/conf.h
 [32;01m*[0m   ./usr/include/openssl/x509v3.h
 [32;01m*[0m   ./usr/include/openssl/x509_vfy.h
 [32;01m*[0m   ./usr/include/openssl/x509.h
 [32;01m*[0m   ./usr/include/openssl/pem2.h
 [32;01m*[0m   ./usr/include/openssl/pem.h
 [32;01m*[0m   ./usr/include/openssl/asn1t.h
 [32;01m*[0m   ./usr/include/openssl/asn1_mac.h
 [32;01m*[0m   ./usr/include/openssl/asn1.h
 [32;01m*[0m   ./usr/include/openssl/evp.h
 [32;01m*[0m   ./usr/include/openssl/err.h
 [32;01m*[0m   ./usr/include/openssl/rand.h
 [32;01m*[0m   ./usr/include/openssl/lhash.h
 [32;01m*[0m   ./usr/include/openssl/safestack.h
 [32;01m*[0m   ./usr/include/openssl/stack.h
 [32;01m*[0m   ./usr/include/openssl/bio.h
 [32;01m*[0m   ./usr/include/openssl/buffer.h
 [32;01m*[0m   ./usr/include/openssl/engine.h
 [32;01m*[0m   ./usr/include/openssl/dso.h
 [32;01m*[0m   ./usr/include/openssl/ecdh.h
 [32;01m*[0m   ./usr/include/openssl/dh.h
 [32;01m*[0m   ./usr/include/openssl/ecdsa.h
 [32;01m*[0m   ./usr/include/openssl/dsa.h
 [32;01m*[0m   ./usr/include/openssl/rsa.h
 [32;01m*[0m   ./usr/include/openssl/ec.h
 [32;01m*[0m   ./usr/include/openssl/bn.h
 [32;01m*[0m   ./usr/include/openssl/modes.h
 [32;01m*[0m   ./usr/include/openssl/seed.h
 [32;01m*[0m   ./usr/include/openssl/camellia.h
 [32;01m*[0m   ./usr/include/openssl/cast.h
 [32;01m*[0m   ./usr/include/openssl/blowfish.h
 [32;01m*[0m   ./usr/include/openssl/idea.h
 [32;01m*[0m   ./usr/include/openssl/rc5.h
 [32;01m*[0m   ./usr/include/openssl/rc4.h
 [32;01m*[0m   ./usr/include/openssl/rc2.h
 [32;01m*[0m   ./usr/include/openssl/aes.h
 [32;01m*[0m   ./usr/include/openssl/des_old.h
 [32;01m*[0m   ./usr/include/openssl/des.h
 [32;01m*[0m   ./usr/include/openssl/whrlpool.h
 [32;01m*[0m   ./usr/include/openssl/ripemd.h
 [32;01m*[0m   ./usr/include/openssl/hmac.h
 [32;01m*[0m   ./usr/include/openssl/mdc2.h
 [32;01m*[0m   ./usr/include/openssl/sha.h
 [32;01m*[0m   ./usr/include/openssl/md5.h
 [32;01m*[0m   ./usr/include/openssl/md4.h
 [32;01m*[0m   ./usr/include/openssl/obj_mac.h
 [32;01m*[0m   ./usr/include/openssl/objects.h
 [32;01m*[0m   ./usr/include/openssl/ossl_typ.h
 [32;01m*[0m   ./usr/include/openssl/symhacks.h
 [32;01m*[0m   ./usr/include/openssl/ebcdic.h
 [32;01m*[0m   ./usr/include/openssl/opensslconf.h
 [32;01m*[0m   ./usr/include/openssl/opensslv.h
 [32;01m*[0m   ./usr/include/openssl/crypto.h
 [32;01m*[0m   ./usr/include/openssl/e_os2.h
 [32;01m*[0m   ./usr/lib/libssl.so
 [32;01m*[0m   ./usr/lib/libcrypto.so
 [32;01m*[0m   ./usr/lib/libssl.so.1.0.0
 [32;01m*[0m   ./usr/lib/libcrypto.so.1.0.0
 [32;01m*[0m   ./usr/lib/pkgconfig/openssl.pc
 [32;01m*[0m   ./usr/lib/pkgconfig/libssl.pc
 [32;01m*[0m   ./usr/lib/pkgconfig/libcrypto.pc
 [32;01m*[0m   ./usr/lib/engines/libgost.so
 [32;01m*[0m   ./usr/lib/engines/libcapi.so
 [32;01m*[0m   ./usr/lib/engines/libpadlock.so
 [32;01m*[0m   ./usr/lib/engines/libubsec.so
 [32;01m*[0m   ./usr/lib/engines/libsureware.so
 [32;01m*[0m   ./usr/lib/engines/libnuron.so
 [32;01m*[0m   ./usr/lib/engines/libchil.so
 [32;01m*[0m   ./usr/lib/engines/libgmp.so
 [32;01m*[0m   ./usr/lib/engines/libcswift.so
 [32;01m*[0m   ./usr/lib/engines/libatalla.so
 [32;01m*[0m   ./usr/lib/engines/libaep.so
 [32;01m*[0m   ./usr/lib/engines/lib4758cca.so
 [32;01m*[0m Extracting sys-apps/debianutils-3.4.4 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m Extracting sys-apps/coreutils-8.14 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m Extracting sys-libs/libcap-2.22 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./lib/libcap.so.2.22
 [32;01m*[0m   ./lib/libcap.so.2
 [32;01m*[0m   ./usr/lib/libcap.a
 [32;01m*[0m   ./usr/lib/libcap.so
 [32;01m*[0m   ./usr/include/sys/capability.h
 [32;01m*[0m Extracting sys-apps/attr-2.4.46-r1 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./lib/libattr.so.1.1.0
 [32;01m*[0m   ./lib/libattr.so.1
 [32;01m*[0m   ./usr/include/attr/libattr.h
 [32;01m*[0m   ./usr/include/attr/error_context.h
 [32;01m*[0m   ./usr/include/attr/xattr.h
 [32;01m*[0m   ./usr/include/attr/attributes.h
 [32;01m*[0m   ./usr/lib/libattr.so
 [32;01m*[0m Extracting net-libs/libpcap-1.1.1-r1 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./usr/include/pcap-namedb.h
 [32;01m*[0m   ./usr/include/pcap-bpf.h
 [32;01m*[0m   ./usr/include/pcap.h
 [32;01m*[0m   ./usr/include/pcap/usb.h
 [32;01m*[0m   ./usr/include/pcap/vlan.h
 [32;01m*[0m   ./usr/include/pcap/sll.h
 [32;01m*[0m   ./usr/include/pcap/pcap.h
 [32;01m*[0m   ./usr/include/pcap/namedb.h
 [32;01m*[0m   ./usr/include/pcap/ipnet.h
 [32;01m*[0m   ./usr/include/pcap/bluetooth.h
 [32;01m*[0m   ./usr/include/pcap/bpf.h
 [32;01m*[0m   ./usr/lib/libpcap.a
 [32;01m*[0m   ./usr/lib/libpcap.so.1.1.1
 [32;01m*[0m   ./usr/lib/libpcap.so
 [32;01m*[0m   ./usr/lib/libpcap.so.1
 [32;01m*[0m Extracting dev-libs/libnl-1.1-r2 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./usr/include/netlink/utils.h
 [32;01m*[0m   ./usr/include/netlink/types.h
 [32;01m*[0m   ./usr/include/netlink/socket.h
 [32;01m*[0m   ./usr/include/netlink/object.h
 [32;01m*[0m   ./usr/include/netlink/object-api.h
 [32;01m*[0m   ./usr/include/netlink/netlink.h
 [32;01m*[0m   ./usr/include/netlink/netlink-kernel.h
 [32;01m*[0m   ./usr/include/netlink/netlink-compat.h
 [32;01m*[0m   ./usr/include/netlink/msg.h
 [32;01m*[0m   ./usr/include/netlink/list.h
 [32;01m*[0m   ./usr/include/netlink/handlers.h
 [32;01m*[0m   ./usr/include/netlink/data.h
 [32;01m*[0m   ./usr/include/netlink/cache.h
 [32;01m*[0m   ./usr/include/netlink/cache-api.h
 [32;01m*[0m   ./usr/include/netlink/attr.h
 [32;01m*[0m   ./usr/include/netlink/addr.h
 [32;01m*[0m   ./usr/include/netlink/fib_lookup/request.h
 [32;01m*[0m   ./usr/include/netlink/fib_lookup/lookup.h
 [32;01m*[0m   ./usr/include/netlink/genl/mngt.h
 [32;01m*[0m   ./usr/include/netlink/genl/genl.h
 [32;01m*[0m   ./usr/include/netlink/genl/family.h
 [32;01m*[0m   ./usr/include/netlink/genl/ctrl.h
 [32;01m*[0m   ./usr/include/netlink/route/tc.h
 [32;01m*[0m   ./usr/include/netlink/route/rule.h
 [32;01m*[0m   ./usr/include/netlink/route/rtnl.h
 [32;01m*[0m   ./usr/include/netlink/route/route.h
 [32;01m*[0m   ./usr/include/netlink/route/qdisc.h
 [32;01m*[0m   ./usr/include/netlink/route/qdisc-modules.h
 [32;01m*[0m   ./usr/include/netlink/route/nexthop.h
 [32;01m*[0m   ./usr/include/netlink/route/neightbl.h
 [32;01m*[0m   ./usr/include/netlink/route/neighbour.h
 [32;01m*[0m   ./usr/include/netlink/route/link.h
 [32;01m*[0m   ./usr/include/netlink/route/classifier.h
 [32;01m*[0m   ./usr/include/netlink/route/classifier-modules.h
 [32;01m*[0m   ./usr/include/netlink/route/class.h
 [32;01m*[0m   ./usr/include/netlink/route/class-modules.h
 [32;01m*[0m   ./usr/include/netlink/route/addr.h
 [32;01m*[0m   ./usr/include/netlink/route/cls/u32.h
 [32;01m*[0m   ./usr/include/netlink/route/cls/police.h
 [32;01m*[0m   ./usr/include/netlink/route/cls/fw.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/tbf.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/sfq.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/red.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/prio.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/netem.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/htb.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/fifo.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/dsmark.h
 [32;01m*[0m   ./usr/include/netlink/route/sch/cbq.h
 [32;01m*[0m   ./usr/lib/libnl.so.1.1
 [32;01m*[0m   ./usr/lib/pkgconfig/libnl-1.pc
 [32;01m*[0m   ./usr/lib/libnl.so
 [32;01m*[0m   ./usr/lib/libnl.so.1
 [32;01m*[0m Extracting sys-libs/zlib-1.2.5-r2 to /usr/i586-pc-linux-gnu ...
 [32;01m*[0m   ./lib/libz.so.1.2.5
 [32;01m*[0m   ./lib/libz.so.1
 [32;01m*[0m   ./usr/include/zconf.h
 [32;01m*[0m   ./usr/include/zlib.h
 [32;01m*[0m   ./usr/lib/libz.a
 [32;01m*[0m   ./usr/lib/libz.so
 [32;01m*[0m   ./usr/lib/pkgconfig/zlib.pc
 [32;01m*[0m Fixing SYSROOT .la files
>>> Unpacking source...
>>> Unpacking coova-chilli-1.2.9.tar.gz to /var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work
>>> Source unpacked in /var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work
>>> Preparing source in /var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9 ...
>>> Source prepared.
>>> Configuring source in /var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9 ...
 * econf: updating coova-chilli-1.2.9/config.sub with /usr/share/gnuconfig/config.sub
 * econf: updating coova-chilli-1.2.9/config.guess with /usr/share/gnuconfig/config.guess
./configure --prefix=/usr --build=x86_64-pc-linux-gnu --host=i586-pc-linux-gnu --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --disable-dependency-tracking --enable-statusfile --without-mmap --with-poll --with-ipc-msg --enable-multiroute --with-curl --with-ipv6 --enable-miniportal --without-nfqueue --with-pcap
configure: loading site script /usr/share/config.site
configure: loading site script /usr/share/crossdev/include/site/linux
configure: loading site script /usr/share/crossdev/include/site/linux-gnu
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for i586-pc-linux-gnu-strip... i586-pc-linux-gnu-strip
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking for i586-pc-linux-gnu-gcc... i586-pc-linux-gnu-gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... yes
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether i586-pc-linux-gnu-gcc accepts -g... yes
checking for i586-pc-linux-gnu-gcc option to accept ISO C89... none needed
checking for style of include used by make... GNU
checking dependency style of i586-pc-linux-gnu-gcc... none
checking build system type... x86_64-pc-linux-gnu
checking host system type... i586-pc-linux-gnu
checking how to print strings... printf
checking for a sed that does not truncate output... /bin/sed
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for fgrep... /bin/grep -F
checking for ld used by i586-pc-linux-gnu-gcc... /usr/libexec/gcc/i586-pc-linux-gnu/ld
checking if the linker (/usr/libexec/gcc/i586-pc-linux-gnu/ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/bin/i586-pc-linux-gnu-nm -B
checking the name lister (/usr/bin/i586-pc-linux-gnu-nm -B) interface... BSD nm
checking whether ln -s works... yes
checking the maximum length of command line arguments... 1572864
checking whether the shell understands some XSI constructs... yes
checking whether the shell understands "+="... yes
checking how to convert x86_64-pc-linux-gnu file names to i586-pc-linux-gnu format... func_convert_file_noop
checking how to convert x86_64-pc-linux-gnu file names to toolchain format... func_convert_file_noop
checking for /usr/libexec/gcc/i586-pc-linux-gnu/ld option to reload object files... -r
checking for i586-pc-linux-gnu-objdump... i586-pc-linux-gnu-objdump
checking how to recognize dependent libraries... pass_all
checking for i586-pc-linux-gnu-dlltool... no
checking for dlltool... no
checking how to associate runtime and link libraries... printf %s\n
checking for i586-pc-linux-gnu-ar... i586-pc-linux-gnu-ar
checking for archiver @FILE support... @
checking for i586-pc-linux-gnu-strip... (cached) i586-pc-linux-gnu-strip
checking for i586-pc-linux-gnu-ranlib... i586-pc-linux-gnu-ranlib
checking command to parse /usr/bin/i586-pc-linux-gnu-nm -B output from i586-pc-linux-gnu-gcc object... ok
checking for sysroot... no
checking for i586-pc-linux-gnu-mt... no
checking for mt... no
checking if : is a manifest tool... no
checking how to run the C preprocessor... i586-pc-linux-gnu-gcc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking for objdir... .libs
checking if i586-pc-linux-gnu-gcc supports -fno-rtti -fno-exceptions... no
checking for i586-pc-linux-gnu-gcc option to produce PIC... -fPIC -DPIC
checking if i586-pc-linux-gnu-gcc PIC flag -fPIC -DPIC works... yes
checking if i586-pc-linux-gnu-gcc static flag -static works... yes
checking if i586-pc-linux-gnu-gcc supports -c -o file.o... yes
checking if i586-pc-linux-gnu-gcc supports -c -o file.o... (cached) yes
checking whether the i586-pc-linux-gnu-gcc linker (/usr/libexec/gcc/i586-pc-linux-gnu/ld) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
linux
checking if if_packet.h has tpacket_stats defined... yes
checking if tpacket_auxdata struct has tp_vlan_tci member... yes
checking for ANSI C header files... (cached) yes
checking arpa/inet.h usability... yes
checking arpa/inet.h presence... yes
checking for arpa/inet.h... yes
checking errno.h usability... yes
checking errno.h presence... yes
checking for errno.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking dirent.h usability... yes
checking dirent.h presence... yes
checking for dirent.h... yes
checking netdb.h usability... yes
checking netdb.h presence... yes
checking for netdb.h... yes
checking netinet/in.h usability... yes
checking netinet/in.h presence... yes
checking for netinet/in.h... yes
checking netinet/tcp.h usability... yes
checking netinet/tcp.h presence... yes
checking for netinet/tcp.h... yes
checking for stdint.h... (cached) yes
checking stddef.h usability... yes
checking stddef.h presence... yes
checking for stddef.h... yes
checking for stdlib.h... (cached) yes
checking for string.h... (cached) yes
checking sys/ioctl.h usability... yes
checking sys/ioctl.h presence... yes
checking for sys/ioctl.h... yes
checking sys/socket.h usability... yes
checking sys/socket.h presence... yes
checking for sys/socket.h... yes
checking sys/sysinfo.h usability... yes
checking sys/sysinfo.h presence... yes
checking for sys/sysinfo.h... yes
checking sys/param.h usability... yes
checking sys/param.h presence... yes
checking for sys/param.h... yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking time.h usability... yes
checking time.h presence... yes
checking for time.h... yes
checking sys/ipc.h usability... yes
checking sys/ipc.h presence... yes
checking for sys/ipc.h... yes
checking sys/msg.h usability... yes
checking sys/msg.h presence... yes
checking for sys/msg.h... yes
checking signal.h usability... yes
checking signal.h presence... yes
checking for signal.h... yes
checking sys/wait.h usability... yes
checking sys/wait.h presence... yes
checking for sys/wait.h... yes
checking sys/un.h usability... yes
checking sys/un.h presence... yes
checking for sys/un.h... yes
checking ifaddrs.h usability... yes
checking ifaddrs.h presence... yes
checking for ifaddrs.h... yes
checking for sys/stat.h... (cached) yes
checking for sys/types.h... (cached) yes
checking regex.h usability... yes
checking regex.h presence... yes
checking for regex.h... yes
checking syslog.h usability... yes
checking syslog.h presence... yes
checking for syslog.h... yes
checking poll.h usability... yes
checking poll.h presence... yes
checking for poll.h... yes
checking sys/epoll.h usability... yes
checking sys/epoll.h presence... yes
checking for sys/epoll.h... yes
checking for unistd.h... (cached) yes
checking endian.h usability... yes
checking endian.h presence... yes
checking for endian.h... yes
checking libgen.h usability... yes
checking libgen.h presence... yes
checking for libgen.h... yes
checking asm/types.h usability... yes
checking asm/types.h presence... yes
checking for asm/types.h... yes
checking for pwd.h... (cached) yes
checking grp.h usability... yes
checking grp.h presence... yes
checking for grp.h... yes
checking for resolv.h... yes
checking for net/route.h... yes
checking for net/if.h... yes
checking for net/if_arp.h... yes
checking for net/if_tun.h... no
checking for net/ethernet.h... yes
checking for an ANSI C-conforming const... yes
checking for mode_t... yes
checking whether time.h and sys/time.h may both be included... yes
checking for pid_t... yes
checking vfork.h usability... no
checking vfork.h presence... no
checking for vfork.h... no
checking for fork... yes
checking for vfork... yes
checking for working fork... (cached) yes
checking for working vfork... (cached) yes
checking whether i586-pc-linux-gnu-gcc needs -traditional... no
checking for working memcmp... (cached) yes
checking sys/select.h usability... yes
checking sys/select.h presence... yes
checking for sys/select.h... yes
checking for sys/socket.h... (cached) yes
checking types of arguments for select... int,fd_set *,struct timeval *
checking for gethostbyname... yes
checking for getprotoent... yes
checking for gettimeofday... yes
checking for inet_ntoa... yes
checking for memset... yes
checking for select... yes
checking for socket... yes
checking for strdup... yes
checking for strerror... yes
checking for strstr... yes
checking for strtol... yes
checking for getline... yes
checking for dirname... yes
checking for glob... yes
checking for getaddrinfo... (cached) yes
checking for getnameinfo... yes
checking for getifaddrs... yes
checking for sysinfo... yes
checking for res_init in -lresolv... no
checking for pcap_open_live in -lpcap... yes
checking for curl_global_init in -lcurl... yes
checking for clock_gettime in -lrt... yes
configure: creating ./config.status
config.status: creating Makefile
config.status: creating bstring/Makefile
config.status: creating src/Makefile
config.status: creating src/mssl/Makefile
config.status: creating www/Makefile
config.status: creating doc/Makefile
config.status: creating conf/Makefile
config.status: creating debian/Makefile
config.status: creating miniportal/Makefile
config.status: creating json/Makefile
config.status: creating distro/Makefile
config.status: creating distro/suse/coova-chilli.spec
config.status: creating distro/redhat/coova-chilli.spec
config.status: creating config.h
config.status: executing depfiles commands
config.status: executing libtool commands
>>> Source configured.
ebuild-ipc timed out during read after 15 seconds, retrying...
>>> Compiling source in /var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9 ...
make -j1 
make  all-recursive
make[1]: Entering directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9'
Making all in bstring
make[2]: Entering directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/bstring'
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..     -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o bstrlib.lo bstrlib.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c bstrlib.c  -fPIC -DPIC -o .libs/bstrlib.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c bstrlib.c -o bstrlib.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..     -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o snprintf.lo snprintf.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c snprintf.c  -fPIC -DPIC -o .libs/snprintf.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c snprintf.c -o snprintf.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=link i586-pc-linux-gnu-gcc  -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer  -L/usr/i586-pc-linux-gnu/lib -L/usr/i586-pc-linux-gnu/usr/lib -o libbstring.la -rpath /usr/lib bstrlib.lo snprintf.lo  -lrt 
libtool: link: i586-pc-linux-gnu-gcc -shared  -fPIC -DPIC  .libs/bstrlib.o .libs/snprintf.o   -L/usr/i586-pc-linux-gnu/lib -L/usr/i586-pc-linux-gnu/usr/lib -lrt  -march=geode -Os -mmmx -m3dnow   -Wl,-soname -Wl,libbstring.so.0 -o .libs/libbstring.so.0.0.0
libtool: link: (cd ".libs" && rm -f "libbstring.so.0" && ln -s "libbstring.so.0.0.0" "libbstring.so.0")
libtool: link: (cd ".libs" && rm -f "libbstring.so" && ln -s "libbstring.so.0.0.0" "libbstring.so")
libtool: link: i586-pc-linux-gnu-ar cru .libs/libbstring.a  bstrlib.o snprintf.o
libtool: link: i586-pc-linux-gnu-ranlib .libs/libbstring.a
libtool: link: ( cd ".libs" && rm -f "libbstring.la" && ln -s "../libbstring.la" "libbstring.la" )
make[2]: Leaving directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/bstring'
Making all in src
make[2]: Entering directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'
make[3]: Entering directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o chilli.lo chilli.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c chilli.c  -fPIC -DPIC -o .libs/chilli.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c chilli.c -o chilli.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o tun.lo tun.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c tun.c  -fPIC -DPIC -o .libs/tun.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c tun.c -o tun.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o ippool.lo ippool.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c ippool.c  -fPIC -DPIC -o .libs/ippool.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c ippool.c -o ippool.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o radius.lo radius.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c radius.c  -fPIC -DPIC -o .libs/radius.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c radius.c -o radius.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o md5.lo md5.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c md5.c  -fPIC -DPIC -o .libs/md5.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c md5.c -o md5.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o redir.lo redir.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c redir.c  -fPIC -DPIC -o .libs/redir.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c redir.c -o redir.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o dhcp.lo dhcp.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c dhcp.c  -fPIC -DPIC -o .libs/dhcp.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c dhcp.c -o dhcp.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o syserr.lo syserr.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c syserr.c  -fPIC -DPIC -o .libs/syserr.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c syserr.c -o syserr.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o iphash.lo iphash.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c iphash.c  -fPIC -DPIC -o .libs/iphash.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c iphash.c -o iphash.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o lookup.lo lookup.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c lookup.c  -fPIC -DPIC -o .libs/lookup.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c lookup.c -o lookup.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o util.lo util.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c util.c  -fPIC -DPIC -o .libs/util.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c util.c -o util.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o options.lo options.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c options.c  -fPIC -DPIC -o .libs/options.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c options.c -o options.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o statusfile.lo statusfile.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c statusfile.c  -fPIC -DPIC -o .libs/statusfile.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c statusfile.c -o statusfile.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o conn.lo conn.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c conn.c  -fPIC -DPIC -o .libs/conn.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c conn.c -o conn.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o sig.lo sig.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c sig.c  -fPIC -DPIC -o .libs/sig.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c sig.c -o sig.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o garden.lo garden.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c garden.c  -fPIC -DPIC -o .libs/garden.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c garden.c -o garden.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o dns.lo dns.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c dns.c  -fPIC -DPIC -o .libs/dns.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c dns.c -o dns.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o session.lo session.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c session.c  -fPIC -DPIC -o .libs/session.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c session.c -o session.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o pkt.lo pkt.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c pkt.c  -fPIC -DPIC -o .libs/pkt.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c pkt.c -o pkt.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o chksum.lo chksum.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c chksum.c  -fPIC -DPIC -o .libs/chksum.o
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c chksum.c -o chksum.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=compile i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I..    -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF='"/etc/chilli.conf"' -DDEFPIDFILE='"/var/lib/run/chilli.pid"' -DDEFSTATEDIR='"/var/lib/run"' -DSBINDIR='"/usr/sbin"'    -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c -o net.lo net.c
libtool: compile:  i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/lib/run/chilli.pid\" -DDEFSTATEDIR=\"/var/lib/run\" -DSBINDIR=\"/usr/sbin\" -march=geode -Os -mmmx -m3dnow -fno-align-jumps -fno-align-functions -fno-align-labels -fno-align-loops -pipe -fomit-frame-pointer -c net.c  -fPIC -DPIC -o .libs/net.o
net.c: In function 'net_pcap_handler':
net.c:648:5: error: too many arguments to function 'np->func'
cc1: warnings being treated as errors
net.c: In function 'net_read_eth':
net.c:718:5: error: passing argument 4 of 'pcap_dispatch' from incompatible pointer type
/usr/i586-pc-linux-gnu/usr/include/pcap/pcap.h:298:5: note: expected 'u_char *' but argument is of type 'struct netpcap *'
make[3]: *** [net.lo] Error 1
make[3]: Leaving directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9'
make: *** [all] Error 2
 [31;01m*[0m ERROR: net-wireless/coova-chilli-1.2.9 failed (compile phase):
 [31;01m*[0m   emake failed
 [31;01m*[0m 
 [31;01m*[0m If you need support, post the output of 'emerge --info =net-wireless/coova-chilli-1.2.9',
 [31;01m*[0m the complete build log and the output of 'emerge -pqv =net-wireless/coova-chilli-1.2.9'.
 [31;01m*[0m The complete build log is located at '/data/cross/alix3-i586/firmware/var/log/portage/net-wireless:coova-chilli-1.2.9:20120324-003042.log'.
 [31;01m*[0m The ebuild environment file is located at '/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/temp/environment'.
 [31;01m*[0m S: '/var/tmp/i586-pc-linux-gnu/portage/net-wireless/coova-chilli-1.2.9/work/coova-chilli-1.2.9'
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 198 bytes
Desc: Digital signature
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120324/8b612fae/attachment-0001.pgp>

From maxxer at ufficyo.com  Mon Mar 26 10:52:05 2012
From: maxxer at ufficyo.com (Lorenzo Milesi)
Date: Mon, 26 Mar 2012 12:52:05 +0200 (CEST)
Subject: [Chilli] Compilation issues with 1.2.9
In-Reply-To: <20120324003921.GD3604@lemonhead.scabb>
Message-ID: <1155530232.392645.1332759125443.JavaMail.root@quaglia>

> I'm getting some troubles building Coova Chilli 1.2.9 :

what platform are you on?
I know it's not very useful but I compiled fine on Debian 6.


