<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] SOLVED !!!! No process in pidfile '/usr/local/var/run/chilli.pid' found running; none killed.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20SOLVED%20%21%21%21%21%20No%20process%20in%20pidfile%0A%20%27/usr/local/var/run/chilli.pid%27%20found%20running%3B%20none%20killed.&In-Reply-To=%3CCADao4Co2CXP80L8JuTmrT5pO90Vk8mTCqGzyDe1%2BoOhcaWwu_A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002141.html">
   <LINK REL="Next"  HREF="002143.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] SOLVED !!!! No process in pidfile '/usr/local/var/run/chilli.pid' found running; none killed.</H1>
    <B>Russell Mike</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20SOLVED%20%21%21%21%21%20No%20process%20in%20pidfile%0A%20%27/usr/local/var/run/chilli.pid%27%20found%20running%3B%20none%20killed.&In-Reply-To=%3CCADao4Co2CXP80L8JuTmrT5pO90Vk8mTCqGzyDe1%2BoOhcaWwu_A%40mail.gmail.com%3E"
       TITLE="[Chilli] SOLVED !!!! No process in pidfile '/usr/local/var/run/chilli.pid' found running; none killed.">radius.sir at gmail.com
       </A><BR>
    <I>Mon Feb 11 12:51:40 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="002141.html">[Chilli] SOLVED !!!! No process in pidfile '/usr/local/var/run/chilli.pid' found running; none killed.
</A></li>
        <LI>Next message: <A HREF="002143.html">[Chilli] [RESOLVED !!!] Coova-Chilli Multi Tenanency Mode All daemons do not come up on reboot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2142">[ date ]</a>
              <a href="thread.html#2142">[ thread ]</a>
              <a href="subject.html#2142">[ subject ]</a>
              <a href="author.html#2142">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  Thanks dear all once again --
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  The only problem left that i cannot stop chilli (Coova_1.3.0 &amp; UBUNTU
</I>&gt;&gt;&gt;&gt;<i> 12.4 LTS x64). I can modify the start/stop script and use &quot;kill -9&quot; but
</I>&gt;&gt;&gt;&gt;<i> really do not want to do that. perhaps there is better way to handle this.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  because i read that kill -9 doesn't give the process a chance to
</I>&gt;&gt;&gt;&gt;<i> cleanly:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> 1) shut down socket connections
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> 2) clean up temp files
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> 3) inform its children that it is going away
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> 4) reset its terminal characteristics
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> and so on and so on and so on.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  *PROBLEM:*
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">root at captive</A>:~# /etc/init.d/chilli stop
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Found configuration /usr/local/etc/chilli/coova-vlan10/chilli.conf
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Running DHCPIF=coova-vlan10 /etc/init.d/chilli stop
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Shutting down chilli: No process in pidfile
</I>&gt;&gt;&gt;&gt;<i> '/usr/local/var/run/chilli.coova-vlan10.pid' found running; none killed.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  Found configuration /usr/local/etc/chilli/coova-vlan20/chilli.conf
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Running DHCPIF=coova-vlan20 /etc/init.d/chilli stop
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Shutting down chilli: No process in pidfile
</I>&gt;&gt;&gt;&gt;<i> '/usr/local/var/run/chilli.coova-vlan20.pid' found running; none killed.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  Found configuration /usr/local/etc/chilli/coova-vlan30/chilli.conf
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Running DHCPIF=coova-vlan30 /etc/init.d/chilli stop
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Shutting down chilli: No process in pidfile
</I>&gt;&gt;&gt;&gt;<i> '/usr/local/var/run/chilli.coova-vlan30.pid' found running; none killed.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  Found configuration /usr/local/etc/chilli/coova-vlan40/chilli.conf
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Running DHCPIF=coova-vlan40 /etc/init.d/chilli stop
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Shutting down chilli: No process in pidfile
</I>&gt;&gt;&gt;&gt;<i> '/usr/local/var/run/chilli.coova-vlan40.pid' found running; none killed.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  Found configuration /usr/local/etc/chilli/coova-vlan50/chilli.conf
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Running DHCPIF=coova-vlan50 /etc/init.d/chilli stop
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Shutting down chilli: No process in pidfile
</I>&gt;&gt;&gt;&gt;<i> '/usr/local/var/run/chilli.coova-vlan50.pid' found running; none killed.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Thanks / Regards
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> RM --R
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *Mike WROTE:*
</I>&gt;<i>
</I>&gt;<i> Hi Sir,
</I>&gt;<i>
</I>&gt;<i> Ever since chilli was installed, default script was never able to stop the
</I>&gt;<i> service, i tried re compelling, uninstalled/installed number of time. but
</I>&gt;<i> just after the installation this script never could stop the daemon.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *Chuan SAID:*
</I>&gt;<i> I install coovachilli with deb from old chilli file. It includes chilli
</I>&gt;<i> and start stop scripts. I added original chilli for you with email. you
</I>&gt;<i> need to create only 1 vlan then test start and stop check on start It
</I>&gt;<i> creates chilli*.pid cause you need pid to kill for stop chilli
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *Mike Wrote: *
</I>&gt;<i>
</I>&gt;<i> Hi Sir
</I>&gt;<i>
</I>&gt;<i> BIG BIG Thanks, that worked !!!!
</I>&gt;<i>
</I>&gt;<i> i can now stop chilli normally. i modified the stop section of my chilli
</I>&gt;<i> start script, i need to create two variables in edition. I tested running
</I>&gt;<i> chilli on physical interface (one instance only) &amp; stop using script, it
</I>&gt;<i> just worked. i am expecting it would work for VLANs (multi instances) as
</I>&gt;<i> well.
</I>&gt;<i>
</I>&gt;<i> But the script that was created during compilation/installation were never
</I>&gt;<i> able to stop the daemon. Was failing with following error:
</I>&gt;<i> *
</I>&gt;<i> *
</I>&gt;<i> Shutting down chilli: No process in pidfile '/usr/local/var/run/chilli.pid'
</I>&gt;<i> found running; none killed.
</I>&gt;<i>
</I>&gt;<i> Say simple work thanks does not seems to be enough. God will through shine
</I>&gt;<i> in your way. here is the working script *(CoovaChilli 1.3.0 on
</I>&gt;<i> UBUNTU_12.4LTS x64)*. Modification are showed in RED.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> #!/bin/sh
</I>&gt;<i>
</I>&gt;<i> *# Custom Variable Defined by RM ---*
</I>&gt;<i> *DAEMON=/usr/local/sbin/chilli*
</I>&gt;<i> *NAME=chilli*
</I>&gt;<i>
</I>&gt;<i> [ -f /usr/local/sbin/chilli ] || exit 0
</I>&gt;<i>
</I>&gt;<i> . /usr/local/etc/chilli/functions
</I>&gt;<i>
</I>&gt;<i> MULTI=$(ls /usr/local/etc/chilli/*/chilli.conf 2&gt;/dev/null)
</I>&gt;<i> [ -z &quot;$DHCPIF&quot; ] &amp;&amp; [ -n &quot;$MULTI&quot; ] &amp;&amp; {
</I>&gt;<i>     for c in $MULTI;
</I>&gt;<i>     do
</I>&gt;<i>         echo &quot;Found configuration $c&quot;
</I>&gt;<i>         DHCPIF=$(basename $(echo $c|sed 's#/chilli.conf##'))
</I>&gt;<i>         export DHCPIF
</I>&gt;<i>         echo &quot;Running DHCPIF=$DHCPIF $0 $*&quot;
</I>&gt;<i>         sh $0 $*
</I>&gt;<i>     done
</I>&gt;<i>     exit
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> if [ -n &quot;$DHCPIF&quot; ]; then
</I>&gt;<i>     CONFIG=/usr/local/etc/chilli/$DHCPIF/chilli.conf
</I>&gt;<i>     pidfile=/usr/local/var/run/chilli.$DHCPIF.pid
</I>&gt;<i> else
</I>&gt;<i>     CONFIG=/usr/local/etc/chilli.conf
</I>&gt;<i>     pidfile=/usr/local/var/run/chilli.pid
</I>&gt;<i> fi
</I>&gt;<i>
</I>&gt;<i> [ -f $CONFIG ] || {
</I>&gt;<i>     echo &quot;$CONFIG Not found&quot;
</I>&gt;<i>     exit 0
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> check_required
</I>&gt;<i>
</I>&gt;<i> RETVAL=0
</I>&gt;<i> prog=&quot;chilli&quot;
</I>&gt;<i>
</I>&gt;<i> case $1 in
</I>&gt;<i>     start)
</I>&gt;<i>         echo -n &quot;Starting $prog: &quot;
</I>&gt;<i>
</I>&gt;<i>         /sbin/modprobe tun &gt;/dev/null 2&gt;&amp;1
</I>&gt;<i>         echo 1 &gt; /proc/sys/net/ipv4/ip_forward
</I>&gt;<i>
</I>&gt;<i>         [ -e /dev/net/tun ] || {
</I>&gt;<i>             (cd /dev;
</I>&gt;<i>                 mkdir net;
</I>&gt;<i>                 cd net;
</I>&gt;<i>                 mknod tun c 10 200)
</I>&gt;<i>         }
</I>&gt;<i>
</I>&gt;<i>         writeconfig
</I>&gt;<i>         radiusconfig
</I>&gt;<i>
</I>&gt;<i>         test ${HS_ADMINTERVAL:-0} -gt 0 &amp;&amp; {
</I>&gt;<i>             (crontab -l 2&gt;&amp;- | grep -v $0
</I>&gt;<i>                 echo &quot;*/$HS_ADMINTERVAL * * * * $0 radconfig&quot;
</I>&gt;<i>                 ) | crontab - 2&gt;&amp;-
</I>&gt;<i>         }
</I>&gt;<i>
</I>&gt;<i>         ifconfig $HS_LANIF 0.0.0.0
</I>&gt;<i>         if [ &quot;$(which start-stop-daemon)&quot; = &quot;&quot; ]; then
</I>&gt;<i>             /usr/local/sbin/chilli -c $CONFIG --pidfile=$pidfile &amp;
</I>&gt;<i>         else
</I>&gt;<i>             start-stop-daemon -S --pidfile=$pidfile --user=chilli \
</I>&gt;<i>                 --exec /usr/local/sbin/chilli -- -c $CONFIG &amp;
</I>&gt;<i>         fi
</I>&gt;<i>         echo
</I>&gt;<i>         ;;
</I>&gt;<i>
</I>&gt;<i>     radconfig)
</I>&gt;<i>         [ -e $MAIN_CONF ] || writeconfig
</I>&gt;<i>         radiusconfig
</I>&gt;<i>         ;;
</I>&gt;<i>
</I>&gt;<i>     reload)
</I>&gt;<i>         killall -HUP chilli
</I>&gt;<i>         ;;
</I>&gt;<i>
</I>&gt;<i>     restart)
</I>&gt;<i>         $0 stop
</I>&gt;<i>         sleep 1
</I>&gt;<i>         $0 start
</I>&gt;<i>         RETVAL=$?
</I>&gt;<i>         ;;
</I>&gt;<i>
</I>&gt;<i>     stop)
</I>&gt;<i>         echo -n &quot;Shutting down $prog: &quot;
</I>&gt;<i>
</I>&gt;<i>         crontab -l 2&gt;&amp;- | grep -v $0 | crontab -
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>    crontab -l 2&gt;&amp;- | grep -v /etc/init.d/chilli | crontab -
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         start-stop-daemon --oknodo --stop --quiet --pidfile
</I>&gt;<i> /var/run/$NAME.$HS_LANIF.pid \
</I>&gt;<i>                 --exec $DAEMON
</I>&gt;<i>         echo
</I>&gt;<i>         ;;
</I>&gt;<i>
</I>&gt;<i>     *)
</I>&gt;<i>         echo &quot;Usage: $0 {start|stop|restart|reload|radconfig}&quot;
</I>&gt;<i>         exit 1
</I>&gt;<i> esac
</I>&gt;<i>
</I>&gt;<i> exit $?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> **
</I>&gt;<i>
</I>


&gt;<i> *MIKE WROTE:*
</I>&gt;<i>
</I>
i here by update the status &amp; confirm that the above script is successfully
able to stop the chilli multi instance with minor change. i can now stop
all five instance using &quot;/etc/init.d/chilli stop&quot; without any issue at all.
it really does the job.

To refresh the memory following was my problem:

Shutting down chilli: No process in pidfile
'/usr/local/var/run/chilli.coova-vlan10.pid'
found running; none killed.
Shutting down chilli: No process in pidfile
'/usr/local/var/run/chilli.coova-vlan20.pid'
found running; none killed.
Shutting down chilli: No process in pidfile
'/usr/local/var/run/chilli.coova-vlan30.pid'
found running; none killed.
Shutting down chilli: No process in pidfile
'/usr/local/var/run/chilli.coova-vlan40.pid'
found running; none killed.
Shutting down chilli: No process in pidfile
'/usr/local/var/run/chilli.coova-vlan50.pid'
found running; none killed.


Problem is also documented in the above section of this mail. Credit goes
to CHUAN (EasyHorpak.com). We were working together. i tried to make stuff
very clear for others to troubleshoot.

With multi instances script was giving following error when it was stoping
each instance. in my case five instances, this error was repeated 5 times
after i issues &quot;/etc/nit.d/chilli stop&quot;

&quot; --exec &quot; NOT FOUNG&quot;
&quot; --exec &quot; NOT FOUNG&quot;
&quot; --exec &quot; NOT FOUNG&quot;
&quot; --exec &quot; NOT FOUNG&quot;
&quot; --exec &quot; NOT FOUNG&quot;

FIX: Make it as one line, rest all the script remains the same as above
(&lt;&gt;).

*FROM:*
start-stop-daemon --oknodo --stop --quiet --pidfile
/var/run/$NAME.$HS_LANIF.pid \
                --exec $DAEMON

*TO:*
 start-stop-daemon --oknodo --stop --quiet --pidfile
/var/run/$NAME.$HS_LANIF.pid --exec $DAEMON


Thanks to entire community
RM --
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20130211/922ea1f7/attachment-0001.html">http://lists.coova.org/pipermail/chilli/attachments/20130211/922ea1f7/attachment-0001.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002141.html">[Chilli] SOLVED !!!! No process in pidfile '/usr/local/var/run/chilli.pid' found running; none killed.
</A></li>
	<LI>Next message: <A HREF="002143.html">[Chilli] [RESOLVED !!!] Coova-Chilli Multi Tenanency Mode All daemons do not come up on reboot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2142">[ date ]</a>
              <a href="thread.html#2142">[ thread ]</a>
              <a href="subject.html#2142">[ subject ]</a>
              <a href="author.html#2142">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
