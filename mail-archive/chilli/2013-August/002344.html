<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] radacct table updated only at logout
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20radacct%20table%20updated%20only%20at%20logout&In-Reply-To=%3C8fc9df89a9ef9e1170c68eb1a243b353%40217.133.198.50%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002343.html">
   <LINK REL="Next"  HREF="002345.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] radacct table updated only at logout</H1>
    <B>Atomikramp</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20radacct%20table%20updated%20only%20at%20logout&In-Reply-To=%3C8fc9df89a9ef9e1170c68eb1a243b353%40217.133.198.50%3E"
       TITLE="[Chilli] radacct table updated only at logout">atomikramp at email.it
       </A><BR>
    <I>Wed Aug 14 12:19:09 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="002343.html">[Chilli] radacct table updated only at logout
</A></li>
        <LI>Next message: <A HREF="002345.html">[Chilli] Need help on porting the Coovachilli-1.3.0 application in	Router
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2344">[ date ]</a>
              <a href="thread.html#2344">[ thread ]</a>
              <a href="subject.html#2344">[ subject ]</a>
              <a href="author.html#2344">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi and thanks for your reply, sorry for the top quoting but i'm off and
don't have my usual email client, and this webmail is definitely crap :)


&nbsp;


the problem is that i'm running a patched version of dansguardian, which has
a sqlauth plugin which can perform queries on a mysql database, it's
preconfigured to work with freeradius, of course queries can be customized.


&nbsp;


I'm fairly sure active sessions should be displayed in the radacct table,
other captive portal solutions (i've tried pfsense for instance) do that,
and also other 802.1x devices like switches and routers keeps the sessions
updated correctly.


&nbsp;


I'm worried that something might be wrong in my configuration or that coova
is not sending accounting packets to the radius server properly.


maybe they are just sent out on disconnect?


&nbsp;


thanks


Francesco


&nbsp;



--------- Original Message --------

 Da: &quot;Siji Sunny&quot; &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">sijisunny at gmail.com</A>&gt;

 To: 

 Cc: <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli at coova.org</A>

 Oggetto: Re: [Chilli] radacct table updated only at logout

 Data: 14/08/13 10:39

 

 





On Wed, Aug 14, 2013 at 1:20 PM, Atomikramp &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">atomikramp at email.it</A>&gt;
wrote:


Hello list,
I hope i'm not annoying you too much with my questions, but i'm trying to
understand the behaviour of coova-chilli and i've noticed something weird.
&nbsp;
I've configured freeradius to store accounting informations in a sql
database, i think the coova-chilli setup is configured properly because i
can authenticate against the radius server and access the internet with my
users.
&nbsp;
the problem is that i have some scripts that need to query the radacct table
for active sessions, yet the radacct table seems to be updated only when a
user disconnects or his session is terminated due to a session timeout, a
logout or any other event that would cause the user to be dropped out (nas
reboot for example).
&nbsp;
I've also tried specifying the&nbsp;--definteriminterval parameter from the
command line but nothing changes.



Hi Francesco,



Am not sure, whether this is the standard way of using or not, but its works
fine for us.

 
We fetched the output of &quot;radwho&quot; and extract the userinfo from it.


&quot;radwho&quot; will till you the available active sessions (users).
&nbsp;

&nbsp;
also i am expecting an entry to pop in the table at login time.. but it's
not accurring.
&nbsp;
any idea why? i'm using coova-chilli 1.3.0
&nbsp;
hope you can help me out with this
thanks
Sincerely
Francesco


----

 Caselle da 1GB, trasmetti allegati fino a 3GB e in piu' IMAP, POP3 e SMTP
autenticato? GRATIS solo con Email.it 

 

 Sponsor:

 Offerte AGOSTO all'Hotel ADELPHI FRONTE MARE Riccione, Hotel per Famiglie
con servizi per bambini che avranno tanto spazio per divertirsi. Hotel con
Piscina Tutto compreso a Riccione

 Clicca qui 


_______________________________________________

 Chilli mailing list

 <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>

 <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>

 




-- 

Siji Sunny




 
 --
 Caselle da 1GB, trasmetti allegati fino a 3GB e in piu' IMAP, POP3 e SMTP
autenticato? GRATIS solo con Email.it: <A HREF="http://www.email.it/f">http://www.email.it/f</A>
 
 Sponsor:
 Dal 1 al 7 agosto settimana a euro 402,00 in camera doppia all'Hotel
Fiordiloto di Rimini
Dal 22 al 28 agosto euro 399,00. Servizio spiaggia e bevande ai pasti
 Clicca qui: <A HREF="http://adv.email.it/cgi-bin/foclick.cgi?mid=13034&amp;d=20130814">http://adv.email.it/cgi-bin/foclick.cgi?mid=13034&amp;d=20130814</A>


 
 
 --
 Caselle da 1GB, trasmetti allegati fino a 3GB e in piu' IMAP, POP3 e SMTP autenticato? GRATIS solo con Email.it <A HREF="http://www.email.it/f">http://www.email.it/f</A>
 
 Sponsor:
 Offerte AGOSTO all'Hotel ADELPHI FRONTE MARE Riccione, Hotel per Famiglie con servizi per bambini che avranno tanto spazio per divertirsi. Hotel con Piscina Tutto compreso a Riccione
 Clicca qui: <A HREF="http://adv.email.it/cgi-bin/foclick.cgi?mid=13030&amp;d=14-8">http://adv.email.it/cgi-bin/foclick.cgi?mid=13030&amp;d=14-8</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20130814/e8c7784a/attachment.html">http://lists.coova.org/pipermail/chilli/attachments/20130814/e8c7784a/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002343.html">[Chilli] radacct table updated only at logout
</A></li>
	<LI>Next message: <A HREF="002345.html">[Chilli] Need help on porting the Coovachilli-1.3.0 application in	Router
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2344">[ date ]</a>
              <a href="thread.html#2344">[ thread ]</a>
              <a href="subject.html#2344">[ subject ]</a>
              <a href="author.html#2344">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
