<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] CoovaChilli 1.2.9 &amp; AnyIP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20CoovaChilli%201.2.9%20%26%20AnyIP&In-Reply-To=%3CCAODoKgDfwjYYwUwhc52ST%2Br96ieAtYRBrtiJQ6_m6fSu67PSfQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001842.html">
   <LINK REL="Next"  HREF="001844.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] CoovaChilli 1.2.9 &amp; AnyIP</H1>
    <B>Robert White</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20CoovaChilli%201.2.9%20%26%20AnyIP&In-Reply-To=%3CCAODoKgDfwjYYwUwhc52ST%2Br96ieAtYRBrtiJQ6_m6fSu67PSfQ%40mail.gmail.com%3E"
       TITLE="[Chilli] CoovaChilli 1.2.9 &amp; AnyIP">rwhite at globalgossip.net
       </A><BR>
    <I>Fri Feb 10 07:46:57 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="001842.html">[Chilli] CoovaChilli 1.2.9 &amp; AnyIP
</A></li>
        <LI>Next message: <A HREF="001844.html">[Chilli] CoovaChilli 1.2.9 &amp; AnyIP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1843">[ date ]</a>
              <a href="thread.html#1843">[ thread ]</a>
              <a href="subject.html#1843">[ subject ]</a>
              <a href="author.html#1843">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi David,

We've been using anyip WITHOUT natanyip.

The setup we are trying to achieve is as follows, perhaps you could comment
if we're going about this the right way:

We have a network where people connect and get an IP via DHCP - all works
well.
On the same network there are people who connect and have a static IP -
anyip is turned on.  Chilli log shows them getting assigned a static IP but
they are never served the captive portal
On the same network there are people who have DHCP turned on and we are
trying to set their IP via RADIUS attributes.  This has two outcomes
depending on whether or not we set HS_STATIP.  If we dont set it then
chilli complains it is unable to assign a static ip.  If we set HS_STATIP
to the subnet that RADIUS is trying to assign an IP from then the RADIUS
attribute for the IP address is assigned properly but the Subnet mask and
DNS server attributes are not.  If someone with a static IP tries to
connect then chilli will seg fault.

David, could you clarify the use of HS_DYNIP and HS_STATIP.  If they are
hashed out will anyip work?  We've never used natanyip - does this NAT a
client static IP with an IP from the HS_DYNIP pool?

If you could outline the best way to achieve our scenario above we can do
some more testing and email through some debug info.

Thanks,
*
*
*Rob White
**
*
On 10 February 2012 16:36, David Bird &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">david at coova.com</A>&gt; wrote:

&gt;<i> How are you using anyip (with natanyip?) And what test are you doing that
</I>&gt;<i> is failing?
</I>&gt;<i>
</I>&gt;<i> Robert White &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">rwhite at globalgossip.net</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt;Bojan,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Did you have any success getting AnyIP feature working?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;I can confirm it's not working for me in 1.2.8 or 1.2.9.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Thanks,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Rob
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;On 13 January 2012 23:22, Bojan Pogacar &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">bojan at gajba.net</A>&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; David, did you have time to take a look at my results?
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Thank you very much for your help.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Bye
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Dne 11.1.2012 10:29, pi&#353;e Bojan Pogacar:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; On chilli 1.2.9 I get:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1
</I>&gt;<i> &gt;&gt;&gt; Unit 1 : -inuse- : 10.9.0.3 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1
</I>&gt;<i> &gt;&gt;&gt; Unit 2 : -1/ 3 : 10.9.0.4 :
</I>&gt;<i> &gt;&gt;&gt; Unit 3 : 2/ 4 : 10.9.0.5 :
</I>&gt;<i> &gt;&gt;&gt; Unit 4 : 3/ 5 : 10.9.0.6 :
</I>&gt;<i> &gt;&gt;&gt; Unit 5 : 4/ 6 : 10.9.0.7 :
</I>&gt;<i> &gt;&gt;&gt; etc, ..
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; On chilli 1.2.5 I get:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=4
</I>&gt;<i> &gt;&gt;&gt; Unit 1 : -1/ 2 : 10.9.0.3 :
</I>&gt;<i> &gt;&gt;&gt; Unit 2 : 1/ 3 : 10.9.0.4 :
</I>&gt;<i> &gt;&gt;&gt; Unit 3 : 2/ 4 : 10.9.0.5 :
</I>&gt;<i> &gt;&gt;&gt; Unit 4 : 3/ 5 : 10.9.0.6 :
</I>&gt;<i> &gt;&gt;&gt; Unit 5 : 4/ 6 : 10.9.0.7 :
</I>&gt;<i> &gt;&gt;&gt; etc, ...
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Is there OK, that on 1.2.9 I get two IPs listed on same MAC. Could this
</I>&gt;<i> &gt;&gt;&gt; be a problem that web server terminates a connection?
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; All IPs are fetch through DHCP. Static IPs are working.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Thanks, Bojan
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Dne 11.1.2012 10:20, pi&#353;e David Bird:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; You can get perhaps a bit more info if you do:
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; chilli_query listippool
</I>&gt;<i> &gt;&gt;&gt;&gt; DHCP lease time 600 sec, grace period 60 sec
</I>&gt;<i> &gt;&gt;&gt;&gt; First available dynamic 3 Last 1
</I>&gt;<i> &gt;&gt;&gt;&gt; First available static 254 Last 508
</I>&gt;<i> &gt;&gt;&gt;&gt; List size 509
</I>&gt;<i> &gt;&gt;&gt;&gt; -- Dynamic Pool
</I>&gt;<i> &gt;&gt;&gt;&gt; ------------------------------**------------------------------
</I>&gt;<i> &gt;&gt;&gt;&gt; Unit 0 : -inuse- : 10.1.0.2 : mac=XX-XX-XX-XX-XX-XX
</I>&gt;<i> &gt;&gt;&gt;&gt; ip=192.0.0.2 age=2
</I>&gt;<i> &gt;&gt;&gt;&gt; Unit 1 : 252/ -1 : 10.1.0.3 :
</I>&gt;<i> &gt;&gt;&gt;&gt; Unit 2 : -inuse- : 10.1.0.4 : mac=YY-YY-YY-YY-YY-YY ip=10.1.0.4
</I>&gt;<i> &gt;&gt;&gt;&gt; age=241
</I>&gt;<i> &gt;&gt;&gt;&gt; ...
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; above is a 192.0.0.2 anyip static IP being NATed through as 10.1.0.2.
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; On Tue, 2012-01-10 at 23:21 +0100, Bojan Pogacar wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Hello!
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; I've tested 1.2.9 and it seems that DHCP is faster and is running
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; very well.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; I've also tested anyip feature and it still doesn't work for me after
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; 1.2.5 . Can anyone confirm that this feature wasn't broken after
</I>&gt;<i> 1.2.5.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; I've also described my problem at <A HREF="http://coova.org/node/4888">http://coova.org/node/4888</A> . Can
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; please anyone please take a look?
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Thanks David, thanks everyone!
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Bojan
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; ______________________________**_________________
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Chilli mailing list
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; <A HREF="http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli&lt;">http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli&lt;</A>
</I>&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;  ______________________________**_________________
</I>&gt;<i> &gt;&gt;&gt; Chilli mailing list
</I>&gt;<i> &gt;&gt;&gt; <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i> &gt;&gt;&gt; <A HREF="http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli&lt;">http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli&lt;</A>
</I>&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;  ______________________________**_________________
</I>&gt;<i> &gt;&gt; Chilli mailing list
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli&lt;">http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli&lt;</A>
</I>&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;-------------------------------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;IMPORTANT NOTICE : The information in this email is confidential and may
</I>&gt;<i> also be privileged.
</I>&gt;<i> &gt;If you are not the intended recipient, any use or dissemination of the
</I>&gt;<i> information and any
</I>&gt;<i> &gt;disclosure or copying of this email is unauthorised and strictly
</I>&gt;<i> prohibited. If you have received
</I>&gt;<i> &gt;this email in error, please promptly inform us by reply email or
</I>&gt;<i> telephone. You should also delete
</I>&gt;<i> &gt;this email and destroy any hard copies produced.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;_______________________________________________
</I>&gt;<i> &gt;Chilli mailing list
</I>&gt;<i> &gt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i> &gt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>&gt;<i>
</I>
-------------------------------------------------

IMPORTANT NOTICE : The information in this email is confidential and may also be privileged. 
If you are not the intended recipient, any use or dissemination of the information and any
disclosure or copying of this email is unauthorised and strictly prohibited. If you have received
this email in error, please promptly inform us by reply email or telephone. You should also delete
this email and destroy any hard copies produced.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20120210/e25118d3/attachment-0001.html">http://lists.coova.org/pipermail/chilli/attachments/20120210/e25118d3/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001842.html">[Chilli] CoovaChilli 1.2.9 &amp; AnyIP
</A></li>
	<LI>Next message: <A HREF="001844.html">[Chilli] CoovaChilli 1.2.9 &amp; AnyIP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1843">[ date ]</a>
              <a href="thread.html#1843">[ thread ]</a>
              <a href="subject.html#1843">[ subject ]</a>
              <a href="author.html#1843">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
