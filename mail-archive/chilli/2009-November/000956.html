<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] Incorrectly high data usage over a short period of time
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20Incorrectly%20high%20data%20usage%20over%20a%20short%20period%20of%20time&In-Reply-To=%3Cd42f029a0911092319y63a4e938ob689f2e851fa1bf2%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000954.html">
   <LINK REL="Next"  HREF="000957.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] Incorrectly high data usage over a short period of time</H1>
    <B>Henk Kleynhans</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20Incorrectly%20high%20data%20usage%20over%20a%20short%20period%20of%20time&In-Reply-To=%3Cd42f029a0911092319y63a4e938ob689f2e851fa1bf2%40mail.gmail.com%3E"
       TITLE="[Chilli] Incorrectly high data usage over a short period of time">henk at skyrove.com
       </A><BR>
    <I>Tue Nov 10 07:19:06 UTC 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000954.html">[Chilli] Incorrectly high data usage over a short period of time
</A></li>
        <LI>Next message: <A HREF="000957.html">[Chilli] Hotspot Login on Mobile Phones
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#956">[ date ]</a>
              <a href="thread.html#956">[ thread ]</a>
              <a href="subject.html#956">[ subject ]</a>
              <a href="author.html#956">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jack,

It sounds quite plausible to me.

On my 4 Mbps line, I frequently download at 400 KB/s. (theoretic maximum is
512 KB/s)

That means, with a single line, I can typically download 23 MB every min.
(400 x 60/1024)

You have bonded 3 lines, thus you can get 23x3 = 69 MB / min

Your customer was online for 228 sec, or 3.8 min, thus 69 * 3.8 = 262 MB.

They only downloaded 168 MB. (Probably a Windows or Office update if they're
not aware of what it was)

Kind regards,
henk

-- 
Henk Kleynhans
CTO &amp; Founder
Skyrove (Pty) Ltd
Africa's Largest &amp; Fastest Growing Wi-Fi Hotspot Network
Tel: 0861 ROVERS
Cell: +27 (84) 3073451
Fax: +27 (86) 6204077
<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">henk at skyrove.com</A>
blog: www.geekrebel.com

------

&quot;A person with ubuntu is open and available to others, affirming of others,
does not feel threatened that others are able and good, for he or she has a
proper self-assurance that comes from knowing that he or she belongs in a
greater whole and is diminished when others are humiliated or diminished,
when others are tortured or oppressed.&quot; - Desmond Tutu

On Mon, Nov 9, 2009 at 5:01 PM, Jack J Allan &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">jack.j.allan at gmail.com</A>&gt; wrote:

&gt;<i> Dear Coova Chilli Community
</I>&gt;<i>
</I>&gt;<i> Firstly, my setup:
</I>&gt;<i>
</I>&gt;<i>    1. Coova Chilli 1.013
</I>&gt;<i>    2. Freeradius 2.1.5
</I>&gt;<i>
</I>&gt;<i> I am absolutely perplexed by this bug. Not only that, but I cannot think of
</I>&gt;<i> any ways of reproducing it, so I am hoping someone in the community has come
</I>&gt;<i> accross this before. My problem is my NAS is reporting incorrectly high
</I>&gt;<i> usage over a short space of time. Where we are based (South Africa), the
</I>&gt;<i> fastest one's ADSL line speed can be is 4 mega bits per second. This
</I>&gt;<i> translates to about 0.47 megabytes per seconds, and that is if you are
</I>&gt;<i> lucky. We have three such lines multiplexed together, which means we can get
</I>&gt;<i> a throughput of about 0.47*3 = 1.41 megabytes per second. Unfortunately, we
</I>&gt;<i> have received a complaint claiming that chilli has deducted more than what
</I>&gt;<i> was used. Looking at the radius logs, I can ascertain that this is true.
</I>&gt;<i>
</I>&gt;<i> Here is the initial start packet sent by chilli to radius (I have removed
</I>&gt;<i> username and Nas Identifier to protect privacy):
</I>&gt;<i>
</I>&gt;<i> *Tue Oct 27 09:12:57 2009
</I>&gt;<i>         ChilliSpot-Version = &quot;1.0.13&quot;
</I>&gt;<i>         Acct-Status-Type = Start
</I>&gt;<i>         Calling-Station-Id = &quot;00-1F-33-FF-BD-00&quot;
</I>&gt;<i>         NAS-Port-Type = Wireless-802.11
</I>&gt;<i>         NAS-Port = 4
</I>&gt;<i>         NAS-Port-Id = &quot;00000004&quot;
</I>&gt;<i>         Framed-IP-Address = 172.25.0.168
</I>&gt;<i>         Acct-Session-Id = &quot;4ae69d6000000004&quot;
</I>&gt;<i>         NAS-IP-Address = 172.25.0.1
</I>&gt;<i>         Called-Station-Id = &quot;00-16-B6-D9-5A-EB&quot;
</I>&gt;<i>         Acct-Unique-Session-Id = &quot;f3bcc21590c1afd1&quot;
</I>&gt;<i>         Timestamp = 1256627577
</I>&gt;<i>         Request-Authenticator = Verified*
</I>&gt;<i>
</I>&gt;<i> Then about 1 minute later, the following occurs
</I>&gt;<i> *Tue Oct 27 09:13:59 2009
</I>&gt;<i>         ChilliSpot-Version = &quot;1.0.13&quot;
</I>&gt;<i>         Acct-Status-Type = Interim-Update
</I>&gt;<i>         Calling-Station-Id = &quot;00-1F-33-FF-BD-00&quot;
</I>&gt;<i>         NAS-Port-Type = Wireless-802.11
</I>&gt;<i>         NAS-Port = 4
</I>&gt;<i>         NAS-Port-Id = &quot;00000004&quot;
</I>&gt;<i>         Framed-IP-Address = 172.25.0.168
</I>&gt;<i>         Acct-Session-Id = &quot;4ae69d6000000004&quot;
</I>&gt;<i>         NAS-IP-Address = 172.25.0.1
</I>&gt;<i>         Called-Station-Id = &quot;00-16-B6-D9-5A-EB&quot;
</I>&gt;<i>        Acct-Input-Octets = 1178355
</I>&gt;<i>        Acct-Output-Octets = 52201523
</I>&gt;<i>         Acct-Input-Gigawords = 0
</I>&gt;<i>         Acct-Output-Gigawords = 0
</I>&gt;<i>         Acct-Input-Packets = 19170
</I>&gt;<i>         Acct-Output-Packets = 36581
</I>&gt;<i>         Acct-Session-Time = 63
</I>&gt;<i>         Acct-Unique-Session-Id = &quot;f3bcc21590c1afd1&quot;
</I>&gt;<i>         Timestamp = 1256627639
</I>&gt;<i>         Request-Authenticator = Verified*
</I>&gt;<i>
</I>&gt;<i> This is definitely in error (the bold parts), as the backbone line speed
</I>&gt;<i> cannot handle this much traffic in such a short space of time. Another
</I>&gt;<i> minute later:
</I>&gt;<i> Tue Oct 27 09:15:02 2009
</I>&gt;<i> *        ChilliSpot-Version = &quot;1.0.13&quot;
</I>&gt;<i>         Acct-Status-Type = Interim-Update
</I>&gt;<i>         Calling-Station-Id = &quot;00-1F-33-FF-BD-00&quot;
</I>&gt;<i>         NAS-Port-Type = Wireless-802.11
</I>&gt;<i>         NAS-Port = 4
</I>&gt;<i>         NAS-Port-Id = &quot;00000004&quot;
</I>&gt;<i>         Framed-IP-Address = 172.25.0.168
</I>&gt;<i>         Acct-Session-Id = &quot;4ae69d6000000004&quot;
</I>&gt;<i>         NAS-IP-Address = 172.25.0.1
</I>&gt;<i>         Called-Station-Id = &quot;00-16-B6-D9-5A-EB&quot;
</I>&gt;<i>        Acct-Input-Octets = 2132628
</I>&gt;<i>        Acct-Output-Octets = 98448008
</I>&gt;<i>         Acct-Input-Gigawords = 0
</I>&gt;<i>         Acct-Output-Gigawords = 0
</I>&gt;<i>         Acct-Input-Packets = 36067
</I>&gt;<i>         Acct-Output-Packets = 68754
</I>&gt;<i>         Acct-Session-Time = 126
</I>&gt;<i>         Acct-Unique-Session-Id = &quot;f3bcc21590c1afd1&quot;
</I>&gt;<i>         Timestamp = 1256627702
</I>&gt;<i>         Request-Authenticator = Verified*
</I>&gt;<i>
</I>&gt;<i> Again, the amount of data usage is absolutely impossible for the backbone's
</I>&gt;<i> capabaility. Another minute later:
</I>&gt;<i> *Tue Oct 27 09:16:05 2009
</I>&gt;<i>         ChilliSpot-Version = &quot;1.0.13&quot;
</I>&gt;<i>         Acct-Status-Type = Interim-Update
</I>&gt;<i>         Calling-Station-Id = &quot;00-1F-33-FF-BD-00&quot;
</I>&gt;<i>         NAS-Port-Type = Wireless-802.11
</I>&gt;<i>         NAS-Port = 4
</I>&gt;<i>         NAS-Port-Id = &quot;00000004&quot;
</I>&gt;<i>         Framed-IP-Address = 172.25.0.168
</I>&gt;<i>         Acct-Session-Id = &quot;4ae69d6000000004&quot;
</I>&gt;<i>         NAS-IP-Address = 172.25.0.1
</I>&gt;<i>         Called-Station-Id = &quot;00-16-B6-D9-5A-EB&quot;
</I>&gt;<i>        Acct-Input-Octets = 3097259
</I>&gt;<i>        Acct-Output-Octets = 146070592
</I>&gt;<i>         Acct-Input-Gigawords = 0
</I>&gt;<i>         Acct-Output-Gigawords = 0
</I>&gt;<i>         Acct-Input-Packets = 53364
</I>&gt;<i>         Acct-Output-Packets = 101854
</I>&gt;<i>         Acct-Session-Time = 189
</I>&gt;<i>         Acct-Unique-Session-Id = &quot;f3bcc21590c1afd1&quot;
</I>&gt;<i>         Timestamp = 1256627765
</I>&gt;<i>         Request-Authenticator = Verified*
</I>&gt;<i>
</I>&gt;<i> Again, impossibly high. There is just one more account interim update, and
</I>&gt;<i> then the person is logged off due to insufficient credit:
</I>&gt;<i> *Tue Oct 27 09:17:14 2009
</I>&gt;<i>         ChilliSpot-Version = &quot;1.0.13&quot;
</I>&gt;<i>         Acct-Status-Type = Stop
</I>&gt;<i>         Calling-Station-Id = &quot;00-1F-33-FF-BD-00&quot;
</I>&gt;<i>         NAS-Port-Type = Wireless-802.11
</I>&gt;<i>         NAS-Port = 4
</I>&gt;<i>         NAS-Port-Id = &quot;00000004&quot;
</I>&gt;<i>         Framed-IP-Address = 172.25.0.168
</I>&gt;<i>         Acct-Session-Id = &quot;4ae69d6000000004&quot;
</I>&gt;<i>         NAS-IP-Address = 172.25.0.1
</I>&gt;<i>         Called-Station-Id = &quot;00-16-B6-D9-5A-EB&quot;
</I>&gt;<i>        Acct-Input-Octets = 3701744
</I>&gt;<i>        Acct-Output-Octets = 175905676
</I>&gt;<i>         Acct-Input-Gigawords = 0
</I>&gt;<i>         Acct-Output-Gigawords = 0
</I>&gt;<i>         Acct-Input-Packets = 64216
</I>&gt;<i>         Acct-Output-Packets = 122605
</I>&gt;<i>         Acct-Session-Time = 228
</I>&gt;<i>         Acct-Terminate-Cause = Session-Timeout
</I>&gt;<i>         Acct-Unique-Session-Id = &quot;f3bcc21590c1afd1&quot;
</I>&gt;<i>         Timestamp = 1256627834
</I>&gt;<i>         Request-Authenticator = Verified*
</I>&gt;<i>
</I>&gt;<i> All in all, chilli has told radius that the user has used 171.29 megabytes
</I>&gt;<i> in 3.8 minutes. Of that, 167.76 megabytes were in downloads, and 3.53
</I>&gt;<i> megabytes were in uploads. Unfortunately, this is absolutely impossible with
</I>&gt;<i> regards to the backbone speeds in South Africa.
</I>&gt;<i>
</I>&gt;<i> Any help would be greatly appreciated, I have no idea how to solve this.
</I>&gt;<i>
</I>&gt;<i> All the best
</I>&gt;<i> Jack J Allan
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Chilli mailing list
</I>&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20091110/eabd5a29/attachment-0001.htm">http://lists.coova.org/pipermail/chilli/attachments/20091110/eabd5a29/attachment-0001.htm</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000954.html">[Chilli] Incorrectly high data usage over a short period of time
</A></li>
	<LI>Next message: <A HREF="000957.html">[Chilli] Hotspot Login on Mobile Phones
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#956">[ date ]</a>
              <a href="thread.html#956">[ thread ]</a>
              <a href="subject.html#956">[ subject ]</a>
              <a href="author.html#956">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
