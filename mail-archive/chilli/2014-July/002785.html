<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] Problem upload data using latest coovachilli git
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20Problem%20upload%20data%20using%20latest%20coovachilli%20git&In-Reply-To=%3C1404810168.3532.136.camel%40marces.madrid.commsmundi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002784.html">
   <LINK REL="Next"  HREF="002786.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] Problem upload data using latest coovachilli git</H1>
    <B>Antonio Silva</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20Problem%20upload%20data%20using%20latest%20coovachilli%20git&In-Reply-To=%3C1404810168.3532.136.camel%40marces.madrid.commsmundi.com%3E"
       TITLE="[Chilli] Problem upload data using latest coovachilli git">asilva at wirelessmundi.com
       </A><BR>
    <I>Tue Jul  8 09:02:48 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="002784.html">[Chilli] Problem upload data using latest coovachilli git
</A></li>
        <LI>Next message: <A HREF="002786.html">[Chilli] porn in login process
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2785">[ date ]</a>
              <a href="thread.html#2785">[ thread ]</a>
              <a href="subject.html#2785">[ subject ]</a>
              <a href="author.html#2785">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>No, the cpu is idle.

My CPU is: Intel(R) Xeon(R) CPU           X3430  @ 2.40GHz



Thanks,
Ant&#243;nio

On Mon, 2014-07-07 at 18:02 -0700, Jed Gainer wrote: 

&gt;<i> CPU getting maxed out?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Fri, Jun 27, 2014 at 6:19 AM, Mohsen Saeedi
</I>&gt;<i> &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">mohsen.saeedi at gmail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i>         
</I>&gt;<i>         On 06/27/2014 03:05 PM, Anonio Silva wrote:
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         &gt; Hi,
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; With last git 9b7138f4d85a88e6e7e0b1cb5d3202d1a3bbad27, I've
</I>&gt;<i>         &gt; a problem with data upload.  The connection is very
</I>&gt;<i>         &gt; inconstant going from 400Kbps to 0Kpbs, then to 50Kbps,
</I>&gt;<i>         &gt; 150Kbps and sometimes it just freezes...
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; My scenario is very simple:
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; WAN --- Server running Chilli (eth1: e1000e: 100Mb/s) ------
</I>&gt;<i>         &gt; PC (windows 7)
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; Once the pc is authenticate (by MAC), i try to upload a file
</I>&gt;<i>         &gt; to the ftp server running on the same server where the
</I>&gt;<i>         &gt; chilli is running. It also happens if i upload data to WAN. 
</I>&gt;<i>         &gt; With the download there is no problem.
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; My configuration:
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; chilli.conf
</I>&gt;<i>         &gt; fg
</I>&gt;<i>         &gt; debug
</I>&gt;<i>         &gt; unixipc=chilli2.ipc
</I>&gt;<i>         &gt; tundev=tuneth1
</I>&gt;<i>         &gt; nasmac=&quot;portal2&quot;
</I>&gt;<i>         &gt; pidfile=/var/run/chilli/chilli2.pid
</I>&gt;<i>         &gt; dhcpif=eth1
</I>&gt;<i>         &gt; net=192.168.30.0/24
</I>&gt;<i>         &gt; statip=192.168.30.0/24
</I>&gt;<i>         &gt; dynip=192.168.30.0/24
</I>&gt;<i>         &gt; dhcpstart=2
</I>&gt;<i>         &gt; dhcpend=10
</I>&gt;<i>         &gt; lease=1800
</I>&gt;<i>         &gt; dns1=192.168.10.254
</I>&gt;<i>         &gt; domain=local.local
</I>&gt;<i>         &gt; radiusserver1=localhost
</I>&gt;<i>         &gt; radiusserver2=localhost
</I>&gt;<i>         &gt; radiusauthport=1812
</I>&gt;<i>         &gt; radiusacctport=1813
</I>&gt;<i>         &gt; radiussecret=secret
</I>&gt;<i>         &gt; coaport=3771
</I>&gt;<i>         &gt; uamlisten=192.168.30.1
</I>&gt;<i>         &gt; uamserver=<A HREF="https://192.168.10.254">https://192.168.10.254</A>
</I>&gt;<i>         &gt; uamlogoutip=5.5.5.1
</I>&gt;<i>         &gt; uamsecret=secret
</I>&gt;<i>         &gt; uamport=3990
</I>&gt;<i>         &gt; uamuiport=3992
</I>&gt;<i>         &gt; macauth
</I>&gt;<i>         &gt; strictmacauth
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; i run it with:
</I>&gt;<i>         &gt; /usr/sbin/chilli --conf chilli.conf
</I>&gt;<i>         &gt; --pidfile /var/run/chilli/chilli.pid
</I>&gt;<i>         &gt; --cmdsock /var/run/chilli/chilli.sock
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; for iptables i have:
</I>&gt;<i>         &gt; -A INPUT --in-interface eth1 -j DROP
</I>&gt;<i>         &gt; -A FORWARD --in-interface eth1 -j DROP
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; If i drop the iptables rules that block the traffic on the
</I>&gt;<i>         &gt; dhcpif the upload is fine. There is no radius attribute to
</I>&gt;<i>         &gt; limit the speed.
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; I'm running debian wheezy. I download the coova-chilli from
</I>&gt;<i>         &gt; the git repos, and compile it using the debian package, in
</I>&gt;<i>         &gt; the trunk directory i did dpkg-buildpackage.  then i install
</I>&gt;<i>         &gt; de coova-chilli.deb
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; Can you help me to figure out where is the problem?
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; Thanks,
</I>&gt;<i>         &gt; Ant&#243;nio
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; LOG of chilli:
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; main-opt.c: 453: 0 (Debug) IPv6 disabled 
</I>&gt;<i>         &gt; main-opt.c: 640: 0 (Debug) DHCP Listen: 192.168.30.1
</I>&gt;<i>         &gt; main-opt.c: 641: 0 (Debug) UAM Listen: 192.168.30.1
</I>&gt;<i>         &gt; garden.c: 439: 0 (Debug) Uamallowed IP address #0:1024:
</I>&gt;<i>         &gt; proto=0 host=192.168.10.254 port=443
</I>&gt;<i>         &gt; options.c: 446: 0 (Debug) PID 7669 saving options
</I>&gt;<i>         &gt; to /var/run/chilli.7668.cfg.bin
</I>&gt;<i>         &gt; options.c: 414: 0 (Debug) Loading modules
</I>&gt;<i>         &gt; options.c: 658: 0 (Debug) PID 7668 reloaded binary options
</I>&gt;<i>         &gt; file
</I>&gt;<i>         &gt; chilli.c: 7270: 0 (Debug) clock realtime sec 1403863345 nsec
</I>&gt;<i>         &gt; 332183759
</I>&gt;<i>         &gt; chilli.c: 7275: 0 (Debug) clock monotonic sec 7232 nsec
</I>&gt;<i>         &gt; 305988264
</I>&gt;<i>         &gt; tun.c: 605: 0 (Debug) TX queue length set to 100
</I>&gt;<i>         &gt; ippool.c: 338: 0 (Debug) Hashlog 9 264 512
</I>&gt;<i>         &gt; net.c: 1279: 0 (Debug) Net SNDBUF 212992
</I>&gt;<i>         &gt; net.c: 1282: 0 (Debug) Net RCVBUF 212992
</I>&gt;<i>         &gt; net.c: 1337: 0 (Debug) device eth1 ifindex 4
</I>&gt;<i>         &gt; net.c: 1353: 0 (Debug) lo  address family: 17 (AF_PACKET)
</I>&gt;<i>         &gt; net.c: 1353: 0 (Debug) eth3  address family: 17 (AF_PACKET)
</I>&gt;<i>         &gt; net.c: 1353: 0 (Debug) eth0  address family: 17 (AF_PACKET)
</I>&gt;<i>         &gt; net.c: 1353: 0 (Debug) eth1  address family: 17 (AF_PACKET)
</I>&gt;<i>         &gt; net.c: 1353: 0 (Debug) lo  address family: 2 (AF_INET)
</I>&gt;<i>         &gt; net.c: 1353: 0 (Debug) eth0  address family: 2 (AF_INET)
</I>&gt;<i>         &gt; net.c: 1353: 0 (Debug) eth1  address family: 2 (AF_INET)
</I>&gt;<i>         &gt; net.c: 1353: 0 (Debug) tuneth3  address family: 2 (AF_INET)
</I>&gt;<i>         &gt; net.c: 1353: 0 (Debug) tuneth1  address family: 2 (AF_INET)
</I>&gt;<i>         &gt; dhcp.c: 481: 0 (Debug) hash table size 64 (56)
</I>&gt;<i>         &gt; dhcp.c: 333: 0 (Debug) GARP: Replying to broadcast
</I>&gt;<i>         &gt; dhcp.c: 1169: 0 (Debug) dhcpif (eth1) IPv6 address ::
</I>&gt;<i>         &gt; radius.c: 1316: 0 (Debug) RADIUS client 0.0.0.0:3771
</I>&gt;<i>         &gt; chilli.c: 7430: 0 (Debug) Waiting for client request...
</I>&gt;<i>         &gt; net.c: 416: 0 (Debug) net select count: 1
</I>&gt;<i>         &gt; net.c: 416: 0 (Debug) net select count: 2
</I>&gt;<i>         &gt; net.c: 416: 0 (Debug) net select count: 3
</I>&gt;<i>         &gt; net.c: 416: 0 (Debug) net select count: 4
</I>&gt;<i>         &gt; net.c: 416: 0 (Debug) net select count: 5
</I>&gt;<i>         &gt; net.c: 416: 0 (Debug) net select count: 6
</I>&gt;<i>         &gt; net.c: 416: 0 (Debug) net select count: 7
</I>&gt;<i>         &gt; rtmon.c: 465: 0 (Debug) i=0 sz=1
</I>&gt;<i>         &gt; rtmon.c: 465: 0 (Debug) i=0 sz=2
</I>&gt;<i>         &gt; rtmon.c: 465: 0 (Debug) i=1 sz=2
</I>&gt;<i>         &gt; rtmon.c: 465: 0 (Debug) i=0 sz=3
</I>&gt;<i>         &gt; rtmon.c: 465: 0 (Debug) i=1 sz=3
</I>&gt;<i>         &gt; rtmon.c: 465: 0 (Debug) i=2 sz=3
</I>&gt;<i>         &gt; rtmon.c: 465: 0 (Debug) i=0 sz=4
</I>&gt;<i>         &gt; rtmon.c: 465: 0 (Debug) i=1 sz=4
</I>&gt;<i>         &gt; rtmon.c: 465: 0 (Debug) i=2 sz=4
</I>&gt;<i>         &gt; rtmon.c: 465: 0 (Debug) i=3 sz=4
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; System Interfaces
</I>&gt;<i>         &gt; 0) lo (1) ip=127.0.0.1 net=127.0.0.0 mask=255.0.0.0
</I>&gt;<i>         &gt; mac=00-00-00-00-00-00 mtu=65536
</I>&gt;<i>         &gt; 1) eth0 (3) ip=192.168.10.254 net=192.168.10.0
</I>&gt;<i>         &gt; mask=255.255.255.0 bcase=192.168.10.255
</I>&gt;<i>         &gt; mac=00-15-17-DA-4A-cd mtu=1500
</I>&gt;<i>         &gt; 2) eth1 (4) ip=10.10.1.1 net=10.10.1.0 mask=255.255.255.0
</I>&gt;<i>         &gt; bcase=10.10.1.255 mac=00-15-17-DA-4A-cc mtu=1500
</I>&gt;<i>         &gt; 3) tuneth3 (26) ip=192.168.20.1 net=192.168.20.0
</I>&gt;<i>         &gt; mask=255.255.255.0 peer=192.168.20.1 mac=00-00-00-00-00-00
</I>&gt;<i>         &gt; mtu=1500
</I>&gt;<i>         &gt; 4) tuneth1 (30) ip=192.168.30.1 net=192.168.30.0
</I>&gt;<i>         &gt; mask=255.255.255.0 peer=192.168.30.1 mac=00-00-00-00-00-00
</I>&gt;<i>         &gt; mtu=1500
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; System Routes
</I>&gt;<i>         &gt; 0) dst=10.10.1.0 mask=255.255.255.0 dev=eth1 (4)
</I>&gt;<i>         &gt; 1) dst=192.168.10.0 mask=255.255.255.0 dev=eth0 (3)
</I>&gt;<i>         &gt; 2) dst=192.168.20.0 mask=255.255.255.0 dev=tuneth3 (26)
</I>&gt;<i>         &gt; 3) dst=192.168.30.0 mask=255.255.255.0 dev=tuneth1 (30)
</I>&gt;<i>         &gt; net.c: 416: 0 (Debug) net select count: 8
</I>&gt;<i>         &gt; net.c: 416: 0 (Debug) net select count: 9
</I>&gt;<i>         &gt; radius.c: 1907: 0 (Debug) Received RADIUS packet id=0
</I>&gt;<i>         &gt; radius.c: 427: 0 (Debug) RADIUS queue-out id=0 idx=0
</I>&gt;<i>         &gt; dhcp.c: 3713: 0 (Debug) Address not found (192.168.30.2)
</I>&gt;<i>         &gt; dhcp.c: 728: 0 (Debug) DHCP newconn: 68-B5-99-DB-72-AC
</I>&gt;<i>         &gt; chilli.c: 5137: 0 (Debug) New DHCP request from
</I>&gt;<i>         &gt; MAC=68-B5-99-DB-72-AC
</I>&gt;<i>         &gt; chilli.c: 5140: 0 (Debug) New DHCP connection established
</I>&gt;<i>         &gt; chilli.c: 5098: 0 (Debug) New Chilli Connection
</I>&gt;<i>         &gt; chilli.c: 4896: 0 (Debug) ----&gt; cb_dhcp_request &lt;----
</I>&gt;<i>         &gt; chilli.c: 4900: 0 (Debug) DHCP request for IP address
</I>&gt;<i>         &gt; 192.168.30.2
</I>&gt;<i>         &gt; chilli.c: 1542: 0 (Debug) Starting radius authentication
</I>&gt;<i>         &gt; dhcp.c: 3965: 0 (Debug) dropping packet; ip not known:
</I>&gt;<i>         &gt; 192.168.30.2
</I>&gt;<i>         &gt; radius.c: 1907: 0 (Debug) Received RADIUS packet id=1
</I>&gt;<i>         &gt; radius.c: 427: 0 (Debug) RADIUS queue-out id=1 idx=1
</I>&gt;<i>         &gt; chilli.c: 4419: 0 (Debug) Received RADIUS response id=1
</I>&gt;<i>         &gt; chilli.c: 4608: 0 (Debug) Received RADIUS Access-Accept
</I>&gt;<i>         &gt; chilli.c: 865: 0 (Debug) newip 192.168.30.2
</I>&gt;<i>         &gt; ippool.c: 456: 0 (Debug) Requesting new static ip:
</I>&gt;<i>         &gt; 192.168.30.2
</I>&gt;<i>         &gt; radius.c: 1907: 0 (Debug) Received RADIUS packet id=2
</I>&gt;<i>         &gt; radius.c: 427: 0 (Debug) RADIUS queue-out id=2 idx=2
</I>&gt;<i>         &gt; dhcp.c: 3785: 0 (Debug) ICMP frag forbidden for IP packet
</I>&gt;<i>         &gt; with length 2560 &gt; 1500
</I>&gt;<i>         &gt; dhcp.c: 3785: 0 (Debug) ICMP frag forbidden for IP packet
</I>&gt;<i>         &gt; with length 2560 &gt; 1500
</I>&gt;<i>         &gt; dhcp.c: 3785: 0 (Debug) ICMP frag forbidden for IP packet
</I>&gt;<i>         &gt; with length 2560 &gt; 1500
</I>&gt;<i>         &gt; dhcp.c: 3785: 0 (Debug) ICMP frag forbidden for IP packet
</I>&gt;<i>         &gt; with length 2560 &gt; 1500
</I>&gt;<i>         &gt; dhcp.c: 3785: 0 (Debug) ICMP frag forbidden for IP packet
</I>&gt;<i>         &gt; with length 2560 &gt; 1500
</I>&gt;<i>         &gt; (... continues until the transfer is complete, when i remote
</I>&gt;<i>         &gt; the firewall rule the ouput speed of this messages is
</I>&gt;<i>         &gt; faster) 
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; 
</I>&gt;<i>         &gt; _______________________________________________
</I>&gt;<i>         &gt; Chilli mailing list
</I>&gt;<i>         &gt; <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i>         &gt; <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>&gt;<i>         
</I>&gt;<i>         Hi
</I>&gt;<i>         
</I>&gt;<i>         We have this problem too when we switch to 1.3 from 1.2.8. we
</I>&gt;<i>         test in any environment and the problem appears in any
</I>&gt;<i>         condition and any network infrastructure. The problem often
</I>&gt;<i>         occurs in high internet bandwidth. I think one man knows about
</I>&gt;<i>         this problem and David should be responsible about it. 
</I>&gt;<i>         David we will appreciated if you survey code that have been
</I>&gt;<i>         added to latest version. 1.2.8 doesn't have any problem with
</I>&gt;<i>         data upload. The worst problem is when you're trying to upload
</I>&gt;<i>         attachment on Gmail.
</I>&gt;<i>         
</I>&gt;<i>         Best regards, 
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         _______________________________________________
</I>&gt;<i>         Chilli mailing list
</I>&gt;<i>         <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i>         <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>&gt;<i>         
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Chilli mailing list
</I>&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
</I>&gt;<i> <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
</I>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20140708/2d1a649c/attachment.html">http://lists.coova.org/pipermail/chilli/attachments/20140708/2d1a649c/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002784.html">[Chilli] Problem upload data using latest coovachilli git
</A></li>
	<LI>Next message: <A HREF="002786.html">[Chilli] porn in login process
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2785">[ date ]</a>
              <a href="thread.html#2785">[ thread ]</a>
              <a href="subject.html#2785">[ subject ]</a>
              <a href="author.html#2785">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
