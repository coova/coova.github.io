From adam at freerunr.com  Thu Feb  2 16:45:45 2012
From: adam at freerunr.com (Adam Hammond)
Date: Thu, 2 Feb 2012 16:45:45 +0000
Subject: [Chilli] 1.2.9 compilation problem (compiled as part of openwrt)
Message-ID: <96F722BE-8864-48F4-9AEF-4913C78737CC@freerunr.com>

Hi,

There seems to be a problem compiling under openwrt if the --proxyvsa option is specified.

Here's some output:

libtool: compile:  mips-openwrt-linux-uclibc-gcc -DHAVE_CONFIG_H -I. -I.. -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/target-mips_r2_uClibc-0.9.30.1/usr/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/target-mips_r2_uClibc-0.9.30.1/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/include -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/run/chilli.pid\" -DDEFSTATEDIR=\"/var/run\" -DSBINDIR=\"/usr/sbin\" -I../json -Os -pipe -mips32r2 -mtune=mips32r2 -funit-at-a-time -fhonour-copts -msoft-float -MT dhcp.lo -MD -MP -MF .deps/dhcp.Tpo -c dhcp.c  -fPIC -DPIC -o .libs/dhcp.o
cc1: warnings being treated as errors
dhcp.c: In function 'dhcp_handler':
dhcp.c:3007: error: unused variable 'appconn'
make[7]: *** [dhcp.lo] Error 1
make[7]: Leaving directory `/home/build/builds/backfire-10.3.1-RC6/build_dir/target-mips_r2_uClibc-0.9.30.1/coova-chilli-1.2.9/src'
make[6]: *** [all-recursive] Error 1

I've tried compiling it under several different versions of openwrt, all with the same error.

I've compiled it manuallyfrom src, and DON'T get any error.

I'm not quite sure how to fix this, but I'll plug away come back on this if I work it out.

Adam

From adam at freerunr.com  Thu Feb  2 18:19:24 2012
From: adam at freerunr.com (Adam Hammond)
Date: Thu, 2 Feb 2012 18:19:24 +0000
Subject: [Chilli] 1.2.9 compilation problem (compiled as part of openwrt)
In-Reply-To: <96F722BE-8864-48F4-9AEF-4913C78737CC@freerunr.com>
References: <96F722BE-8864-48F4-9AEF-4913C78737CC@freerunr.com>
Message-ID: <D88BD48B-1C69-4E5D-B2C6-C798B0448BF0@freerunr.com>

FYI the same error is thrown when building an RPM from the same source.


On 2 Feb 2012, at 16:45, Adam Hammond wrote:

> Hi,
> 
> There seems to be a problem compiling under openwrt if the --proxyvsa option is specified.
> 
> Here's some output:
> 
> libtool: compile:  mips-openwrt-linux-uclibc-gcc -DHAVE_CONFIG_H -I. -I.. -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/target-mips_r2_uClibc-0.9.30.1/usr/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/target-mips_r2_uClibc-0.9.30.1/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/include -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/run/chilli.pid\" -DDEFSTATEDIR=\"/var/run\" -DSBINDIR=\"/usr/sbin\" -I../json -Os -pipe -mips32r2 -mtune=mips32r2 -funit-at-a-time -fhonour-copts -msoft-float -MT dhcp.lo -MD -MP -MF .deps/dhcp.Tpo -c dhcp.c  -fPIC -DPIC -o .libs/dhcp.o
> cc1: warnings being treated as errors
> dhcp.c: In function 'dhcp_handler':
> dhcp.c:3007: error: unused variable 'appconn'
> make[7]: *** [dhcp.lo] Error 1
> make[7]: Leaving directory `/home/build/builds/backfire-10.3.1-RC6/build_dir/target-mips_r2_uClibc-0.9.30.1/coova-chilli-1.2.9/src'
> make[6]: *** [all-recursive] Error 1
> 
> I've tried compiling it under several different versions of openwrt, all with the same error.
> 
> I've compiled it manuallyfrom src, and DON'T get any error.
> 
> I'm not quite sure how to fix this, but I'll plug away come back on this if I work it out.
> 
> Adam


From mohsen.saeedi at gmail.com  Thu Feb  2 21:08:04 2012
From: mohsen.saeedi at gmail.com (Mohsen Saeedi)
Date: Fri, 03 Feb 2012 00:38:04 +0330
Subject: [Chilli] kmod-coova - Invalid arguments
Message-ID: <4F2AFB34.6010308@gmail.com>

Hi

I asked previously this question! but nobody answer me. I'm working with 
coova 1.2.8. everything is great. but when i'm going to use kmod-coova,i 
get some error. i run this command for example:

[root at server chilli]# iptables -I FORWARD -o eth3 -s 192.168.0.0/16 
<http://192.168.0.0/16> -m coova --name chilli -j ACCEPT
iptables: Invalid argument. Run `dmesg' for more information.

dmesg output:

xt_coova: looking for chilli
xt_coova: found chilli refcnt=2
xt_coova: match ret=0


What is the problem?

please help me David or some other users.

Thansk very much



From mail at frank-muennich.com  Fri Feb  3 11:45:28 2012
From: mail at frank-muennich.com (=?ISO-8859-1?Q?Frank_M=FCnnich?=)
Date: Fri, 03 Feb 2012 12:45:28 +0100
Subject: [Chilli] 1.2.9 compilation problem (compiled as part of openwrt)
In-Reply-To: <D88BD48B-1C69-4E5D-B2C6-C798B0448BF0@freerunr.com>
References: <96F722BE-8864-48F4-9AEF-4913C78737CC@freerunr.com>
	<D88BD48B-1C69-4E5D-B2C6-C798B0448BF0@freerunr.com>
Message-ID: <4F2BC8D8.9060106@frank-muennich.com>

Hey Adam,

if you compile with OpenWRT and use the BuildRoot stuff, then you need 
to alter the Makefile that comes with the packages.

Go to trunk (or whatever you have)/feeds/packages/net/coova-chilli   and 
edit  Makefile.
Insert after the define Package/coova-chilli ... endef section the 
following lines:

TARGET_CFLAGS+= -Wno-error=unused-but-set-variable

Also, if you want to pass to the configure script some arguments, then 
that could be achieved via

CONFIGURE_ARGS+= --with-openssl   etc

The former TARGET-CFLAGS tells the compiler to disregard the warning for 
unused variables, which there are some in the source.
If you have any questions, please contact me directly. Just being a 
novice. ;)

Best regards
Frank

On 02.02.2012 19:19, Adam Hammond wrote:
> FYI the same error is thrown when building an RPM from the same source.
>
>
> On 2 Feb 2012, at 16:45, Adam Hammond wrote:
>
>> Hi,
>>
>> There seems to be a problem compiling under openwrt if the --proxyvsa option is specified.
>>
>> Here's some output:
>>
>> libtool: compile:  mips-openwrt-linux-uclibc-gcc -DHAVE_CONFIG_H -I. -I.. -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/target-mips_r2_uClibc-0.9.30.1/usr/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/target-mips_r2_uClibc-0.9.30.1/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/include -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/run/chilli.pid\" -DDEFSTATEDIR=\"/var/run\" -DSBINDIR=\"/usr/sbin\" -I../json -Os -pipe -mips32r2 -mtune=mips32r2 -funit-at-a-time -fhonour-copts -msoft-float -MT dhcp.lo -MD -MP -MF .deps/dhcp.Tpo -c dhcp.c  -fPIC -DPIC -o .libs/dhcp.o
>> cc1: warnings being treated as errors
>> dhcp.c: In function 'dhcp_handler':
>> dhcp.c:3007: error: unused variable 'appconn'
>> make[7]: *** [dhcp.lo] Error 1
>> make[7]: Leaving directory `/home/build/builds/backfire-10.3.1-RC6/build_dir/target-mips_r2_uClibc-0.9.30.1/coova-chilli-1.2.9/src'
>> make[6]: *** [all-recursive] Error 1
>>
>> I've tried compiling it under several different versions of openwrt, all with the same error.
>>
>> I've compiled it manuallyfrom src, and DON'T get any error.
>>
>> I'm not quite sure how to fix this, but I'll plug away come back on this if I work it out.
>>
>> Adam
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From bojan at gajba.net  Sat Feb  4 19:34:37 2012
From: bojan at gajba.net (Bojan Pogacar)
Date: Sat, 04 Feb 2012 20:34:37 +0100
Subject: [Chilli] CoovaChilli 1.2.9
In-Reply-To: <4F0D5691.1070606@gajba.net>
References: <1326191280.19155.56.camel@david-laptop>
	<4F0CB9CF.7060501@gajba.net>
	<1326273626.19155.101.camel@david-laptop>
	<4F0D5691.1070606@gajba.net>
Message-ID: <4F2D884D.1050006@gajba.net>

Hello!

I am still trying to fix anyip feature on my Chilli. I've analized TCP 
stream when opening captive portal web page and I get:

592	117.787866	10.9.0.4	10.9.0.1	TCP	66	49713 > http [SYN] Seq=0 
Win=8192 Len=0 MSS=1460 WS=256 SACK_PERM=1
593	117.789301	10.9.0.1	10.9.0.4	TCP	66	http > 49713 [SYN, ACK] Seq=0 
Ack=1 Win=14600 Len=0 MSS=1460 SACK_PERM=1 WS=256
594	117.789413	10.9.0.4	10.9.0.1	TCP	54 49713 > http [ACK] Seq=1 Ack=1 
Win=65536 Len=0
595	117.789514	10.9.0.1	10.9.0.4	TCP	66	[TCP Previous segment lost] http 
 > 49713 [SYN, ACK] Seq=1237032389 Ack=1 Win=14600 Len=0 MSS=1460 
SACK_PERM=1 WS=256
596	117.789533	10.9.0.4	10.9.0.1	TCP	54	[TCP Dup ACK 594#1] 49713 > http 
[ACK] Seq=1 Ack=1 Win=65536 Len=0
597	117.790578	10.9.0.1	10.9.0.4	TCP	60	http > 49713 [RST] Seq=1 Win=0 Len=0
598	117.790719	10.9.0.1	10.9.0.4	TCP	60	http > 49713 [RST] Seq=1 Win=0 Len=0

10.9.0.4 is client IP
10.9.0.1 is chilli server

I can SSH from client to server without problems, only web pages on 
10.9.0.1 don't work.

Any idea, why I get "TCP Dup ACK" and then RST ? What am I missing. Any 
idea?

Could it be realted to this (duplicate entry in Unit 0 and Unit 1), when 
I execute chilli_query listippool

 > Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1
 > Unit 1 : -inuse- : 10.9.0.3 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1


Problem exists only if I enable anyip feature and if I use DHCP on my 
client. When I use static IP (anyip) on client, it works OK.


Thanks, Bye



Dne 11.1.2012 10:29, pi?e Bojan Pogacar:
> On chilli 1.2.9 I get:
>
> Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1
> Unit 1 : -inuse- : 10.9.0.3 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1
> Unit 2 : -1/ 3 : 10.9.0.4 :
> Unit 3 : 2/ 4 : 10.9.0.5 :
> Unit 4 : 3/ 5 : 10.9.0.6 :
> Unit 5 : 4/ 6 : 10.9.0.7 :
> etc, ..
>
> On chilli 1.2.5 I get:
>
> Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=4
> Unit 1 : -1/ 2 : 10.9.0.3 :
> Unit 2 : 1/ 3 : 10.9.0.4 :
> Unit 3 : 2/ 4 : 10.9.0.5 :
> Unit 4 : 3/ 5 : 10.9.0.6 :
> Unit 5 : 4/ 6 : 10.9.0.7 :
> etc, ...
>
> Is there OK, that on 1.2.9 I get two IPs listed on same MAC. Could this
> be a problem that web server terminates a connection?
>
> All IPs are fetch through DHCP. Static IPs are working.
>
> Thanks, Bojan
>
>
>
> Dne 11.1.2012 10:20, pi?e David Bird:
>> You can get perhaps a bit more info if you do:
>>
>> chilli_query listippool
>> DHCP lease time 600 sec, grace period 60 sec
>> First available dynamic 3 Last 1
>> First available static 254 Last 508
>> List size 509
>> -- Dynamic Pool
>> ------------------------------------------------------------
>> Unit 0 : -inuse- : 10.1.0.2 : mac=XX-XX-XX-XX-XX-XX
>> ip=192.0.0.2 age=2
>> Unit 1 : 252/ -1 : 10.1.0.3 :
>> Unit 2 : -inuse- : 10.1.0.4 : mac=YY-YY-YY-YY-YY-YY ip=10.1.0.4
>> age=241
>> ...
>>
>> above is a 192.0.0.2 anyip static IP being NATed through as 10.1.0.2.
>>
>>
>> On Tue, 2012-01-10 at 23:21 +0100, Bojan Pogacar wrote:
>>> Hello!
>>>
>>> I've tested 1.2.9 and it seems that DHCP is faster and is running
>>> very well.
>>>
>>> I've also tested anyip feature and it still doesn't work for me after
>>> 1.2.5 . Can anyone confirm that this feature wasn't broken after 1.2.5.
>>>
>>> I've also described my problem at http://coova.org/node/4888 . Can
>>> please anyone please take a look?
>>>
>>> Thanks David, thanks everyone!
>>>
>>> Bojan
>>>
>>>
>>> _______________________________________________
>>> Chilli mailing list
>>> Chilli at coova.org
>>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>
>>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>

From adam at freerunr.com  Tue Feb  7 12:31:26 2012
From: adam at freerunr.com (Adam Hammond)
Date: Tue, 7 Feb 2012 12:31:26 +0000
Subject: [Chilli] 1.2.9 compilation problem (compiled as part of openwrt)
In-Reply-To: <4F2BC8D8.9060106@frank-muennich.com>
References: <96F722BE-8864-48F4-9AEF-4913C78737CC@freerunr.com>
	<D88BD48B-1C69-4E5D-B2C6-C798B0448BF0@freerunr.com>
	<4F2BC8D8.9060106@frank-muennich.com>
Message-ID: <4F832BAB-0A5F-484F-B6B7-2A3B49ACA780@freerunr.com>

Hi Frank,

Thanks for the tip - I was already passing configure arguments in the Makefile but hadn't thought and hadn't previously used it to pass flags to the compiler.

I tried what you suggested but didn't have much luck as the compiler in my BuildRoot is gcc 4.3.3 which doesn't support that flag.

I've gone with the more hacky option of commenting out the offending line in dhcp.c:

#if defined(ENABLE_PROXYVSA) || defined(ENABLE_MODULES)
//  struct app_conn_t *appconn = 0;
#endif

I'll see where I get with that... 

Cheers,
Adam



On 3 Feb 2012, at 11:45, Frank M?nnich wrote:

> Hey Adam,
> 
> if you compile with OpenWRT and use the BuildRoot stuff, then you need to alter the Makefile that comes with the packages.
> 
> Go to trunk (or whatever you have)/feeds/packages/net/coova-chilli   and edit  Makefile.
> Insert after the define Package/coova-chilli ... endef section the following lines:
> 
> TARGET_CFLAGS+= -Wno-error=unused-but-set-variable
> 
> Also, if you want to pass to the configure script some arguments, then that could be achieved via
> 
> CONFIGURE_ARGS+= --with-openssl   etc
> 
> The former TARGET-CFLAGS tells the compiler to disregard the warning for unused variables, which there are some in the source.
> If you have any questions, please contact me directly. Just being a novice. ;)
> 
> Best regards
> Frank
> 
> On 02.02.2012 19:19, Adam Hammond wrote:
>> FYI the same error is thrown when building an RPM from the same source.
>> 
>> 
>> On 2 Feb 2012, at 16:45, Adam Hammond wrote:
>> 
>>> Hi,
>>> 
>>> There seems to be a problem compiling under openwrt if the --proxyvsa option is specified.
>>> 
>>> Here's some output:
>>> 
>>> libtool: compile:  mips-openwrt-linux-uclibc-gcc -DHAVE_CONFIG_H -I. -I.. -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/target-mips_r2_uClibc-0.9.30.1/usr/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/target-mips_r2_uClibc-0.9.30.1/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/include -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/run/chilli.pid\" -DDEFSTATEDIR=\"/var/run\" -DSBINDIR=\"/usr/sbin\" -I../json -Os -pipe -mips32r2 -mtune=mips32r2 -funit-at-a-time -fhonour-copts -msoft-float -MT dhcp.lo -MD -MP -MF .deps/dhcp.Tpo -c dhcp.c  -fPIC -DPIC -o .libs/dhcp.o
>>> cc1: warnings being treated as errors
>>> dhcp.c: In function 'dhcp_handler':
>>> dhcp.c:3007: error: unused variable 'appconn'
>>> make[7]: *** [dhcp.lo] Error 1
>>> make[7]: Leaving directory `/home/build/builds/backfire-10.3.1-RC6/build_dir/target-mips_r2_uClibc-0.9.30.1/coova-chilli-1.2.9/src'
>>> make[6]: *** [all-recursive] Error 1
>>> 
>>> I've tried compiling it under several different versions of openwrt, all with the same error.
>>> 
>>> I've compiled it manuallyfrom src, and DON'T get any error.
>>> 
>>> I'm not quite sure how to fix this, but I'll plug away come back on this if I work it out.
>>> 
>>> Adam
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From david at coova.com  Wed Feb  8 07:54:26 2012
From: david at coova.com (David Bird)
Date: Wed, 08 Feb 2012 08:54:26 +0100
Subject: [Chilli] 1.2.9 compilation problem (compiled as part of openwrt)
In-Reply-To: <96F722BE-8864-48F4-9AEF-4913C78737CC@freerunr.com>
References: <96F722BE-8864-48F4-9AEF-4913C78737CC@freerunr.com>
Message-ID: <1328687666.4284.1.camel@david-laptop>

Thanks, it will be fixed. In the meantime, you can do the following:
also build with --enable-location (probably what you want anyway to
enable location awareness), or comment out (or delete) line 3007 in
dhcp.c. 


On Thu, 2012-02-02 at 16:45 +0000, Adam Hammond wrote:
> Hi,
> 
> There seems to be a problem compiling under openwrt if the --proxyvsa option is specified.
> 
> Here's some output:
> 
> libtool: compile:  mips-openwrt-linux-uclibc-gcc -DHAVE_CONFIG_H -I. -I.. -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/target-mips_r2_uClibc-0.9.30.1/usr/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/target-mips_r2_uClibc-0.9.30.1/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/include -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/run/chilli.pid\" -DDEFSTATEDIR=\"/var/run\" -DSBINDIR=\"/usr/sbin\" -I../json -Os -pipe -mips32r2 -mtune=mips32r2 -funit-at-a-time -fhonour-copts -msoft-float -MT dhcp.lo -MD -MP -MF .deps/dhcp.Tpo -c dhcp.c  -fPIC -DPIC -o .libs/dhcp.o
> cc1: warnings being treated as errors
> dhcp.c: In function 'dhcp_handler':
> dhcp.c:3007: error: unused variable 'appconn'
> make[7]: *** [dhcp.lo] Error 1
> make[7]: Leaving directory `/home/build/builds/backfire-10.3.1-RC6/build_dir/target-mips_r2_uClibc-0.9.30.1/coova-chilli-1.2.9/src'
> make[6]: *** [all-recursive] Error 1
> 
> I've tried compiling it under several different versions of openwrt, all with the same error.
> 
> I've compiled it manuallyfrom src, and DON'T get any error.
> 
> I'm not quite sure how to fix this, but I'll plug away come back on this if I work it out.
> 
> Adam
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli



From adam at freerunr.com  Wed Feb  8 10:35:39 2012
From: adam at freerunr.com (Adam Hammond)
Date: Wed, 8 Feb 2012 10:35:39 +0000
Subject: [Chilli] 1.2.9 compilation problem (compiled as part of openwrt)
In-Reply-To: <4F2BC8D8.9060106@frank-muennich.com>
References: <96F722BE-8864-48F4-9AEF-4913C78737CC@freerunr.com>
	<D88BD48B-1C69-4E5D-B2C6-C798B0448BF0@freerunr.com>
	<4F2BC8D8.9060106@frank-muennich.com>
Message-ID: <E21C2D7A-162D-492F-B9D9-84824C19D73E@freerunr.com>

Thanks for the tip Frank,

Just in ase anyone reads this at some point in the future, the version of gcc in openwrt BuildRoot (at the time of writing) is 4.3.3 so the flag "-Wno-error=unused-but-set-variable" won't work there.

Works a treat if you're using a newer version of gcc (4.6 onwards I think).

cheers,
Adam

On 3 Feb 2012, at 11:45, Frank M?nnich wrote:

> Hey Adam,
> 
> if you compile with OpenWRT and use the BuildRoot stuff, then you need to alter the Makefile that comes with the packages.
> 
> Go to trunk (or whatever you have)/feeds/packages/net/coova-chilli   and edit  Makefile.
> Insert after the define Package/coova-chilli ... endef section the following lines:
> 
> TARGET_CFLAGS+= "-Wno-error=unused-but-set-variable
> 
> Also, if you want to pass to the configure script some arguments, then that could be achieved via
> 
> CONFIGURE_ARGS+= --with-openssl   etc
> 
> The former TARGET-CFLAGS tells the compiler to disregard the warning for unused variables, which there are some in the source.
> If you have any questions, please contact me directly. Just being a novice. ;)
> 
> Best regards
> Frank
> 
> On 02.02.2012 19:19, Adam Hammond wrote:
>> FYI the same error is thrown when building an RPM from the same source.
>> 
>> 
>> On 2 Feb 2012, at 16:45, Adam Hammond wrote:
>> 
>>> Hi,
>>> 
>>> There seems to be a problem compiling under openwrt if the --proxyvsa option is specified.
>>> 
>>> Here's some output:
>>> 
>>> libtool: compile:  mips-openwrt-linux-uclibc-gcc -DHAVE_CONFIG_H -I. -I.. -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/target-mips_r2_uClibc-0.9.30.1/usr/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/target-mips_r2_uClibc-0.9.30.1/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/include -I/home/build/builds/backfire-10.3.1-RC6/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/include -D_GNU_SOURCE -Wall -Werror -fno-builtin -fno-strict-aliasing -O2 -fomit-frame-pointer -funroll-loops -pipe -I../bstring -DDEFCHILLICONF=\"/etc/chilli.conf\" -DDEFPIDFILE=\"/var/run/chilli.pid\" -DDEFSTATEDIR=\"/var/run\" -DSBINDIR=\"/usr/sbin\" -I../json -Os -pipe -mips32r2 -mtune=mips32r2 -funit-at-a-time -fhonour-copts -msoft-float -MT dhcp.lo -MD -MP -MF .deps/dhcp.Tpo -c dhcp.c  -fPIC -DPIC -o .libs/dhcp.o
>>> cc1: warnings being treated as errors
>>> dhcp.c: In function 'dhcp_handler':
>>> dhcp.c:3007: error: unused variable 'appconn'
>>> make[7]: *** [dhcp.lo] Error 1
>>> make[7]: Leaving directory `/home/build/builds/backfire-10.3.1-RC6/build_dir/target-mips_r2_uClibc-0.9.30.1/coova-chilli-1.2.9/src'
>>> make[6]: *** [all-recursive] Error 1
>>> 
>>> I've tried compiling it under several different versions of openwrt, all with the same error.
>>> 
>>> I've compiled it manuallyfrom src, and DON'T get any error.
>>> 
>>> I'm not quite sure how to fix this, but I'll plug away come back on this if I work it out.
>>> 
>>> Adam
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
> 
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From rwhite at globalgossip.net  Fri Feb 10 00:10:15 2012
From: rwhite at globalgossip.net (Robert White)
Date: Fri, 10 Feb 2012 11:10:15 +1100
Subject: [Chilli] CoovaChilli 1.2.9 & AnyIP
In-Reply-To: <4F10220D.1010006@gajba.net>
References: <1326191280.19155.56.camel@david-laptop>
	<4F0CB9CF.7060501@gajba.net>
	<1326273626.19155.101.camel@david-laptop>
	<4F0D5691.1070606@gajba.net> <4F10220D.1010006@gajba.net>
Message-ID: <CAODoKgCy6bAqOh8pozrU_pQqYzHWwvL5UycRoSHSfrBWeUjr8Q@mail.gmail.com>

Bojan,

Did you have any success getting AnyIP feature working?

I can confirm it's not working for me in 1.2.8 or 1.2.9.

Thanks,

Rob

On 13 January 2012 23:22, Bojan Pogacar <bojan at gajba.net> wrote:

> David, did you have time to take a look at my results?
>
> Thank you very much for your help.
>
>
> Bye
>
>
>
> Dne 11.1.2012 10:29, pi?e Bojan Pogacar:
>
>> On chilli 1.2.9 I get:
>>
>> Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1
>> Unit 1 : -inuse- : 10.9.0.3 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1
>> Unit 2 : -1/ 3 : 10.9.0.4 :
>> Unit 3 : 2/ 4 : 10.9.0.5 :
>> Unit 4 : 3/ 5 : 10.9.0.6 :
>> Unit 5 : 4/ 6 : 10.9.0.7 :
>> etc, ..
>>
>> On chilli 1.2.5 I get:
>>
>> Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=4
>> Unit 1 : -1/ 2 : 10.9.0.3 :
>> Unit 2 : 1/ 3 : 10.9.0.4 :
>> Unit 3 : 2/ 4 : 10.9.0.5 :
>> Unit 4 : 3/ 5 : 10.9.0.6 :
>> Unit 5 : 4/ 6 : 10.9.0.7 :
>> etc, ...
>>
>> Is there OK, that on 1.2.9 I get two IPs listed on same MAC. Could this
>> be a problem that web server terminates a connection?
>>
>> All IPs are fetch through DHCP. Static IPs are working.
>>
>> Thanks, Bojan
>>
>>
>>
>> Dne 11.1.2012 10:20, pi?e David Bird:
>>
>>> You can get perhaps a bit more info if you do:
>>>
>>> chilli_query listippool
>>> DHCP lease time 600 sec, grace period 60 sec
>>> First available dynamic 3 Last 1
>>> First available static 254 Last 508
>>> List size 509
>>> -- Dynamic Pool
>>> ------------------------------**------------------------------
>>> Unit 0 : -inuse- : 10.1.0.2 : mac=XX-XX-XX-XX-XX-XX
>>> ip=192.0.0.2 age=2
>>> Unit 1 : 252/ -1 : 10.1.0.3 :
>>> Unit 2 : -inuse- : 10.1.0.4 : mac=YY-YY-YY-YY-YY-YY ip=10.1.0.4
>>> age=241
>>> ...
>>>
>>> above is a 192.0.0.2 anyip static IP being NATed through as 10.1.0.2.
>>>
>>>
>>> On Tue, 2012-01-10 at 23:21 +0100, Bojan Pogacar wrote:
>>>
>>>> Hello!
>>>>
>>>> I've tested 1.2.9 and it seems that DHCP is faster and is running
>>>> very well.
>>>>
>>>> I've also tested anyip feature and it still doesn't work for me after
>>>> 1.2.5 . Can anyone confirm that this feature wasn't broken after 1.2.5.
>>>>
>>>> I've also described my problem at http://coova.org/node/4888 . Can
>>>> please anyone please take a look?
>>>>
>>>> Thanks David, thanks everyone!
>>>>
>>>> Bojan
>>>>
>>>>
>>>> ______________________________**_________________
>>>> Chilli mailing list
>>>> Chilli at coova.org
>>>> http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
>>>>
>>>
>>>
>>>  ______________________________**_________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
>>
>>  ______________________________**_________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
>

-------------------------------------------------

IMPORTANT NOTICE : The information in this email is confidential and may also be privileged. 
If you are not the intended recipient, any use or dissemination of the information and any
disclosure or copying of this email is unauthorised and strictly prohibited. If you have received
this email in error, please promptly inform us by reply email or telephone. You should also delete
this email and destroy any hard copies produced.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120210/19871a07/attachment.html>

From david at coova.com  Fri Feb 10 05:36:09 2012
From: david at coova.com (David Bird)
Date: Fri, 10 Feb 2012 06:36:09 +0100
Subject: [Chilli] CoovaChilli 1.2.9 & AnyIP
Message-ID: <8t47yfklpbtc657i1eil7x8q.1328852169246@email.android.com>

How are you using anyip (with natanyip?) And what test are you doing that is failing?

Robert White <rwhite at globalgossip.net> wrote:

>Bojan,
>
>Did you have any success getting AnyIP feature working?
>
>I can confirm it's not working for me in 1.2.8 or 1.2.9.
>
>Thanks,
>
>Rob
>
>On 13 January 2012 23:22, Bojan Pogacar <bojan at gajba.net> wrote:
>
>> David, did you have time to take a look at my results?
>>
>> Thank you very much for your help.
>>
>>
>> Bye
>>
>>
>>
>> Dne 11.1.2012 10:29, pi?e Bojan Pogacar:
>>
>>> On chilli 1.2.9 I get:
>>>
>>> Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1
>>> Unit 1 : -inuse- : 10.9.0.3 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1
>>> Unit 2 : -1/ 3 : 10.9.0.4 :
>>> Unit 3 : 2/ 4 : 10.9.0.5 :
>>> Unit 4 : 3/ 5 : 10.9.0.6 :
>>> Unit 5 : 4/ 6 : 10.9.0.7 :
>>> etc, ..
>>>
>>> On chilli 1.2.5 I get:
>>>
>>> Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=4
>>> Unit 1 : -1/ 2 : 10.9.0.3 :
>>> Unit 2 : 1/ 3 : 10.9.0.4 :
>>> Unit 3 : 2/ 4 : 10.9.0.5 :
>>> Unit 4 : 3/ 5 : 10.9.0.6 :
>>> Unit 5 : 4/ 6 : 10.9.0.7 :
>>> etc, ...
>>>
>>> Is there OK, that on 1.2.9 I get two IPs listed on same MAC. Could this
>>> be a problem that web server terminates a connection?
>>>
>>> All IPs are fetch through DHCP. Static IPs are working.
>>>
>>> Thanks, Bojan
>>>
>>>
>>>
>>> Dne 11.1.2012 10:20, pi?e David Bird:
>>>
>>>> You can get perhaps a bit more info if you do:
>>>>
>>>> chilli_query listippool
>>>> DHCP lease time 600 sec, grace period 60 sec
>>>> First available dynamic 3 Last 1
>>>> First available static 254 Last 508
>>>> List size 509
>>>> -- Dynamic Pool
>>>> ------------------------------**------------------------------
>>>> Unit 0 : -inuse- : 10.1.0.2 : mac=XX-XX-XX-XX-XX-XX
>>>> ip=192.0.0.2 age=2
>>>> Unit 1 : 252/ -1 : 10.1.0.3 :
>>>> Unit 2 : -inuse- : 10.1.0.4 : mac=YY-YY-YY-YY-YY-YY ip=10.1.0.4
>>>> age=241
>>>> ...
>>>>
>>>> above is a 192.0.0.2 anyip static IP being NATed through as 10.1.0.2.
>>>>
>>>>
>>>> On Tue, 2012-01-10 at 23:21 +0100, Bojan Pogacar wrote:
>>>>
>>>>> Hello!
>>>>>
>>>>> I've tested 1.2.9 and it seems that DHCP is faster and is running
>>>>> very well.
>>>>>
>>>>> I've also tested anyip feature and it still doesn't work for me after
>>>>> 1.2.5 . Can anyone confirm that this feature wasn't broken after 1.2.5.
>>>>>
>>>>> I've also described my problem at http://coova.org/node/4888 . Can
>>>>> please anyone please take a look?
>>>>>
>>>>> Thanks David, thanks everyone!
>>>>>
>>>>> Bojan
>>>>>
>>>>>
>>>>> ______________________________**_________________
>>>>> Chilli mailing list
>>>>> Chilli at coova.org
>>>>> http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
>>>>>
>>>>
>>>>
>>>>  ______________________________**_________________
>>> Chilli mailing list
>>> Chilli at coova.org
>>> http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
>>>
>>>  ______________________________**_________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
>>
>
>-------------------------------------------------
>
>IMPORTANT NOTICE : The information in this email is confidential and may also be privileged. 
>If you are not the intended recipient, any use or dissemination of the information and any
>disclosure or copying of this email is unauthorised and strictly prohibited. If you have received
>this email in error, please promptly inform us by reply email or telephone. You should also delete
>this email and destroy any hard copies produced.
>
>_______________________________________________
>Chilli mailing list
>Chilli at coova.org
>http://lists.coova.org/cgi-bin/mailman/listinfo/chilli

From bojan at gajba.net  Fri Feb 10 07:05:29 2012
From: bojan at gajba.net (Bojan Pogacar)
Date: Fri, 10 Feb 2012 08:05:29 +0100
Subject: [Chilli] CoovaChilli 1.2.9 & AnyIP
In-Reply-To: <8t47yfklpbtc657i1eil7x8q.1328852169246@email.android.com>
References: <8t47yfklpbtc657i1eil7x8q.1328852169246@email.android.com>
Message-ID: <4F34C1B9.5030805@gajba.net>

Hello, David!

Some findings I posted on forum: http://coova.org/node/4888

I hope it helps.


Bye


Dne 10.2.2012 6:36, pi?e David Bird:
> How are you using anyip (with natanyip?) And what test are you doing that is failing?
>
> Robert White<rwhite at globalgossip.net>  wrote:
>
>> Bojan,
>>
>> Did you have any success getting AnyIP feature working?
>>
>> I can confirm it's not working for me in 1.2.8 or 1.2.9.
>>
>> Thanks,
>>
>> Rob
>>
>> On 13 January 2012 23:22, Bojan Pogacar<bojan at gajba.net>  wrote:
>>
>>> David, did you have time to take a look at my results?
>>>
>>> Thank you very much for your help.
>>>
>>>
>>> Bye
>>>
>>>
>>>
>>> Dne 11.1.2012 10:29, pi?e Bojan Pogacar:
>>>
>>>> On chilli 1.2.9 I get:
>>>>
>>>> Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1
>>>> Unit 1 : -inuse- : 10.9.0.3 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1
>>>> Unit 2 : -1/ 3 : 10.9.0.4 :
>>>> Unit 3 : 2/ 4 : 10.9.0.5 :
>>>> Unit 4 : 3/ 5 : 10.9.0.6 :
>>>> Unit 5 : 4/ 6 : 10.9.0.7 :
>>>> etc, ..
>>>>
>>>> On chilli 1.2.5 I get:
>>>>
>>>> Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=4
>>>> Unit 1 : -1/ 2 : 10.9.0.3 :
>>>> Unit 2 : 1/ 3 : 10.9.0.4 :
>>>> Unit 3 : 2/ 4 : 10.9.0.5 :
>>>> Unit 4 : 3/ 5 : 10.9.0.6 :
>>>> Unit 5 : 4/ 6 : 10.9.0.7 :
>>>> etc, ...
>>>>
>>>> Is there OK, that on 1.2.9 I get two IPs listed on same MAC. Could this
>>>> be a problem that web server terminates a connection?
>>>>
>>>> All IPs are fetch through DHCP. Static IPs are working.
>>>>
>>>> Thanks, Bojan
>>>>
>>>>
>>>>
>>>> Dne 11.1.2012 10:20, pi?e David Bird:
>>>>
>>>>> You can get perhaps a bit more info if you do:
>>>>>
>>>>> chilli_query listippool
>>>>> DHCP lease time 600 sec, grace period 60 sec
>>>>> First available dynamic 3 Last 1
>>>>> First available static 254 Last 508
>>>>> List size 509
>>>>> -- Dynamic Pool
>>>>> ------------------------------**------------------------------
>>>>> Unit 0 : -inuse- : 10.1.0.2 : mac=XX-XX-XX-XX-XX-XX
>>>>> ip=192.0.0.2 age=2
>>>>> Unit 1 : 252/ -1 : 10.1.0.3 :
>>>>> Unit 2 : -inuse- : 10.1.0.4 : mac=YY-YY-YY-YY-YY-YY ip=10.1.0.4
>>>>> age=241
>>>>> ...
>>>>>
>>>>> above is a 192.0.0.2 anyip static IP being NATed through as 10.1.0.2.
>>>>>
>>>>>
>>>>> On Tue, 2012-01-10 at 23:21 +0100, Bojan Pogacar wrote:
>>>>>
>>>>>> Hello!
>>>>>>
>>>>>> I've tested 1.2.9 and it seems that DHCP is faster and is running
>>>>>> very well.
>>>>>>
>>>>>> I've also tested anyip feature and it still doesn't work for me after
>>>>>> 1.2.5 . Can anyone confirm that this feature wasn't broken after 1.2.5.
>>>>>>
>>>>>> I've also described my problem at http://coova.org/node/4888 . Can
>>>>>> please anyone please take a look?
>>>>>>
>>>>>> Thanks David, thanks everyone!
>>>>>>
>>>>>> Bojan
>>>>>>
>>>>>>
>>>>>> ______________________________**_________________
>>>>>> Chilli mailing list
>>>>>> Chilli at coova.org
>>>>>> http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
>>>>>>
>>>>>
>>>>>
>>>>>   ______________________________**_________________
>>>> Chilli mailing list
>>>> Chilli at coova.org
>>>> http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
>>>>
>>>>   ______________________________**_________________
>>> Chilli mailing list
>>> Chilli at coova.org
>>> http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
>>>
>>
>> -------------------------------------------------
>>
>> IMPORTANT NOTICE : The information in this email is confidential and may also be privileged.
>> If you are not the intended recipient, any use or dissemination of the information and any
>> disclosure or copying of this email is unauthorised and strictly prohibited. If you have received
>> this email in error, please promptly inform us by reply email or telephone. You should also delete
>> this email and destroy any hard copies produced.
>>
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>

From rwhite at globalgossip.net  Fri Feb 10 07:46:57 2012
From: rwhite at globalgossip.net (Robert White)
Date: Fri, 10 Feb 2012 18:46:57 +1100
Subject: [Chilli] CoovaChilli 1.2.9 & AnyIP
In-Reply-To: <8t47yfklpbtc657i1eil7x8q.1328852169246@email.android.com>
References: <8t47yfklpbtc657i1eil7x8q.1328852169246@email.android.com>
Message-ID: <CAODoKgDfwjYYwUwhc52ST+r96ieAtYRBrtiJQ6_m6fSu67PSfQ@mail.gmail.com>

Hi David,

We've been using anyip WITHOUT natanyip.

The setup we are trying to achieve is as follows, perhaps you could comment
if we're going about this the right way:

We have a network where people connect and get an IP via DHCP - all works
well.
On the same network there are people who connect and have a static IP -
anyip is turned on.  Chilli log shows them getting assigned a static IP but
they are never served the captive portal
On the same network there are people who have DHCP turned on and we are
trying to set their IP via RADIUS attributes.  This has two outcomes
depending on whether or not we set HS_STATIP.  If we dont set it then
chilli complains it is unable to assign a static ip.  If we set HS_STATIP
to the subnet that RADIUS is trying to assign an IP from then the RADIUS
attribute for the IP address is assigned properly but the Subnet mask and
DNS server attributes are not.  If someone with a static IP tries to
connect then chilli will seg fault.

David, could you clarify the use of HS_DYNIP and HS_STATIP.  If they are
hashed out will anyip work?  We've never used natanyip - does this NAT a
client static IP with an IP from the HS_DYNIP pool?

If you could outline the best way to achieve our scenario above we can do
some more testing and email through some debug info.

Thanks,
*
*
*Rob White
**
*
On 10 February 2012 16:36, David Bird <david at coova.com> wrote:

> How are you using anyip (with natanyip?) And what test are you doing that
> is failing?
>
> Robert White <rwhite at globalgossip.net> wrote:
>
> >Bojan,
> >
> >Did you have any success getting AnyIP feature working?
> >
> >I can confirm it's not working for me in 1.2.8 or 1.2.9.
> >
> >Thanks,
> >
> >Rob
> >
> >On 13 January 2012 23:22, Bojan Pogacar <bojan at gajba.net> wrote:
> >
> >> David, did you have time to take a look at my results?
> >>
> >> Thank you very much for your help.
> >>
> >>
> >> Bye
> >>
> >>
> >>
> >> Dne 11.1.2012 10:29, pi?e Bojan Pogacar:
> >>
> >>> On chilli 1.2.9 I get:
> >>>
> >>> Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1
> >>> Unit 1 : -inuse- : 10.9.0.3 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1
> >>> Unit 2 : -1/ 3 : 10.9.0.4 :
> >>> Unit 3 : 2/ 4 : 10.9.0.5 :
> >>> Unit 4 : 3/ 5 : 10.9.0.6 :
> >>> Unit 5 : 4/ 6 : 10.9.0.7 :
> >>> etc, ..
> >>>
> >>> On chilli 1.2.5 I get:
> >>>
> >>> Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=4
> >>> Unit 1 : -1/ 2 : 10.9.0.3 :
> >>> Unit 2 : 1/ 3 : 10.9.0.4 :
> >>> Unit 3 : 2/ 4 : 10.9.0.5 :
> >>> Unit 4 : 3/ 5 : 10.9.0.6 :
> >>> Unit 5 : 4/ 6 : 10.9.0.7 :
> >>> etc, ...
> >>>
> >>> Is there OK, that on 1.2.9 I get two IPs listed on same MAC. Could this
> >>> be a problem that web server terminates a connection?
> >>>
> >>> All IPs are fetch through DHCP. Static IPs are working.
> >>>
> >>> Thanks, Bojan
> >>>
> >>>
> >>>
> >>> Dne 11.1.2012 10:20, pi?e David Bird:
> >>>
> >>>> You can get perhaps a bit more info if you do:
> >>>>
> >>>> chilli_query listippool
> >>>> DHCP lease time 600 sec, grace period 60 sec
> >>>> First available dynamic 3 Last 1
> >>>> First available static 254 Last 508
> >>>> List size 509
> >>>> -- Dynamic Pool
> >>>> ------------------------------**------------------------------
> >>>> Unit 0 : -inuse- : 10.1.0.2 : mac=XX-XX-XX-XX-XX-XX
> >>>> ip=192.0.0.2 age=2
> >>>> Unit 1 : 252/ -1 : 10.1.0.3 :
> >>>> Unit 2 : -inuse- : 10.1.0.4 : mac=YY-YY-YY-YY-YY-YY ip=10.1.0.4
> >>>> age=241
> >>>> ...
> >>>>
> >>>> above is a 192.0.0.2 anyip static IP being NATed through as 10.1.0.2.
> >>>>
> >>>>
> >>>> On Tue, 2012-01-10 at 23:21 +0100, Bojan Pogacar wrote:
> >>>>
> >>>>> Hello!
> >>>>>
> >>>>> I've tested 1.2.9 and it seems that DHCP is faster and is running
> >>>>> very well.
> >>>>>
> >>>>> I've also tested anyip feature and it still doesn't work for me after
> >>>>> 1.2.5 . Can anyone confirm that this feature wasn't broken after
> 1.2.5.
> >>>>>
> >>>>> I've also described my problem at http://coova.org/node/4888 . Can
> >>>>> please anyone please take a look?
> >>>>>
> >>>>> Thanks David, thanks everyone!
> >>>>>
> >>>>> Bojan
> >>>>>
> >>>>>
> >>>>> ______________________________**_________________
> >>>>> Chilli mailing list
> >>>>> Chilli at coova.org
> >>>>> http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
> >>>>>
> >>>>
> >>>>
> >>>>  ______________________________**_________________
> >>> Chilli mailing list
> >>> Chilli at coova.org
> >>> http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
> >>>
> >>>  ______________________________**_________________
> >> Chilli mailing list
> >> Chilli at coova.org
> >> http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
> >>
> >
> >-------------------------------------------------
> >
> >IMPORTANT NOTICE : The information in this email is confidential and may
> also be privileged.
> >If you are not the intended recipient, any use or dissemination of the
> information and any
> >disclosure or copying of this email is unauthorised and strictly
> prohibited. If you have received
> >this email in error, please promptly inform us by reply email or
> telephone. You should also delete
> >this email and destroy any hard copies produced.
> >
> >_______________________________________________
> >Chilli mailing list
> >Chilli at coova.org
> >http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>

-------------------------------------------------

IMPORTANT NOTICE : The information in this email is confidential and may also be privileged. 
If you are not the intended recipient, any use or dissemination of the information and any
disclosure or copying of this email is unauthorised and strictly prohibited. If you have received
this email in error, please promptly inform us by reply email or telephone. You should also delete
this email and destroy any hard copies produced.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20120210/e25118d3/attachment-0001.html>

From david at coova.com  Fri Feb 10 08:52:44 2012
From: david at coova.com (David Bird)
Date: Fri, 10 Feb 2012 09:52:44 +0100
Subject: [Chilli] CoovaChilli 1.2.9 & AnyIP
In-Reply-To: <CAODoKgDfwjYYwUwhc52ST+r96ieAtYRBrtiJQ6_m6fSu67PSfQ@mail.gmail.com>
References: <8t47yfklpbtc657i1eil7x8q.1328852169246@email.android.com>
	<CAODoKgDfwjYYwUwhc52ST+r96ieAtYRBrtiJQ6_m6fSu67PSfQ@mail.gmail.com>
Message-ID: <1328863964.4284.46.camel@david-laptop>

Hi,

It has always been the case that statip is required for anyip.
Internally, chilli has allocated 'slots' for sessions based on the dynip
and statip ranges. The dynip, of course, is where DHCP addresses are
pooled (in layer3 mode, this is just the slots for the in-range
sessions, there is no DHCP allocation). Static and anyip take a slot out
of the statip pool (even if the IP isn't in it's statip range). In the
case of natanyip, in addition to holding a slot in the static pool, an
NAT IP is reserved out of the dynip and there is a one-to-one NATing. 

Here is a working example (both clients not having problems) and the
output of chilli_query listippool:

DHCP lease time 600 sec, grace period 60 sec
First available dynamic 2 Last 252
First available static 254 Last 508
List size 509
-- Dynamic Pool
------------------------------------------------------------
Unit   0 : -inuse- :        10.1.0.2 : mac=B8-FF-61-XX-XX-XX
ip=11.11.11.11 age=172
Unit   1 : -inuse- :        10.1.0.3 : mac=78-D6-F0-XX-XX-XX ip=10.1.0.3
age=0
Unit   2 :  -1/  3 :        10.1.0.4 :
Unit   3 :   2/  4 :        10.1.0.5 :
Unit   4 :   3/  5 :        10.1.0.6 :

...
-- Static Pool
------------------------------------------------------------
Unit 253 : -inuse- :     11.11.11.11 : static mac=B8-FF-61-XX-XX-XX
ip=11.11.11.11 age=172
Unit 254 :  -1/255 :         0.0.0.0 : static
Unit 255 : 254/256 :         0.0.0.0 : static
...
Dynamic address: free 251, avail 251, used 2, err 0, sum 253/253
Static address: free 255, avail 255, used 1, err 0, sum 256/256


On Fri, 2012-02-10 at 18:46 +1100, Robert White wrote:
> Hi David,
> 
> 
> We've been using anyip WITHOUT natanyip.
> 
> 
> The setup we are trying to achieve is as follows, perhaps you could
> comment if we're going about this the right way:
> 
> 
> We have a network where people connect and get an IP via DHCP - all
> works well.
> On the same network there are people who connect and have a static IP
> - anyip is turned on.  Chilli log shows them getting assigned a static
> IP but they are never served the captive portal
> On the same network there are people who have DHCP turned on and we
> are trying to set their IP via RADIUS attributes.  This has two
> outcomes depending on whether or not we set HS_STATIP.  If we dont set
> it then chilli complains it is unable to assign a static ip.  If we
> set HS_STATIP to the subnet that RADIUS is trying to assign an IP from
> then the RADIUS attribute for the IP address is assigned properly but
> the Subnet mask and DNS server attributes are not.  If someone with a
> static IP tries to connect then chilli will seg fault.
> 
> 
> David, could you clarify the use of HS_DYNIP and HS_STATIP.  If they
> are hashed out will anyip work?  We've never used natanyip - does this
> NAT a client static IP with an IP from the HS_DYNIP pool?
> 
> 
> If you could outline the best way to achieve our scenario above we can
> do some more testing and email through some debug info.
> 
> 
> Thanks,
> 
> 
> Rob White
> 
> 
> On 10 February 2012 16:36, David Bird <david at coova.com> wrote:
>         How are you using anyip (with natanyip?) And what test are you
>         doing that is failing?
>         
>         Robert White <rwhite at globalgossip.net> wrote:
>         
>         >Bojan,
>         >
>         >Did you have any success getting AnyIP feature working?
>         >
>         >I can confirm it's not working for me in 1.2.8 or 1.2.9.
>         >
>         >Thanks,
>         >
>         >Rob
>         >
>         >On 13 January 2012 23:22, Bojan Pogacar <bojan at gajba.net>
>         wrote:
>         >
>         >> David, did you have time to take a look at my results?
>         >>
>         >> Thank you very much for your help.
>         >>
>         >>
>         >> Bye
>         >>
>         >>
>         >>
>         >> Dne 11.1.2012 10:29, pi?e Bojan Pogacar:
>         >>
>         >>> On chilli 1.2.9 I get:
>         >>>
>         >>> Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01
>         ip=10.9.0.2 age=1
>         >>> Unit 1 : -inuse- : 10.9.0.3 : mac=02-01-01-05-01-01
>         ip=10.9.0.2 age=1
>         >>> Unit 2 : -1/ 3 : 10.9.0.4 :
>         >>> Unit 3 : 2/ 4 : 10.9.0.5 :
>         >>> Unit 4 : 3/ 5 : 10.9.0.6 :
>         >>> Unit 5 : 4/ 6 : 10.9.0.7 :
>         >>> etc, ..
>         >>>
>         >>> On chilli 1.2.5 I get:
>         >>>
>         >>> Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01
>         ip=10.9.0.2 age=4
>         >>> Unit 1 : -1/ 2 : 10.9.0.3 :
>         >>> Unit 2 : 1/ 3 : 10.9.0.4 :
>         >>> Unit 3 : 2/ 4 : 10.9.0.5 :
>         >>> Unit 4 : 3/ 5 : 10.9.0.6 :
>         >>> Unit 5 : 4/ 6 : 10.9.0.7 :
>         >>> etc, ...
>         >>>
>         >>> Is there OK, that on 1.2.9 I get two IPs listed on same
>         MAC. Could this
>         >>> be a problem that web server terminates a connection?
>         >>>
>         >>> All IPs are fetch through DHCP. Static IPs are working.
>         >>>
>         >>> Thanks, Bojan
>         >>>
>         >>>
>         >>>
>         >>> Dne 11.1.2012 10:20, pi?e David Bird:
>         >>>
>         >>>> You can get perhaps a bit more info if you do:
>         >>>>
>         >>>> chilli_query listippool
>         >>>> DHCP lease time 600 sec, grace period 60 sec
>         >>>> First available dynamic 3 Last 1
>         >>>> First available static 254 Last 508
>         >>>> List size 509
>         >>>> -- Dynamic Pool
>         
>         >>>>
>         ------------------------------**------------------------------
>         >>>> Unit 0 : -inuse- : 10.1.0.2 : mac=XX-XX-XX-XX-XX-XX
>         >>>> ip=192.0.0.2 age=2
>         >>>> Unit 1 : 252/ -1 : 10.1.0.3 :
>         >>>> Unit 2 : -inuse- : 10.1.0.4 : mac=YY-YY-YY-YY-YY-YY
>         ip=10.1.0.4
>         >>>> age=241
>         >>>> ...
>         >>>>
>         >>>> above is a 192.0.0.2 anyip static IP being NATed through
>         as 10.1.0.2.
>         >>>>
>         >>>>
>         >>>> On Tue, 2012-01-10 at 23:21 +0100, Bojan Pogacar wrote:
>         >>>>
>         >>>>> Hello!
>         >>>>>
>         >>>>> I've tested 1.2.9 and it seems that DHCP is faster and
>         is running
>         >>>>> very well.
>         >>>>>
>         >>>>> I've also tested anyip feature and it still doesn't work
>         for me after
>         >>>>> 1.2.5 . Can anyone confirm that this feature wasn't
>         broken after 1.2.5.
>         >>>>>
>         >>>>> I've also described my problem at
>         http://coova.org/node/4888 . Can
>         >>>>> please anyone please take a look?
>         >>>>>
>         >>>>> Thanks David, thanks everyone!
>         >>>>>
>         >>>>> Bojan
>         >>>>>
>         >>>>>
>         
>         >>>>> ______________________________**_________________
>         >>>>> Chilli mailing list
>         >>>>> Chilli at coova.org
>         >>>>>
>         http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
>         >>>>>
>         >>>>
>         >>>>
>         >>>>  ______________________________**_________________
>         >>> Chilli mailing list
>         >>> Chilli at coova.org
>         >>>
>         http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
>         >>>
>         >>>  ______________________________**_________________
>         >> Chilli mailing list
>         >> Chilli at coova.org
>         >>
>         http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
>         >>
>         >
>         >-------------------------------------------------
>         >
>         >IMPORTANT NOTICE : The information in this email is
>         confidential and may also be privileged.
>         >If you are not the intended recipient, any use or
>         dissemination of the information and any
>         >disclosure or copying of this email is unauthorised and
>         strictly prohibited. If you have received
>         >this email in error, please promptly inform us by reply email
>         or telephone. You should also delete
>         >this email and destroy any hard copies produced.
>         >
>         >_______________________________________________
>         >Chilli mailing list
>         >Chilli at coova.org
>         >http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>         
> 
> 
> -------------------------------------------------
> 
> IMPORTANT NOTICE : The information in this email is confidential and may also be privileged. 
> If you are not the intended recipient, any use or dissemination of the information and any
> disclosure or copying of this email is unauthorised and strictly prohibited. If you have received
> this email in error, please promptly inform us by reply email or telephone. You should also delete
> this email and destroy any hard copies produced.



From bojan at gajba.net  Fri Feb 10 09:53:42 2012
From: bojan at gajba.net (Bojan Pogacar)
Date: Fri, 10 Feb 2012 10:53:42 +0100
Subject: [Chilli] CoovaChilli 1.2.9 & AnyIP
In-Reply-To: <1328863964.4284.46.camel@david-laptop>
References: <8t47yfklpbtc657i1eil7x8q.1328852169246@email.android.com>
	<CAODoKgDfwjYYwUwhc52ST+r96ieAtYRBrtiJQ6_m6fSu67PSfQ@mail.gmail.com>
	<1328863964.4284.46.camel@david-laptop>
Message-ID: <4F34E926.9020707@gajba.net>

Hello!

The problem since 1.2.5 is only that web page for login don't load for 
users that connect to anyip coova chilli and use DHCP (if they have 
static IP login page shows up and everything is workign fine). Bellow is 
my wireshark analysis that I posted to the list on 4th of February:

------------
Hello!

I am still trying to fix anyip feature on my Chilli. I've analized TCP 
stream when opening captive portal web page and I get:

592    117.787866    10.9.0.4    10.9.0.1    TCP    66    49713 > http 
[SYN] Seq=0 Win=8192 Len=0 MSS=1460 WS=256 SACK_PERM=1
593    117.789301    10.9.0.1    10.9.0.4    TCP    66    http > 49713 
[SYN, ACK] Seq=0 Ack=1 Win=14600 Len=0 MSS=1460 SACK_PERM=1 WS=256
594    117.789413    10.9.0.4    10.9.0.1    TCP    54 49713 > http 
[ACK] Seq=1 Ack=1 Win=65536 Len=0
595    117.789514    10.9.0.1    10.9.0.4    TCP    66    [TCP Previous 
segment lost] http > 49713 [SYN, ACK] Seq=1237032389 Ack=1 Win=14600 
Len=0 MSS=1460 SACK_PERM=1 WS=256
596    117.789533    10.9.0.4    10.9.0.1    TCP    54    [TCP Dup ACK 
594#1] 49713 > http [ACK] Seq=1 Ack=1 Win=65536 Len=0
597    117.790578    10.9.0.1    10.9.0.4    TCP    60    http > 49713 
[RST] Seq=1 Win=0 Len=0
598    117.790719    10.9.0.1    10.9.0.4    TCP    60    http > 49713 
[RST] Seq=1 Win=0 Len=0

10.9.0.4 is client IP
10.9.0.1 is chilli server

I can SSH from client to server without problems, only web pages on 
10.9.0.1 don't work.

Any idea, why I get "TCP Dup ACK" and then RST ? What am I missing. Any 
idea?

Could it be realted to this (duplicate entry in Unit 0 and Unit 1), when 
I execute chilli_query listippool

 > Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1
 > Unit 1 : -inuse- : 10.9.0.3 : mac=02-01-01-05-01-01 ip=10.9.0.2 age=1


Problem exists only if I enable anyip feature and if I use DHCP on my 
client. When I use static IP (anyip) on client, it works OK.


Thanks, Bye


Dne 10.2.2012 9:52, pi?e David Bird:
> Hi,
>
> It has always been the case that statip is required for anyip.
> Internally, chilli has allocated 'slots' for sessions based on the dynip
> and statip ranges. The dynip, of course, is where DHCP addresses are
> pooled (in layer3 mode, this is just the slots for the in-range
> sessions, there is no DHCP allocation). Static and anyip take a slot out
> of the statip pool (even if the IP isn't in it's statip range). In the
> case of natanyip, in addition to holding a slot in the static pool, an
> NAT IP is reserved out of the dynip and there is a one-to-one NATing.
>
> Here is a working example (both clients not having problems) and the
> output of chilli_query listippool:
>
> DHCP lease time 600 sec, grace period 60 sec
> First available dynamic 2 Last 252
> First available static 254 Last 508
> List size 509
> -- Dynamic Pool
> ------------------------------------------------------------
> Unit   0 : -inuse- :        10.1.0.2 : mac=B8-FF-61-XX-XX-XX
> ip=11.11.11.11 age=172
> Unit   1 : -inuse- :        10.1.0.3 : mac=78-D6-F0-XX-XX-XX ip=10.1.0.3
> age=0
> Unit   2 :  -1/  3 :        10.1.0.4 :
> Unit   3 :   2/  4 :        10.1.0.5 :
> Unit   4 :   3/  5 :        10.1.0.6 :
>
> ...
> -- Static Pool
> ------------------------------------------------------------
> Unit 253 : -inuse- :     11.11.11.11 : static mac=B8-FF-61-XX-XX-XX
> ip=11.11.11.11 age=172
> Unit 254 :  -1/255 :         0.0.0.0 : static
> Unit 255 : 254/256 :         0.0.0.0 : static
> ...
> Dynamic address: free 251, avail 251, used 2, err 0, sum 253/253
> Static address: free 255, avail 255, used 1, err 0, sum 256/256
>
>
> On Fri, 2012-02-10 at 18:46 +1100, Robert White wrote:
>> Hi David,
>>
>>
>> We've been using anyip WITHOUT natanyip.
>>
>>
>> The setup we are trying to achieve is as follows, perhaps you could
>> comment if we're going about this the right way:
>>
>>
>> We have a network where people connect and get an IP via DHCP - all
>> works well.
>> On the same network there are people who connect and have a static IP
>> - anyip is turned on.  Chilli log shows them getting assigned a static
>> IP but they are never served the captive portal
>> On the same network there are people who have DHCP turned on and we
>> are trying to set their IP via RADIUS attributes.  This has two
>> outcomes depending on whether or not we set HS_STATIP.  If we dont set
>> it then chilli complains it is unable to assign a static ip.  If we
>> set HS_STATIP to the subnet that RADIUS is trying to assign an IP from
>> then the RADIUS attribute for the IP address is assigned properly but
>> the Subnet mask and DNS server attributes are not.  If someone with a
>> static IP tries to connect then chilli will seg fault.
>>
>>
>> David, could you clarify the use of HS_DYNIP and HS_STATIP.  If they
>> are hashed out will anyip work?  We've never used natanyip - does this
>> NAT a client static IP with an IP from the HS_DYNIP pool?
>>
>>
>> If you could outline the best way to achieve our scenario above we can
>> do some more testing and email through some debug info.
>>
>>
>> Thanks,
>>
>>
>> Rob White
>>
>>
>> On 10 February 2012 16:36, David Bird<david at coova.com>  wrote:
>>          How are you using anyip (with natanyip?) And what test are you
>>          doing that is failing?
>>
>>          Robert White<rwhite at globalgossip.net>  wrote:
>>
>>          >Bojan,
>>          >
>>          >Did you have any success getting AnyIP feature working?
>>          >
>>          >I can confirm it's not working for me in 1.2.8 or 1.2.9.
>>          >
>>          >Thanks,
>>          >
>>          >Rob
>>          >
>>          >On 13 January 2012 23:22, Bojan Pogacar<bojan at gajba.net>
>>          wrote:
>>          >
>>          >>  David, did you have time to take a look at my results?
>>          >>
>>          >>  Thank you very much for your help.
>>          >>
>>          >>
>>          >>  Bye
>>          >>
>>          >>
>>          >>
>>          >>  Dne 11.1.2012 10:29, pi?e Bojan Pogacar:
>>          >>
>>          >>>  On chilli 1.2.9 I get:
>>          >>>
>>          >>>  Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01
>>          ip=10.9.0.2 age=1
>>          >>>  Unit 1 : -inuse- : 10.9.0.3 : mac=02-01-01-05-01-01
>>          ip=10.9.0.2 age=1
>>          >>>  Unit 2 : -1/ 3 : 10.9.0.4 :
>>          >>>  Unit 3 : 2/ 4 : 10.9.0.5 :
>>          >>>  Unit 4 : 3/ 5 : 10.9.0.6 :
>>          >>>  Unit 5 : 4/ 6 : 10.9.0.7 :
>>          >>>  etc, ..
>>          >>>
>>          >>>  On chilli 1.2.5 I get:
>>          >>>
>>          >>>  Unit 0 : -inuse- : 10.9.0.2 : mac=02-01-01-05-01-01
>>          ip=10.9.0.2 age=4
>>          >>>  Unit 1 : -1/ 2 : 10.9.0.3 :
>>          >>>  Unit 2 : 1/ 3 : 10.9.0.4 :
>>          >>>  Unit 3 : 2/ 4 : 10.9.0.5 :
>>          >>>  Unit 4 : 3/ 5 : 10.9.0.6 :
>>          >>>  Unit 5 : 4/ 6 : 10.9.0.7 :
>>          >>>  etc, ...
>>          >>>
>>          >>>  Is there OK, that on 1.2.9 I get two IPs listed on same
>>          MAC. Could this
>>          >>>  be a problem that web server terminates a connection?
>>          >>>
>>          >>>  All IPs are fetch through DHCP. Static IPs are working.
>>          >>>
>>          >>>  Thanks, Bojan
>>          >>>
>>          >>>
>>          >>>
>>          >>>  Dne 11.1.2012 10:20, pi?e David Bird:
>>          >>>
>>          >>>>  You can get perhaps a bit more info if you do:
>>          >>>>
>>          >>>>  chilli_query listippool
>>          >>>>  DHCP lease time 600 sec, grace period 60 sec
>>          >>>>  First available dynamic 3 Last 1
>>          >>>>  First available static 254 Last 508
>>          >>>>  List size 509
>>          >>>>  -- Dynamic Pool
>>
>>          >>>>
>>          ------------------------------**------------------------------
>>          >>>>  Unit 0 : -inuse- : 10.1.0.2 : mac=XX-XX-XX-XX-XX-XX
>>          >>>>  ip=192.0.0.2 age=2
>>          >>>>  Unit 1 : 252/ -1 : 10.1.0.3 :
>>          >>>>  Unit 2 : -inuse- : 10.1.0.4 : mac=YY-YY-YY-YY-YY-YY
>>          ip=10.1.0.4
>>          >>>>  age=241
>>          >>>>  ...
>>          >>>>
>>          >>>>  above is a 192.0.0.2 anyip static IP being NATed through
>>          as 10.1.0.2.
>>          >>>>
>>          >>>>
>>          >>>>  On Tue, 2012-01-10 at 23:21 +0100, Bojan Pogacar wrote:
>>          >>>>
>>          >>>>>  Hello!
>>          >>>>>
>>          >>>>>  I've tested 1.2.9 and it seems that DHCP is faster and
>>          is running
>>          >>>>>  very well.
>>          >>>>>
>>          >>>>>  I've also tested anyip feature and it still doesn't work
>>          for me after
>>          >>>>>  1.2.5 . Can anyone confirm that this feature wasn't
>>          broken after 1.2.5.
>>          >>>>>
>>          >>>>>  I've also described my problem at
>>          http://coova.org/node/4888 . Can
>>          >>>>>  please anyone please take a look?
>>          >>>>>
>>          >>>>>  Thanks David, thanks everyone!
>>          >>>>>
>>          >>>>>  Bojan
>>          >>>>>
>>          >>>>>
>>
>>          >>>>>  ______________________________**_________________
>>          >>>>>  Chilli mailing list
>>          >>>>>  Chilli at coova.org
>>          >>>>>
>>          http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
>>          >>>>>
>>          >>>>
>>          >>>>
>>          >>>>   ______________________________**_________________
>>          >>>  Chilli mailing list
>>          >>>  Chilli at coova.org
>>          >>>
>>          http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
>>          >>>
>>          >>>   ______________________________**_________________
>>          >>  Chilli mailing list
>>          >>  Chilli at coova.org
>>          >>
>>          http://lists.coova.org/cgi-**bin/mailman/listinfo/chilli<http://lists.coova.org/cgi-bin/mailman/listinfo/chilli>
>>          >>
>>          >
>>          >-------------------------------------------------
>>          >
>>          >IMPORTANT NOTICE : The information in this email is
>>          confidential and may also be privileged.
>>          >If you are not the intended recipient, any use or
>>          dissemination of the information and any
>>          >disclosure or copying of this email is unauthorised and
>>          strictly prohibited. If you have received
>>          >this email in error, please promptly inform us by reply email
>>          or telephone. You should also delete
>>          >this email and destroy any hard copies produced.
>>          >
>>          >_______________________________________________
>>          >Chilli mailing list
>>          >Chilli at coova.org
>>          >http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>>
>>
>>
>> -------------------------------------------------
>>
>> IMPORTANT NOTICE : The information in this email is confidential and may also be privileged.
>> If you are not the intended recipient, any use or dissemination of the information and any
>> disclosure or copying of this email is unauthorised and strictly prohibited. If you have received
>> this email in error, please promptly inform us by reply email or telephone. You should also delete
>> this email and destroy any hard copies produced.
>
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>

From fmacedo at cpd.ufrgs.br  Mon Feb 13 16:25:19 2012
From: fmacedo at cpd.ufrgs.br (Fernando Macedo)
Date: Mon, 13 Feb 2012 14:25:19 -0200
Subject: [Chilli] Segfault Chilli 1.2.9
Message-ID: <4F39396F.1070703@cpd.ufrgs.br>

Hi, one month after installing chilli we experienced a segfault in the 
last version.

kernel: [2788498.078399] chilli[893]: segfault at 7ffff6a8b058 ip 
00007f5621e96d64 sp 00007ffff6a78088 error 4 in 
libchilli.so.0.0.0[7f5621e6d000+4a000]

Has anyone the same problem?

Fernando Macedo

From fmacedo at cpd.ufrgs.br  Mon Feb 13 19:33:08 2012
From: fmacedo at cpd.ufrgs.br (Fernando Macedo)
Date: Mon, 13 Feb 2012 17:33:08 -0200
Subject: [Chilli] Segfault Chilli 1.2.9
In-Reply-To: <4F39396F.1070703@cpd.ufrgs.br>
References: <4F39396F.1070703@cpd.ufrgs.br>
Message-ID: <4F396574.6020401@cpd.ufrgs.br>

More crashes:

Feb 13 14:16:07 x kernel: [2788498.078399] chilli[893]: segfault at 
7ffff6a8b058 ip 00007f5621e96d64 sp 00007ffff6a78088 error 4 in 
libchilli.so.0.0.0[7f5621e6d000+4a000]
Feb 13 16:35:56 x kernel: [2796886.973424] chilli[1317]: segfault at 
7fffd306d02d ip 00007f5f14cb4d64 sp 00007fffd305acf8 error 4 in 
libchilli.so.0.0.0[7f5f14c8b000+4a000]
Feb 13 16:36:08 x kernel: [2796899.050379] chilli[31138]: segfault at 
7fffeb998019 ip 00007ff00cbdbd64 sp 00007fffeb984cd8 error 4 in 
libchilli.so.0.0.0[7ff00cbb2000+4a000]
Feb 13 16:40:58 x kernel: [2797189.473169] chilli[31371]: segfault at 
7fff5258202d ip 00007fd99487fd64 sp 00007fff5256f948 error 4 in 
libchilli.so.0.0.0[7fd994856000+4a000]
Feb 13 16:41:11 x kernel: [2797201.999800] chilli[5316]: segfault at 
7ffff7f38019 ip 00007f27c4ae2d64 sp 00007ffff7f24c08 error 4 in 
libchilli.so.0.0.0[7f27c4ab9000+4a000]
Feb 13 16:41:27 x kernel: [2797218.491727] chilli[5601]: segfault at 
7fff10237009 ip 00007fbc046d2d64 sp 00007fff10223818 error 4 in 
libchilli.so.0.0.0[7fbc046a9000+4a000]


Em 13/02/2012 14:25, Fernando Macedo escreveu:
> Hi, one month after installing chilli we experienced a segfault in the 
> last version.
>
> kernel: [2788498.078399] chilli[893]: segfault at 7ffff6a8b058 ip 
> 00007f5621e96d64 sp 00007ffff6a78088 error 4 in 
> libchilli.so.0.0.0[7f5621e6d000+4a000]
>
> Has anyone the same problem?
>
> Fernando Macedo
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From fmacedo at cpd.ufrgs.br  Tue Feb 14 13:36:47 2012
From: fmacedo at cpd.ufrgs.br (Fernando Macedo)
Date: Tue, 14 Feb 2012 11:36:47 -0200
Subject: [Chilli] Segfault Chilli 1.2.9
In-Reply-To: <4F396574.6020401@cpd.ufrgs.br>
References: <4F39396F.1070703@cpd.ufrgs.br> <4F396574.6020401@cpd.ufrgs.br>
Message-ID: <4F3A636F.1010507@cpd.ufrgs.br>

Any idea? I'm using chilli_query login toauthenticate the users. It can 
be related to this bug: http://www.coova.org/node/2653.

Em 13/02/2012 17:33, Fernando Macedo escreveu:
> More crashes:
>
> Feb 13 14:16:07 x kernel: [2788498.078399] chilli[893]: segfault at 
> 7ffff6a8b058 ip 00007f5621e96d64 sp 00007ffff6a78088 error 4 in 
> libchilli.so.0.0.0[7f5621e6d000+4a000]
> Feb 13 16:35:56 x kernel: [2796886.973424] chilli[1317]: segfault at 
> 7fffd306d02d ip 00007f5f14cb4d64 sp 00007fffd305acf8 error 4 in 
> libchilli.so.0.0.0[7f5f14c8b000+4a000]
> Feb 13 16:36:08 x kernel: [2796899.050379] chilli[31138]: segfault at 
> 7fffeb998019 ip 00007ff00cbdbd64 sp 00007fffeb984cd8 error 4 in 
> libchilli.so.0.0.0[7ff00cbb2000+4a000]
> Feb 13 16:40:58 x kernel: [2797189.473169] chilli[31371]: segfault at 
> 7fff5258202d ip 00007fd99487fd64 sp 00007fff5256f948 error 4 in 
> libchilli.so.0.0.0[7fd994856000+4a000]
> Feb 13 16:41:11 x kernel: [2797201.999800] chilli[5316]: segfault at 
> 7ffff7f38019 ip 00007f27c4ae2d64 sp 00007ffff7f24c08 error 4 in 
> libchilli.so.0.0.0[7f27c4ab9000+4a000]
> Feb 13 16:41:27 x kernel: [2797218.491727] chilli[5601]: segfault at 
> 7fff10237009 ip 00007fbc046d2d64 sp 00007fff10223818 error 4 in 
> libchilli.so.0.0.0[7fbc046a9000+4a000]
>
>
> Em 13/02/2012 14:25, Fernando Macedo escreveu:
>> Hi, one month after installing chilli we experienced a segfault in 
>> the last version.
>>
>> kernel: [2788498.078399] chilli[893]: segfault at 7ffff6a8b058 ip 
>> 00007f5621e96d64 sp 00007ffff6a78088 error 4 in 
>> libchilli.so.0.0.0[7f5621e6d000+4a000]
>>
>> Has anyone the same problem?
>>
>> Fernando Macedo
>> _______________________________________________
>> Chilli mailing list
>> Chilli at coova.org
>> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli
>
> _______________________________________________
> Chilli mailing list
> Chilli at coova.org
> http://lists.coova.org/cgi-bin/mailman/listinfo/chilli


From maxxer at ufficyo.com  Thu Feb 16 13:57:48 2012
From: maxxer at ufficyo.com (Lorenzo Milesi)
Date: Thu, 16 Feb 2012 14:57:48 +0100 (CET)
Subject: [Chilli] Setting conup in config file
In-Reply-To: <2010669757.55962.1329400656460.JavaMail.root@quaglia>
Message-ID: <300978315.55987.1329400668029.JavaMail.root@quaglia>

Hi.

How do I set the conup option into the /etc/chilli/config file?
I know I can set it into /etc/chilli.conf, but the init script will rewrite it!

thanks!


