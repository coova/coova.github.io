<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] coova - freeradius connection problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20coova%20-%20freeradius%20connection%20problem&In-Reply-To=%3C02b701cf0e73%244817a210%24d846e630%24%40cabocom.cv%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002521.html">
   <LINK REL="Next"  HREF="002523.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] coova - freeradius connection problem</H1>
    <B>Luis Ferreira</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20coova%20-%20freeradius%20connection%20problem&In-Reply-To=%3C02b701cf0e73%244817a210%24d846e630%24%40cabocom.cv%3E"
       TITLE="[Chilli] coova - freeradius connection problem">lferreira at cabocom.cv
       </A><BR>
    <I>Sat Jan 11 02:17:23 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="002521.html">[Chilli] Subversion -&gt; Git
</A></li>
        <LI>Next message: <A HREF="002523.html">[Chilli] coova - freeradius connection problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2522">[ date ]</a>
              <a href="thread.html#2522">[ thread ]</a>
              <a href="subject.html#2522">[ subject ]</a>
              <a href="author.html#2522">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi everyone,

 

In our setup, we (as many others) are using ADSL routers for internet. 

For centralization purposes , I've got a central Radius server, serving
requests from several NAS.

For reliability purposes, I've configured a VPN to pass the requests more
efficiently and reliably (VPN on TCP mode).

 

The problem I'm experience is that when ADSL is disconnected (every 18
hours, the connection is reseted by our ISP or if there is a failure), in
the time that chilli cannot connect to freeradius, online users get stuck (
chilli fail to send accounting info to radius), and that causes erratic
behavior on the account, like cannot login sometime after,  mysql radacct
shows zero bytes of traffic or no change on the actual traffic.

 

One of the things that I've done was creating a script to zap stalled
accounts on radius (checking accounting packets and terminating with radzap,
if disconnect packet is not enough). That is good enough to unlock the
account on radius, but not on chilli.

 

The problem is on chilli because if I try to login on other NAS, the account
works perfectly, so the supposed radius reply &quot;User Already logged in&quot; only
happen on the erratic NAS.

 

The only real option that I have to restart chilli to kill those sessions
and do a clean start.

 

Is there any toughts on how to fix this or to debug it further?

 

This is quite annoying, since there is almost every single day locked
accounts, and my solution has been restart chilli in the morning on a daily
basis.

 

Regards,

Luis Ferreira

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20140111/96936f28/attachment.html">http://lists.coova.org/pipermail/chilli/attachments/20140111/96936f28/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002521.html">[Chilli] Subversion -&gt; Git
</A></li>
	<LI>Next message: <A HREF="002523.html">[Chilli] coova - freeradius connection problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2522">[ date ]</a>
              <a href="thread.html#2522">[ thread ]</a>
              <a href="subject.html#2522">[ subject ]</a>
              <a href="author.html#2522">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
