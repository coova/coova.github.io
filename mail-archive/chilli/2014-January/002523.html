<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] coova - freeradius connection problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20coova%20-%20freeradius%20connection%20problem&In-Reply-To=%3C02ca01cf0eb7%24705cfce0%245116f6a0%24%40cabocom.cv%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002522.html">
   <LINK REL="Next"  HREF="002524.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] coova - freeradius connection problem</H1>
    <B>Luis Ferreira</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20coova%20-%20freeradius%20connection%20problem&In-Reply-To=%3C02ca01cf0eb7%24705cfce0%245116f6a0%24%40cabocom.cv%3E"
       TITLE="[Chilli] coova - freeradius connection problem">lferreira at cabocom.cv
       </A><BR>
    <I>Sat Jan 11 10:25:20 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="002522.html">[Chilli] coova - freeradius connection problem
</A></li>
        <LI>Next message: <A HREF="002524.html">[Chilli] Chilli Digest, Vol 50, Issue 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2523">[ date ]</a>
              <a href="thread.html#2523">[ thread ]</a>
              <a href="subject.html#2523">[ subject ]</a>
              <a href="author.html#2523">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

 

Thanks for the reply.

Knowing that ISP change is not a viable option, what can be actually done on
chilli to (let's call it) Re-close a session (even if it's not showing on
radius and chilli)

Is it something that can be done (even if it's on code).

 

 

 

IMO only solution is get a better ISP or host local RADIUS servers. I don't
know much about RADIUS proxying but look into that maybe it caches when
disconnected until reconnected.

 

On Fri, Jan 10, 2014 at 6:17 PM, Luis Ferreira &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">lferreira at cabocom.cv</A>&gt; wrote:

Hi everyone,

 

In our setup, we (as many others) are using ADSL routers for internet. 

For centralization purposes , I've got a central Radius server, serving
requests from several NAS.

For reliability purposes, I've configured a VPN to pass the requests more
efficiently and reliably (VPN on TCP mode).

 

The problem I'm experience is that when ADSL is disconnected (every 18
hours, the connection is reseted by our ISP or if there is a failure), in
the time that chilli cannot connect to freeradius, online users get stuck (
chilli fail to send accounting info to radius), and that causes erratic
behavior on the account, like cannot login sometime after,  mysql radacct
shows zero bytes of traffic or no change on the actual traffic.

 

One of the things that I've done was creating a script to zap stalled
accounts on radius (checking accounting packets and terminating with radzap,
if disconnect packet is not enough). That is good enough to unlock the
account on radius, but not on chilli.

 

The problem is on chilli because if I try to login on other NAS, the account
works perfectly, so the supposed radius reply &quot;User Already logged in&quot; only
happen on the erratic NAS.

 

The only real option that I have to restart chilli to kill those sessions
and do a clean start.

 

Is there any toughts on how to fix this or to debug it further?

 

This is quite annoying, since there is almost every single day locked
accounts, and my solution has been restart chilli in the morning on a daily
basis.

 

Regards,

Luis Ferreira

 


_______________________________________________
Chilli mailing list
<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20140111/24298692/attachment.html">http://lists.coova.org/pipermail/chilli/attachments/20140111/24298692/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002522.html">[Chilli] coova - freeradius connection problem
</A></li>
	<LI>Next message: <A HREF="002524.html">[Chilli] Chilli Digest, Vol 50, Issue 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2523">[ date ]</a>
              <a href="thread.html#2523">[ thread ]</a>
              <a href="subject.html#2523">[ subject ]</a>
              <a href="author.html#2523">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
