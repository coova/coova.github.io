<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> UAMALLOWED and HTTPS (to select.worldpay.com)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20UAMALLOWED%20and%20HTTPS%20%28to%20select.worldpay.com%29&In-Reply-To=%3Cd42f029a0904291044v5c43d882v73d7f6e718da51e3%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000710.html">
   <LINK REL="Next"  HREF="000713.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>UAMALLOWED and HTTPS (to select.worldpay.com)</H1>
    <B>Henk Kleynhans</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20UAMALLOWED%20and%20HTTPS%20%28to%20select.worldpay.com%29&In-Reply-To=%3Cd42f029a0904291044v5c43d882v73d7f6e718da51e3%40mail.gmail.com%3E"
       TITLE="UAMALLOWED and HTTPS (to select.worldpay.com)">henk at skyrove.com
       </A><BR>
    <I>Wed Apr 29 17:44:31 UTC 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000710.html">UAMALLOWED and HTTPS (to select.worldpay.com)
</A></li>
        <LI>Next message: <A HREF="000713.html">UAMALLOWED and HTTPS (to select.worldpay.com)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#711">[ date ]</a>
              <a href="thread.html#711">[ thread ]</a>
              <a href="subject.html#711">[ subject ]</a>
              <a href="author.html#711">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It may well be useful to test if it's an MTU issue.

In my experience, the MTU issue is only apparent when your Coova router is
doing a PPPoE dial-up, not when getting a DHCP lease.

Furthermore, the MTU issue should be apparent regardless of whether you are
adding the URL into the uamallowed var.

You can test this fairly easily by changing the MTU on your PC manually,
before implementing the rule on your router (though, the rule Johan gives
below is good to keep on your router permanently, in either case.)

To test it, in Ubuntu, issue:

sudo ifconfig eth0 mtu 1352

(where 1352 is your desired MTU in this case)

Good luck!

henk





On Wed, Apr 29, 2009 at 6:58 PM, Johan Meiring &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">jmeiring at amobia.com</A>&gt; wrote:

&gt;<i> Derek C wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Johan,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  Best to use:
</I>&gt;&gt;&gt;<i> tcpdump -vvntttt -s 1500 -i ath0 (-s 1500 makes it capture the whole
</I>&gt;&gt;&gt;<i> packet, and you then get more info)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Without using Firefox and only telnet (because my problem seems to be that
</I>&gt;&gt;<i> I don't seem to be able to establish a socket connection) here is the
</I>&gt;&gt;<i> output from tcpdump -vvntttt -s 1500 -i ath0 when I try to &quot;telnet
</I>&gt;&gt;<i> 155.136.66.34 443&quot;.  I'll get a full dump for Firefox too but I also want
</I>&gt;&gt;<i> to see if I have this problem if I uamallow other HTTPs servers out there
</I>&gt;&gt;<i> and not just the Worldpay payment gateway.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Results from &quot;tcpdump -vvntttt -s 1500 -i ath0&quot; when doing &quot;telnet
</I>&gt;&gt;<i> 155.136.66.34 443&quot;: -
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2009-04-29 15:10:06.083836 IP (tos 0x10, ttl 64, id 40577, offset 0, flags
</I>&gt;&gt;<i> [DF], proto TCP (6), length 60) 192.168.182.9.38910 &gt; 155.136.66.34.443:
</I>&gt;&gt;<i> S, cksum 0x9078 (correct), 3501107707:3501107707(0) win 5840 &lt;mss
</I>&gt;&gt;<i> 1460,sackOK,timestamp 8271738 0,nop,wscale 6&gt;
</I>&gt;&gt;<i> 2009-04-29 15:10:06.114643 IP (tos 0x0, ttl 238, id 2, offset 0, flags
</I>&gt;&gt;<i> [none], proto TCP (6), length 44) 155.136.66.34.443 &gt; 192.168.182.9.38910:
</I>&gt;&gt;<i> S, cksum 0xc430 (correct), 1660020786:1660020786(0) ack 3501107708 win
</I>&gt;&gt;<i> 8192 &lt;mss 1460&gt;
</I>&gt;&gt;<i> 2009-04-29 15:10:06.114717 IP (tos 0x10, ttl 64, id 40578, offset 0, flags
</I>&gt;&gt;<i> [DF], proto TCP (6), length 40) 192.168.182.9.38910 &gt; 155.136.66.34.443:
</I>&gt;&gt;<i> ., cksum 0xe51d (correct), 1:1(0) ack 1 win 5840
</I>&gt;&gt;<i> 2009-04-29 15:10:06.115111 IP (tos 0x0, ttl 238, id 3, offset 0, flags
</I>&gt;&gt;<i> [none], proto TCP (6), length 44) 155.136.66.34.443 &gt; 192.168.182.9.38910:
</I>&gt;&gt;<i> S, cksum 0xa42f (correct), 1660020787:1660020787(0) ack 3501107708 win
</I>&gt;&gt;<i> 16384 &lt;mss 1460&gt;
</I>&gt;&gt;<i> 2009-04-29 15:10:06.115144 IP (tos 0x0, ttl 64, id 0, offset 0, flags
</I>&gt;&gt;<i> [DF], proto TCP (6), length 40) 192.168.182.9.38910 &gt; 155.136.66.34.443:
</I>&gt;&gt;<i> R, cksum 0x471f (correct), 3501107708:3501107708(0) win 0
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> I must say, I have no idea.
</I>&gt;<i> All looks good.
</I>&gt;<i>
</I>&gt;<i> The only other thing I can think of is MTU issues.
</I>&gt;<i>
</I>&gt;<i> Try issuing the following on your hotspot, and see if it helps.
</I>&gt;<i>
</I>&gt;<i> iptables -I FORWARD -t mangle -p tcp -m tcp --tcp-flags SYN,RST SYN -j
</I>&gt;<i> TCPMSS --clamp-mss-to-pmtu
</I>&gt;<i> (the above command is one line)
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Johan Meiring
</I>&gt;<i> Amobia Communications
</I>&gt;<i> Tel: (0861) AMOBIA / (0861) 266242
</I>&gt;<i> Fax: (0861) AMOFAX / (0861) 266329
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ---------------------------------------------------------------------
</I>&gt;<i> To unsubscribe, e-mail: <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli-unsubscribe at coova.org</A>
</I>&gt;<i> For additional commands, e-mail: <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli-help at coova.org</A>
</I>&gt;<i> Wiki: <A HREF="http://coova.org/wiki/index.php/CoovaChilli">http://coova.org/wiki/index.php/CoovaChilli</A>
</I>&gt;<i> Forum: <A HREF="http://coova.org/phpBB3/viewforum.php?f=4">http://coova.org/phpBB3/viewforum.php?f=4</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Henk Kleynhans
CTO &amp; Founder
Skyrove (Pty) Ltd
Technology Top 100 - Most Promising Emerging Enterprise 2006
Tel: +27 (21) 4488843
Cell: +27 (84) 3073451
Fax: +27 (86) 6204077
<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">henk at skyrove.com</A>
blog: www.geekrebel.com

------

&quot;A person with ubuntu is open and available to others, affirming of others,
does not feel threatened that others are able and good, for he or she has a
proper self-assurance that comes from knowing that he or she belongs in a
greater whole and is diminished when others are humiliated or diminished,
when others are tortured or oppressed.&quot; - Desmond Tutu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20090429/561b4c32/attachment.htm">http://lists.coova.org/pipermail/chilli/attachments/20090429/561b4c32/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000710.html">UAMALLOWED and HTTPS (to select.worldpay.com)
</A></li>
	<LI>Next message: <A HREF="000713.html">UAMALLOWED and HTTPS (to select.worldpay.com)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#711">[ date ]</a>
              <a href="thread.html#711">[ thread ]</a>
              <a href="subject.html#711">[ subject ]</a>
              <a href="author.html#711">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
