From christophe.suire at adelux.fr  Tue Jun  9 16:13:16 2009
From: christophe.suire at adelux.fr (Christophe SUIRE)
Date: Tue, 9 Jun 2009 18:13:16 +0200
Subject: Very strange problem
Message-ID: <306EFCD9-2264-4AF2-A24B-77D7985B7F40@adelux.fr>

Hi,

I'm using coova-chilli with a multiple instance, link each one to one  
VLAN.
I have now a problem, some web site doesn't work !!!
For example www.google.com work perfectly, but it's impossible to  
connect to www.adobe.com !! The server where chilli is can acces to  
this web site without problem.
I have also some strange packet, because my firewall doesn't allow  
packet other than for the tun device, and i have packets drop which  
come directly from the vlan interface !! Normaly after the login, all  
packet come from the tun ? I think a have all packets that are drop  
directly from the vlan interface.

Please, if someone have an idea .. !! This solution which was working  
without problem before, need to be in production tomorrow !

Thx a lot.
Chris.


From mail.gery at gmail.com  Wed Jun 10 14:18:36 2009
From: mail.gery at gmail.com (kissg)
Date: Wed, 10 Jun 2009 16:18:36 +0200
Subject: Very strange problem
In-Reply-To: <306EFCD9-2264-4AF2-A24B-77D7985B7F40@adelux.fr>
References: <306EFCD9-2264-4AF2-A24B-77D7985B7F40@adelux.fr>
Message-ID: <f1cd8c6d0906100718l3fd89423m594319c24ffd84fc@mail.gmail.com>

Hello,

could you please post a debug output of Coova-Chilli? It looks like, you
have the same issue as I had: by default, when Chilli gets a packet with a
destination address of 1.1.1.1, it drops the connection immediately. Adding
the option "uamlogoutip 127.0.0.1" to /etc/chilli/config solved this issue
for me.
If this is not the case, please tell us as much information as you can, so
we can see what's happening behind the scenes.

Regards
Gergely Kiss

2009/6/9 Christophe SUIRE <christophe.suire at adelux.fr>

> Hi,
>
> I'm using coova-chilli with a multiple instance, link each one to one VLAN.
> I have now a problem, some web site doesn't work !!!
> For example www.google.com work perfectly, but it's impossible to connect
> to www.adobe.com !! The server where chilli is can acces to this web site
> without problem.
> I have also some strange packet, because my firewall doesn't allow packet
> other than for the tun device, and i have packets drop which come directly
> from the vlan interface !! Normaly after the login, all packet come from the
> tun ? I think a have all packets that are drop directly from the vlan
> interface.
>
> Please, if someone have an idea .. !! This solution which was working
> without problem before, need to be in production tomorrow !
>
> Thx a lot.
> Chris.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090610/0b85b4f8/attachment.htm>

From christophe.suire at adelux.fr  Wed Jun 10 14:22:30 2009
From: christophe.suire at adelux.fr (Christophe SUIRE)
Date: Wed, 10 Jun 2009 16:22:30 +0200
Subject: Very strange problem
In-Reply-To: <f1cd8c6d0906100718l3fd89423m594319c24ffd84fc@mail.gmail.com>
References: <306EFCD9-2264-4AF2-A24B-77D7985B7F40@adelux.fr> <f1cd8c6d0906100718l3fd89423m594319c24ffd84fc@mail.gmail.com>
Message-ID: <4869CF33-4AE5-4D1F-A439-41185BCEE8F3@adelux.fr>

Hi,

Ok i have found the bug !!
The problem was a firmware bug with my motorola wifi controler !
Thanks.

Chris.

Le 10 juin 09 ? 16:18, kissg a ?crit :

> Hello,
>
> could you please post a debug output of Coova-Chilli? It looks like,  
> you have the same issue as I had: by default, when Chilli gets a  
> packet with a destination address of 1.1.1.1, it drops the  
> connection immediately. Adding the option "uamlogoutip 127.0.0.1"  
> to /etc/chilli/config solved this issue for me.
> If this is not the case, please tell us as much information as you  
> can, so we can see what's happening behind the scenes.
>
> Regards
> Gergely Kiss
>
> 2009/6/9 Christophe SUIRE <christophe.suire at adelux.fr>
> Hi,
>
> I'm using coova-chilli with a multiple instance, link each one to  
> one VLAN.
> I have now a problem, some web site doesn't work !!!
> For example www.google.com work perfectly, but it's impossible to  
> connect to www.adobe.com !! The server where chilli is can acces to  
> this web site without problem.
> I have also some strange packet, because my firewall doesn't allow  
> packet other than for the tun device, and i have packets drop which  
> come directly from the vlan interface !! Normaly after the login,  
> all packet come from the tun ? I think a have all packets that are  
> drop directly from the vlan interface.
>
> Please, if someone have an idea .. !! This solution which was  
> working without problem before, need to be in production tomorrow !
>
> Thx a lot.
> Chris.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>
>



From gregorym at techconcepts.co.za  Thu Jun 18 08:34:01 2009
From: gregorym at techconcepts.co.za (Gregory Machin)
Date: Thu, 18 Jun 2009 10:34:01 +0200
Subject: Unable to disconnect users
Message-ID: <AD12406E39E3CE4DBB441A20D33AC8CE4AB8BF74EB@rvtcdcm01.techconcepts.co.za>

Hi
Please help a newbe .
I have a configuration issue between CoovaChilli and FreeRadius 2.

Chilli gives back the following errors 

Jun 17 15:28:26 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
Jun 17 15:28:26 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
Jun 17 15:28:29 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
Jun 17 15:28:29 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
Jun 17 15:28:32 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
Jun 17 15:28:32 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
Jun 17 15:28:58 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
Jun 17 15:28:58 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
Jun 17 15:29:01 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
Jun 17 15:29:01 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!



Jun 17 15:29:04 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
Jun 17 15:29:04 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
Jun 17 15:31:56 localhost coova-chilli[4895]: radius.c: 1529: Authenticator did not match MD5 of packet!
Jun 17 15:31:56 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
Jun 17 15:31:59 localhost coova-chilli[4895]: radius.c: 1529: Authenticator did not match MD5 of packet!
Jun 17 15:31:59 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
Jun 17 15:32:02 localhost coova-chilli[4895]: radius.c: 1529: Authenticator did not match MD5 of packet!
Jun 17 15:32:02 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!


for


[root at localhost doc]# echo "User-Name='TC-Demo'" | radclient -c '1' -n '3' -r '3' -t '3' -x '192.168.11.1:3799' 'disconnect' 'test123'
Sending Disconnect-Request of id 137 to 192.168.11.1 port 3799
User-Name = "TC-Demo"
Sending Disconnect-Request of id 137 to 192.168.11.1 port 3799
User-Name = "TC-Demo"
Sending Disconnect-Request of id 137 to 192.168.11.1 port 3799
User-Name = "TC-Demo"
radclient: no response from server for ID 137 socket 3
[root at localhost doc]# echo "User-Name='TC-Demo'" | radclient -c '1' -n '3' -r '3' -t '3' -x '127.0.0.1:3799' 'disconnect' 'test123'
Sending Disconnect-Request of id 87 to 127.0.0.1 port 3799
User-Name = "TC-Demo"
Sending Disconnect-Request of id 87 to 127.0.0.1 port 3799
User-Name = "TC-Demo"
Sending Disconnect-Request of id 87 to 127.0.0.1 port 3799
User-Name = "TC-Demo"
radclient: no response from server for ID 87 socket 3


I have used the configs from 

http://daloradius.wiki.sourceforge.net/Chillispot+Integration

Installed of Fedora 10 x68_64, 
coova-chilli 1.0.13,
FreeRADIUS Version 2.1.3,


What have I missed ???


Thanks




Regards
Gregory Machin
Email: gmachin at techconcepts.co.za
Cell:   +27 (0) 72 524 5098
gtalk:  gmachin.techconcepts at gmail.com
Support
helpdesk at techconcepts.co.za
Tell:     +27 (0) 11 803 2169
Fax:     +27 (0) 11 803 2189
After Hours
Cell:    +27 (0) 82 790 0796 



From wlan at mac.com  Thu Jun 18 11:36:14 2009
From: wlan at mac.com (wlanmac)
Date: Thu, 18 Jun 2009 13:36:14 +0200
Subject: Unable to disconnect users
In-Reply-To: 
 <AD12406E39E3CE4DBB441A20D33AC8CE4AB8BF74EB@rvtcdcm01.techconcepts.co.za>
References: 
 <AD12406E39E3CE4DBB441A20D33AC8CE4AB8BF74EB@rvtcdcm01.techconcepts.co.za>
Message-ID: <1245324974.8040.21.camel@david-laptop>

The RADIUS shared secret is probably wrong.

On Thu, 2009-06-18 at 10:34 +0200, Gregory Machin wrote:
> Hi
> Please help a newbe .
> I have a configuration issue between CoovaChilli and FreeRadius 2.
> 
> Chilli gives back the following errors 
> 
> Jun 17 15:28:26 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> Jun 17 15:28:26 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> Jun 17 15:28:29 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> Jun 17 15:28:29 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> Jun 17 15:28:32 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> Jun 17 15:28:32 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> Jun 17 15:28:58 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> Jun 17 15:28:58 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> Jun 17 15:29:01 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> Jun 17 15:29:01 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> 
> 
> 
> Jun 17 15:29:04 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> Jun 17 15:29:04 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> Jun 17 15:31:56 localhost coova-chilli[4895]: radius.c: 1529: Authenticator did not match MD5 of packet!
> Jun 17 15:31:56 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> Jun 17 15:31:59 localhost coova-chilli[4895]: radius.c: 1529: Authenticator did not match MD5 of packet!
> Jun 17 15:31:59 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> Jun 17 15:32:02 localhost coova-chilli[4895]: radius.c: 1529: Authenticator did not match MD5 of packet!
> Jun 17 15:32:02 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> 
> 
> for
> 
> 
> [root at localhost doc]# echo "User-Name='TC-Demo'" | radclient -c '1' -n '3' -r '3' -t '3' -x '192.168.11.1:3799' 'disconnect' 'test123'
> Sending Disconnect-Request of id 137 to 192.168.11.1 port 3799
> User-Name = "TC-Demo"
> Sending Disconnect-Request of id 137 to 192.168.11.1 port 3799
> User-Name = "TC-Demo"
> Sending Disconnect-Request of id 137 to 192.168.11.1 port 3799
> User-Name = "TC-Demo"
> radclient: no response from server for ID 137 socket 3
> [root at localhost doc]# echo "User-Name='TC-Demo'" | radclient -c '1' -n '3' -r '3' -t '3' -x '127.0.0.1:3799' 'disconnect' 'test123'
> Sending Disconnect-Request of id 87 to 127.0.0.1 port 3799
> User-Name = "TC-Demo"
> Sending Disconnect-Request of id 87 to 127.0.0.1 port 3799
> User-Name = "TC-Demo"
> Sending Disconnect-Request of id 87 to 127.0.0.1 port 3799
> User-Name = "TC-Demo"
> radclient: no response from server for ID 87 socket 3
> 
> 
> I have used the configs from 
> 
> http://daloradius.wiki.sourceforge.net/Chillispot+Integration
> 
> Installed of Fedora 10 x68_64, 
> coova-chilli 1.0.13,
> FreeRADIUS Version 2.1.3,
> 
> 
> What have I missed ???
> 
> 
> Thanks
> 
> 
> 
> 
> Regards
> Gregory Machin
> Email: gmachin at techconcepts.co.za
> Cell:   +27 (0) 72 524 5098
> gtalk:  gmachin.techconcepts at gmail.com
> Support
> helpdesk at techconcepts.co.za
> Tell:     +27 (0) 11 803 2169
> Fax:     +27 (0) 11 803 2189
> After Hours
> Cell:    +27 (0) 82 790 0796 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
> 



From gregorym at techconcepts.co.za  Thu Jun 18 12:05:26 2009
From: gregorym at techconcepts.co.za (Gregory Machin)
Date: Thu, 18 Jun 2009 14:05:26 +0200
Subject: Unable to disconnect users
In-Reply-To: <1245324974.8040.21.camel@david-laptop>
References: <AD12406E39E3CE4DBB441A20D33AC8CE4AB8BF74EB@rvtcdcm01.techconcepts.co.za>,<1245324974.8040.21.camel@david-laptop>
Message-ID: <AD12406E39E3CE4DBB441A20D33AC8CE4AB8BF74F4@rvtcdcm01.techconcepts.co.za>

>From what I understand that's all correct.

/etc/chilli/config

HS_NASID=nas01
HS_UAMSERVER=192.168.11.1
HS_UAMSECRET=uamsharedsecret
HS_RADIUS=127.0.0.1           # replace with your radius server's ip
HS_RADIUS2=127.0.0.1
HS_RADSECRET=gregory    



/etc/raddb.conf

client 127.0.0.1 {
    secret = "gregory"
    shortname = localhost
    nastype = other
}


what else ?




________________________________________
From: wlanmac [wlan at mac.com]
Sent: Thursday, June 18, 2009 1:36 PM
To: chilli at coova.org
Subject: Re: Unable to disconnect users

The RADIUS shared secret is probably wrong.

On Thu, 2009-06-18 at 10:34 +0200, Gregory Machin wrote:
> Hi
> Please help a newbe .
> I have a configuration issue between CoovaChilli and FreeRadius 2.
>
> Chilli gives back the following errors
>
> Jun 17 15:28:26 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> Jun 17 15:28:26 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> Jun 17 15:28:29 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> Jun 17 15:28:29 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> Jun 17 15:28:32 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> Jun 17 15:28:32 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> Jun 17 15:28:58 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> Jun 17 15:28:58 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> Jun 17 15:29:01 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> Jun 17 15:29:01 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
>
>
>
> Jun 17 15:29:04 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> Jun 17 15:29:04 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> Jun 17 15:31:56 localhost coova-chilli[4895]: radius.c: 1529: Authenticator did not match MD5 of packet!
> Jun 17 15:31:56 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> Jun 17 15:31:59 localhost coova-chilli[4895]: radius.c: 1529: Authenticator did not match MD5 of packet!
> Jun 17 15:31:59 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> Jun 17 15:32:02 localhost coova-chilli[4895]: radius.c: 1529: Authenticator did not match MD5 of packet!
> Jun 17 15:32:02 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
>
>
> for
>
>
> [root at localhost doc]# echo "User-Name='TC-Demo'" | radclient -c '1' -n '3' -r '3' -t '3' -x '192.168.11.1:3799' 'disconnect' 'test123'
> Sending Disconnect-Request of id 137 to 192.168.11.1 port 3799
> User-Name = "TC-Demo"
> Sending Disconnect-Request of id 137 to 192.168.11.1 port 3799
> User-Name = "TC-Demo"
> Sending Disconnect-Request of id 137 to 192.168.11.1 port 3799
> User-Name = "TC-Demo"
> radclient: no response from server for ID 137 socket 3
> [root at localhost doc]# echo "User-Name='TC-Demo'" | radclient -c '1' -n '3' -r '3' -t '3' -x '127.0.0.1:3799' 'disconnect' 'test123'
> Sending Disconnect-Request of id 87 to 127.0.0.1 port 3799
> User-Name = "TC-Demo"
> Sending Disconnect-Request of id 87 to 127.0.0.1 port 3799
> User-Name = "TC-Demo"
> Sending Disconnect-Request of id 87 to 127.0.0.1 port 3799
> User-Name = "TC-Demo"
> radclient: no response from server for ID 87 socket 3
>
>
> I have used the configs from
>
> http://daloradius.wiki.sourceforge.net/Chillispot+Integration
>
> Installed of Fedora 10 x68_64,
> coova-chilli 1.0.13,
> FreeRADIUS Version 2.1.3,
>
>
> What have I missed ???
>
>
> Thanks
>
>
>
>
> Regards
> Gregory Machin
> Email: gmachin at techconcepts.co.za
> Cell:   +27 (0) 72 524 5098
> gtalk:  gmachin.techconcepts at gmail.com
> Support
> helpdesk at techconcepts.co.za
> Tell:     +27 (0) 11 803 2169
> Fax:     +27 (0) 11 803 2189
> After Hours
> Cell:    +27 (0) 82 790 0796
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>


---------------------------------------------------------------------
To unsubscribe, e-mail: chilli-unsubscribe at coova.org
For additional commands, e-mail: chilli-help at coova.org
Wiki: http://coova.org/wiki/index.php/CoovaChilli
Forum: http://coova.org/phpBB3/viewforum.php?f=4






From wlan at mac.com  Thu Jun 18 12:09:07 2009
From: wlan at mac.com (wlanmac)
Date: Thu, 18 Jun 2009 14:09:07 +0200
Subject: Unable to disconnect users
In-Reply-To: 
 <AD12406E39E3CE4DBB441A20D33AC8CE4AB8BF74F4@rvtcdcm01.techconcepts.co.za>
References: 
 <AD12406E39E3CE4DBB441A20D33AC8CE4AB8BF74EB@rvtcdcm01.techconcepts.co.za>
 <1245324974.8040.21.camel@david-laptop>
 <AD12406E39E3CE4DBB441A20D33AC8CE4AB8BF74F4@rvtcdcm01.techconcepts.co.za>
Message-ID: <1245326947.8040.32.camel@david-laptop>

I think you were using 'test123' from the command line..

On Thu, 2009-06-18 at 14:05 +0200, Gregory Machin wrote:
> From what I understand that's all correct.
> 
> /etc/chilli/config
> 
> HS_NASID=nas01
> HS_UAMSERVER=192.168.11.1
> HS_UAMSECRET=uamsharedsecret
> HS_RADIUS=127.0.0.1           # replace with your radius server's ip
> HS_RADIUS2=127.0.0.1
> HS_RADSECRET=gregory    
> 
> 
> 
> /etc/raddb.conf
> 
> client 127.0.0.1 {
>     secret = "gregory"
>     shortname = localhost
>     nastype = other
> }
> 
> 
> what else ?
> 
> 
> 
> 
> ________________________________________
> From: wlanmac [wlan at mac.com]
> Sent: Thursday, June 18, 2009 1:36 PM
> To: chilli at coova.org
> Subject: Re: Unable to disconnect users
> 
> The RADIUS shared secret is probably wrong.
> 
> On Thu, 2009-06-18 at 10:34 +0200, Gregory Machin wrote:
> > Hi
> > Please help a newbe .
> > I have a configuration issue between CoovaChilli and FreeRadius 2.
> >
> > Chilli gives back the following errors
> >
> > Jun 17 15:28:26 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> > Jun 17 15:28:26 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> > Jun 17 15:28:29 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> > Jun 17 15:28:29 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> > Jun 17 15:28:32 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> > Jun 17 15:28:32 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> > Jun 17 15:28:58 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> > Jun 17 15:28:58 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> > Jun 17 15:29:01 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> > Jun 17 15:29:01 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> >
> >
> >
> > Jun 17 15:29:04 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> > Jun 17 15:29:04 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> > Jun 17 15:31:56 localhost coova-chilli[4895]: radius.c: 1529: Authenticator did not match MD5 of packet!
> > Jun 17 15:31:56 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> > Jun 17 15:31:59 localhost coova-chilli[4895]: radius.c: 1529: Authenticator did not match MD5 of packet!
> > Jun 17 15:31:59 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> > Jun 17 15:32:02 localhost coova-chilli[4895]: radius.c: 1529: Authenticator did not match MD5 of packet!
> > Jun 17 15:32:02 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> >
> >
> > for
> >
> >
> > [root at localhost doc]# echo "User-Name='TC-Demo'" | radclient -c '1' -n '3' -r '3' -t '3' -x '192.168.11.1:3799' 'disconnect' 'test123'
> > Sending Disconnect-Request of id 137 to 192.168.11.1 port 3799
> > User-Name = "TC-Demo"
> > Sending Disconnect-Request of id 137 to 192.168.11.1 port 3799
> > User-Name = "TC-Demo"
> > Sending Disconnect-Request of id 137 to 192.168.11.1 port 3799
> > User-Name = "TC-Demo"
> > radclient: no response from server for ID 137 socket 3
> > [root at localhost doc]# echo "User-Name='TC-Demo'" | radclient -c '1' -n '3' -r '3' -t '3' -x '127.0.0.1:3799' 'disconnect' 'test123'
> > Sending Disconnect-Request of id 87 to 127.0.0.1 port 3799
> > User-Name = "TC-Demo"
> > Sending Disconnect-Request of id 87 to 127.0.0.1 port 3799
> > User-Name = "TC-Demo"
> > Sending Disconnect-Request of id 87 to 127.0.0.1 port 3799
> > User-Name = "TC-Demo"
> > radclient: no response from server for ID 87 socket 3
> >
> >
> > I have used the configs from
> >
> > http://daloradius.wiki.sourceforge.net/Chillispot+Integration
> >
> > Installed of Fedora 10 x68_64,
> > coova-chilli 1.0.13,
> > FreeRADIUS Version 2.1.3,
> >
> >
> > What have I missed ???
> >
> >
> > Thanks
> >
> >
> >
> >
> > Regards
> > Gregory Machin
> > Email: gmachin at techconcepts.co.za
> > Cell:   +27 (0) 72 524 5098
> > gtalk:  gmachin.techconcepts at gmail.com
> > Support
> > helpdesk at techconcepts.co.za
> > Tell:     +27 (0) 11 803 2169
> > Fax:     +27 (0) 11 803 2189
> > After Hours
> > Cell:    +27 (0) 82 790 0796
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> > For additional commands, e-mail: chilli-help at coova.org
> > Wiki: http://coova.org/wiki/index.php/CoovaChilli
> > Forum: http://coova.org/phpBB3/viewforum.php?f=4
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
> 



From gregorym at techconcepts.co.za  Thu Jun 18 13:21:41 2009
From: gregorym at techconcepts.co.za (Gregory Machin)
Date: Thu, 18 Jun 2009 15:21:41 +0200
Subject: Unable to disconnect users (resolved)
Message-ID: <AD12406E39E3CE4DBB441A20D33AC8CE4AB8BF74F5@rvtcdcm01.techconcepts.co.za>


Thanks been fighting with this for too long and can't to the wood for the trees  .
Thanks for taking time to look . Hope you have a grate day.

I think you were using 'test123' from the command line..

On Thu, 2009-06-18 at 14:05 +0200, Gregory Machin wrote:
> From what I understand that's all correct.
>
> /etc/chilli/config
>
> HS_NASID=nas01
> HS_UAMSERVER=192.168.11.1
> HS_UAMSECRET=uamsharedsecret
> HS_RADIUS=127.0.0.1           # replace with your radius server's ip
> HS_RADIUS2=127.0.0.1
> HS_RADSECRET=gregory
>
>
>
> /etc/raddb.conf
>
> client 127.0.0.1 {
>     secret = "gregory"
>     shortname = localhost
>     nastype = other
> }
>
>
> what else ?
>
>
>
>
> ________________________________________
> From: wlanmac [wlan at mac.com]
> Sent: Thursday, June 18, 2009 1:36 PM
> To: chilli at coova.org
> Subject: Re: Unable to disconnect users
>
> The RADIUS shared secret is probably wrong.
>
> On Thu, 2009-06-18 at 10:34 +0200, Gregory Machin wrote:
> > Hi
> > Please help a newbe .
> > I have a configuration issue between CoovaChilli and FreeRadius 2.
> >
> > Chilli gives back the following errors
> >
> > Jun 17 15:28:26 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> > Jun 17 15:28:26 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> > Jun 17 15:28:29 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> > Jun 17 15:28:29 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> > Jun 17 15:28:32 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> > Jun 17 15:28:32 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> > Jun 17 15:28:58 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> > Jun 17 15:28:58 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> > Jun 17 15:29:01 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> > Jun 17 15:29:01 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> >
> >
> >
> > Jun 17 15:29:04 localhost coova-chilli[4895]: radius.c: 1523: Received radius request from wrong address 010ba8c0!
> > Jun 17 15:29:04 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> > Jun 17 15:31:56 localhost coova-chilli[4895]: radius.c: 1529: Authenticator did not match MD5 of packet!
> > Jun 17 15:31:56 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> > Jun 17 15:31:59 localhost coova-chilli[4895]: radius.c: 1529: Authenticator did not match MD5 of packet!
> > Jun 17 15:31:59 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> > Jun 17 15:32:02 localhost coova-chilli[4895]: radius.c: 1529: Authenticator did not match MD5 of packet!
> > Jun 17 15:32:02 localhost coova-chilli[4895]: chilli.c: 3877: radius_ind() failed!
> >
> >
> > for
> >
> >
> > [root at localhost doc]# echo "User-Name='TC-Demo'" | radclient -c '1' -n '3' -r '3' -t '3' -x '192.168.11.1:3799' 'disconnect' 'test123'
> > Sending Disconnect-Request of id 137 to 192.168.11.1 port 3799
> > User-Name = "TC-Demo"
> > Sending Disconnect-Request of id 137 to 192.168.11.1 port 3799
> > User-Name = "TC-Demo"
> > Sending Disconnect-Request of id 137 to 192.168.11.1 port 3799
> > User-Name = "TC-Demo"
> > radclient: no response from server for ID 137 socket 3
> > [root at localhost doc]# echo "User-Name='TC-Demo'" | radclient -c '1' -n '3' -r '3' -t '3' -x '127.0.0.1:3799' 'disconnect' 'test123'
> > Sending Disconnect-Request of id 87 to 127.0.0.1 port 3799
> > User-Name = "TC-Demo"
> > Sending Disconnect-Request of id 87 to 127.0.0.1 port 3799
> > User-Name = "TC-Demo"
> > Sending Disconnect-Request of id 87 to 127.0.0.1 port 3799
> > User-Name = "TC-Demo"
> > radclient: no response from server for ID 87 socket 3
> >
> >
> > I have used the configs from
> >
> > http://daloradius.wiki.sourceforge.net/Chillispot+Integration
> >
> > Installed of Fedora 10 x68_64,
> > coova-chilli 1.0.13,
> > FreeRADIUS Version 2.1.3,
> >
> >
> > What have I missed ???
> >
> >
> > Thanks
> >
> >
> >
> >
> > Regards
> > Gregory Machin
> > Email: gmachin at techconcepts.co.za
> > Cell:   +27 (0) 72 524 5098
> > gtalk:  gmachin.techconcepts at gmail.com
> > Support
> > helpdesk at techconcepts.co.za
> > Tell:     +27 (0) 11 803 2169
> > Fax:     +27 (0) 11 803 2189
> > After Hours
> > Cell:    +27 (0) 82 790 0796
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> > For additional commands, e-mail: chilli-help at coova.org
> > Wiki: http://coova.org/wiki/index.php/CoovaChilli
> > Forum: http://coova.org/phpBB3/viewforum.php?f=4
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>


---------------------------------------------------------------------
To unsubscribe, e-mail: chilli-unsubscribe at coova.org
For additional commands, e-mail: chilli-help at coova.org
Wiki: http://coova.org/wiki/index.php/CoovaChilli
Forum: http://coova.org/phpBB3/viewforum.php?f=4






From peter at endian.com  Tue Jun 23 15:42:33 2009
From: peter at endian.com (Peter Warasin)
Date: Tue, 23 Jun 2009 17:42:33 +0200
Subject: [PATCH] fix of syntax error in current svn
Message-ID: <4A40F7E9.1060606@endian.com>

Hi list

This is a small patch which fixes a syntax error in current svn, which
breaks compilation.

peter
-- 
:: e n d i a n
:: open source - open minds

:: peter warasin
:: http://www.endian.com   :: peter at endian.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: coova-chilli-syntaxerror.patch
Type: text/x-patch
Size: 388 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090623/4c30eda9/attachment.bin>

From peter at endian.com  Tue Jun 23 16:11:23 2009
From: peter at endian.com (Peter Warasin)
Date: Tue, 23 Jun 2009 18:11:23 +0200
Subject: [PATCH] SNAT anyip connections
Message-ID: <4A40FEAB.5050903@endian.com>

Hi List

Attached is a patch which adds the option --uamnatanyip.

If this option is enabled and anyip is also enabled, every anyip
connection will be NATed to an ip address from the dynamic pool.
For each new connection an ip address will be requested from the dynamic
pool which then will be used to SNAT packets of that connection.
This way host routes are not necessary anymore.

This is useful if you have coova-chilli on the same host with a proxy or
a firewall. When you have anyip enabled, that firewall/proxy will see
connections coming from some external ip addresses, which will bypass
your firewall configuration or forces you to disable filters.

Enabling uamnatanyip NATs connections to your dynamic pool subnet, which
allows you to work only with that subnet on the firewall/proxy.

This patch is tested for 1.0.12, where it works flawlessly. The attached
patch is ported to current svn, where I have some problems (hisip is
always 255.255.255.254), but I have the same problems without this
patch, so i assume the patch should be ok.

If you like the 1.0.12 patch also, simply ask.

peter

-- 
:: e n d i a n
:: open source - open minds

:: peter warasin
:: http://www.endian.com   :: peter at endian.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: coova-chilli-r203-uamnatanyip.patch
Type: text/x-patch
Size: 11544 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090623/a7f5c1bb/attachment.bin>

From wlan at mac.com  Tue Jun 23 18:16:12 2009
From: wlan at mac.com (wlanmac)
Date: Tue, 23 Jun 2009 20:16:12 +0200
Subject: [PATCH] SNAT anyip connections
In-Reply-To: <4A40FEAB.5050903@endian.com>
References: <4A40FEAB.5050903@endian.com>
Message-ID: <1245780972.7719.31.camel@david-laptop>

Great feature, I can't wait to try it out! 


On Tue, 2009-06-23 at 18:11 +0200, Peter Warasin wrote:
> Hi List
> 
> Attached is a patch which adds the option --uamnatanyip.
> 
> If this option is enabled and anyip is also enabled, every anyip
> connection will be NATed to an ip address from the dynamic pool.
> For each new connection an ip address will be requested from the dynamic
> pool which then will be used to SNAT packets of that connection.
> This way host routes are not necessary anymore.
> 
> This is useful if you have coova-chilli on the same host with a proxy or
> a firewall. When you have anyip enabled, that firewall/proxy will see
> connections coming from some external ip addresses, which will bypass
> your firewall configuration or forces you to disable filters.
> 
> Enabling uamnatanyip NATs connections to your dynamic pool subnet, which
> allows you to work only with that subnet on the firewall/proxy.
> 
> This patch is tested for 1.0.12, where it works flawlessly. The attached
> patch is ported to current svn, where I have some problems (hisip is
> always 255.255.255.254), but I have the same problems without this
> patch, so i assume the patch should be ok.
> 
> If you like the 1.0.12 patch also, simply ask.
> 
> peter
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4



From derekchilli at hssl.ie  Tue Jun 23 19:12:18 2009
From: derekchilli at hssl.ie (Derek C)
Date: Tue, 23 Jun 2009 20:12:18 +0100 (IST)
Subject: CC + FreeRadius - splash page randomly appears 
Message-ID: <56503.149.5.32.200.1245784338.squirrel@www.rivertowermail.com>

Hi all,

I'm using Coova Chilli 1.0.13 with freeradius and mac authentication (and
the macauth and macreauth directives in chilli.conf).

What's always happening to me (prior to 1.0.13 and the macreauth
directive) is that sometimes (mid session) the splash page (uamserver?)
appears to the user even though their mac address is in the radcheck and
usergroup tables.

Generally this problem doesn't happen but it's easy enough to reproduce by
just keeping a computer associated to the Coovachilli hotspot throughout
the day and, every now and then, the splash page pops up.  A refresh or
browser address bar re-entry fixes the problem but its annoying and I've
had complaints from some users that the problem is worse for them (maybe
its not and they complain more...)

I'm pretty sure there isn't any timeout errors between coova chilli and
the freeradius server (nothing obvious with "logread" in openwrt) and the
bandwidth is good and always on.

Has anyone else seen things like this happening?

thanks

Derek


-- 
Derek C
In Ireland



From BrunoRobert.Urech at comfone.com  Wed Jun 24 05:30:43 2009
From: BrunoRobert.Urech at comfone.com (Urech Bruno)
Date: Wed, 24 Jun 2009 07:30:43 +0200
Subject: CC + FreeRadius - splash page randomly appears
In-Reply-To: <56503.149.5.32.200.1245784338.squirrel@www.rivertowermail.com>
Message-ID: <81B2B4AE03A22D4490CD35A0F20F89E0056A33BF@thsvml00.togewa.com>

Hi all

I had the same issue sometimes too. It seemed to be related to the DHCP
lease policy. The device asks for a new IP, even if still an address is
assigned to it. Then you have to stop the reservation (chilli_query
logout) for the mentioned session/device and the whole DHCP procedure
worked again, after a browser refresh. This issue seems to be much
better since 1.0.12 and it occurred the most on 3G iPhones and Nokia
N95/N96s, but also sometimes on other devices.

Bruno

-----Original Message-----
From: Derek C [mailto:derekchilli at hssl.ie] 
Sent: Dienstag, 23. Juni 2009 21:12
To: chilli at coova.org
Subject: CC + FreeRadius - splash page randomly appears

Hi all,

I'm using Coova Chilli 1.0.13 with freeradius and mac authentication
(and the macauth and macreauth directives in chilli.conf).

What's always happening to me (prior to 1.0.13 and the macreauth
directive) is that sometimes (mid session) the splash page (uamserver?)
appears to the user even though their mac address is in the radcheck and
usergroup tables.

Generally this problem doesn't happen but it's easy enough to reproduce
by just keeping a computer associated to the Coovachilli hotspot
throughout the day and, every now and then, the splash page pops up.  A
refresh or browser address bar re-entry fixes the problem but its
annoying and I've had complaints from some users that the problem is
worse for them (maybe its not and they complain more...)

I'm pretty sure there isn't any timeout errors between coova chilli and
the freeradius server (nothing obvious with "logread" in openwrt) and
the bandwidth is good and always on.

Has anyone else seen things like this happening?

thanks

Derek


--
Derek C
In Ireland


From wlan at mac.com  Wed Jun 24 09:12:41 2009
From: wlan at mac.com (wlanmac)
Date: Wed, 24 Jun 2009 11:12:41 +0200
Subject: [PATCH] SNAT anyip connections
In-Reply-To: <4A40FEAB.5050903@endian.com>
References: <4A40FEAB.5050903@endian.com>
Message-ID: <1245834761.7665.24.camel@david-laptop>

Hi Peter,

Seems to work great. I'll keep testing a bit with it. I have it now in
my current development branch, which I will release in the next couple
weeks. It has major changes, including direct 802.1Q support so a single
chilli can control your entire VLAN trunk. The configuration system
changed drastically in that the cmdline.o (generated by gengetopt) will
only be linked into a new utility "chilli_opt". This new util is
responsible for parsing, resolving, and building the runnable
configuration. It's launched by chilli on startup, but can also be ran
offline to update the configuration of a running chilli. Since chilli
forks the utility, it'll never stop and wait for DNS resolution. The
"tap" interface have also been rewritten a bit such that a chilli tap
interface can be added to a bridge... to run chilli on a more pure
layer2 network. 

David

On Tue, 2009-06-23 at 18:11 +0200, Peter Warasin wrote:
> Hi List
> 
> Attached is a patch which adds the option --uamnatanyip.
> 
> If this option is enabled and anyip is also enabled, every anyip
> connection will be NATed to an ip address from the dynamic pool.
> For each new connection an ip address will be requested from the dynamic
> pool which then will be used to SNAT packets of that connection.
> This way host routes are not necessary anymore.
> 
> This is useful if you have coova-chilli on the same host with a proxy or
> a firewall. When you have anyip enabled, that firewall/proxy will see
> connections coming from some external ip addresses, which will bypass
> your firewall configuration or forces you to disable filters.
> 
> Enabling uamnatanyip NATs connections to your dynamic pool subnet, which
> allows you to work only with that subnet on the firewall/proxy.
> 
> This patch is tested for 1.0.12, where it works flawlessly. The attached
> patch is ported to current svn, where I have some problems (hisip is
> always 255.255.255.254), but I have the same problems without this
> patch, so i assume the patch should be ok.
> 
> If you like the 1.0.12 patch also, simply ask.
> 
> peter
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4



From BrunoRobert.Urech at comfone.com  Wed Jun 24 11:46:45 2009
From: BrunoRobert.Urech at comfone.com (Urech Bruno)
Date: Wed, 24 Jun 2009 13:46:45 +0200
Subject: Number of Allowed Addresses in Macallowed
In-Reply-To: <1245834761.7665.24.camel@david-laptop>
Message-ID: <81B2B4AE03A22D4490CD35A0F20F89E0056EAD07@thsvml00.togewa.com>

Hi all

After upgrading to Coova-Chilli 1.0.13 (from 1.0.12) following error
occurres after starting Chilli:

coova-chilli[7565]:options.c: 670: Too many addresses in macallowed

How many addresses are allowed per default and how + where can I
increase the number of allowed MAC addresses?

THX 

Bruni


Bruno Robert Urech
Operations Engineer
Comfone AG
Nussbaumstrasse 25
P.O. Box
3000 Bern 22
Switzerland 
Phone:	+41 31 341 13 38
Fax:	+41 31 341 11 01
Mobile:   	+41 79 642 94 45
Email:    	bruno.urech at comfone.com
Web:      	www.comfone.com

Skype:     	brunourech
MSN:               	ploppysator at msn.com
XMPP:             	brunourech at swissjabber.ch
Yahoo:	ploppysator
AIM:	ploppysator


From derekchilli at hssl.ie  Wed Jun 24 14:50:54 2009
From: derekchilli at hssl.ie (Derek C)
Date: Wed, 24 Jun 2009 15:50:54 +0100 (IST)
Subject: CC + FreeRadius - splash page randomly appears
In-Reply-To: <81B2B4AE03A22D4490CD35A0F20F89E0056A33BF@thsvml00.togewa.com>
References: <56503.149.5.32.200.1245784338.squirrel@www.rivertowermail.com>
    <81B2B4AE03A22D4490CD35A0F20F89E0056A33BF@thsvml00.togewa.com>
Message-ID: <37355.149.5.32.200.1245855054.squirrel@www.rivertowermail.com>


On Wed, June 24, 2009 6:30 am, Urech Bruno wrote:
> Hi all
>
>
> I had the same issue sometimes too. It seemed to be related to the DHCP
> lease policy. The device asks for a new IP, even if still an address is
> assigned to it. Then you have to stop the reservation (chilli_query
> logout) for the mentioned session/device and the whole DHCP procedure
> worked again, after a browser refresh. This issue seems to be much better
> since 1.0.12 and it occurred the most on 3G iPhones and Nokia N95/N96s,
> but also sometimes on other devices.

Hi Bruno,

I was hoping that the "macreauth" option in 1.0.13 would be the fix to
that but I'm still seeing the same problem.

I'm going to update my splash page to redirect back to the Coova Chilli
/login page again and also write a log entry into the database - this way
I'll know how often it is happening and, maybe?, the redirecting to the
/login page will make Coova Chilli try to re-authenticate again (I wonder
will it?)

thanks,

Derek

-- 
Derek C
In Ireland



From derekchilli at hssl.ie  Wed Jun 24 14:52:35 2009
From: derekchilli at hssl.ie (Derek C)
Date: Wed, 24 Jun 2009 15:52:35 +0100 (IST)
Subject: Number of Allowed Addresses in Macallowed
In-Reply-To: <81B2B4AE03A22D4490CD35A0F20F89E0056EAD07@thsvml00.togewa.com>
References: <1245834761.7665.24.camel@david-laptop>
    <81B2B4AE03A22D4490CD35A0F20F89E0056EAD07@thsvml00.togewa.com>
Message-ID: <37359.149.5.32.200.1245855155.squirrel@www.rivertowermail.com>

> How many addresses are allowed per default and how + where can I
> increase the number of allowed MAC addresses?

I'm trying to put all allowed MAC addresses into a freeradius database so
that I don't have to put them into a static configuration file - except
its not 100% working yet (the previous email) - a bit glitchy - but
almost....

Derek


-- 
Derek C
In Ireland



From peter at endian.com  Wed Jun 24 15:07:14 2009
From: peter at endian.com (Peter Warasin)
Date: Wed, 24 Jun 2009 17:07:14 +0200
Subject: [PATCH] SNAT anyip connections
In-Reply-To: <1245834761.7665.24.camel@david-laptop>
References: <4A40FEAB.5050903@endian.com> <1245834761.7665.24.camel@david-laptop>
Message-ID: <4A424122.2010605@endian.com>

Hi david

wlanmac wrote:
> Seems to work great. I'll keep testing a bit with it. I have it now in
> my current development branch, which I will release in the next couple

great, thank's!


> weeks. It has major changes, including direct 802.1Q support so a single
> chilli can control your entire VLAN trunk. The configuration system

hey, that sounds really great. So with that option and a vlan capable
switch clients would be completely separated, would they?


> changed drastically in that the cmdline.o (generated by gengetopt) will
> only be linked into a new utility "chilli_opt". This new util is
> responsible for parsing, resolving, and building the runnable
> configuration. It's launched by chilli on startup, but can also be ran
> offline to update the configuration of a running chilli. Since chilli

That's interesting. Could it be used to "pause" a running chilli?
I have chilli's running in HA environments (keepalived). The chillis on
slaves should not answer to requests, thus i filter on those systems
with ebtables for now. A possibility to externally set chilli on hold
would do the same job, but better so i think.


> forks the utility, it'll never stop and wait for DNS resolution. The
> "tap" interface have also been rewritten a bit such that a chilli tap
> interface can be added to a bridge... to run chilli on a more pure
> layer2 network. 

Very cool.

Can't wait for the release :)


Thank's

peter

-- 
:: e n d i a n
:: open source - open minds

:: peter warasin
:: http://www.endian.com   :: peter at endian.com


From liran.tal at gmail.com  Wed Jun 24 16:18:29 2009
From: liran.tal at gmail.com (Liran Tal)
Date: Wed, 24 Jun 2009 19:18:29 +0300
Subject: Number of Allowed Addresses in Macallowed
In-Reply-To: <37359.149.5.32.200.1245855155.squirrel@www.rivertowermail.com>
References: <1245834761.7665.24.camel@david-laptop> <81B2B4AE03A22D4490CD35A0F20F89E0056EAD07@thsvml00.togewa.com> 
	<37359.149.5.32.200.1245855155.squirrel@www.rivertowermail.com>
Message-ID: <81237f640906240918p49aba18dr29d0e4488cdde62d@mail.gmail.com>

Hey Derek,

Have you given daloRADIUS a try?
Many of my customers are happily using the mac-auth option with dalo without
any over-head
or headache of management.


Regards,
Liran.



On Wed, Jun 24, 2009 at 5:52 PM, Derek C <derekchilli at hssl.ie> wrote:

> > How many addresses are allowed per default and how + where can I
> > increase the number of allowed MAC addresses?
>
> I'm trying to put all allowed MAC addresses into a freeradius database so
> that I don't have to put them into a static configuration file - except
> its not 100% working yet (the previous email) - a bit glitchy - but
> almost....
>
> Derek
>
>
> --
> Derek C
> In Ireland
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>
>


-- 
-- 
Sincerely, Liran Tal

Founder and CTO
Linux and Open Source
Enginx - http://enginx.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090624/1dd47448/attachment.htm>

From bnoteris at odbee.com  Thu Jun 25 10:54:13 2009
From: bnoteris at odbee.com (Benoit noteris)
Date: Thu, 25 Jun 2009 12:54:13 +0200
Subject: [tap mode doesn't work]
Message-ID: <002801c9f583$47052450$d50f6cf0$@com>

Dear coova list,

 

 

I'm using coova on ubuntu 2.6.24.7 kernel and it's working well,

but it that I can't find anytings in the mac table address.

You will tell me yes it's normal you're using tun interface,

and it's ip layer 3 tunneling and so it's normal OK, I'know that.

And so I've try to use tap interface instead to get the layer 2 encapsulated
too,

I'm make my try with only one client and tcpdum and debug in chilli running.

 

Here are the detail of the log : 

 

Jun 25 12:48:24 portailtst coova-chilli[2499]: chilli.c: 3600: ChilliSpot
version 1.0.13 started.

Jun 25 12:48:24 portailtst coova-chilli[2499]: CoovaChilli(ChilliSpot)
1.0.13. Copyright 2002-2005 Mondru AB. Licensed under GPL. Copyright
2006-2008 David Bird <dbird at acm.org>. Licensed under GPL. See
http://coova.org/ for details.

Jun 25 12:48:24 portailtst coova-chilli[2499]: tun.c: 515: TX queue length
set to 100

Jun 25 12:48:24 portailtst coova-chilli[2499]: tun.c: 544: tap-mac: tap0
00-FF-76-B3-CF-DA

Jun 25 12:48:24 portailtst coova-chilli[2499]: ippool.c: 218: Hashlog 8 253
256

Jun 25 12:48:24 portailtst coova-chilli[2499]: chilli.c: 3754: Waiting for
client request...

Jun 25 12:48:35 portailtst kernel: tap0: no IPv6 routers present

Jun 25 12:48:52 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806

Jun 25 12:48:52 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
unknown IP 172.1.2.2

Jun 25 12:48:53 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806

Jun 25 12:48:53 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
unknown IP 172.1.2.2

Jun 25 12:48:54 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806

Jun 25 12:48:54 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
unknown IP 172.1.2.2

Jun 25 12:48:55 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806

Jun 25 12:48:55 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
unknown IP 172.1.2.2

Jun 25 12:48:56 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806

Jun 25 12:48:56 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
unknown IP 172.1.2.2

Jun 25 12:48:57 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806

Jun 25 12:48:57 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
unknown IP 172.1.2.2

Jun 25 12:49:28 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
unknown IP 172.1.2.2

Jun 25 12:49:52 portailtst coova-chilli[2499]: dhcp.c: 2034: Address not
found (172.1.2.2)

Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2822: New DHCP
request from MAC=00-40-63-D8-42-70

Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2825: New DHCP
connection established

Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2700: DHCP request
for IP address

Jun 25 12:49:52 portailtst coova-chilli[2499]: ippool.c: 324: Requesting new
static ip: 172.1.2.2

Jun 25 12:49:52 portailtst coova-chilli[2499]: ippool.c: 344: Static IP
address not allowed

Jun 25 12:49:52 portailtst coova-chilli[2499]: ippool.c: 324: Requesting new
dynamic ip: 172.1.2.2

Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2789: Client
MAC=00-40-63-D8-42-70 assigned IP 172.1.2.2

Jun 25 12:49:52 portailtst coova-chilli[2499]: tun.c: 765: writing to
tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01

Jun 25 12:49:52 portailtst coova-chilli[2499]: dhcp.c: 2520: arp_decaps:
dst=ff:ff:ff:ff:ff:ff src=00:40:63:d8:42:70 prot=0806

Jun 25 12:49:54 portailtst coova-chilli[2499]: tun.c: 765: writing to
tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01

Jun 25 12:49:59 portailtst coova-chilli[2499]: tun.c: 765: writing to
tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01

Jun 25 12:50:01 portailtst /USR/SBIN/CRON[2520]: (root) CMD
(/etc/init.d/chilli checkrunning)

Jun 25 12:50:01 portailtst /USR/SBIN/CRON[2524]: (root) CMD
(/etc/rc2.d/S20chilli checkrunning)

Jun 25 12:50:07 portailtst coova-chilli[2499]: tun.c: 765: writing to
tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01

 

In the tcpdump I can see dns request and web request but nothing appear to
working at all 

Client just get 404 error and no url redirection on the UAM server.

 

Did anybody has an idea on what's not working ? 

 

Chears

 

Benoit noteris

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090625/4cc1f4e2/attachment.htm>

From derekchilli at hssl.ie  Thu Jun 25 11:40:41 2009
From: derekchilli at hssl.ie (Derek C)
Date: Thu, 25 Jun 2009 12:40:41 +0100 (IST)
Subject: Number of Allowed Addresses in Macallowed
In-Reply-To: <81237f640906240918p49aba18dr29d0e4488cdde62d@mail.gmail.com>
References: <1245834761.7665.24.camel@david-laptop>
    <81B2B4AE03A22D4490CD35A0F20F89E0056EAD07@thsvml00.togewa.com> 
    <37359.149.5.32.200.1245855155.squirrel@www.rivertowermail.com>
    <81237f640906240918p49aba18dr29d0e4488cdde62d@mail.gmail.com>
Message-ID: <51080.149.5.32.200.1245930041.squirrel@www.rivertowermail.com>

> Have you given daloRADIUS a try?

Hi Liran,

daloRADIUS looks very fancy (nice UI).

I've only ever used freeRadius and I must say it seems to be rock solid in
terms of staying up and doing its job.

I do have some mac authentication issues but I think its to do with Coova
Chilli.

What I've realised is that, if mac authentication with Coova Chilli works
pefectly, it should be possible to put a "transparent" Coova Chilli
gateway bettween users and the internet.  If free radius (or any radius
server I guess) were setup to automatically add the user's MAC into a DB
table on demand then user's would never see a splash page but Coova Chilli
would still write accounting data to the DB - this, to me, would be very
useful and it's where I'm trying to get too (a bit painfully but I'm
getting there :) )

Derek
-- 
Derek C
In Ireland



From derekchilli at hssl.ie  Fri Jun 26 09:19:03 2009
From: derekchilli at hssl.ie (Derek C)
Date: Fri, 26 Jun 2009 10:19:03 +0100 (IST)
Subject: Any way to see DHCP lease info?
Message-ID: <42667.149.5.32.200.1246007943.squirrel@www.rivertowermail.com>

Hi guys,

Is there any way to view the Coova Chilli DHCP lease info?

I'd really love to be able to find out the DHCP client's hostname (the
user's computer's name).  I know this information is normally available if
you can view the DHCP lease info.

thanks

Derek


-- 
Derek C
In Ireland



From liran.tal at gmail.com  Fri Jun 26 09:38:51 2009
From: liran.tal at gmail.com (Liran Tal)
Date: Fri, 26 Jun 2009 12:38:51 +0300
Subject: Any way to see DHCP lease info?
In-Reply-To: <42667.149.5.32.200.1246007943.squirrel@www.rivertowermail.com>
References: <42667.149.5.32.200.1246007943.squirrel@www.rivertowermail.com>
Message-ID: <81237f640906260238r265141q88eff8724fd12c99@mail.gmail.com>

Recently there was some socket based interface added to CoovaChilli, you can
review that
I think it provides what you need.


Regards,
Liran.


On Fri, Jun 26, 2009 at 12:19 PM, Derek C <derekchilli at hssl.ie> wrote:

> Hi guys,
>
> Is there any way to view the Coova Chilli DHCP lease info?
>
> I'd really love to be able to find out the DHCP client's hostname (the
> user's computer's name).  I know this information is normally available if
> you can view the DHCP lease info.
>
> thanks
>
> Derek
>
>
> --
> Derek C
> In Ireland
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>
>


-- 
-- 
Sincerely, Liran Tal

Founder and CTO
Linux and Open Source
Enginx - http://enginx.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090626/18a42a1a/attachment.htm>

From BrunoRobert.Urech at comfone.com  Fri Jun 26 10:15:20 2009
From: BrunoRobert.Urech at comfone.com (Urech Bruno)
Date: Fri, 26 Jun 2009 12:15:20 +0200
Subject: Number of Allowed Addresses in Macallowed
Message-ID: <81B2B4AE03A22D4490CD35A0F20F89E0056EB5AC@thsvml00.togewa.com>

Hi all

Now I got rid of the statis HS_Macallowed entry and I added the allowed
MAC addresses in the Radius. But now, this happens many times:

I take any mobile device, connect to the hotspot, open a browser, do
something, everything is ok.

chilli_query list shows (as long as there is no problem):

00-21-09-##-##-## 10.1.0.101 pass 4a449ac1####### 1
00-21-09-##-##-##@myrealm.com 6/43200 0/300 128001/0 10796/0 0 0 0/0 0/0

I do some browsing etc. and put the device beside and wait certain
minutes. Then I do a refresh on the mobile device's browser and the
chilli_query list shows:

00-21-09-##-##-## 10.1.0.101 pass 4a449ac1####### 1
00-21-09-##-##-##@myrealm.com 0/0 0/0 0/0 0/0 0 0 0/0 0/0

The device says, it is still connected to the access point/hotspot, but
it seems, that there is a problem withing the address lease, isn't it?
After this, the device's browser gets redirected to the login portal,
instead of continuing with the persistent address lease.

I can bypass the problem with

chilli_query logout 00-21-09-##-##-## 

then open another URL on the devices browser and it continues with the 

00-21-09-##-##-## 10.1.0.101 pass 4a449ac1####### 1
00-21-09-##-##-##@myrealm.com 6/43200 0/300 128001/0 10796/0 0 0 0/0 0/0

on chilly_query list and browsing.

Does anybody have a solution?

Entering "lease ###" anywhere doesn't have any impact on the problem ;-)

Thank you and regards

Bruno



-----Original Message-----
From: Urech Bruno 
Sent: Mittwoch, 24. Juni 2009 13:47
To: 'chilli at coova.org'
Subject: Number of Allowed Addresses in Macallowed

Hi all

After upgrading to Coova-Chilli 1.0.13 (from 1.0.12) following error
occurres after starting Chilli:

coova-chilli[7565]:options.c: 670: Too many addresses in macallowed

How many addresses are allowed per default and how + where can I
increase the number of allowed MAC addresses?

THX 

Bruni


Bruno Robert Urech
Operations Engineer
Comfone AG
Nussbaumstrasse 25
P.O. Box
3000 Bern 22
Switzerland 
Phone:	+41 31 341 13 38
Fax:	+41 31 341 11 01
Mobile:   	+41 79 642 94 45
Email:    	bruno.urech at comfone.com
Web:      	www.comfone.com

Skype:     	brunourech
MSN:               	ploppysator at msn.com
XMPP:             	brunourech at swissjabber.ch
Yahoo:	ploppysator
AIM:	ploppysator


From info at easyhorpak.com  Fri Jun 26 11:07:46 2009
From: info at easyhorpak.com (EasyHorpak.com)
Date: Fri, 26 Jun 2009 18:07:46 +0700
Subject: Any way to see DHCP lease info?
References: <42667.149.5.32.200.1246007943.squirrel@www.rivertowermail.com>
Message-ID: <002501c9f64e$55f1c600$13b6a8c0@nzn367486420be>

you  can connect to coova-chilli.
got ip and check your lease time on client details.


??? ????????
Chuan Chudabut
66-081-7499093, 66-02-691-6382
============================================================================================================
http://www.EasyZoneCorp.net - EasyZone Radius Billing 5.0, EasyZone PPPoE
Billing 2.5, EasyZone Hotspot Billing 2.7, EasyZone VPN Billing 1.0,
EasyZone File Server

----- Original Message ----- 
From: "Derek C" <derekchilli at hssl.ie>
To: <chilli at coova.org>
Sent: Friday, June 26, 2009 4:19 PM
Subject: Any way to see DHCP lease info?


> Hi guys,
>
> Is there any way to view the Coova Chilli DHCP lease info?
>
> I'd really love to be able to find out the DHCP client's hostname (the
> user's computer's name).  I know this information is normally available if
> you can view the DHCP lease info.
>
> thanks
>
> Derek
>
>
> -- 
> Derek C
> In Ireland
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>
> 



From BrunoRobert.Urech at comfone.com  Fri Jun 26 11:36:13 2009
From: BrunoRobert.Urech at comfone.com (Urech Bruno)
Date: Fri, 26 Jun 2009 13:36:13 +0200
Subject: Number of Allowed Addresses in Macallowed
In-Reply-To: <81B2B4AE03A22D4490CD35A0F20F89E0056EB5AC@thsvml00.togewa.com>
Message-ID: <81B2B4AE03A22D4490CD35A0F20F89E0056EB619@thsvml00.togewa.com>

Hi all

 

I wrote a mistake in the last message:

The chilli_query list response after awaiting some minutes is

NOT:
00-21-09-##-##-## 10.1.0.101 pass 4a449ac1####### 1
00-21-09-##-##-##@myrealm.com 0/0 0/0 0/0 0/0 0 0 0/0 0/0

IT IS:
00-21-09-##-##-## 10.1.0.101 dnat 4a449ac1####### 1
00-21-09-##-##-##@myrealm.com 0/0 0/0 728033/0 128840/0 0 0 0/0 0/0
http://tha.url.i.choosed.initially <http://tha.url.i.choosed.initially> 


thx for any assistance

 
cheers 
 
Bruni





-----Original Message-----
From: Urech Bruno
Sent: Freitag, 26. Juni 2009 12:15
To: chilli at coova.org
Subject: RE: Number of Allowed Addresses in Macallowed

Hi all

Now I got rid of the statis HS_Macallowed entry and I added the allowed
MAC addresses in the Radius. But now, this happens many times:

I take any mobile device, connect to the hotspot, open a browser, do
something, everything is ok.

chilli_query list shows (as long as there is no problem):

00-21-09-##-##-## 10.1.0.101 pass 4a449ac1####### 1
00-21-09-##-##-##@myrealm.com 6/43200 0/300 128001/0 10796/0 0 0 0/0 0/0

I do some browsing etc. and put the device beside and wait certain
minutes. Then I do a refresh on the mobile device's browser and the
chilli_query list shows:

00-21-09-##-##-## 10.1.0.101 pass 4a449ac1####### 1
00-21-09-##-##-##@myrealm.com 0/0 0/0 0/0 0/0 0 0 0/0 0/0

The device says, it is still connected to the access point/hotspot, but
it seems, that there is a problem withing the address lease, isn't it?
After this, the device's browser gets redirected to the login portal,
instead of continuing with the persistent address lease.

I can bypass the problem with

chilli_query logout 00-21-09-##-##-##

then open another URL on the devices browser and it continues with the

00-21-09-##-##-## 10.1.0.101 pass 4a449ac1####### 1
00-21-09-##-##-##@myrealm.com 6/43200 0/300 128001/0 10796/0 0 0 0/0 0/0

on chilly_query list and browsing.

Does anybody have a solution?

Entering "lease ###" anywhere doesn't have any impact on the problem ;-)

Thank you and regards

Bruno



-----Original Message-----
From: Urech Bruno
Sent: Mittwoch, 24. Juni 2009 13:47
To: 'chilli at coova.org'
Subject: Number of Allowed Addresses in Macallowed

Hi all

After upgrading to Coova-Chilli 1.0.13 (from 1.0.12) following error
occurres after starting Chilli:

coova-chilli[7565]:options.c: 670: Too many addresses in macallowed

How many addresses are allowed per default and how + where can I
increase the number of allowed MAC addresses?

THX

Bruni


Bruno Robert Urech
Operations Engineer
Comfone AG
Nussbaumstrasse 25
P.O. Box
3000 Bern 22
Switzerland
Phone:  +41 31 341 13 38
Fax:    +41 31 341 11 01
Mobile:         +41 79 642 94 45
Email:          bruno.urech at comfone.com
Web:            www.comfone.com

Skype:          brunourech
MSN:                    ploppysator at msn.com
XMPP:                   brunourech at swissjabber.ch
Yahoo:  ploppysator
AIM:    ploppysator


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090626/83f821e0/attachment.htm>

From outbackdingo at gmail.com  Fri Jun 26 13:23:43 2009
From: outbackdingo at gmail.com (Outback Dingo)
Date: Fri, 26 Jun 2009 09:23:43 -0400
Subject: Any way to see DHCP lease info?
In-Reply-To: <002501c9f64e$55f1c600$13b6a8c0@nzn367486420be>
References: <42667.149.5.32.200.1246007943.squirrel@www.rivertowermail.com>
	 <002501c9f64e$55f1c600$13b6a8c0@nzn367486420be>
Message-ID: <5635aa0d0906260623j375c29f8q6df96180d1b501d6@mail.gmail.com>

man chilli-query

On 6/26/09, EasyHorpak.com <info at easyhorpak.com> wrote:
>
> you  can connect to coova-chilli.
> got ip and check your lease time on client details.
>
>
> ??? ????????
> Chuan Chudabut
> 66-081-7499093, 66-02-691-6382
>
> ============================================================================================================
> http://www.EasyZoneCorp.net - EasyZone Radius Billing 5.0, EasyZone PPPoE
> Billing 2.5, EasyZone Hotspot Billing 2.7, EasyZone VPN Billing 1.0,
> EasyZone File Server
>
> ----- Original Message ----- From: "Derek C" <derekchilli at hssl.ie>
> To: <chilli at coova.org>
> Sent: Friday, June 26, 2009 4:19 PM
> Subject: Any way to see DHCP lease info?
>
>
>  Hi guys,
>>
>> Is there any way to view the Coova Chilli DHCP lease info?
>>
>> I'd really love to be able to find out the DHCP client's hostname (the
>> user's computer's name).  I know this information is normally available if
>> you can view the DHCP lease info.
>>
>> thanks
>>
>> Derek
>>
>>
>> --
>> Derek C
>> In Ireland
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
>> For additional commands, e-mail: chilli-help at coova.org
>> Wiki: http://coova.org/wiki/index.php/CoovaChilli
>> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090626/6ad49c67/attachment.htm>

From bnoteris at odbee.com  Fri Jun 26 14:16:38 2009
From: bnoteris at odbee.com (Benoit noteris)
Date: Fri, 26 Jun 2009 16:16:38 +0200
Subject: Number of Allowed Addresses in Macallowed
In-Reply-To: <81B2B4AE03A22D4490CD35A0F20F89E0056EB619@thsvml00.togewa.com>
References: <81B2B4AE03A22D4490CD35A0F20F89E0056EB5AC@thsvml00.togewa.com> <81B2B4AE03A22D4490CD35A0F20F89E0056EB619@thsvml00.togewa.com>
Message-ID: <002401c9f668$b863a6e0$292af4a0$@com>

Dear Bruno,

 

You should give a try to this URL for disconnect : 

 

http://$UAM_IP:3990/logoff

 

cheers

 

De : Urech Bruno [mailto:BrunoRobert.Urech at comfone.com] 
Envoy? : vendredi 26 juin 2009 13:36
? : chilli at coova.org
Objet : RE: Number of Allowed Addresses in Macallowed

 

Hi all

 

I wrote a mistake in the last message:

The chilli_query list response after awaiting some minutes is

NOT:
00-21-09-##-##-## 10.1.0.101 pass 4a449ac1####### 1
00-21-09-##-##-##@myrealm.com 0/0 0/0 0/0 0/0 0 0 0/0 0/0

IT IS:
00-21-09-##-##-## 10.1.0.101 dnat 4a449ac1####### 1
00-21-09-##-##-##@myrealm.com 0/0 0/0 728033/0 128840/0 0 0 0/0 0/0
<http://tha.url.i.choosed.initially> http://tha.url.i.choosed.initially


thx for any assistance

 

cheers 

 

Bruni





-----Original Message-----
From: Urech Bruno
Sent: Freitag, 26. Juni 2009 12:15
To: chilli at coova.org
Subject: RE: Number of Allowed Addresses in Macallowed

Hi all

Now I got rid of the statis HS_Macallowed entry and I added the allowed MAC
addresses in the Radius. But now, this happens many times:

I take any mobile device, connect to the hotspot, open a browser, do
something, everything is ok.

chilli_query list shows (as long as there is no problem):

00-21-09-##-##-## 10.1.0.101 pass 4a449ac1####### 1
00-21-09-##-##-##@myrealm.com 6/43200 0/300 128001/0 10796/0 0 0 0/0 0/0

I do some browsing etc. and put the device beside and wait certain minutes.
Then I do a refresh on the mobile device's browser and the chilli_query list
shows:

00-21-09-##-##-## 10.1.0.101 pass 4a449ac1####### 1
00-21-09-##-##-##@myrealm.com 0/0 0/0 0/0 0/0 0 0 0/0 0/0

The device says, it is still connected to the access point/hotspot, but it
seems, that there is a problem withing the address lease, isn't it? After
this, the device's browser gets redirected to the login portal, instead of
continuing with the persistent address lease.

I can bypass the problem with

chilli_query logout 00-21-09-##-##-##

then open another URL on the devices browser and it continues with the

00-21-09-##-##-## 10.1.0.101 pass 4a449ac1####### 1
00-21-09-##-##-##@myrealm.com 6/43200 0/300 128001/0 10796/0 0 0 0/0 0/0

on chilly_query list and browsing.

Does anybody have a solution?

Entering "lease ###" anywhere doesn't have any impact on the problem ;-)

Thank you and regards

Bruno



-----Original Message-----
From: Urech Bruno
Sent: Mittwoch, 24. Juni 2009 13:47
To: 'chilli at coova.org'
Subject: Number of Allowed Addresses in Macallowed

Hi all

After upgrading to Coova-Chilli 1.0.13 (from 1.0.12) following error
occurres after starting Chilli:

coova-chilli[7565]:options.c: 670: Too many addresses in macallowed

How many addresses are allowed per default and how + where can I increase
the number of allowed MAC addresses?

THX

Bruni


Bruno Robert Urech
Operations Engineer
Comfone AG
Nussbaumstrasse 25
P.O. Box
3000 Bern 22
Switzerland
Phone:  +41 31 341 13 38
Fax:    +41 31 341 11 01
Mobile:         +41 79 642 94 45
Email:          bruno.urech at comfone.com
Web:            www.comfone.com

Skype:          brunourech
MSN:                    ploppysator at msn.com
XMPP:                   brunourech at swissjabber.ch
Yahoo:  ploppysator
AIM:    ploppysator

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090626/5bffa268/attachment.htm>

From wlan at mac.com  Sat Jun 27 04:57:51 2009
From: wlan at mac.com (wlanmac)
Date: Sat, 27 Jun 2009 06:57:51 +0200
Subject: Number of Allowed Addresses in Macallowed
In-Reply-To: <81B2B4AE03A22D4490CD35A0F20F89E0056EB619@thsvml00.togewa.com>
References: <81B2B4AE03A22D4490CD35A0F20F89E0056EB619@thsvml00.togewa.com>
Message-ID: <1246078671.7703.3.camel@david-laptop>

Hi Bruno,

You are probably running into the "idle timeout" perhaps. I will check
to ensure that it is doing a new MAC-auth after session expiration. 

David



On Fri, 2009-06-26 at 13:36 +0200, Urech Bruno wrote:
> Hi all
> 
>  
> 
> I wrote a mistake in the last message:
> 
> The chilli_query list response after awaiting some minutes is
> 
> NOT:
> 00-21-09-##-##-## 10.1.0.101 pass 4a449ac1####### 1
> 00-21-09-##-##-##@myrealm.com 0/0 0/0 0/0 0/0 0 0 0/0 0/0
> 
> IT IS:
> 00-21-09-##-##-## 10.1.0.101 dnat 4a449ac1####### 1
> 00-21-09-##-##-##@myrealm.com 0/0 0/0 728033/0 128840/0 0 0 0/0 0/0
> http://tha.url.i.choosed.initially
> 
> 
> thx for any assistance
> 
>  
> cheers 
>  
> Bruni
> 
> 
> 
> 
> -----Original Message-----
> From: Urech Bruno
> Sent: Freitag, 26. Juni 2009 12:15
> To: chilli at coova.org
> Subject: RE: Number of Allowed Addresses in Macallowed
> 
> Hi all
> 
> Now I got rid of the statis HS_Macallowed entry and I added the
> allowed MAC addresses in the Radius. But now, this happens many times:
> 
> I take any mobile device, connect to the hotspot, open a browser, do
> something, everything is ok.
> 
> chilli_query list shows (as long as there is no problem):
> 
> 00-21-09-##-##-## 10.1.0.101 pass 4a449ac1####### 1
> 00-21-09-##-##-##@myrealm.com 6/43200 0/300 128001/0 10796/0 0 0 0/0
> 0/0
> 
> I do some browsing etc. and put the device beside and wait certain
> minutes. Then I do a refresh on the mobile device's browser and the
> chilli_query list shows:
> 
> 00-21-09-##-##-## 10.1.0.101 pass 4a449ac1####### 1
> 00-21-09-##-##-##@myrealm.com 0/0 0/0 0/0 0/0 0 0 0/0 0/0
> 
> The device says, it is still connected to the access point/hotspot,
> but it seems, that there is a problem withing the address lease, isn't
> it? After this, the device's browser gets redirected to the login
> portal, instead of continuing with the persistent address lease.
> 
> I can bypass the problem with
> 
> chilli_query logout 00-21-09-##-##-##
> 
> then open another URL on the devices browser and it continues with the
> 
> 00-21-09-##-##-## 10.1.0.101 pass 4a449ac1####### 1
> 00-21-09-##-##-##@myrealm.com 6/43200 0/300 128001/0 10796/0 0 0 0/0
> 0/0
> 
> on chilly_query list and browsing.
> 
> Does anybody have a solution?
> 
> Entering "lease ###" anywhere doesn't have any impact on the
> problem ;-)
> 
> Thank you and regards
> 
> Bruno
> 
> 
> 
> -----Original Message-----
> From: Urech Bruno
> Sent: Mittwoch, 24. Juni 2009 13:47
> To: 'chilli at coova.org'
> Subject: Number of Allowed Addresses in Macallowed
> 
> Hi all
> 
> After upgrading to Coova-Chilli 1.0.13 (from 1.0.12) following error
> occurres after starting Chilli:
> 
> coova-chilli[7565]:options.c: 670: Too many addresses in macallowed
> 
> How many addresses are allowed per default and how + where can I
> increase the number of allowed MAC addresses?
> 
> THX
> 
> Bruni
> 
> 
> Bruno Robert Urech
> Operations Engineer
> Comfone AG
> Nussbaumstrasse 25
> P.O. Box
> 3000 Bern 22
> Switzerland
> Phone:  +41 31 341 13 38
> Fax:    +41 31 341 11 01
> Mobile:         +41 79 642 94 45
> Email:          bruno.urech at comfone.com
> Web:            www.comfone.com
> 
> Skype:          brunourech
> MSN:                    ploppysator at msn.com
> XMPP:                   brunourech at swissjabber.ch
> Yahoo:  ploppysator
> AIM:    ploppysator
> 
> 



From wlan at mac.com  Sat Jun 27 04:58:56 2009
From: wlan at mac.com (wlanmac)
Date: Sat, 27 Jun 2009 06:58:56 +0200
Subject: Any way to see DHCP lease info?
In-Reply-To: <42667.149.5.32.200.1246007943.squirrel@www.rivertowermail.com>
References: <42667.149.5.32.200.1246007943.squirrel@www.rivertowermail.com>
Message-ID: <1246078736.7703.5.camel@david-laptop>

even better...

Use the "dhcpradius" option and the DHCP hostname will be sent to you in
RADIUS. 

Cheers,
David


On Fri, 2009-06-26 at 10:19 +0100, Derek C wrote:
> Hi guys,
> 
> Is there any way to view the Coova Chilli DHCP lease info?
> 
> I'd really love to be able to find out the DHCP client's hostname (the
> user's computer's name).  I know this information is normally available if
> you can view the DHCP lease info.
> 
> thanks
> 
> Derek
> 
> 



From wlan at mac.com  Sat Jun 27 05:05:11 2009
From: wlan at mac.com (wlanmac)
Date: Sat, 27 Jun 2009 07:05:11 +0200
Subject: [tap mode doesn't work]
In-Reply-To: <002801c9f583$47052450$d50f6cf0$@com>
References: <002801c9f583$47052450$d50f6cf0$@com>
Message-ID: <1246079112.7703.10.camel@david-laptop>

To be honest, the tap interface feature hasn't had any real purpose
(this will change in the next release). Why do you need to use a tap
instead of a tun? 




On Thu, 2009-06-25 at 12:54 +0200, Benoit noteris wrote:
> Dear coova list,
> 
>  
> 
>  
> 
> I?m using coova on ubuntu 2.6.24.7 kernel and it?s working well,
> 
> but it that I can?t find anytings in the mac table address.
> 
> You will tell me yes it?s normal you?re using tun interface,
> 
> and it?s ip layer 3 tunneling and so it?s normal OK, I?know that.
> 
> And so I?ve try to use tap interface instead to get the layer 2
> encapsulated too,
> 
> I?m make my try with only one client and tcpdum and debug in chilli
> running.
> 
>  
> 
> Here are the detail of the log : 
> 
>  
> 
> Jun 25 12:48:24 portailtst coova-chilli[2499]: chilli.c: 3600:
> ChilliSpot version 1.0.13 started.
> 
> Jun 25 12:48:24 portailtst coova-chilli[2499]: CoovaChilli(ChilliSpot)
> 1.0.13. Copyright 2002-2005 Mondru AB. Licensed under GPL. Copyright
> 2006-2008 David Bird <dbird at acm.org>. Licensed under GPL. See
> http://coova.org/ for details.
> 
> Jun 25 12:48:24 portailtst coova-chilli[2499]: tun.c: 515: TX queue
> length set to 100
> 
> Jun 25 12:48:24 portailtst coova-chilli[2499]: tun.c: 544: tap-mac:
> tap0 00-FF-76-B3-CF-DA
> 
> Jun 25 12:48:24 portailtst coova-chilli[2499]: ippool.c: 218: Hashlog
> 8 253 256
> 
> Jun 25 12:48:24 portailtst coova-chilli[2499]: chilli.c: 3754: Waiting
> for client request...
> 
> Jun 25 12:48:35 portailtst kernel: tap0: no IPv6 routers present
> 
> Jun 25 12:48:52 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
> 
> Jun 25 12:48:52 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
> unknown IP 172.1.2.2
> 
> Jun 25 12:48:53 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
> 
> Jun 25 12:48:53 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
> unknown IP 172.1.2.2
> 
> Jun 25 12:48:54 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
> 
> Jun 25 12:48:54 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
> unknown IP 172.1.2.2
> 
> Jun 25 12:48:55 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
> 
> Jun 25 12:48:55 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
> unknown IP 172.1.2.2
> 
> Jun 25 12:48:56 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
> 
> Jun 25 12:48:56 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
> unknown IP 172.1.2.2
> 
> Jun 25 12:48:57 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
> 
> Jun 25 12:48:57 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
> unknown IP 172.1.2.2
> 
> Jun 25 12:49:28 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
> unknown IP 172.1.2.2
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: dhcp.c: 2034: Address
> not found (172.1.2.2)
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2822: New
> DHCP request from MAC=00-40-63-D8-42-70
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2825: New
> DHCP connection established
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2700: DHCP
> request for IP address
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: ippool.c: 324:
> Requesting new static ip: 172.1.2.2
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: ippool.c: 344: Static
> IP address not allowed
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: ippool.c: 324:
> Requesting new dynamic ip: 172.1.2.2
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2789: Client
> MAC=00-40-63-D8-42-70 assigned IP 172.1.2.2
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: tun.c: 765: writing to
> tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: dhcp.c: 2520:
> arp_decaps: dst=ff:ff:ff:ff:ff:ff src=00:40:63:d8:42:70 prot=0806
> 
> Jun 25 12:49:54 portailtst coova-chilli[2499]: tun.c: 765: writing to
> tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01
> 
> Jun 25 12:49:59 portailtst coova-chilli[2499]: tun.c: 765: writing to
> tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01
> 
> Jun 25 12:50:01 portailtst /USR/SBIN/CRON[2520]: (root) CMD
> (/etc/init.d/chilli checkrunning)
> 
> Jun 25 12:50:01 portailtst /USR/SBIN/CRON[2524]: (root) CMD
> (/etc/rc2.d/S20chilli checkrunning)
> 
> Jun 25 12:50:07 portailtst coova-chilli[2499]: tun.c: 765: writing to
> tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01
> 
>  
> 
> In the tcpdump I can see dns request and web request but nothing
> appear to working at all 
> 
> Client just get 404 error and no url redirection on the UAM server.
> 
>  
> 
> Did anybody has an idea on what?s not working ? 
> 
>  
> 
> Chears
> 
>  
> 
> Benoit noteris
> 
>  
> 
> 



From wlan at mac.com  Sat Jun 27 06:13:43 2009
From: wlan at mac.com (wlanmac)
Date: Sat, 27 Jun 2009 08:13:43 +0200
Subject: [PATCH] SNAT anyip connections
In-Reply-To: <4A424122.2010605@endian.com>
References: <4A40FEAB.5050903@endian.com>
 <1245834761.7665.24.camel@david-laptop> <4A424122.2010605@endian.com>
Message-ID: <1246083223.7703.42.camel@david-laptop>


> > weeks. It has major changes, including direct 802.1Q support so a single
> > chilli can control your entire VLAN trunk. The configuration system
> 
> hey, that sounds really great. So with that option and a vlan capable
> switch clients would be completely separated, would they?
> 

Yeah.. though, the typical use will likely be that APs are VLAN'ed and
bridged into a trunked network. You can then have a single chilli
instance running and servicing all these APs. The VLAN id will be sent
to the captive portal and to the RADIUS server. 

> 
> > changed drastically in that the cmdline.o (generated by gengetopt) will
> > only be linked into a new utility "chilli_opt". This new util is
> > responsible for parsing, resolving, and building the runnable
> > configuration. It's launched by chilli on startup, but can also be ran
> > offline to update the configuration of a running chilli. Since chilli
> 
> That's interesting. Could it be used to "pause" a running chilli?
> I have chilli's running in HA environments (keepalived). The chillis on
> slaves should not answer to requests, thus i filter on those systems
> with ebtables for now. A possibility to externally set chilli on hold
> would do the same job, but better so i think.
> 

Interesting... I'd do the 'pause' differently, I think. You'd probably
want to use the chilli_query and an option to stop (stop processing all
sockets in the main chilli loop _except_ processing the cmdsock
socket). 

> 
> > forks the utility, it'll never stop and wait for DNS resolution. The
> > "tap" interface have also been rewritten a bit such that a chilli tap
> > interface can be added to a bridge... to run chilli on a more pure
> > layer2 network. 
> 
> Very cool.
> 




From derekchilli at hssl.ie  Sun Jun 28 11:30:31 2009
From: derekchilli at hssl.ie (Derek C)
Date: Sun, 28 Jun 2009 12:30:31 +0100 (IST)
Subject: Any way to see DHCP lease info?
In-Reply-To: <1246078736.7703.5.camel@david-laptop>
References: <42667.149.5.32.200.1246007943.squirrel@www.rivertowermail.com>
    <1246078736.7703.5.camel@david-laptop>
Message-ID: <60232.194.125.91.89.1246188631.squirrel@www.rivertowermail.com>


On Sat, June 27, 2009 5:58 am, wlanmac wrote:
> even better...
>
> Use the "dhcpradius" option and the DHCP hostname will be sent to you in
> RADIUS.

Hi David,

This sounds absolutely perfect for me - I'll give this a try!

thanks,

Derek
-- 
Derek C
In Ireland



From derekchilli at hssl.ie  Sun Jun 28 11:47:45 2009
From: derekchilli at hssl.ie (Derek C)
Date: Sun, 28 Jun 2009 12:47:45 +0100 (IST)
Subject: CC + FreeRadius - splash page randomly appears
In-Reply-To: <37355.149.5.32.200.1245855054.squirrel@www.rivertowermail.com>
References: <56503.149.5.32.200.1245784338.squirrel@www.rivertowermail.com>  
     <81B2B4AE03A22D4490CD35A0F20F89E0056A33BF@thsvml00.togewa.com>
    <37355.149.5.32.200.1245855054.squirrel@www.rivertowermail.com>
Message-ID: <58389.194.125.91.89.1246189665.squirrel@www.rivertowermail.com>

Hi guys - an update on this...

I've been logging whats happening users hit my splash page and I've been
working on a work-around so that users don't see what's happening even if
there is a glitch.

I'm running Coova Chillia 1.0.13 on OpenWRT and I'm using MAC
authentication with a freeradius server.

This is whats happening now: -

1. A user has access to the Internet because their MAC is in the
freeradius DB (radcheck and usergroup) - all working perfectly

2. Then, for whatever reason the Coova Chilli decides to redirect the user
to my splash page instead of the page they requested

3. On the splash page I first check if the user is in the radcheck table -
they are!  So I redirect them to CC /login page

4. Now instantly Coova Chilli redirects back to the splash page again but
this time I see that the "res" CGI parameter is now set to "already" so
now I redirect the user to the page they really wanted

5. Its works - the users sees their requested page and they are none the
wiser to all this...

I suppose this is not good for users wanting to do stuff that isn't web
related (email, etc) because its the web page access (with my redirects)
that gets them access again..

Also (in point 3 above) I might get away with just be redirecting the user
to the page they want rather than the Coova Chilli /login page - My
reasoning for the /login page is that if they aren't logged in and seeing
the splash page then I should try to force CC to try the login again?

Its funny though isn't it?  Maybe its some kind of time-out with on
macauth happening just after the timeout?

Derek



On Wed, June 24, 2009 3:50 pm, Derek C wrote:
>

> On Wed, June 24, 2009 6:30 am, Urech Bruno wrote:
>
>> Hi all
>>
>>
>>
>> I had the same issue sometimes too. It seemed to be related to the DHCP
>>  lease policy. The device asks for a new IP, even if still an address
>> is assigned to it. Then you have to stop the reservation (chilli_query
>> logout) for the mentioned session/device and the whole DHCP procedure
>> worked again, after a browser refresh. This issue seems to be much
>> better since 1.0.12 and it occurred the most on 3G iPhones and Nokia
>> N95/N96s,
>> but also sometimes on other devices.
>
> Hi Bruno,
>
>
> I was hoping that the "macreauth" option in 1.0.13 would be the fix to
> that but I'm still seeing the same problem.
>
> I'm going to update my splash page to redirect back to the Coova Chilli
> /login page again and also write a log entry into the database - this way
> I'll know how often it is happening and, maybe?, the redirecting to the
> /login page will make Coova Chilli try to re-authenticate again (I wonder
> will it?)
>
> thanks,
>
> Derek
>
>
> --
> Derek C
> In Ireland
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>
>
>


-- 
Derek C
In Ireland



From bnoteris at odbee.com  Mon Jun 29 07:50:45 2009
From: bnoteris at odbee.com (Benoit noteris)
Date: Mon, 29 Jun 2009 09:50:45 +0200
Subject: [tap mode doesn't work]
In-Reply-To: <1246079112.7703.10.camel@david-laptop>
References: <002801c9f583$47052450$d50f6cf0$@com> <1246079112.7703.10.camel@david-laptop>
Message-ID: <001b01c9f88e$4fa508b0$eeef1a10$@com>

Because i want to control the layer 2 Mac filtering and it's only possible with tap tunnel.

-----Message d'origine-----
De : wlanmac [mailto:wlan at mac.com] 
Envoy? : samedi 27 juin 2009 07:05
? : chilli at coova.org
Objet : Re: [tap mode doesn't work]

To be honest, the tap interface feature hasn't had any real purpose
(this will change in the next release). Why do you need to use a tap
instead of a tun? 




On Thu, 2009-06-25 at 12:54 +0200, Benoit noteris wrote:
> Dear coova list,
> 
>  
> 
>  
> 
> I?m using coova on ubuntu 2.6.24.7 kernel and it?s working well,
> 
> but it that I can?t find anytings in the mac table address.
> 
> You will tell me yes it?s normal you?re using tun interface,
> 
> and it?s ip layer 3 tunneling and so it?s normal OK, I?know that.
> 
> And so I?ve try to use tap interface instead to get the layer 2
> encapsulated too,
> 
> I?m make my try with only one client and tcpdum and debug in chilli
> running.
> 
>  
> 
> Here are the detail of the log : 
> 
>  
> 
> Jun 25 12:48:24 portailtst coova-chilli[2499]: chilli.c: 3600:
> ChilliSpot version 1.0.13 started.
> 
> Jun 25 12:48:24 portailtst coova-chilli[2499]: CoovaChilli(ChilliSpot)
> 1.0.13. Copyright 2002-2005 Mondru AB. Licensed under GPL. Copyright
> 2006-2008 David Bird <dbird at acm.org>. Licensed under GPL. See
> http://coova.org/ for details.
> 
> Jun 25 12:48:24 portailtst coova-chilli[2499]: tun.c: 515: TX queue
> length set to 100
> 
> Jun 25 12:48:24 portailtst coova-chilli[2499]: tun.c: 544: tap-mac:
> tap0 00-FF-76-B3-CF-DA
> 
> Jun 25 12:48:24 portailtst coova-chilli[2499]: ippool.c: 218: Hashlog
> 8 253 256
> 
> Jun 25 12:48:24 portailtst coova-chilli[2499]: chilli.c: 3754: Waiting
> for client request...
> 
> Jun 25 12:48:35 portailtst kernel: tap0: no IPv6 routers present
> 
> Jun 25 12:48:52 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
> 
> Jun 25 12:48:52 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
> unknown IP 172.1.2.2
> 
> Jun 25 12:48:53 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
> 
> Jun 25 12:48:53 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
> unknown IP 172.1.2.2
> 
> Jun 25 12:48:54 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
> 
> Jun 25 12:48:54 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
> unknown IP 172.1.2.2
> 
> Jun 25 12:48:55 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
> 
> Jun 25 12:48:55 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
> unknown IP 172.1.2.2
> 
> Jun 25 12:48:56 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
> 
> Jun 25 12:48:56 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
> unknown IP 172.1.2.2
> 
> Jun 25 12:48:57 portailtst coova-chilli[2499]: chilli.c: 1219: arp:
> dst=ff:ff:ff:ff:ff:ff src=00:ff:76:b3:cf:da prot=0806
> 
> Jun 25 12:48:57 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
> unknown IP 172.1.2.2
> 
> Jun 25 12:49:28 portailtst coova-chilli[2499]: chilli.c: 1226: ARP for
> unknown IP 172.1.2.2
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: dhcp.c: 2034: Address
> not found (172.1.2.2)
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2822: New
> DHCP request from MAC=00-40-63-D8-42-70
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2825: New
> DHCP connection established
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2700: DHCP
> request for IP address
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: ippool.c: 324:
> Requesting new static ip: 172.1.2.2
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: ippool.c: 344: Static
> IP address not allowed
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: ippool.c: 324:
> Requesting new dynamic ip: 172.1.2.2
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: chilli.c: 2789: Client
> MAC=00-40-63-D8-42-70 assigned IP 172.1.2.2
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: tun.c: 765: writing to
> tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01
> 
> Jun 25 12:49:52 portailtst coova-chilli[2499]: dhcp.c: 2520:
> arp_decaps: dst=ff:ff:ff:ff:ff:ff src=00:40:63:d8:42:70 prot=0806
> 
> Jun 25 12:49:54 portailtst coova-chilli[2499]: tun.c: 765: writing to
> tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01
> 
> Jun 25 12:49:59 portailtst coova-chilli[2499]: tun.c: 765: writing to
> tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01
> 
> Jun 25 12:50:01 portailtst /USR/SBIN/CRON[2520]: (root) CMD
> (/etc/init.d/chilli checkrunning)
> 
> Jun 25 12:50:01 portailtst /USR/SBIN/CRON[2524]: (root) CMD
> (/etc/rc2.d/S20chilli checkrunning)
> 
> Jun 25 12:50:07 portailtst coova-chilli[2499]: tun.c: 765: writing to
> tun/tap src=00:40:63:d8:42:70 dst=00:1f:3b:98:d5:01
> 
>  
> 
> In the tcpdump I can see dns request and web request but nothing
> appear to working at all 
> 
> Client just get 404 error and no url redirection on the UAM server.
> 
>  
> 
> Did anybody has an idea on what?s not working ? 
> 
>  
> 
> Chears
> 
>  
> 
> Benoit noteris
> 
>  
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: chilli-unsubscribe at coova.org
For additional commands, e-mail: chilli-help at coova.org
Wiki: http://coova.org/wiki/index.php/CoovaChilli
Forum: http://coova.org/phpBB3/viewforum.php?f=4



From wlan at mac.com  Tue Jun 30 08:29:33 2009
From: wlan at mac.com (wlanmac)
Date: Tue, 30 Jun 2009 10:29:33 +0200
Subject: migration
Message-ID: <1246350573.8092.12.camel@david-laptop>

Hello,

You may have noticed that our coova.org server had problems over the
weekend. It is increasingly clear that the server that runs the site is
needing replacement. We have been in the process of moving to a new
Amazon cloud environment, with redundant instances and an elastic IP
address. We will be starting sooner than later to migrate over coova.org
to the new platform - which is now already running coova.com, coova.net,
and om.coova.net. 

What this means:

- PhpBB forum will be migrated to Drupal forum. I've tested the
migration, and for the most part, the forum and users are preserved. 

- Wiki will be migrated (largely by hand as URLs will change) to Drupal
book pages, and we will encourage more cross-over between forum users
and wiki editing. 

- CoovaAAA will probably be the last service we address. The service, as
it is now, will be phased out with CoovaNET taking it's place. We need
to get a couple more features ported (facebook, openid, for example) to
the new system, but the new platform will prove to be better in the long
run. 

Thanks for your interest in Coova.

Best regards,
David



From peter at endian.com  Tue Jun 30 16:28:12 2009
From: peter at endian.com (Peter Warasin)
Date: Tue, 30 Jun 2009 18:28:12 +0200
Subject: [tap mode doesn't work]
In-Reply-To: <001b01c9f88e$4fa508b0$eeef1a10$@com>
References: <002801c9f583$47052450$d50f6cf0$@com> <1246079112.7703.10.camel@david-laptop> <001b01c9f88e$4fa508b0$eeef1a10$@com>
Message-ID: <4A4A3D1C.5080801@endian.com>

Benoit noteris wrote:
> Because i want to control the layer 2 Mac filtering and it's only possible with tap tunnel.

Same here. I was thinking these days trying to switch over to tap
instead of tun.

You can't filter mac addresses, don't see mac addresses in the firewall
logs and can't join a bridge.

I think it makes sense

peter

-- 
:: e n d i a n
:: open source - open minds

:: peter warasin
:: http://www.endian.com   :: peter at endian.com


