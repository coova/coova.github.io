From oguzhank at bilkent.edu.tr  Mon May  4 05:45:34 2009
From: oguzhank at bilkent.edu.tr (Oguzhan Kayhan)
Date: Mon, 4 May 2009 08:45:34 +0300 (EEST)
Subject: Problem with 'uamanyip'.
In-Reply-To: <Pine.LNX.4.64.0904301405480.19116@localhost>
References: <Pine.LNX.4.64.0904301034240.19116@localhost>
    <Pine.LNX.4.64.0904301405480.19116@localhost>
Message-ID: <54941.139.179.14.250.1241415934.squirrel@webmail.bilkent.edu.tr>

>
> I solved my problem. I didn't realize I needed to specify the Static IP
> Pool Network settings as well.
>
> I used the following settings which appear to work for me:
>
> Static IP Pool Network: 0.0.0.0
> Static IP Pool Netmask: 255.0.0.0
> Allow Any IP: Enabled
>
> --
> Carle Brisson
> carle at vianet.ca
>

I didnt tested yet but i wonder if static ip is fixed at 1.0.13 version?
I mean you can not define a static-dynamic ip pool without setting up
uamanyip. And that makes a problem with the users that has static ips
outside of the pool.






> On Thu, 30 Apr 2009, Carle Brisson wrote:
>
>>
>> version 1.0.11
>>
>> I've been reading through the forum and haven't been able to get enough
>> info
>> on the 'uamanyip' option. I've read posts where some claim that they are
>> using this feature without any problems.
>>
>> I understand that using this 'uamanyip' option should allow any wireless
>> client to use their existing static IP settings when connecting to
>> coova-chilli. Unless there is something else that I missed, this does
>> not
>> work for me.
>>
>> I would appreciate any help from someone currently using this feature.
>>
>> --
>> Carle Brisson
>> carle at vianet.ca
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
>> For additional commands, e-mail: chilli-help at coova.org
>> Wiki: http://coova.org/wiki/index.php/CoovaChilli
>> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>
>




From rmartinez at tilsor.com.uy  Tue May 12 19:46:57 2009
From: rmartinez at tilsor.com.uy (=?ISO-8859-1?Q?Rodrigo_Mart=EDnez?=)
Date: Tue, 12 May 2009 16:46:57 -0300
Subject: Problem with WISPr in release 1.0.13
Message-ID: <4A09D231.7090401@tilsor.com.uy>

Hello,
    We are using CoovaChilli release 1.0.13 in a solution for access 
control system. We have smart clients that authenticate using WISPr 
protocol to communicate with the CoovaChilli. We start using CoovaChilli 
release 1.0.12, with this version the WISPr communication worked fine, 
but when we update to release 1.0.13 the client stop connecting.

    Analyzing the problem we found that in the new release, when the 
redirect message is send (302 page was moved), the WISPr message had two 
tags with the LoginURL. One of the tags had the same value as in release 
1.0.12 and the second one has some differences. The main problem of the 
second tag is that the "&" it is not scaped, so when we check syntax 
against the xsd, it always fail. Looking around in the code, we found 
the piece of code that was generating the WISPr message and we modify it 
to match the WISPr standard. Attached in the mail we are sending the 
file with the patch that contains the modifications in the redir.c file. 
We hope this can help developers to fix this problem in next releases.

    Thanks in advance

    Regards,
       Rodrigo

-- 
------------------------------------------------------------------------
      	
Ing. Rodrigo Mart?nez
Consultor
Consultor?a & Desarrollo

      		      	Tilsor S.A
Pza. Independencia 822 Piso 4
C.P. 11100 - Montevideo Uruguay
Tel Fax: (598 2) 9039313
www.tilsor.com.uy <http://www.tilsor.com.uy>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090512/d49f087e/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tilsor_logo_nuevo.jpg
Type: image/jpeg
Size: 17463 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090512/d49f087e/attachment.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tilsor_logo_nuevo.gif
Type: image/gif
Size: 2119 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090512/d49f087e/attachment.gif>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: chilli-wisprLoginURL.patch
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090512/d49f087e/attachment.txt>

From wlan at mac.com  Tue May 12 20:06:37 2009
From: wlan at mac.com (wlanmac)
Date: Tue, 12 May 2009 22:06:37 +0200
Subject: Problem with WISPr in release 1.0.13
In-Reply-To: <4A09D231.7090401@tilsor.com.uy>
References: <4A09D231.7090401@tilsor.com.uy>
Message-ID: <1242158797.7817.27.camel@david-laptop>

Thanks... I committed a similar fix to svn - the difference being an
option addedd to bstring_buildurl() for what kind of ampersand to use
"&" vs. "%amp;". 

David

On Tue, 2009-05-12 at 16:46 -0300, Rodrigo Mart?nez wrote:
> Hello, 
>     We are using CoovaChilli release 1.0.13 in a solution for access
> control system. We have smart clients that authenticate using WISPr
> protocol to communicate with the CoovaChilli. We start using
> CoovaChilli release 1.0.12, with this version the WISPr communication
> worked fine, but when we update to release 1.0.13 the client stop
> connecting. 
> 
>     Analyzing the problem we found that in the new release, when the
> redirect message is send (302 page was moved), the WISPr message had
> two tags with the LoginURL. One of the tags had the same value as in
> release 1.0.12 and the second one has some differences. The main
> problem of the second tag is that the "&" it is not scaped, so when we
> check syntax against the xsd, it always fail. Looking around in the
> code, we found the piece of code that was generating the WISPr message
> and we modify it to match the WISPr standard. Attached in the mail we
> are sending the file with the patch that contains the modifications in
> the redir.c file. We hope this can help developers to fix this problem
> in next releases.
> 
>     Thanks in advance 
> 
>     Regards,
>        Rodrigo
> 
> -- 
> 
> ______________________________________________________________________
>      
> 
> Ing. Rodrigo Mart?nez
> Consultor
> Consultor?a & Desarrollo
> 
> 
>      
> 
>      
> Tilsor S.A
> Pza.
> Independencia 822
> Piso 4
> C.P. 11100 -
> Montevideo
> Uruguay
> Tel Fax: (598 2)
> 9039313
> www.tilsor.com.uy 
> 
> 
> plain text document attachment (chilli-wisprLoginURL.patch)
> Index: redir.c
> ===================================================================
> --- redir.c	(revision 199)
> +++ redir.c	(working copy)
> @@ -221,12 +221,12 @@
>    bstring bt = bfromcstr("");
>    bstring bt2 = bfromcstr("");
>  
> -  bassignformat(str, "%s%cres=%s&uamip=%s&uamport=%d", 
> +  bassignformat(str, "%s%cres=%s&amp;uamip=%s&amp;uamport=%d", 
>  		redir_url, strchr(redir_url, '?') ? '&' : '?',
>  		resp, inet_ntoa(redir->addr), redir->port);
>  
>    if (hexchal) {
> -    bassignformat(bt, "&challenge=%s", hexchal);
> +    bassignformat(bt, "&amp;challenge=%s", hexchal);
>      bconcat(str, bt);
>      bassigncstr(bt,"");
>    }
> @@ -239,37 +239,37 @@
>  
>        sessiontime = timenow - starttime;
>  
> -      bassignformat(bt, "&starttime=%ld", starttime);
> +      bassignformat(bt, "&amp;starttime=%ld", starttime);
>        bconcat(str, bt);
> -      bassignformat(bt, "&sessiontime=%ld", sessiontime);
> +      bassignformat(bt, "&amp;sessiontime=%ld", sessiontime);
>        bconcat(str, bt);
>      }
>  
>      if (conn->s_params.sessiontimeout) {
> -      bassignformat(bt, "&sessiontimeout=%ld", conn->s_params.sessiontimeout);
> +      bassignformat(bt, "&amp;sessiontimeout=%ld", conn->s_params.sessiontimeout);
>        bconcat(str, bt);
>      }
>  
>      if (conn->s_params.sessionterminatetime) {
> -      bassignformat(bt, "&stoptime=%ld", conn->s_params.sessionterminatetime);
> +      bassignformat(bt, "&amp;stoptime=%ld", conn->s_params.sessionterminatetime);
>        bconcat(str, bt);
>      }
>    }
>   
>    if (uid) {
> -    bcatcstr(str, "&uid=");
> +    bcatcstr(str, "&amp;uid=");
>      bassigncstr(bt, uid);
>      redir_urlencode(bt, bt2);
>      bconcat(str, bt2);
>    }
>  
>    if (timeleft) {
> -    bassignformat(bt, "&timeleft=%ld", timeleft);
> +    bassignformat(bt, "&amp;timeleft=%ld", timeleft);
>      bconcat(str, bt);
>    }
>    
>    if (hismac) {
> -    bcatcstr(str, "&mac=");
> +    bcatcstr(str, "&amp;mac=");
>      bassignformat(bt, "%.2X-%.2X-%.2X-%.2X-%.2X-%.2X",
>  		  hismac[0], hismac[1], 
>  		  hismac[2], hismac[3],
> @@ -279,54 +279,54 @@
>    }
>  
>    if (hisip) {
> -    bassignformat(bt, "&ip=%s", inet_ntoa(*hisip));
> +    bassignformat(bt, "&amp;ip=%s", inet_ntoa(*hisip));
>      bconcat(str, bt);
>    }
>  
>    if (reply) {
> -    bcatcstr(str, "&reply=");
> +    bcatcstr(str, "&amp;reply=");
>      bassigncstr(bt, reply);
>      redir_urlencode(bt, bt2);
>      bconcat(str, bt2);
>    }
>  
>    if (redir->ssid) {
> -    bcatcstr(str, "&ssid=");
> +    bcatcstr(str, "&amp;ssid=");
>      bassigncstr(bt, redir->ssid);
>      redir_urlencode(bt, bt2);
>      bconcat(str, bt2);
>    }
>  
>    if (redir->nasmac) {
> -    bcatcstr(str, "&called=");
> +    bcatcstr(str, "&amp;called=");
>      bassigncstr(bt, redir->nasmac);
>      redir_urlencode(bt, bt2);
>      bconcat(str, bt2);
>    } 
>  
>    if (redir->radiusnasid) {
> -    bcatcstr(str, "&nasid=");
> +    bcatcstr(str, "&amp;nasid=");
>      bassigncstr(bt, redir->radiusnasid);
>      redir_urlencode(bt, bt2);
>      bconcat(str, bt2);
>    }
>  
>    if (conn->lang[0]) {
> -    bcatcstr(str, "&lang=");
> +    bcatcstr(str, "&amp;lang=");
>      bassigncstr(bt, conn->lang);
>      redir_urlencode(bt, bt2);
>      bconcat(str, bt2);
>    }
>  
>    if (redirurl) {
> -    bcatcstr(str, "&redirurl=");
> +    bcatcstr(str, "&amp;redirurl=");
>      bassigncstr(bt, redirurl);
>      redir_urlencode(bt, bt2);
>      bconcat(str, bt2);
>    }
>  
>    if (userurl) {
> -    bcatcstr(str, "&userurl=");
> +    bcatcstr(str, "&amp;userurl=");
>      bassigncstr(bt, userurl);
>      redir_urlencode(bt, bt2);
>      bconcat(str, bt2);
> @@ -347,7 +347,7 @@
>      for (i=0; i<16; i++)
>        sprintf(hex+strlen(hex), "%.2X", cksum[i]);
>  
> -    bcatcstr(str, "&md=");
> +    bcatcstr(str, "&amp;md=");
>      bcatcstr(str, hex);
>    }
>  
> @@ -478,12 +478,14 @@
>        bconcat(b, bt);
>  
>        bcatcstr(b, "</LoginURL>\r\n");
> -      
> +
> +/*      
>        bassignformat(bt, "<LoginURL>%s%cres=smartclient&amp;uamip=%s&amp;uamport=%d&amp;challenge=%s</LoginURL>\r\n",
>  		    options.wisprlogin ? options.wisprlogin : redir->url, 
>  		    strchr(options.wisprlogin ? options.wisprlogin : redir->url, '?') ? '&' : '?',
>  		    inet_ntoa(redir->addr), redir->port, hexchal); 
>        bconcat(b, bt);
> +*/
>        
>        bassignformat(bt, "<AbortLoginURL>http://%s:%d/abort</AbortLoginURL>\r\n",
>  		    inet_ntoa(redir->addr), redir->port);
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4



From rmartinez at tilsor.com.uy  Tue May 12 20:50:47 2009
From: rmartinez at tilsor.com.uy (=?UTF-8?B?Um9kcmlnbyBNYXJ0w61uZXo=?=)
Date: Tue, 12 May 2009 17:50:47 -0300
Subject: Problem with WISPr in release 1.0.13
In-Reply-To: <1242158797.7817.27.camel@david-laptop>
References: <4A09D231.7090401@tilsor.com.uy> <1242158797.7817.27.camel@david-laptop>
Message-ID: <4A09E127.5080803@tilsor.com.uy>

David,
    thanks for the quick response and for committing the changes to the 
svn.

    In our solution the smart clients use usernames and passwords that 
are 40 bytes long. When we try to login using these password, 
CoovaChilli send to RADIUS the password truncated to 16 bytes. We just 
found this problem and we are looking for a solution in the code, any 
advice would be very helpful.

    Rodrigo


wlanmac wrote:
> Thanks... I committed a similar fix to svn - the difference being an
> option addedd to bstring_buildurl() for what kind of ampersand to use
> "&" vs. "%amp;". 
>
> David
>
> On Tue, 2009-05-12 at 16:46 -0300, Rodrigo Mart?nez wrote:
>   
>> Hello, 
>>     We are using CoovaChilli release 1.0.13 in a solution for access
>> control system. We have smart clients that authenticate using WISPr
>> protocol to communicate with the CoovaChilli. We start using
>> CoovaChilli release 1.0.12, with this version the WISPr communication
>> worked fine, but when we update to release 1.0.13 the client stop
>> connecting. 
>>
>>     Analyzing the problem we found that in the new release, when the
>> redirect message is send (302 page was moved), the WISPr message had
>> two tags with the LoginURL. One of the tags had the same value as in
>> release 1.0.12 and the second one has some differences. The main
>> problem of the second tag is that the "&" it is not scaped, so when we
>> check syntax against the xsd, it always fail. Looking around in the
>> code, we found the piece of code that was generating the WISPr message
>> and we modify it to match the WISPr standard. Attached in the mail we
>> are sending the file with the patch that contains the modifications in
>> the redir.c file. We hope this can help developers to fix this problem
>> in next releases.
>>
>>     Thanks in advance 
>>
>>     Regards,
>>        Rodrigo
>>
>> -- 
>>
>> ______________________________________________________________________
>>      
>>
>> Ing. Rodrigo Mart?nez
>> Consultor
>> Consultor?a & Desarrollo
>>
>>
>>      
>>
>>      
>> Tilsor S.A
>> Pza.
>> Independencia 822
>> Piso 4
>> C.P. 11100 -
>> Montevideo
>> Uruguay
>> Tel Fax: (598 2)
>> 9039313
>> www.tilsor.com.uy 
>>
>>
>> plain text document attachment (chilli-wisprLoginURL.patch)
>> Index: redir.c
>> ===================================================================
>> --- redir.c	(revision 199)
>> +++ redir.c	(working copy)
>> @@ -221,12 +221,12 @@
>>    bstring bt = bfromcstr("");
>>    bstring bt2 = bfromcstr("");
>>  
>> -  bassignformat(str, "%s%cres=%s&uamip=%s&uamport=%d", 
>> +  bassignformat(str, "%s%cres=%s&amp;uamip=%s&amp;uamport=%d", 
>>  		redir_url, strchr(redir_url, '?') ? '&' : '?',
>>  		resp, inet_ntoa(redir->addr), redir->port);
>>  
>>    if (hexchal) {
>> -    bassignformat(bt, "&challenge=%s", hexchal);
>> +    bassignformat(bt, "&amp;challenge=%s", hexchal);
>>      bconcat(str, bt);
>>      bassigncstr(bt,"");
>>    }
>> @@ -239,37 +239,37 @@
>>  
>>        sessiontime = timenow - starttime;
>>  
>> -      bassignformat(bt, "&starttime=%ld", starttime);
>> +      bassignformat(bt, "&amp;starttime=%ld", starttime);
>>        bconcat(str, bt);
>> -      bassignformat(bt, "&sessiontime=%ld", sessiontime);
>> +      bassignformat(bt, "&amp;sessiontime=%ld", sessiontime);
>>        bconcat(str, bt);
>>      }
>>  
>>      if (conn->s_params.sessiontimeout) {
>> -      bassignformat(bt, "&sessiontimeout=%ld", conn->s_params.sessiontimeout);
>> +      bassignformat(bt, "&amp;sessiontimeout=%ld", conn->s_params.sessiontimeout);
>>        bconcat(str, bt);
>>      }
>>  
>>      if (conn->s_params.sessionterminatetime) {
>> -      bassignformat(bt, "&stoptime=%ld", conn->s_params.sessionterminatetime);
>> +      bassignformat(bt, "&amp;stoptime=%ld", conn->s_params.sessionterminatetime);
>>        bconcat(str, bt);
>>      }
>>    }
>>   
>>    if (uid) {
>> -    bcatcstr(str, "&uid=");
>> +    bcatcstr(str, "&amp;uid=");
>>      bassigncstr(bt, uid);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>>    }
>>  
>>    if (timeleft) {
>> -    bassignformat(bt, "&timeleft=%ld", timeleft);
>> +    bassignformat(bt, "&amp;timeleft=%ld", timeleft);
>>      bconcat(str, bt);
>>    }
>>    
>>    if (hismac) {
>> -    bcatcstr(str, "&mac=");
>> +    bcatcstr(str, "&amp;mac=");
>>      bassignformat(bt, "%.2X-%.2X-%.2X-%.2X-%.2X-%.2X",
>>  		  hismac[0], hismac[1], 
>>  		  hismac[2], hismac[3],
>> @@ -279,54 +279,54 @@
>>    }
>>  
>>    if (hisip) {
>> -    bassignformat(bt, "&ip=%s", inet_ntoa(*hisip));
>> +    bassignformat(bt, "&amp;ip=%s", inet_ntoa(*hisip));
>>      bconcat(str, bt);
>>    }
>>  
>>    if (reply) {
>> -    bcatcstr(str, "&reply=");
>> +    bcatcstr(str, "&amp;reply=");
>>      bassigncstr(bt, reply);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>>    }
>>  
>>    if (redir->ssid) {
>> -    bcatcstr(str, "&ssid=");
>> +    bcatcstr(str, "&amp;ssid=");
>>      bassigncstr(bt, redir->ssid);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>>    }
>>  
>>    if (redir->nasmac) {
>> -    bcatcstr(str, "&called=");
>> +    bcatcstr(str, "&amp;called=");
>>      bassigncstr(bt, redir->nasmac);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>>    } 
>>  
>>    if (redir->radiusnasid) {
>> -    bcatcstr(str, "&nasid=");
>> +    bcatcstr(str, "&amp;nasid=");
>>      bassigncstr(bt, redir->radiusnasid);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>>    }
>>  
>>    if (conn->lang[0]) {
>> -    bcatcstr(str, "&lang=");
>> +    bcatcstr(str, "&amp;lang=");
>>      bassigncstr(bt, conn->lang);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>>    }
>>  
>>    if (redirurl) {
>> -    bcatcstr(str, "&redirurl=");
>> +    bcatcstr(str, "&amp;redirurl=");
>>      bassigncstr(bt, redirurl);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>>    }
>>  
>>    if (userurl) {
>> -    bcatcstr(str, "&userurl=");
>> +    bcatcstr(str, "&amp;userurl=");
>>      bassigncstr(bt, userurl);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>> @@ -347,7 +347,7 @@
>>      for (i=0; i<16; i++)
>>        sprintf(hex+strlen(hex), "%.2X", cksum[i]);
>>  
>> -    bcatcstr(str, "&md=");
>> +    bcatcstr(str, "&amp;md=");
>>      bcatcstr(str, hex);
>>    }
>>  
>> @@ -478,12 +478,14 @@
>>        bconcat(b, bt);
>>  
>>        bcatcstr(b, "</LoginURL>\r\n");
>> -      
>> +
>> +/*      
>>        bassignformat(bt, "<LoginURL>%s%cres=smartclient&amp;uamip=%s&amp;uamport=%d&amp;challenge=%s</LoginURL>\r\n",
>>  		    options.wisprlogin ? options.wisprlogin : redir->url, 
>>  		    strchr(options.wisprlogin ? options.wisprlogin : redir->url, '?') ? '&' : '?',
>>  		    inet_ntoa(redir->addr), redir->port, hexchal); 
>>        bconcat(b, bt);
>> +*/
>>        
>>        bassignformat(bt, "<AbortLoginURL>http://%s:%d/abort</AbortLoginURL>\r\n",
>>  		    inet_ntoa(redir->addr), redir->port);
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
>> For additional commands, e-mail: chilli-help at coova.org
>> Wiki: http://coova.org/wiki/index.php/CoovaChilli
>> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>>     
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>   


-- 
------------------------------------------------------------------------
      	
Ing. Rodrigo Mart?nez
Consultor
Consultor?a & Desarrollo

      		      	Tilsor S.A
Pza. Independencia 822 Piso 4
C.P. 11100 - Montevideo Uruguay
Tel Fax: (598 2) 9039313
www.tilsor.com.uy <http://www.tilsor.com.uy>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090512/c3cda744/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tilsor_logo_nuevo.jpg
Type: image/jpeg
Size: 17463 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090512/c3cda744/attachment.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tilsor_logo_nuevo.gif
Type: image/gif
Size: 2119 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090512/c3cda744/attachment.gif>

From tm at fwt.fr  Tue May 12 22:20:17 2009
From: tm at fwt.fr (Thierry MUSEUX - www.fwt.fr -)
Date: Wed, 13 May 2009 00:20:17 +0200
Subject: Problem with WISPr in release 1.0.13
In-Reply-To: <4A09E127.5080803@tilsor.com.uy>
References: <4A09D231.7090401@tilsor.com.uy> <1242158797.7817.27.camel@david-laptop> <4A09E127.5080803@tilsor.com.uy>
Message-ID: <499281BD8A3946B0B0DA36BBA9A1A0F8@DELLTM>

Limit.h

#define RADIUS_PASSWORD_LEN               16

 

 

Thierry Museux



  _____  

De : Rodrigo Mart?nez [mailto:rmartinez at tilsor.com.uy] 
Envoy? : mardi 12 mai 2009 22:51
? : chilli at coova.org
Objet : Re: Problem with WISPr in release 1.0.13

 

David, 
    thanks for the quick response and for committing the changes to the svn.


    In our solution the smart clients use usernames and passwords that are
40 bytes long. When we try to login using these password, CoovaChilli send
to RADIUS the password truncated to 16 bytes. We just found this problem and
we are looking for a solution in the code, any advice would be very helpful.

    Rodrigo


wlanmac wrote: 

Thanks... I committed a similar fix to svn - the difference being an
option addedd to bstring_buildurl() for what kind of ampersand to use
"&" vs. "%amp;". 
 
David
 
On Tue, 2009-05-12 at 16:46 -0300, Rodrigo Mart?nez wrote:
  

Hello, 
    We are using CoovaChilli release 1.0.13 in a solution for access
control system. We have smart clients that authenticate using WISPr
protocol to communicate with the CoovaChilli. We start using
CoovaChilli release 1.0.12, with this version the WISPr communication
worked fine, but when we update to release 1.0.13 the client stop
connecting. 
 
    Analyzing the problem we found that in the new release, when the
redirect message is send (302 page was moved), the WISPr message had
two tags with the LoginURL. One of the tags had the same value as in
release 1.0.12 and the second one has some differences. The main
problem of the second tag is that the "&" it is not scaped, so when we
check syntax against the xsd, it always fail. Looking around in the
code, we found the piece of code that was generating the WISPr message
and we modify it to match the WISPr standard. Attached in the mail we
are sending the file with the patch that contains the modifications in
the redir.c file. We hope this can help developers to fix this problem
in next releases.
 
    Thanks in advance 
 
    Regards,
       Rodrigo
 
-- 
 
______________________________________________________________________
     
 
Ing. Rodrigo Mart?nez
Consultor
Consultor?a & Desarrollo
 
 
     
 
     
Tilsor S.A
Pza.
Independencia 822
Piso 4
C.P. 11100 -
Montevideo
Uruguay
Tel Fax: (598 2)
9039313
www.tilsor.com.uy 
 
 
plain text document attachment (chilli-wisprLoginURL.patch)
Index: redir.c
===================================================================
--- redir.c      (revision 199)
+++ redir.c      (working copy)
@@ -221,12 +221,12 @@
   bstring bt = bfromcstr("");
   bstring bt2 = bfromcstr("");
 
-  bassignformat(str, "%s%cres=%s&uamip=%s&uamport=%d", 
+  bassignformat(str, "%s%cres=%s&amp;uamip=%s&amp;uamport=%d", 
         redir_url, strchr(redir_url, '?') ? '&' : '?',
         resp, inet_ntoa(redir->addr), redir->port);
 
   if (hexchal) {
-    bassignformat(bt, "&challenge=%s", hexchal);
+    bassignformat(bt, "&amp;challenge=%s", hexchal);
     bconcat(str, bt);
     bassigncstr(bt,"");
   }
@@ -239,37 +239,37 @@
 
       sessiontime = timenow - starttime;
 
-      bassignformat(bt, "&starttime=%ld", starttime);
+      bassignformat(bt, "&amp;starttime=%ld", starttime);
       bconcat(str, bt);
-      bassignformat(bt, "&sessiontime=%ld", sessiontime);
+      bassignformat(bt, "&amp;sessiontime=%ld", sessiontime);
       bconcat(str, bt);
     }
 
     if (conn->s_params.sessiontimeout) {
-      bassignformat(bt, "&sessiontimeout=%ld",
conn->s_params.sessiontimeout);
+      bassignformat(bt, "&amp;sessiontimeout=%ld",
conn->s_params.sessiontimeout);
       bconcat(str, bt);
     }
 
     if (conn->s_params.sessionterminatetime) {
-      bassignformat(bt, "&stoptime=%ld",
conn->s_params.sessionterminatetime);
+      bassignformat(bt, "&amp;stoptime=%ld",
conn->s_params.sessionterminatetime);
       bconcat(str, bt);
     }
   }
  
   if (uid) {
-    bcatcstr(str, "&uid=");
+    bcatcstr(str, "&amp;uid=");
     bassigncstr(bt, uid);
     redir_urlencode(bt, bt2);
     bconcat(str, bt2);
   }
 
   if (timeleft) {
-    bassignformat(bt, "&timeleft=%ld", timeleft);
+    bassignformat(bt, "&amp;timeleft=%ld", timeleft);
     bconcat(str, bt);
   }
   
   if (hismac) {
-    bcatcstr(str, "&mac=");
+    bcatcstr(str, "&amp;mac=");
     bassignformat(bt, "%.2X-%.2X-%.2X-%.2X-%.2X-%.2X",
           hismac[0], hismac[1], 
           hismac[2], hismac[3],
@@ -279,54 +279,54 @@
   }
 
   if (hisip) {
-    bassignformat(bt, "&ip=%s", inet_ntoa(*hisip));
+    bassignformat(bt, "&amp;ip=%s", inet_ntoa(*hisip));
     bconcat(str, bt);
   }
 
   if (reply) {
-    bcatcstr(str, "&reply=");
+    bcatcstr(str, "&amp;reply=");
     bassigncstr(bt, reply);
     redir_urlencode(bt, bt2);
     bconcat(str, bt2);
   }
 
   if (redir->ssid) {
-    bcatcstr(str, "&ssid=");
+    bcatcstr(str, "&amp;ssid=");
     bassigncstr(bt, redir->ssid);
     redir_urlencode(bt, bt2);
     bconcat(str, bt2);
   }
 
   if (redir->nasmac) {
-    bcatcstr(str, "&called=");
+    bcatcstr(str, "&amp;called=");
     bassigncstr(bt, redir->nasmac);
     redir_urlencode(bt, bt2);
     bconcat(str, bt2);
   } 
 
   if (redir->radiusnasid) {
-    bcatcstr(str, "&nasid=");
+    bcatcstr(str, "&amp;nasid=");
     bassigncstr(bt, redir->radiusnasid);
     redir_urlencode(bt, bt2);
     bconcat(str, bt2);
   }
 
   if (conn->lang[0]) {
-    bcatcstr(str, "&lang=");
+    bcatcstr(str, "&amp;lang=");
     bassigncstr(bt, conn->lang);
     redir_urlencode(bt, bt2);
     bconcat(str, bt2);
   }
 
   if (redirurl) {
-    bcatcstr(str, "&redirurl=");
+    bcatcstr(str, "&amp;redirurl=");
     bassigncstr(bt, redirurl);
     redir_urlencode(bt, bt2);
     bconcat(str, bt2);
   }
 
   if (userurl) {
-    bcatcstr(str, "&userurl=");
+    bcatcstr(str, "&amp;userurl=");
     bassigncstr(bt, userurl);
     redir_urlencode(bt, bt2);
     bconcat(str, bt2);
@@ -347,7 +347,7 @@
     for (i=0; i<16; i++)
       sprintf(hex+strlen(hex), "%.2X", cksum[i]);
 
-    bcatcstr(str, "&md=");
+    bcatcstr(str, "&amp;md=");
     bcatcstr(str, hex);
   }
 
@@ -478,12 +478,14 @@
       bconcat(b, bt);
 
       bcatcstr(b, "</LoginURL>\r\n");
-      
+
+/*      
       bassignformat(bt,
"<LoginURL>%s%cres=smartclient&amp;uamip=%s&amp;uamport=%d&amp;challenge=%s<
/LoginURL>\r\n",
             options.wisprlogin ? options.wisprlogin : redir->url, 
             strchr(options.wisprlogin ? options.wisprlogin : redir->url,
'?') ? '&' : '?',
             inet_ntoa(redir->addr), redir->port, hexchal); 
       bconcat(b, bt);
+*/
       
       bassignformat(bt, "<AbortLoginURL>http://%s:%d/abort
<http://%25s:%25d/abort> </AbortLoginURL>\r\n",
             inet_ntoa(redir->addr), redir->port);
 
---------------------------------------------------------------------
To unsubscribe, e-mail: chilli-unsubscribe at coova.org
For additional commands, e-mail: chilli-help at coova.org
Wiki: http://coova.org/wiki/index.php/CoovaChilli
Forum: http://coova.org/phpBB3/viewforum.php?f=4
    

 
 
---------------------------------------------------------------------
To unsubscribe, e-mail: chilli-unsubscribe at coova.org
For additional commands, e-mail: chilli-help at coova.org
Wiki: http://coova.org/wiki/index.php/CoovaChilli
Forum: http://coova.org/phpBB3/viewforum.php?f=4
  

 

-- 

  _____  


     


Ing. Rodrigo Mart?nez
Consultor
Consultor?a & Desarrollo

 


     



     

Tilsor S.A
Pza. Independencia 822 Piso 4
C.P. 11100 - Montevideo Uruguay
Tel Fax: (598 2) 9039313
 <http://www.tilsor.com.uy> www.tilsor.com.uy 

 




 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090513/d3292b3c/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 17463 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090513/d3292b3c/attachment.jpeg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 2119 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090513/d3292b3c/attachment.gif>

From fzipi at fing.edu.uy  Wed May 13 01:38:10 2009
From: fzipi at fing.edu.uy (Felipe Zipitria)
Date: Tue, 12 May 2009 22:38:10 -0300
Subject: Problem with WISPr in release 1.0.13
In-Reply-To: <499281BD8A3946B0B0DA36BBA9A1A0F8@DELLTM>
References: <4A09D231.7090401@tilsor.com.uy> <1242158797.7817.27.camel@david-laptop> <4A09E127.5080803@tilsor.com.uy> <499281BD8A3946B0B0DA36BBA9A1A0F8@DELLTM>
Message-ID: <4A0A2482.60003@fing.edu.uy>

Thierry,

That macro is never used in any file:

$ grep -Ri RADIUS_PASSWORD_LEN coova-chilli-1.0.13/
coova-chilli-1.0.13/src/limits.h:#define RADIUS_PASSWORD_LEN 
    16

I think the macros involved in radius encoding are:

#define RADIUS_MD5LEN                     16 /* Length of MD5 hash */
#define RADIUS_AUTHLEN                    16 /* RFC 2865: Length of 
authenticator */
#define RADIUS_PWSIZE                    128 /* RFC 2865: Max 128 octets 
in password */

In fact, RFC 2865 has the algorithm for encoding the password (and is 
made of 16bytes chunks), in section User-Password.

I was looking maybe at the file 'src/radius.c', in function 
'radius_pwenconde'.... ?David?

Felipe.

> 
> #define RADIUS_PASSWORD_LEN               16
> 
>  
> 
>  
> 
> Thierry Museux
> 
> ------------------------------------------------------------------------
> 
> *De :* Rodrigo Mart?nez [mailto:rmartinez at tilsor.com.uy]
> *Envoy? :* mardi 12 mai 2009 22:51
> *? :* chilli at coova.org
> *Objet :* Re: Problem with WISPr in release 1.0.13
> 
>  
> 
> David,
>     thanks for the quick response and for committing the changes to the 
> svn.
> 
>     In our solution the smart clients use usernames and passwords that 
> are 40 bytes long. When we try to login using these password, 
> CoovaChilli send to RADIUS the password truncated to 16 bytes. We just 
> found this problem and we are looking for a solution in the code, any 
> advice would be very helpful.
> 
>     Rodrigo
> 
> 
> wlanmac wrote:
> 
> Thanks... I committed a similar fix to svn - the difference being an
> 
> option addedd to bstring_buildurl() for what kind of ampersand to use
> 
> "&" vs. "%amp;". 
> 
>  
> 
> David
> 
>  
> 
> On Tue, 2009-05-12 at 16:46 -0300, Rodrigo Mart?nez wrote:
> 
>   
> 
>> Hello, 
>>     We are using CoovaChilli release 1.0.13 in a solution for access
>> control system. We have smart clients that authenticate using WISPr
>> protocol to communicate with the CoovaChilli. We start using
>> CoovaChilli release 1.0.12, with this version the WISPr communication
>> worked fine, but when we update to release 1.0.13 the client stop
>> connecting. 
>>  
>>     Analyzing the problem we found that in the new release, when the
>> redirect message is send (302 page was moved), the WISPr message had
>> two tags with the LoginURL. One of the tags had the same value as in
>> release 1.0.12 and the second one has some differences. The main
>> problem of the second tag is that the "&" it is not scaped, so when we
>> check syntax against the xsd, it always fail. Looking around in the
>> code, we found the piece of code that was generating the WISPr message
>> and we modify it to match the WISPr standard. Attached in the mail we
>> are sending the file with the patch that contains the modifications in
>> the redir.c file. We hope this can help developers to fix this problem
>> in next releases.
>>  
>>     Thanks in advance 
>>  
>>     Regards,
>>        Rodrigo
>>  
>> -- 
>>  
>> ______________________________________________________________________
>>      
>>  
>> Ing. Rodrigo Mart?nez
>> Consultor
>> Consultor?a & Desarrollo
>>  
>>  
>>      
>>  
>>      
>> Tilsor S.A
>> Pza.
>> Independencia 822
>> Piso 4
>> C.P. 11100 -
>> Montevideo
>> Uruguay
>> Tel Fax: (598 2)
>> 9039313
>> www.tilsor.com.uy <http://www.tilsor.com.uy> 
>>  
>>  
>> plain text document attachment (chilli-wisprLoginURL.patch)
>> Index: redir.c
>> ===================================================================
>> --- redir.c      (revision 199)
>> +++ redir.c      (working copy)
>> @@ -221,12 +221,12 @@
>>    bstring bt = bfromcstr("");
>>    bstring bt2 = bfromcstr("");
>>  
>> -  bassignformat(str, "%s%cres=%s&uamip=%s&uamport=%d", 
>> +  bassignformat(str, "%s%cres=%s&amp;uamip=%s&amp;uamport=%d", 
>>          redir_url, strchr(redir_url, '?') ? '&' : '?',
>>          resp, inet_ntoa(redir->addr), redir->port);
>>  
>>    if (hexchal) {
>> -    bassignformat(bt, "&challenge=%s", hexchal);
>> +    bassignformat(bt, "&amp;challenge=%s", hexchal);
>>      bconcat(str, bt);
>>      bassigncstr(bt,"");
>>    }
>> @@ -239,37 +239,37 @@
>>  
>>        sessiontime = timenow - starttime;
>>  
>> -      bassignformat(bt, "&starttime=%ld", starttime);
>> +      bassignformat(bt, "&amp;starttime=%ld", starttime);
>>        bconcat(str, bt);
>> -      bassignformat(bt, "&sessiontime=%ld", sessiontime);
>> +      bassignformat(bt, "&amp;sessiontime=%ld", sessiontime);
>>        bconcat(str, bt);
>>      }
>>  
>>      if (conn->s_params.sessiontimeout) {
>> -      bassignformat(bt, "&sessiontimeout=%ld", conn->s_params.sessiontimeout);
>> +      bassignformat(bt, "&amp;sessiontimeout=%ld", conn->s_params.sessiontimeout);
>>        bconcat(str, bt);
>>      }
>>  
>>      if (conn->s_params.sessionterminatetime) {
>> -      bassignformat(bt, "&stoptime=%ld", conn->s_params.sessionterminatetime);
>> +      bassignformat(bt, "&amp;stoptime=%ld", conn->s_params.sessionterminatetime);
>>        bconcat(str, bt);
>>      }
>>    }
>>   
>>    if (uid) {
>> -    bcatcstr(str, "&uid=");
>> +    bcatcstr(str, "&amp;uid=");
>>      bassigncstr(bt, uid);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>>    }
>>  
>>    if (timeleft) {
>> -    bassignformat(bt, "&timeleft=%ld", timeleft);
>> +    bassignformat(bt, "&amp;timeleft=%ld", timeleft);
>>      bconcat(str, bt);
>>    }
>>    
>>    if (hismac) {
>> -    bcatcstr(str, "&mac=");
>> +    bcatcstr(str, "&amp;mac=");
>>      bassignformat(bt, "%.2X-%.2X-%.2X-%.2X-%.2X-%.2X",
>>            hismac[0], hismac[1], 
>>            hismac[2], hismac[3],
>> @@ -279,54 +279,54 @@
>>    }
>>  
>>    if (hisip) {
>> -    bassignformat(bt, "&ip=%s", inet_ntoa(*hisip));
>> +    bassignformat(bt, "&amp;ip=%s", inet_ntoa(*hisip));
>>      bconcat(str, bt);
>>    }
>>  
>>    if (reply) {
>> -    bcatcstr(str, "&reply=");
>> +    bcatcstr(str, "&amp;reply=");
>>      bassigncstr(bt, reply);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>>    }
>>  
>>    if (redir->ssid) {
>> -    bcatcstr(str, "&ssid=");
>> +    bcatcstr(str, "&amp;ssid=");
>>      bassigncstr(bt, redir->ssid);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>>    }
>>  
>>    if (redir->nasmac) {
>> -    bcatcstr(str, "&called=");
>> +    bcatcstr(str, "&amp;called=");
>>      bassigncstr(bt, redir->nasmac);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>>    } 
>>  
>>    if (redir->radiusnasid) {
>> -    bcatcstr(str, "&nasid=");
>> +    bcatcstr(str, "&amp;nasid=");
>>      bassigncstr(bt, redir->radiusnasid);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>>    }
>>  
>>    if (conn->lang[0]) {
>> -    bcatcstr(str, "&lang=");
>> +    bcatcstr(str, "&amp;lang=");
>>      bassigncstr(bt, conn->lang);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>>    }
>>  
>>    if (redirurl) {
>> -    bcatcstr(str, "&redirurl=");
>> +    bcatcstr(str, "&amp;redirurl=");
>>      bassigncstr(bt, redirurl);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>>    }
>>  
>>    if (userurl) {
>> -    bcatcstr(str, "&userurl=");
>> +    bcatcstr(str, "&amp;userurl=");
>>      bassigncstr(bt, userurl);
>>      redir_urlencode(bt, bt2);
>>      bconcat(str, bt2);
>> @@ -347,7 +347,7 @@
>>      for (i=0; i<16; i++)
>>        sprintf(hex+strlen(hex), "%.2X", cksum[i]);
>>  
>> -    bcatcstr(str, "&md=");
>> +    bcatcstr(str, "&amp;md=");
>>      bcatcstr(str, hex);
>>    }
>>  
>> @@ -478,12 +478,14 @@
>>        bconcat(b, bt);
>>  
>>        bcatcstr(b, "</LoginURL>\r\n");
>> -      
>> +
>> +/*      
>>        bassignformat(bt, "<LoginURL>%s%cres=smartclient&amp;uamip=%s&amp;uamport=%d&amp;challenge=%s</LoginURL>\r\n",
>>              options.wisprlogin ? options.wisprlogin : redir->url, 
>>              strchr(options.wisprlogin ? options.wisprlogin : redir->url, '?') ? '&' : '?',
>>              inet_ntoa(redir->addr), redir->port, hexchal); 
>>        bconcat(b, bt);
>> +*/
>>        
>>        bassignformat(bt, "<AbortLoginURL>http://%s:%d/abort <http://%25s:%25d/abort></AbortLoginURL>\r\n",
>>              inet_ntoa(redir->addr), redir->port);
>>  
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: chilli-unsubscribe at coova.org <mailto:chilli-unsubscribe at coova.org>
>> For additional commands, e-mail: chilli-help at coova.org <mailto:chilli-help at coova.org>
>> Wiki: http://coova.org/wiki/index.php/CoovaChilli
>> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>>     
>  
> 
>  
> 
> ---------------------------------------------------------------------
> 
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org <mailto:chilli-unsubscribe at coova.org>
> 
> For additional commands, e-mail: chilli-help at coova.org <mailto:chilli-help at coova.org>
> 
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> 
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
> 
>   
> 
>  
> 
> -- 
> 
> ------------------------------------------------------------------------
> 
>      
> 
> 	
> 
> 
> Ing. Rodrigo Mart?nez
> Consultor
> Consultor?a & Desarrollo
> 
>  
> 
>      
> 
> 	
> 
> 	
> 
>      
> 
> 	
> 
> Tilsor S.A
> Pza. Independencia 822 Piso 4
> C.P. 11100 - Montevideo Uruguay
> Tel Fax: (598 2) 9039313
> www.tilsor.com.uy <http://www.tilsor.com.uy>
> 
>  
> 
>  
> 



From wlan at mac.com  Wed May 13 05:08:34 2009
From: wlan at mac.com (wlanmac)
Date: Wed, 13 May 2009 07:08:34 +0200
Subject: improving chilli memory and areas of slowdown
Message-ID: <1242191315.7718.0.camel@david-laptop>

Hello,

Wanted to mention a couple things being planned for 1.0.14:

- Reducing (majorly) the initial memory usage by slowing growing the MAC
"connection pool" instead of pre-allocating (already the case for the
"app connection pool" which was converted from static some time ago).

- Removing of the command line and configuration file parsing (and DNS
lookups, etc) from the running server. A couple benefits come to mind:
smaller binary foot-print (cmdline.o only links into the binary
"chilli_opt"); and external binary ("chilli_opt") to parse, resolve, and
build a binary configuration file; and chilli only has to come around to
reload the binary configuration with no possibility of delay (unlike now
where it can get hung up on DNS resolving).  



From wlan at mac.com  Wed May 13 11:42:26 2009
From: wlan at mac.com (wlanmac)
Date: Wed, 13 May 2009 13:42:26 +0200
Subject: Problem with WISPr in release 1.0.13
In-Reply-To: <4A0A2482.60003@fing.edu.uy>
References: <4A09D231.7090401@tilsor.com.uy>
 <1242158797.7817.27.camel@david-laptop> <4A09E127.5080803@tilsor.com.uy>
 <499281BD8A3946B0B0DA36BBA9A1A0F8@DELLTM> <4A0A2482.60003@fing.edu.uy>
Message-ID: <1242214946.7718.14.camel@david-laptop>

radius_pwencode() looks ok. the issue is only for when you are using
PAP, it shouldn't be a problem with CHAP. when using pap, the problem is
in redir_radius() where the password (which was 'encoded' by the portal)
is decoded. the encoding is a simple XOR with the
MD5(challenge,uamsecret) -- which is 16 bytes, as shown:

    for (n=0; n < REDIR_MD5LEN; n++) 
	user_password[n] = conn->password[n] ^ chap_challenge[n];

the user_password size could be increased to RADIUS_PWSIZE (same as
conn->password), and the loop could be more like:

    for (m=0; m < RADIUS_PWSIZE;) 
      for (n=0; n < REDIR_MD5LEN; m++, n++) 
	user_password[m] = conn->password[m] ^ chap_challenge[n];

of course, the portal encoding of the password would also have to be
appropriately changed probably.   
  

On Tue, 2009-05-12 at 22:38 -0300, Felipe Zipitria wrote:
> Thierry,
> 
> That macro is never used in any file:
> 
> $ grep -Ri RADIUS_PASSWORD_LEN coova-chilli-1.0.13/
> coova-chilli-1.0.13/src/limits.h:#define RADIUS_PASSWORD_LEN 
>     16
> 
> I think the macros involved in radius encoding are:
> 
> #define RADIUS_MD5LEN                     16 /* Length of MD5 hash */
> #define RADIUS_AUTHLEN                    16 /* RFC 2865: Length of 
> authenticator */
> #define RADIUS_PWSIZE                    128 /* RFC 2865: Max 128 octets 
> in password */
> 
> In fact, RFC 2865 has the algorithm for encoding the password (and is 
> made of 16bytes chunks), in section User-Password.
> 
> I was looking maybe at the file 'src/radius.c', in function 
> 'radius_pwenconde'.... ?David?
> 
> Felipe.
> 
> > 
> > #define RADIUS_PASSWORD_LEN               16
> > 
> >  
> > 
> >  
> > 
> > Thierry Museux
> > 
> > ------------------------------------------------------------------------
> > 
> > *De :* Rodrigo Mart?nez [mailto:rmartinez at tilsor.com.uy]
> > *Envoy? :* mardi 12 mai 2009 22:51
> > *? :* chilli at coova.org
> > *Objet :* Re: Problem with WISPr in release 1.0.13
> > 
> >  
> > 
> > David,
> >     thanks for the quick response and for committing the changes to the 
> > svn.
> > 
> >     In our solution the smart clients use usernames and passwords that 
> > are 40 bytes long. When we try to login using these password, 
> > CoovaChilli send to RADIUS the password truncated to 16 bytes. We just 
> > found this problem and we are looking for a solution in the code, any 
> > advice would be very helpful.
> > 
> >     Rodrigo
> > 
> > 
> > wlanmac wrote:
> > 
> > Thanks... I committed a similar fix to svn - the difference being an
> > 
> > option addedd to bstring_buildurl() for what kind of ampersand to use
> > 
> > "&" vs. "%amp;". 
> > 
> >  
> > 
> > David
> > 
> >  
> > 
> > On Tue, 2009-05-12 at 16:46 -0300, Rodrigo Mart?nez wrote:
> > 
> >   
> > 
> >> Hello, 
> >>     We are using CoovaChilli release 1.0.13 in a solution for access
> >> control system. We have smart clients that authenticate using WISPr
> >> protocol to communicate with the CoovaChilli. We start using
> >> CoovaChilli release 1.0.12, with this version the WISPr communication
> >> worked fine, but when we update to release 1.0.13 the client stop
> >> connecting. 
> >>  
> >>     Analyzing the problem we found that in the new release, when the
> >> redirect message is send (302 page was moved), the WISPr message had
> >> two tags with the LoginURL. One of the tags had the same value as in
> >> release 1.0.12 and the second one has some differences. The main
> >> problem of the second tag is that the "&" it is not scaped, so when we
> >> check syntax against the xsd, it always fail. Looking around in the
> >> code, we found the piece of code that was generating the WISPr message
> >> and we modify it to match the WISPr standard. Attached in the mail we
> >> are sending the file with the patch that contains the modifications in
> >> the redir.c file. We hope this can help developers to fix this problem
> >> in next releases.
> >>  
> >>     Thanks in advance 
> >>  
> >>     Regards,
> >>        Rodrigo
> >>  
> >> -- 
> >>  
> >> ______________________________________________________________________
> >>      
> >>  
> >> Ing. Rodrigo Mart?nez
> >> Consultor
> >> Consultor?a & Desarrollo
> >>  
> >>  
> >>      
> >>  
> >>      
> >> Tilsor S.A
> >> Pza.
> >> Independencia 822
> >> Piso 4
> >> C.P. 11100 -
> >> Montevideo
> >> Uruguay
> >> Tel Fax: (598 2)
> >> 9039313
> >> www.tilsor.com.uy <http://www.tilsor.com.uy> 
> >>  
> >>  
> >> plain text document attachment (chilli-wisprLoginURL.patch)
> >> Index: redir.c
> >> ===================================================================
> >> --- redir.c      (revision 199)
> >> +++ redir.c      (working copy)
> >> @@ -221,12 +221,12 @@
> >>    bstring bt = bfromcstr("");
> >>    bstring bt2 = bfromcstr("");
> >>  
> >> -  bassignformat(str, "%s%cres=%s&uamip=%s&uamport=%d", 
> >> +  bassignformat(str, "%s%cres=%s&amp;uamip=%s&amp;uamport=%d", 
> >>          redir_url, strchr(redir_url, '?') ? '&' : '?',
> >>          resp, inet_ntoa(redir->addr), redir->port);
> >>  
> >>    if (hexchal) {
> >> -    bassignformat(bt, "&challenge=%s", hexchal);
> >> +    bassignformat(bt, "&amp;challenge=%s", hexchal);
> >>      bconcat(str, bt);
> >>      bassigncstr(bt,"");
> >>    }
> >> @@ -239,37 +239,37 @@
> >>  
> >>        sessiontime = timenow - starttime;
> >>  
> >> -      bassignformat(bt, "&starttime=%ld", starttime);
> >> +      bassignformat(bt, "&amp;starttime=%ld", starttime);
> >>        bconcat(str, bt);
> >> -      bassignformat(bt, "&sessiontime=%ld", sessiontime);
> >> +      bassignformat(bt, "&amp;sessiontime=%ld", sessiontime);
> >>        bconcat(str, bt);
> >>      }
> >>  
> >>      if (conn->s_params.sessiontimeout) {
> >> -      bassignformat(bt, "&sessiontimeout=%ld", conn->s_params.sessiontimeout);
> >> +      bassignformat(bt, "&amp;sessiontimeout=%ld", conn->s_params.sessiontimeout);
> >>        bconcat(str, bt);
> >>      }
> >>  
> >>      if (conn->s_params.sessionterminatetime) {
> >> -      bassignformat(bt, "&stoptime=%ld", conn->s_params.sessionterminatetime);
> >> +      bassignformat(bt, "&amp;stoptime=%ld", conn->s_params.sessionterminatetime);
> >>        bconcat(str, bt);
> >>      }
> >>    }
> >>   
> >>    if (uid) {
> >> -    bcatcstr(str, "&uid=");
> >> +    bcatcstr(str, "&amp;uid=");
> >>      bassigncstr(bt, uid);
> >>      redir_urlencode(bt, bt2);
> >>      bconcat(str, bt2);
> >>    }
> >>  
> >>    if (timeleft) {
> >> -    bassignformat(bt, "&timeleft=%ld", timeleft);
> >> +    bassignformat(bt, "&amp;timeleft=%ld", timeleft);
> >>      bconcat(str, bt);
> >>    }
> >>    
> >>    if (hismac) {
> >> -    bcatcstr(str, "&mac=");
> >> +    bcatcstr(str, "&amp;mac=");
> >>      bassignformat(bt, "%.2X-%.2X-%.2X-%.2X-%.2X-%.2X",
> >>            hismac[0], hismac[1], 
> >>            hismac[2], hismac[3],
> >> @@ -279,54 +279,54 @@
> >>    }
> >>  
> >>    if (hisip) {
> >> -    bassignformat(bt, "&ip=%s", inet_ntoa(*hisip));
> >> +    bassignformat(bt, "&amp;ip=%s", inet_ntoa(*hisip));
> >>      bconcat(str, bt);
> >>    }
> >>  
> >>    if (reply) {
> >> -    bcatcstr(str, "&reply=");
> >> +    bcatcstr(str, "&amp;reply=");
> >>      bassigncstr(bt, reply);
> >>      redir_urlencode(bt, bt2);
> >>      bconcat(str, bt2);
> >>    }
> >>  
> >>    if (redir->ssid) {
> >> -    bcatcstr(str, "&ssid=");
> >> +    bcatcstr(str, "&amp;ssid=");
> >>      bassigncstr(bt, redir->ssid);
> >>      redir_urlencode(bt, bt2);
> >>      bconcat(str, bt2);
> >>    }
> >>  
> >>    if (redir->nasmac) {
> >> -    bcatcstr(str, "&called=");
> >> +    bcatcstr(str, "&amp;called=");
> >>      bassigncstr(bt, redir->nasmac);
> >>      redir_urlencode(bt, bt2);
> >>      bconcat(str, bt2);
> >>    } 
> >>  
> >>    if (redir->radiusnasid) {
> >> -    bcatcstr(str, "&nasid=");
> >> +    bcatcstr(str, "&amp;nasid=");
> >>      bassigncstr(bt, redir->radiusnasid);
> >>      redir_urlencode(bt, bt2);
> >>      bconcat(str, bt2);
> >>    }
> >>  
> >>    if (conn->lang[0]) {
> >> -    bcatcstr(str, "&lang=");
> >> +    bcatcstr(str, "&amp;lang=");
> >>      bassigncstr(bt, conn->lang);
> >>      redir_urlencode(bt, bt2);
> >>      bconcat(str, bt2);
> >>    }
> >>  
> >>    if (redirurl) {
> >> -    bcatcstr(str, "&redirurl=");
> >> +    bcatcstr(str, "&amp;redirurl=");
> >>      bassigncstr(bt, redirurl);
> >>      redir_urlencode(bt, bt2);
> >>      bconcat(str, bt2);
> >>    }
> >>  
> >>    if (userurl) {
> >> -    bcatcstr(str, "&userurl=");
> >> +    bcatcstr(str, "&amp;userurl=");
> >>      bassigncstr(bt, userurl);
> >>      redir_urlencode(bt, bt2);
> >>      bconcat(str, bt2);
> >> @@ -347,7 +347,7 @@
> >>      for (i=0; i<16; i++)
> >>        sprintf(hex+strlen(hex), "%.2X", cksum[i]);
> >>  
> >> -    bcatcstr(str, "&md=");
> >> +    bcatcstr(str, "&amp;md=");
> >>      bcatcstr(str, hex);
> >>    }
> >>  
> >> @@ -478,12 +478,14 @@
> >>        bconcat(b, bt);
> >>  
> >>        bcatcstr(b, "</LoginURL>\r\n");
> >> -      
> >> +
> >> +/*      
> >>        bassignformat(bt, "<LoginURL>%s%cres=smartclient&amp;uamip=%s&amp;uamport=%d&amp;challenge=%s</LoginURL>\r\n",
> >>              options.wisprlogin ? options.wisprlogin : redir->url, 
> >>              strchr(options.wisprlogin ? options.wisprlogin : redir->url, '?') ? '&' : '?',
> >>              inet_ntoa(redir->addr), redir->port, hexchal); 
> >>        bconcat(b, bt);
> >> +*/
> >>        
> >>        bassignformat(bt, "<AbortLoginURL>http://%s:%d/abort <http://%25s:%25d/abort></AbortLoginURL>\r\n",
> >>              inet_ntoa(redir->addr), redir->port);
> >>  
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: chilli-unsubscribe at coova.org <mailto:chilli-unsubscribe at coova.org>
> >> For additional commands, e-mail: chilli-help at coova.org <mailto:chilli-help at coova.org>
> >> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> >> Forum: http://coova.org/phpBB3/viewforum.php?f=4
> >>     
> >  
> > 
> >  
> > 
> > ---------------------------------------------------------------------
> > 
> > To unsubscribe, e-mail: chilli-unsubscribe at coova.org <mailto:chilli-unsubscribe at coova.org>
> > 
> > For additional commands, e-mail: chilli-help at coova.org <mailto:chilli-help at coova.org>
> > 
> > Wiki: http://coova.org/wiki/index.php/CoovaChilli
> > 
> > Forum: http://coova.org/phpBB3/viewforum.php?f=4
> > 
> >   
> > 
> >  
> > 
> > -- 
> > 
> > ------------------------------------------------------------------------
> > 
> >      
> > 
> > 	
> > 
> > 
> > Ing. Rodrigo Mart?nez
> > Consultor
> > Consultor?a & Desarrollo
> > 
> >  
> > 
> >      
> > 
> > 	
> > 
> > 	
> > 
> >      
> > 
> > 	
> > 
> > Tilsor S.A
> > Pza. Independencia 822 Piso 4
> > C.P. 11100 - Montevideo Uruguay
> > Tel Fax: (598 2) 9039313
> > www.tilsor.com.uy <http://www.tilsor.com.uy>
> > 
> >  
> > 
> >  
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
> 



From derekchilli at hssl.ie  Wed May 13 15:48:38 2009
From: derekchilli at hssl.ie (Derek C)
Date: Wed, 13 May 2009 16:48:38 +0100 (IST)
Subject: UAMALLOWED and HTTPS (to select.worldpay.com)
In-Reply-To: <40963.149.5.32.200.1241039442.squirrel@www.rivertowermail.com>
References: <41198.149.5.32.200.1240935851.squirrel@www.rivertowermail.com>  
         <1240979754.7893.0.camel@david-laptop>       
    <52057.149.5.32.200.1240991586.squirrel@www.rivertowermail.com>       
    <49F819E6.2010201@amobia.com>       
    <42057.149.5.32.200.1241006618.squirrel@www.rivertowermail.com>       
    <49F844C0.8090907@amobia.com>       
    <59577.149.5.32.200.1241013395.squirrel@www.rivertowermail.com>       
    <49F85ED2.6070303@amobia.com>       
    <36896.149.5.32.200.1241014424.squirrel@www.rivertowermail.com>       
    <49F88737.1040201@amobia.com>      
    <d42f029a0904291044v5c43d882v73d7f6e718da51e3@mail.gmail.com>   
    <40012.149.5.32.200.1241030302.squirrel@www.rivertowermail.com>   
    <49F8BC75.9020901@ibh.de>
    <40963.149.5.32.200.1241039442.squirrel@www.rivertowermail.com>
Message-ID: <55363.149.5.32.200.1242229718.squirrel@www.rivertowermail.com>

Hi guys,

Sorry - I haven't redone the test because my test unit is now with someone
else who is testing another issue (I'll post separately).

I'll setup a new test box and re-do the testing with
https://select.worldpay.com - it would be nice to find out what was up

Derek


On Wed, April 29, 2009 10:10 pm, Derek C wrote:
> Hi Thomas,
>
>
> I'll do the telnet test again and get a tcpdump on both my notebook and
> the Coova Chilli box.  The output from tcpdump is very small for this test
>  (3 lines) between trying to connect and telnet failing.
>
>
> I'm only using Masquerading on the output [eth0] interface as usual
> (command is "iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE") -
> nothing else.
>
> I'll email back here in a while with the dumps
>
>
> Derek
>
>
>
> On Wed, April 29, 2009 9:45 pm, Thomas Liske wrote:
>
>> Hi,
>>
>>
>>
>> Derek C schrieb:
>>
>>
>>> Hi Henk,
>>>
>>>
>>>
>>>> It may well be useful to test if it's an MTU issue.
>>>>
>>>>
>>
>> it is not an MTU issue. The Tcp 3-way handshake should always complete
>> and later, if bigger chunks of data are transfered via the connection it
>> will froze. The handshake pakets are quite small, they have to pass.
>>
>>
>> Could you provide a dumpfile (i.e. tcpdump -ni ath0 -s 0 -w dumpfile)
>> of the telnet thing? It would be perfekt to have a second dump from the
>> other side of the chilli-box for in the same moment.
>>
>>
>> Did you have an extraordenary iptables rules running on chilli before?
>> Maybe you could provide a iptables-save output.
>>
>>
>>
>>
>>
>> Regards,
>> Thomas
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
>> For additional commands, e-mail: chilli-help at coova.org
>> Wiki: http://coova.org/wiki/index.php/CoovaChilli
>> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>>
>>
>>
>>
>
>
> --
> Derek C
> In Ireland
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>
>
>


-- 
Derek C
In Ireland



From derekchilli at hssl.ie  Wed May 13 15:53:04 2009
From: derekchilli at hssl.ie (Derek C)
Date: Wed, 13 May 2009 16:53:04 +0100 (IST)
Subject: Sometimes Mac Authentication doesn't work
Message-ID: <52548.149.5.32.200.1242229984.squirrel@www.rivertowermail.com>

Hi all,

I've seen a problem with Coova Chilli, Mac authentication (with macreauth
too) and free radius where, apparently randomly, Coova Chilli will decide
that a user isn't authorised by MAC address and redirect them to the
splash page (uamserver).

I don't see anything in the freeradius log and the user's mac is in the
radcheck table (and, generally, this doesn't happen).

I have a "live" AP and a test AP and both do show the problem.

Do you think its a network timeout between the Coova Chilli AP and the
[remote] freeradius server?

thanks,

Derek


-- 
Derek C
In Ireland



From wlan at mac.com  Wed May 13 20:02:28 2009
From: wlan at mac.com (wlanmac)
Date: Wed, 13 May 2009 22:02:28 +0200
Subject: [isf-wifidog] update from Saturday and continuing discussion	of v2
 WAS: Re: WifiDog v2 development update?
In-Reply-To: <2ec66f2d0905041224gfe77af8h7da86814fda9398a@mail.gmail.com>
References: <2ec66f2d0905041224gfe77af8h7da86814fda9398a@mail.gmail.com>
Message-ID: <1242244948.7718.87.camel@david-laptop>

For a little background on RADIUS:

- It's a protocol based on UDP packets (like DNS), as such it is
stateless and you never are "waiting" on a TCP connection. 

- It's *designed* for provisioning and accounting, particularly useful
when the logins have "attributes" or session specific settings.

- Pretty much most authentications systems do or can support RADIUS.

- RADIUS "realm based roaming" is a built-in way for authentication
roaming where the RADIUS protocol can route authentication and
accounting request to the appropriate "home provider". 

- Nearly all quality WiFi gear supports RADIUS. Even stock Linksys can
do RADIUS for WPA Enterprise authentication (though no accounting is
provided). There are 'vendor specific' ways to set RADIUS attribute, but
the underlining protocol is the same. 

One thought is that there could be a middle-ware server running which
can translate RADIUS into WiFiDog HTTP provisioning. It could be a small
server running as an extension to chilli on the router, or it could even
be centralized (possibly tying together several RADIUS based networks).
The proxy would be enabling chilli to run as the access controller and
WiFiDog (as is) as the portal.

Some thoughts on the topic:

- easy to wrap into a router to seamlessly resemble a WiFiDog router
(but with all the added features of chilli). 

- equally easy to centralize the proxy - potentially to handle multiple
WiFiDog portals and/or RADIUS networks (essentially, creating a RADIUS
realm-based WiFiDog authentication broker). 

- the process of converting RADIUS to WiFiDog/HTTP will drive the
portal/protocol development to cover more underlying chilli (and general
NAS) features. 

 - will serve as an example of how to integrate the WiFiDog/HTTP
protocol with other access controllers (for instance, utilizing APIs of
commercial vendors). 

- can focus on RADIUS (plus proxy) to solve many roaming and
single-sign-on issues - including linking with other RADIUS-based home
providers - in a non-portal specific way. 

David

LinkedIn? http://www.linkedin.com/groups?gid=158903




On Mon, 2009-05-04 at 15:24 -0400, Michael Lenczner wrote: 
> Hello all,
> 
> On Sun, Apr 5, 2009 at 1:52 AM, wlanmac <wlan at mac.com> wrote:
> > Yes, RADIUS is powerful and ideal for access provisioning. Implementing
> > your 'business logic' in RADIUS also has the benefit of being usable
> > with multiple types of access controllers, using some standard (WISPr)
> > or vendor specific attributes. Though, RADIUS doesn't make any
> > guarantees about the features of the access controller.
> >
> > This could be a turning point for the WiFiDog project. As a portal
> > project, I'm guessing that the WiFiDog community might break up into
> > smaller projects (already happening, it seems) as it is VERY difficult
> > to find a web development platform/framework that everyone is happy
> > with. It also sounds like people are willing to dump the v1 web
> > framework, which will no doubt further break up the community unless
> > there is a clean upgrade procedure. This is bad news for any open-source
> > project that struggles to maintain their community and attract more
> > contributors (especially developers)...
> >
> > My two cents for the project:
> >
> > - To keep WiFiDog an access controller AND portal project, WiFiDog
> > should be more active in defining the "protocol" and development of the
> > gateway. The project should encourage and embrace the use of multiple
> > kinds of portals and web frameworks - don't push away those who break
> > away from the portal.
> >
> > - To turn WiFiDog into a portal project, then don't necessarily keep the
> > gateway portion when there are other options available which can do more
> > things. Even if it means adding the WiFiDog "protocol" to something like
> > Chilli, at least you don't have to reinvent the wheel in terms of basic
> > access controller features.
> >
> > David
> >
> >
> <snip>
> 
> 
> Update on the weekend meeting and background context:
> 
> So there was a meeting last saturday in Sherbrooke where 6-7 community
> wireless groups from Quebec and Ontario (about 20 people) got together
> and discussed Wifidog and something we're calling the ZAP Stack.
> 
> (Several of the community wireless groups in Quebec have taken the
> label ZAP Cityname with ZAP refering to Zone d'Acces Public (Public
> Access Zone). )
> 
> The ZAP stack is the entire ecosystem of tools needed to run a
> community wireless group of the wifidog model.  There is a focus on
> hotspots, with a serious intention of including mesh capability in the
> near future.  All of the groups use Wifidog.  We're looking at using
> the term "ZAP Stack" to differentiate between Wifidog and the overal
> technical toolset needed by a Community Wireless Network.  ZAPStack
> could be easily called CWNStack.
> 
> The groups present this weekend represented a total of more than 500
> hotspots and 150,000 users, and several of them have recently received
> government funding to extend their operations.
> 
> Sylvain Carle led the day's discussion and will be coordinating the
> contributions of the Quebec groups to the creation of a stack of
> software (ZAP Stack) that addresses their needs.  This stack involves
> Wifidog but the exact relation of the technologies to Wifidog and the
> specific role of Wifidog is still to be determined.
> 
> </weekend update>
> 
> I found this thread (WifiDog v2) really interesting and informative.
> I hope we can continue the discussion.
> 
> To enable the larger discussion of what our (the Wifidog community)
> individual / collective needs are and how they fit in with wifidog
> development Gabe and I created a page listing some of the interesting
> / relevant tools in the CWN space.  Richard added to it and David
> added and fixed it up. (Thanks David!).  And I've taken some content
> from this thread and added it to the Wifidog TNG page so that it isn't
> lost. (http://dev.wifidog.org/wiki/TNG)
> 
> Personally I'm trying to understand the relationship between Radius
> and Wifidog, and if Chillispot / CoovaChilli and or Radius could have
> a role to play in addressing some of our needs for better network and
> user management at our hotspots (ergo including the above text.  Any
> thoughts, pointers would be helpful.  I know that there are others
> that understand the pieces of this puzzle better than I do, but
> sometimes newb questions can be useful.
> 
> Please feel free to ask any questions about the Quebec CWN situation.
> There will be updates and clarification posted here by either Sylvain
> or David from ZAP Quebec in the near future.  We're still figuring
> this stuff out ourselves. :-)
> 
> mike
> _______________________________________________
> WiFiDog mailing list
> WiFiDog at listes.ilesansfil.org
> http://listes.ilesansfil.org/cgi-bin/mailman/listinfo/wifidog



From lists at seb7.de  Sat May 16 08:54:09 2009
From: lists at seb7.de (Sebastian M.)
Date: Sat, 16 May 2009 10:54:09 +0200
Subject: confirm unsubscribe from chilli@coova.org
In-Reply-To: <1241968512.7190.ezmlm@coova.org>
References: <1241968512.7190.ezmlm@coova.org>
Message-ID: <20090516105409.2ctu8h7pus8ow048@webmail.df.eu>






From scott at smbc.com.au  Thu May 21 07:07:57 2009
From: scott at smbc.com.au (Scott Tester)
Date: Thu, 21 May 2009 17:07:57 +1000
Subject: Patch for individual session requests from chilli.sock for consideration.
Message-ID: <4A14FDCD.8020607@smbc.com.au>

I am working at integrating coovachilli with dansguardian.  Sending the 
list command to the socket returns the data for all active sessions.  As 
I want to keep the socket communication to a minimum, I've modified 
coovachilli (see attached patch) to return only the ip or mac requested.
Would you consider merging these changes* for two reasons:
1. Other's can benifit.
2. I don't have to modify the source each time I upgrade coova on my system.


NOTES:
1.  There are two lines that didn't want to compile due to a required 
third argument when open() uses O_CREAT, (chilli.patch:9 & 
chilli.patch:18).  This is not the main reason for this patch, but I've 
included these fixes anyway.
2.  I'm not fussed if anyone has a better idea for command names instead 
of 'listip' and 'listmac'.  Same goes for CMDSOCK_ENTRY_FOR_MAC and 
CMDSOCK_ENTRY_FOR_IP.


* I understand that you will want to review the code.  In fact, that 
would be appreciated - if you don't mind.
-- 

Scott Tester

IT Department

SMBC  www.smbc.com.au <http://www.smbc.com.au>

Sydney Missionary and Bible College

43 Badminton Road, Croydon NSW 2132

Phone: 02 9747 4780  ext 147

Mobile: 0411 145 584

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090521/df89b00e/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: chilli.patch
Type: text/x-patch
Size: 4836 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090521/df89b00e/attachment.bin>

From wlan at mac.com  Thu May 21 07:39:50 2009
From: wlan at mac.com (wlanmac)
Date: Thu, 21 May 2009 09:39:50 +0200
Subject: Patch for individual session requests from chilli.sock for
	consideration.
In-Reply-To: <4A14FDCD.8020607@smbc.com.au>
References: <4A14FDCD.8020607@smbc.com.au>
Message-ID: <1242891590.7699.51.camel@david-laptop>

committed at rev 201


On Thu, 2009-05-21 at 17:07 +1000, Scott Tester wrote:
> I am working at integrating coovachilli with dansguardian.  Sending
> the list command to the socket returns the data for all active
> sessions.  As I want to keep the socket communication to a minimum,
> I've modified coovachilli (see attached patch) to return only the ip
> or mac requested.
> Would you consider merging these changes* for two reasons:
> 1. Other's can benifit.
> 2. I don't have to modify the source each time I upgrade coova on my
> system.
> 
> 
> NOTES:
> 1.  There are two lines that didn't want to compile due to a required
> third argument when open() uses O_CREAT, (chilli.patch:9 &
> chilli.patch:18).  This is not the main reason for this patch, but
> I've included these fixes anyway.
> 2.  I'm not fussed if anyone has a better idea for command names
> instead of 'listip' and 'listmac'.  Same goes for
> CMDSOCK_ENTRY_FOR_MAC and CMDSOCK_ENTRY_FOR_IP.
> 
> 
> * I understand that you will want to review the code.  In fact, that
> would be appreciated - if you don't mind.
> -- 
> 
> 
> Scott Tester 
> 
> IT Department
> 
> SMBC  www.smbc.com.au
> 
> Sydney Missionary and Bible College
> 
> 43 Badminton Road, Croydon NSW 2132
> 
> Phone: 02 9747 4780  ext 147
> 
> Mobile: 0411 145 584
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4



From cesarsilvaaraujo at gmail.com  Tue May 26 00:24:58 2009
From: cesarsilvaaraujo at gmail.com (=?ISO-8859-1?Q?C=E9sar_Araujo?=)
Date: Tue, 26 May 2009 01:24:58 +0100
Subject: Problem on set up
Message-ID: <3b8d169a0905251724l5d7d820fu7d6a0e3f348f92dc@mail.gmail.com>

HI.

I have folowed with success the manual
https://help.ubuntu.com/community/WifiDocs/CoovaChilli to set up a hotspot.
My problem is that now when i browse for example www.google.com i get a
blank page and a long url like this

http://10.1.0.1:3990/www/hotspot/coova.html?loginurl=https%3a%2f%2f10.1.0.1%2fuam%2f%3fres%3dnotyet%26uamip%3d10.1.0.1%26uamport%3d3990%26challenge%3d5e89255c2f0b10c74a206b38c4228450%26mac%3d00-1D-60-C8-XX-XX%26ip%3d10.1.0.2%26called%3d00-0C-6F-XX-XX-XX%26nasid%3dwifi%2540campingave%26userurl%3dhttp%253a%252f%252fgoogle.com%252f%26md%3d8A27CD07442E86BE802652AA000BDFB5

(mac adrres what covered)

i cant pass this step :/ any one able to help i would apreciate it.

thanks in advance

--------------------------------------------------------------------
Http://www.CesarAraujo.Net
--------------------------------------------------------------------
Msn: messenger at CesarAraujo.net
--------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090526/dd83dd6f/attachment.htm>

From cesarsilvaaraujo at gmail.com  Wed May 27 19:21:40 2009
From: cesarsilvaaraujo at gmail.com (=?ISO-8859-1?Q?C=E9sar_Araujo?=)
Date: Wed, 27 May 2009 20:21:40 +0100
Subject: Coova
Message-ID: <3b8d169a0905271221r672751c2v2b08fef4b7e59ede@mail.gmail.com>

Well thanks for the user who helped me :) it was in deed a miss path.

Now i git the redirect to work, but another problem.

I type a link and end up on http://10.1.0.1:3990/.......
then it redirect's to https://10.1.0.1/.... but i cant view this page.

Wich means i cant access none of apache pages, etheir it is http or https
(port 80 or port 443).

Is it iptables?

thanks in advance.

-- 
--------------------------------------------------------------------
Contactem-me para anima??o musical de eventos!
--------------------------------------------------------------------
AveFm - www.avefm.net
--------------------------------------------------------------------
Http://www.CesarAraujo.Net
--------------------------------------------------------------------
Msn: messenger at CesarAraujo.net
--------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090527/96a09413/attachment.htm>

From mail.gery at gmail.com  Thu May 28 09:50:43 2009
From: mail.gery at gmail.com (kissg)
Date: Thu, 28 May 2009 11:50:43 +0200
Subject: Coova
In-Reply-To: <3b8d169a0905271221r672751c2v2b08fef4b7e59ede@mail.gmail.com>
References: <3b8d169a0905271221r672751c2v2b08fef4b7e59ede@mail.gmail.com>
Message-ID: <f1cd8c6d0905280250v4f44f42dxebc483c45e861f62@mail.gmail.com>

Hi,

CoovaChilli denies access to everything, what is not essential for logging
in users. To enable ports, use the following parameter in
/etc/chilli/config:

HS_TCP_PORTS="80 443"

The option above enables HTTP and HTTPS access to the host Chilli is running
on.


Regards
Gergely Kiss

2009/5/27 C?sar Araujo <cesarsilvaaraujo at gmail.com>

>
> Well thanks for the user who helped me :) it was in deed a miss path.
>
> Now i git the redirect to work, but another problem.
>
> I type a link and end up on http://10.1.0.1:3990/.......
> then it redirect's to https://10.1.0.1/.... but i cant view this page.
>
> Wich means i cant access none of apache pages, etheir it is http or https
> (port 80 or port 443).
>
> Is it iptables?
>
> thanks in advance.
>
> --
> --------------------------------------------------------------------
> Contactem-me para anima??o musical de eventos!
> --------------------------------------------------------------------
> AveFm - www.avefm.net
> --------------------------------------------------------------------
> Http://www.CesarAraujo.Net
> --------------------------------------------------------------------
> Msn: messenger at CesarAraujo.net
> --------------------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090528/8c153b71/attachment.htm>

From cesarsilvaaraujo at gmail.com  Fri May 29 16:29:10 2009
From: cesarsilvaaraujo at gmail.com (=?ISO-8859-1?Q?C=E9sar_Araujo?=)
Date: Fri, 29 May 2009 17:29:10 +0100
Subject: Almost there :D
Message-ID: <3b8d169a0905290929u25393b32u31b98bdee15cd298@mail.gmail.com>

Well i would like first to thank all of you that are helping-me :) cause im
loving coova :D it is very powerfull.

My problem now is that i dont have net.

Explaining.

I type www.google.com and i end on a url from
http://10.1.0.1:3990/www/hotspot/coova.html?loginurl=https%3a%2f%2f10.1.0.1%2fhotspot%2fuam%2f%3fres%3dnotyet%26uamip%3d10.1.0.1%26uamport%3d3990%26challenge%3d88be6699daa6282bb61a2e312f3b1caf%26mac%3d00-1D-60-XX-XX-XX%26ip%3d10.1.0.13%26called%3d00-0C-6E-A3-53-27%26nasid%3dwifi%2540campingave%26userurl%3dhttp%253a%252f%252f10.1.0.1%253a3990%252fwww%252f%26md%3dEF87074574DD3A134A708A36CF65F059
<http://10.1.0.1:3990/www/hotspot/coova.html?loginurl=https%3a%2f%2f10.1.0.1%2fhotspot%2fuam%2f%3fres%3dnotyet%26uamip%3d10.1.0.1%26uamport%3d3990%26challenge%3d88be6699daa6282bb61a2e312f3b1caf%26mac%3d00-1D-60-C8-10-E5%26ip%3d10.1.0.13%26called%3d00-0C-6E-A3-53-27%26nasid%3dwifi%2540campingave%26userurl%3dhttp%253a%252f%252f10.1.0.1%253a3990%252fwww%252f%26md%3dEF87074574DD3A134A708A36CF65F059>

Then i should get http://10.1.0.1/portal/?q=hotspot and i end up on
http://10.1.0.1/portal/?q=badquery but for now this is not my "major"
problem, so i manualy type http://10.1.0.1/portal/?q=hotspot

then i make login using test test and everything goes ok :D

then when i type for example www.google.com on a browser i dont get nothing.
i end up on "server is taking to long to respond" and i cant ping
www.google.com
nothing, no internet. :(

Any help is always apreciated :D

Thanks in advance.


-- 
--------------------------------------------------------------------
Contactem-me para anima??o musical de eventos!
--------------------------------------------------------------------
AveFm - www.avefm.net
--------------------------------------------------------------------
Http://www.CesarAraujo.Net
--------------------------------------------------------------------
Msn: messenger at CesarAraujo.net
--------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090529/c8d807ba/attachment.htm>

From mail.gery at gmail.com  Sat May 30 07:20:05 2009
From: mail.gery at gmail.com (kissg)
Date: Sat, 30 May 2009 09:20:05 +0200
Subject: Almost there :D
In-Reply-To: <3b8d169a0905290929u25393b32u31b98bdee15cd298@mail.gmail.com>
References: <3b8d169a0905290929u25393b32u31b98bdee15cd298@mail.gmail.com>
Message-ID: <f1cd8c6d0905300020s4e9ff5f9i16f00e8a3c25079a@mail.gmail.com>

Hi C?sar,

we have customized installations of CoovaChilli at two companies. They use
it to provide internet access to guests, without risking the security of
their private network. I've slightly modified the login process of
CoovaChilli to fit the needs of our customers and to be as user friendly as
possible. The process looks like this:

1. The user opens a browser window and tries to browse a website.
2. CoovaChilli redirects the user to the splash page.
3. The splash page contains the logo of the company, some welcome text and a
button, which opens a popup window by using some simple JavaScript code.
4. A small window appears on the top right part of the screen, asking for
the login credentials.
5. After entering the username and password, the small window gets minimized
to the taskbar, and the requested page starts to load in the main browser
window.
6. The login window stays opened as long as the connection is alive, so the
user can see a lot of useful information (like session time, total data
upload/download, idle timeout, session timeout, etc.). There is a button at
the bottom of this window, which can be used to disconnect from the network.
In case the user tries to close this window, a warning message appears on
screen, telling the user that he shouldn't close the window as long as he
want to surf the net. I've set idle timeout to 10 minutes, so it's not
really an issue if someone closes the window without logging off first.

I attached the whole /etc/chilli directory to this message, so you can use
it as a template. Download the files and customize them for your liking. The
following files needs to be changed:

- /etc/chilli/config: go through the options, and modify them as needed
- /etc/chilli/ipup.sh: replace ppp0 with the name of the interface your
server uses to connect to the internet.
- /etc/chilli/www/splash.html: enter your company's name and replace the
logo

By using these files, you can easily create your own hotspot solution by
changing the logo on the splash page and replacing the name and website
address of your company (wherever you see "Your company's name" and "
www.yourcompanyswebsite.com").

This solution is JavaScript-dependent, but this should not be a problem, as
modern systems have JavaScript installed and enabled, by default.

I hope this may help you and other people to implement CoovaChilli
successfully.

Regards
Gergely Kiss

2009/5/29 C?sar Araujo <cesarsilvaaraujo at gmail.com>

> Well i would like first to thank all of you that are helping-me :) cause im
> loving coova :D it is very powerfull.
>
> My problem now is that i dont have net.
>
> Explaining.
>
> I type www.google.com and i end on a url from
> http://10.1.0.1:3990/www/hotspot/coova.html?loginurl=https%3a%2f%2f10.1.0.1%2fhotspot%2fuam%2f%3fres%3dnotyet%26uamip%3d10.1.0.1%26uamport%3d3990%26challenge%3d88be6699daa6282bb61a2e312f3b1caf%26mac%3d00-1D-60-XX-XX-XX%26ip%3d10.1.0.13%26called%3d00-0C-6E-A3-53-27%26nasid%3dwifi%2540campingave%26userurl%3dhttp%253a%252f%252f10.1.0.1%253a3990%252fwww%252f%26md%3dEF87074574DD3A134A708A36CF65F059
> <http://10.1.0.1:3990/www/hotspot/coova.html?loginurl=https%3a%2f%2f10.1.0.1%2fhotspot%2fuam%2f%3fres%3dnotyet%26uamip%3d10.1.0.1%26uamport%3d3990%26challenge%3d88be6699daa6282bb61a2e312f3b1caf%26mac%3d00-1D-60-C8-10-E5%26ip%3d10.1.0.13%26called%3d00-0C-6E-A3-53-27%26nasid%3dwifi%2540campingave%26userurl%3dhttp%253a%252f%252f10.1.0.1%253a3990%252fwww%252f%26md%3dEF87074574DD3A134A708A36CF65F059>
>
> Then i should get http://10.1.0.1/portal/?q=hotspot and i end up on
> http://10.1.0.1/portal/?q=badquery but for now this is not my "major"
> problem, so i manualy type http://10.1.0.1/portal/?q=hotspot
>
> then i make login using test test and everything goes ok :D
>
> then when i type for example www.google.com on a browser i dont get
> nothing. i end up on "server is taking to long to respond" and i cant ping
> www.google.com
> nothing, no internet. :(
>
> Any help is always apreciated :D
>
> Thanks in advance.
>
>
> --
> --------------------------------------------------------------------
> Contactem-me para anima??o musical de eventos!
> --------------------------------------------------------------------
> AveFm - www.avefm.net
> --------------------------------------------------------------------
> Http://www.CesarAraujo.Net
> --------------------------------------------------------------------
> Msn: messenger at CesarAraujo.net
> --------------------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090530/ed15a7cf/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: chilli_config_template.tar.gz
Type: application/x-gzip
Size: 29024 bytes
Desc: not available
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090530/ed15a7cf/attachment.bin>

From wlan at mac.com  Sat May 30 07:31:25 2009
From: wlan at mac.com (wlanmac)
Date: Sat, 30 May 2009 09:31:25 +0200
Subject: Almost there :D
In-Reply-To: <f1cd8c6d0905300020s4e9ff5f9i16f00e8a3c25079a@mail.gmail.com>
References: <3b8d169a0905290929u25393b32u31b98bdee15cd298@mail.gmail.com>
 <f1cd8c6d0905300020s4e9ff5f9i16f00e8a3c25079a@mail.gmail.com>
Message-ID: <1243668685.7683.31.camel@david-laptop>

Awesome, thanks for that. Perhaps the bundle should be put into a
directory in the CoovaChilli source. 

David


On Sat, 2009-05-30 at 09:20 +0200, kissg wrote:
> Hi C?sar,
> 
> we have customized installations of CoovaChilli at two companies. They
> use it to provide internet access to guests, without risking the
> security of their private network. I've slightly modified the login
> process of CoovaChilli to fit the needs of our customers and to be as
> user friendly as possible. The process looks like this:
> 
> 1. The user opens a browser window and tries to browse a website.
> 2. CoovaChilli redirects the user to the splash page.
> 3. The splash page contains the logo of the company, some welcome text
> and a button, which opens a popup window by using some simple
> JavaScript code.
> 4. A small window appears on the top right part of the screen, asking
> for the login credentials.
> 5. After entering the username and password, the small window gets
> minimized to the taskbar, and the requested page starts to load in the
> main browser window.
> 6. The login window stays opened as long as the connection is alive,
> so the user can see a lot of useful information (like session time,
> total data upload/download, idle timeout, session timeout, etc.).
> There is a button at the bottom of this window, which can be used to
> disconnect from the network. In case the user tries to close this
> window, a warning message appears on screen, telling the user that he
> shouldn't close the window as long as he want to surf the net. I've
> set idle timeout to 10 minutes, so it's not really an issue if someone
> closes the window without logging off first.
> 
> I attached the whole /etc/chilli directory to this message, so you can
> use it as a template. Download the files and customize them for your
> liking. The following files needs to be changed:
> 
> - /etc/chilli/config: go through the options, and modify them as
> needed
> - /etc/chilli/ipup.sh: replace ppp0 with the name of the interface
> your server uses to connect to the internet.
> - /etc/chilli/www/splash.html: enter your company's name and replace
> the logo
> 
> By using these files, you can easily create your own hotspot solution
> by changing the logo on the splash page and replacing the name and
> website address of your company (wherever you see "Your company's
> name" and "www.yourcompanyswebsite.com").
> 
> This solution is JavaScript-dependent, but this should not be a
> problem, as modern systems have JavaScript installed and enabled, by
> default.
> 
> I hope this may help you and other people to implement CoovaChilli
> successfully.
> 
> Regards
> Gergely Kiss
> 
> 2009/5/29 C?sar Araujo <cesarsilvaaraujo at gmail.com>
>         Well i would like first to thank all of you that are
>         helping-me :) cause im loving coova :D it is very powerfull.
>         
>         My problem now is that i dont have net.
>         
>         Explaining.
>         
>         I type www.google.com and i end on a url from
>         http://10.1.0.1:3990/www/hotspot/coova.html?loginurl=https%3a%
>         2f%2f10.1.0.1%2fhotspot%2fuam%2f%3fres%3dnotyet%26uamip%
>         3d10.1.0.1%26uamport%3d3990%26challenge%
>         3d88be6699daa6282bb61a2e312f3b1caf%26mac%3d00-1D-60-XX-XX-XX%
>         26ip%3d10.1.0.13%26called%3d00-0C-6E-A3-53-27%26nasid%3dwifi%
>         2540campingave%26userurl%3dhttp%253a%252f%252f10.1.0.1%
>         253a3990%252fwww%252f%26md%3dEF87074574DD3A134A708A36CF65F059
>         
>         
>         Then i should get http://10.1.0.1/portal/?q=hotspot and i end
>         up on http://10.1.0.1/portal/?q=badquery but for now this is
>         not my "major" problem, so i manualy type
>         http://10.1.0.1/portal/?q=hotspot
>         
>         then i make login using test test and everything goes ok :D
>         
>         then when i type for example www.google.com on a browser i
>         dont get nothing. i end up on "server is taking to long to
>         respond" and i cant ping www.google.com
>         nothing, no internet. :(
>         
>         Any help is always apreciated :D
>         
>         Thanks in advance.
>         
>         
>         -- 
>         --------------------------------------------------------------------
>         Contactem-me para anima??o musical de eventos!
>         --------------------------------------------------------------------
>         AveFm - www.avefm.net
>         --------------------------------------------------------------------
>         Http://www.CesarAraujo.Net
>         --------------------------------------------------------------------
>         Msn: messenger at CesarAraujo.net
>         --------------------------------------------------------------------
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4



From wlan at mac.com  Sat May 30 07:34:30 2009
From: wlan at mac.com (wlanmac)
Date: Sat, 30 May 2009 09:34:30 +0200
Subject: patents in the news
Message-ID: <1243668870.7683.34.camel@david-laptop>

Nomadix Inc. has won a patent enforcement action against Second Rule
LLC. The Federal Court in the Central District of California ruled on
March 31, 2009, in favour of Nomadix on its claims that Second Rule
willfully infringed five of Nomadix's patents. The Court awarded Nomadix
a total of $3.3 million in damages and attorney fees. The Court also
issued a Permanent Injunction against Second Rule. The suit against
Second Rule involved five U.S. patents relating to several High-Speed
Internet Access (HSIA) gateway features, including plug-and-play,
***home-page redirection***, zero-configuration proxy service, and
automated billing via seamless integration between the gateway and a
hotel's property management systems.

http://www.nomadix.com/company/pressroom/pressreleases/PressRoom.aspx?pr=/3/20/52/9086

http://www.ip3.com/
http://www.ip3.com/Invalidity_Opinion
http://www.ip3.com/References_invalidity.zip



From Nick at jansoft.co.uk  Sat May 30 08:49:34 2009
From: Nick at jansoft.co.uk (Nick Sharp)
Date: Sat, 30 May 2009 09:49:34 +0100
Subject: patents in the news
In-Reply-To: <1243668870.7683.34.camel@david-laptop>
References: <1243668870.7683.34.camel@david-laptop>
Message-ID: <02836C23ABC1A04BAD526CF24EC349330D1DD5@jan001.JANsoft.local>

Oh dear, very worrying news indeed. 

On the 21st April I found this article from 2004 and dismissed it at the
time.

http://wifinetnews.com/archives/2004/01/new_license_fee_may_face_operato
rs.html

Having just checked the IP3 com website they have now ceased trading due
to this litigation. 

At http://www.ip3.com you can find their experts report on the
invalidity of the nomadix patents.

Is there any threat on how this could affect the range of OS products
such as coova, pfsense and monowall??

Nick




-----Original Message-----
From: wlanmac [mailto:wlan at mac.com] 
Sent: 30 May 2009 08:35
To: chilli at coova.org
Subject: patents in the news

Nomadix Inc. has won a patent enforcement action against Second Rule
LLC. The Federal Court in the Central District of California ruled on
March 31, 2009, in favour of Nomadix on its claims that Second Rule
willfully infringed five of Nomadix's patents. The Court awarded Nomadix
a total of $3.3 million in damages and attorney fees. The Court also
issued a Permanent Injunction against Second Rule. The suit against
Second Rule involved five U.S. patents relating to several High-Speed
Internet Access (HSIA) gateway features, including plug-and-play,
***home-page redirection***, zero-configuration proxy service, and
automated billing via seamless integration between the gateway and a
hotel's property management systems.

http://www.nomadix.com/company/pressroom/pressreleases/PressRoom.aspx?pr
=/3/20/52/9086

http://www.ip3.com/
http://www.ip3.com/Invalidity_Opinion
http://www.ip3.com/References_invalidity.zip


---------------------------------------------------------------------
To unsubscribe, e-mail: chilli-unsubscribe at coova.org
For additional commands, e-mail: chilli-help at coova.org
Wiki: http://coova.org/wiki/index.php/CoovaChilli
Forum: http://coova.org/phpBB3/viewforum.php?f=4


No virus found in this incoming message.
Checked by AVG - www.avg.com 
Version: 8.5.339 / Virus Database: 270.12.45/2141 - Release Date:
05/29/09 06:28:00


From wlan at mac.com  Sat May 30 09:03:06 2009
From: wlan at mac.com (wlanmac)
Date: Sat, 30 May 2009 11:03:06 +0200
Subject: patents in the news
In-Reply-To: <02836C23ABC1A04BAD526CF24EC349330D1DD5@jan001.JANsoft.local>
References: <1243668870.7683.34.camel@david-laptop>
 <02836C23ABC1A04BAD526CF24EC349330D1DD5@jan001.JANsoft.local>
Message-ID: <1243674186.7683.40.camel@david-laptop>

I don't think it'll impact the noted projects... I bet they won mostly
because of the patents around the PMS integration for Hotels. This is an
industry that interTouch focuses on. And, there is plenty of "prior art"
with simple browser hijacking. Indeed, it was the then CTO of Nomadix
that co-wrote the WISPr best practices that coined the term "Universal
Access Method" which is exactly the browser hijacking. Now, why would
they write such a "standard" when they have a valid patent to enforce on
the very same topic. But, it's still curious that it seems to be
included in the ruling against IP3 Network. I probably don't have all
the facts, however. 

David

On Sat, 2009-05-30 at 09:49 +0100, Nick Sharp wrote:
> Oh dear, very worrying news indeed. 
> 
> On the 21st April I found this article from 2004 and dismissed it at the
> time.
> 
> http://wifinetnews.com/archives/2004/01/new_license_fee_may_face_operato
> rs.html
> 
> Having just checked the IP3 com website they have now ceased trading due
> to this litigation. 
> 
> At http://www.ip3.com you can find their experts report on the
> invalidity of the nomadix patents.
> 
> Is there any threat on how this could affect the range of OS products
> such as coova, pfsense and monowall??
> 
> Nick
> 
> 
> 
> 
> -----Original Message-----
> From: wlanmac [mailto:wlan at mac.com] 
> Sent: 30 May 2009 08:35
> To: chilli at coova.org
> Subject: patents in the news
> 
> Nomadix Inc. has won a patent enforcement action against Second Rule
> LLC. The Federal Court in the Central District of California ruled on
> March 31, 2009, in favour of Nomadix on its claims that Second Rule
> willfully infringed five of Nomadix's patents. The Court awarded Nomadix
> a total of $3.3 million in damages and attorney fees. The Court also
> issued a Permanent Injunction against Second Rule. The suit against
> Second Rule involved five U.S. patents relating to several High-Speed
> Internet Access (HSIA) gateway features, including plug-and-play,
> ***home-page redirection***, zero-configuration proxy service, and
> automated billing via seamless integration between the gateway and a
> hotel's property management systems.
> 
> http://www.nomadix.com/company/pressroom/pressreleases/PressRoom.aspx?pr
> =/3/20/52/9086
> 
> http://www.ip3.com/
> http://www.ip3.com/Invalidity_Opinion
> http://www.ip3.com/References_invalidity.zip
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
> 
> 
> No virus found in this incoming message.
> Checked by AVG - www.avg.com 
> Version: 8.5.339 / Virus Database: 270.12.45/2141 - Release Date:
> 05/29/09 06:28:00
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
> 



From cesarsilvaaraujo at gmail.com  Sat May 30 12:55:26 2009
From: cesarsilvaaraujo at gmail.com (=?ISO-8859-1?Q?C=E9sar_Araujo?=)
Date: Sat, 30 May 2009 13:55:26 +0100
Subject: Almost there :D
In-Reply-To: <f1cd8c6d0905300020s4e9ff5f9i16f00e8a3c25079a@mail.gmail.com>
References: <3b8d169a0905290929u25393b32u31b98bdee15cd298@mail.gmail.com> 
	<f1cd8c6d0905300020s4e9ff5f9i16f00e8a3c25079a@mail.gmail.com>
Message-ID: <3b8d169a0905300555g576e2d46k8a48b75dafbcf9e3@mail.gmail.com>

Thanks ill try this in a minute and send the results :)

2009/5/30 kissg <mail.gery at gmail.com>

> Hi C?sar,
>
> we have customized installations of CoovaChilli at two companies. They use
> it to provide internet access to guests, without risking the security of
> their private network. I've slightly modified the login process of
> CoovaChilli to fit the needs of our customers and to be as user friendly as
> possible. The process looks like this:
>
> 1. The user opens a browser window and tries to browse a website.
> 2. CoovaChilli redirects the user to the splash page.
> 3. The splash page contains the logo of the company, some welcome text and
> a button, which opens a popup window by using some simple JavaScript code.
> 4. A small window appears on the top right part of the screen, asking for
> the login credentials.
> 5. After entering the username and password, the small window gets
> minimized to the taskbar, and the requested page starts to load in the main
> browser window.
> 6. The login window stays opened as long as the connection is alive, so the
> user can see a lot of useful information (like session time, total data
> upload/download, idle timeout, session timeout, etc.). There is a button at
> the bottom of this window, which can be used to disconnect from the network.
> In case the user tries to close this window, a warning message appears on
> screen, telling the user that he shouldn't close the window as long as he
> want to surf the net. I've set idle timeout to 10 minutes, so it's not
> really an issue if someone closes the window without logging off first.
>
> I attached the whole /etc/chilli directory to this message, so you can use
> it as a template. Download the files and customize them for your liking. The
> following files needs to be changed:
>
> - /etc/chilli/config: go through the options, and modify them as needed
> - /etc/chilli/ipup.sh: replace ppp0 with the name of the interface your
> server uses to connect to the internet.
> - /etc/chilli/www/splash.html: enter your company's name and replace the
> logo
>
> By using these files, you can easily create your own hotspot solution by
> changing the logo on the splash page and replacing the name and website
> address of your company (wherever you see "Your company's name" and "
> www.yourcompanyswebsite.com").
>
> This solution is JavaScript-dependent, but this should not be a problem, as
> modern systems have JavaScript installed and enabled, by default.
>
> I hope this may help you and other people to implement CoovaChilli
> successfully.
>
> Regards
> Gergely Kiss
>
> 2009/5/29 C?sar Araujo <cesarsilvaaraujo at gmail.com>
>
> Well i would like first to thank all of you that are helping-me :) cause im
>> loving coova :D it is very powerfull.
>>
>> My problem now is that i dont have net.
>>
>> Explaining.
>>
>> I type www.google.com and i end on a url from
>> http://10.1.0.1:3990/www/hotspot/coova.html?loginurl=https%3a%2f%2f10.1.0.1%2fhotspot%2fuam%2f%3fres%3dnotyet%26uamip%3d10.1.0.1%26uamport%3d3990%26challenge%3d88be6699daa6282bb61a2e312f3b1caf%26mac%3d00-1D-60-XX-XX-XX%26ip%3d10.1.0.13%26called%3d00-0C-6E-A3-53-27%26nasid%3dwifi%2540campingave%26userurl%3dhttp%253a%252f%252f10.1.0.1%253a3990%252fwww%252f%26md%3dEF87074574DD3A134A708A36CF65F059
>> <http://10.1.0.1:3990/www/hotspot/coova.html?loginurl=https%3a%2f%2f10.1.0.1%2fhotspot%2fuam%2f%3fres%3dnotyet%26uamip%3d10.1.0.1%26uamport%3d3990%26challenge%3d88be6699daa6282bb61a2e312f3b1caf%26mac%3d00-1D-60-C8-10-E5%26ip%3d10.1.0.13%26called%3d00-0C-6E-A3-53-27%26nasid%3dwifi%2540campingave%26userurl%3dhttp%253a%252f%252f10.1.0.1%253a3990%252fwww%252f%26md%3dEF87074574DD3A134A708A36CF65F059>
>>
>> Then i should get http://10.1.0.1/portal/?q=hotspot and i end up on
>> http://10.1.0.1/portal/?q=badquery but for now this is not my "major"
>> problem, so i manualy type http://10.1.0.1/portal/?q=hotspot
>>
>> then i make login using test test and everything goes ok :D
>>
>> then when i type for example www.google.com on a browser i dont get
>> nothing. i end up on "server is taking to long to respond" and i cant ping
>> www.google.com
>> nothing, no internet. :(
>>
>> Any help is always apreciated :D
>>
>> Thanks in advance.
>>
>>
>> --
>> --------------------------------------------------------------------
>> Contactem-me para anima??o musical de eventos!
>> --------------------------------------------------------------------
>> AveFm - www.avefm.net
>> --------------------------------------------------------------------
>> Http://www.CesarAraujo.Net
>> --------------------------------------------------------------------
>> Msn: messenger at CesarAraujo.net
>> --------------------------------------------------------------------
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
> For additional commands, e-mail: chilli-help at coova.org
> Wiki: http://coova.org/wiki/index.php/CoovaChilli
> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>



-- 
--------------------------------------------------------------------
Contactem-me para anima??o musical de eventos!
--------------------------------------------------------------------
AveFm - www.avefm.net
--------------------------------------------------------------------
Http://www.CesarAraujo.Net
--------------------------------------------------------------------
Msn: messenger at CesarAraujo.net
--------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090530/30bac56d/attachment.htm>

From cesarsilvaaraujo at gmail.com  Sat May 30 23:31:46 2009
From: cesarsilvaaraujo at gmail.com (=?ISO-8859-1?Q?C=E9sar_Araujo?=)
Date: Sun, 31 May 2009 00:31:46 +0100
Subject: Almost there :D
In-Reply-To: <3b8d169a0905300555g576e2d46k8a48b75dafbcf9e3@mail.gmail.com>
References: <3b8d169a0905290929u25393b32u31b98bdee15cd298@mail.gmail.com> 
	<f1cd8c6d0905300020s4e9ff5f9i16f00e8a3c25079a@mail.gmail.com> 
	<3b8d169a0905300555g576e2d46k8a48b75dafbcf9e3@mail.gmail.com>
Message-ID: <3b8d169a0905301631y93db2bdh517ddfc1c95134c0@mail.gmail.com>

Well i dont have words to thank what you have helped :D many many many
thanks!

I have found a bug :D that does not allow safari users to view the login
page.
It is located on ChilliLibrary.js on line 591 where it says console.debug (
msg ); i had to coment it so safari users could login. I think that this
line is not important.

Again, thanks a lot ;)

2009/5/30 C?sar Araujo <cesarsilvaaraujo at gmail.com>

> Thanks ill try this in a minute and send the results :)
>
> 2009/5/30 kissg <mail.gery at gmail.com>
>
>>  Hi C?sar,
>>
>> we have customized installations of CoovaChilli at two companies. They use
>> it to provide internet access to guests, without risking the security of
>> their private network. I've slightly modified the login process of
>> CoovaChilli to fit the needs of our customers and to be as user friendly as
>> possible. The process looks like this:
>>
>> 1. The user opens a browser window and tries to browse a website.
>> 2. CoovaChilli redirects the user to the splash page.
>> 3. The splash page contains the logo of the company, some welcome text and
>> a button, which opens a popup window by using some simple JavaScript code.
>> 4. A small window appears on the top right part of the screen, asking for
>> the login credentials.
>> 5. After entering the username and password, the small window gets
>> minimized to the taskbar, and the requested page starts to load in the main
>> browser window.
>> 6. The login window stays opened as long as the connection is alive, so
>> the user can see a lot of useful information (like session time, total data
>> upload/download, idle timeout, session timeout, etc.). There is a button at
>> the bottom of this window, which can be used to disconnect from the network.
>> In case the user tries to close this window, a warning message appears on
>> screen, telling the user that he shouldn't close the window as long as he
>> want to surf the net. I've set idle timeout to 10 minutes, so it's not
>> really an issue if someone closes the window without logging off first.
>>
>> I attached the whole /etc/chilli directory to this message, so you can use
>> it as a template. Download the files and customize them for your liking. The
>> following files needs to be changed:
>>
>> - /etc/chilli/config: go through the options, and modify them as needed
>> - /etc/chilli/ipup.sh: replace ppp0 with the name of the interface your
>> server uses to connect to the internet.
>> - /etc/chilli/www/splash.html: enter your company's name and replace the
>> logo
>>
>> By using these files, you can easily create your own hotspot solution by
>> changing the logo on the splash page and replacing the name and website
>> address of your company (wherever you see "Your company's name" and "
>> www.yourcompanyswebsite.com").
>>
>> This solution is JavaScript-dependent, but this should not be a problem,
>> as modern systems have JavaScript installed and enabled, by default.
>>
>> I hope this may help you and other people to implement CoovaChilli
>> successfully.
>>
>> Regards
>> Gergely Kiss
>>
>> 2009/5/29 C?sar Araujo <cesarsilvaaraujo at gmail.com>
>>
>> Well i would like first to thank all of you that are helping-me :) cause
>>> im loving coova :D it is very powerfull.
>>>
>>> My problem now is that i dont have net.
>>>
>>> Explaining.
>>>
>>> I type www.google.com and i end on a url from
>>> http://10.1.0.1:3990/www/hotspot/coova.html?loginurl=https%3a%2f%2f10.1.0.1%2fhotspot%2fuam%2f%3fres%3dnotyet%26uamip%3d10.1.0.1%26uamport%3d3990%26challenge%3d88be6699daa6282bb61a2e312f3b1caf%26mac%3d00-1D-60-XX-XX-XX%26ip%3d10.1.0.13%26called%3d00-0C-6E-A3-53-27%26nasid%3dwifi%2540campingave%26userurl%3dhttp%253a%252f%252f10.1.0.1%253a3990%252fwww%252f%26md%3dEF87074574DD3A134A708A36CF65F059
>>> <http://10.1.0.1:3990/www/hotspot/coova.html?loginurl=https%3a%2f%2f10.1.0.1%2fhotspot%2fuam%2f%3fres%3dnotyet%26uamip%3d10.1.0.1%26uamport%3d3990%26challenge%3d88be6699daa6282bb61a2e312f3b1caf%26mac%3d00-1D-60-C8-10-E5%26ip%3d10.1.0.13%26called%3d00-0C-6E-A3-53-27%26nasid%3dwifi%2540campingave%26userurl%3dhttp%253a%252f%252f10.1.0.1%253a3990%252fwww%252f%26md%3dEF87074574DD3A134A708A36CF65F059>
>>>
>>> Then i should get http://10.1.0.1/portal/?q=hotspot and i end up on
>>> http://10.1.0.1/portal/?q=badquery but for now this is not my "major"
>>> problem, so i manualy type http://10.1.0.1/portal/?q=hotspot
>>>
>>> then i make login using test test and everything goes ok :D
>>>
>>> then when i type for example www.google.com on a browser i dont get
>>> nothing. i end up on "server is taking to long to respond" and i cant ping
>>> www.google.com
>>> nothing, no internet. :(
>>>
>>> Any help is always apreciated :D
>>>
>>> Thanks in advance.
>>>
>>>
>>> --
>>> --------------------------------------------------------------------
>>> Contactem-me para anima??o musical de eventos!
>>> --------------------------------------------------------------------
>>> AveFm - www.avefm.net
>>> --------------------------------------------------------------------
>>> Http://www.CesarAraujo.Net
>>> --------------------------------------------------------------------
>>> Msn: messenger at CesarAraujo.net
>>> --------------------------------------------------------------------
>>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: chilli-unsubscribe at coova.org
>> For additional commands, e-mail: chilli-help at coova.org
>> Wiki: http://coova.org/wiki/index.php/CoovaChilli
>> Forum: http://coova.org/phpBB3/viewforum.php?f=4
>>
>
>
>
> --
> --------------------------------------------------------------------
> Contactem-me para anima??o musical de eventos!
> --------------------------------------------------------------------
> AveFm - www.avefm.net
> --------------------------------------------------------------------
> Http://www.CesarAraujo.Net
> --------------------------------------------------------------------
> Msn: messenger at CesarAraujo.net
> --------------------------------------------------------------------
>



-- 
--------------------------------------------------------------------
Contactem-me para anima??o musical de eventos!
--------------------------------------------------------------------
AveFm - www.avefm.net
--------------------------------------------------------------------
Http://www.CesarAraujo.Net
--------------------------------------------------------------------
Msn: messenger at CesarAraujo.net
--------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.coova.org/pipermail/chilli/attachments/20090531/185caba8/attachment.htm>

