<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] R: building chilli from source
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20R%3A%20building%20chilli%20from%20source&In-Reply-To=%3C000f01cae09b%2453cbd360%24fb637a20%24%40bennici%40it360.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001337.html">
   <LINK REL="Next"  HREF="001310.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] R: building chilli from source</H1>
    <B>Brigitta Bennici</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20R%3A%20building%20chilli%20from%20source&In-Reply-To=%3C000f01cae09b%2453cbd360%24fb637a20%24%40bennici%40it360.it%3E"
       TITLE="[Chilli] R: building chilli from source">b.bennici at it360.it
       </A><BR>
    <I>Tue Apr 20 15:08:25 UTC 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001337.html">[Chilli] OpenSSL &amp; redirssl etc
</A></li>
        <LI>Next message: <A HREF="001310.html">[Chilli] R: building chilli from source
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1304">[ date ]</a>
              <a href="thread.html#1304">[ thread ]</a>
              <a href="subject.html#1304">[ subject ]</a>
              <a href="author.html#1304">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Isidor,
i tried to apply the patch you attached before but I fail to apply it.
This is the error:

[<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">centos at localhost</A> coova-chilli-1.2.2]$ sudo patch coova-chilli.spec.in &lt;
coova-rpm-ssl.diff 
patching file coova-chilli.spec.in
Reversed (or previously applied) patch detected!  Assume -R? [n] y
Hunk #2 FAILED at 22.
1 out of 2 hunks FAILED -- saving rejects to file coova-chilli.spec.in.rej
[<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">centos at localhost</A> coova-chilli-1.2.2]$

Thank you

My best regards,

Brigitta Bennici
E-mail: <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">b.bennici at it360.it</A>
Web: <A HREF="http://www.it360.it">http://www.it360.it</A>

----------------------------------------------------------------------------
----------------
Ai sensi e per gli effetti della Legge sulla tutela della riservatezza
personale (DLgs. 196/03 e collegate), questa mail &#232; destinata unicamente
alle persone sopra indicate e le informazioni in essa contenute sono da
considerarsi strettamente riservate. E' proibito leggere, copiare, usare o
diffondere il contenuto della presente mail senza autorizzazione. Se avete
ricevuto questo messaggio per errore, siete pregati di rispedire lo stesso
al mittente. Grazie

-----Messaggio originale-----
Da: <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli-bounces at coova.org</A> [mailto:<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli-bounces at coova.org</A>] Per conto di
<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli-request at coova.org</A>
Inviato: marted&#236; 20 aprile 2010 14.00
A: <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli at coova.org</A>
Oggetto: Chilli Digest, Vol 7, Issue 23

Send Chilli mailing list submissions to
	<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli at coova.org</A>

To subscribe or unsubscribe via the World Wide Web, visit
	<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>
or, via email, send a message with subject or body 'help' to
	<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli-request at coova.org</A>

You can reach the person managing the list at
	<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli-owner at coova.org</A>

When replying, please edit your Subject line so it is more specific
than &quot;Re: Contents of Chilli digest...&quot;


Today's Topics:

   1. Re: Radius Proxy (Damien Courtaillier)
   2. Re: Squid transparent proxy on same server (Jason Allen)
   3. Re: R: building chilli from source (was: R: R: R: Chilli
      Digest, Vol 7, Issue 13) ('Isidor Zeuner')


----------------------------------------------------------------------

Message: 1
Date: Mon, 19 Apr 2010 17:22:15 +0200
From: Damien Courtaillier &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">d.courtaillier at gmail.com</A>&gt;
Subject: Re: [Chilli] Radius Proxy
To: <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli at coova.org</A>
Message-ID:
	&lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">l2uf1b5213e1004190822zc8b7fa08la6515e9ece7826b8 at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

Hi,

After building and installing the latest svn 1.2.3 release, I'm still
struggling against the same problem.

Is there really nobody who faced this issue or has tips on that?

Here's my chilli config file:

*HS_WANIF=eth0.1            # WAN Interface toward the Internet
HS_LANIF=br-lan           # Subscriber Interface for client devices
HS_NETWORK=10.1.0.0       # HotSpot Network (must include HS_UAMLISTEN)
HS_NETMASK=255.255.255.0   # HotSpot Network Netmask
HS_UAMLISTEN=10.1.0.1       # HotSpot IP Address (on subscriber network)
HS_UAMPORT=3990            # HotSpot UAM Port (on subscriber network)
HS_UAMUIPORT=4990          # HotSpot UAM &quot;UI&quot; Port (on subscriber network,
for embedded portal)

HS_DNS1=8.8.8.8
HS_DNS2=8.8.8.8

HS_NASID=nas01
HS_RADIUS=radius1.domain.com
HS_RADIUS2=radius2.domain.com
HS_UAMALLOW=www.coova.org
HS_RADSECRET=secret    # Set to be your RADIUS shared secret
HS_UAMSECRET=change-me     # Set to be your UAM secret
HS_UAMALIASNAME=chilli

HS_RADPROXY=on
 HS_RADPROXY_LISTEN=127.0.0.1
 HS_RADPROXY_CLIENT=127.0.0.1
 HS_RADPROXY_PORT=1645
 HS_RADPROXY_SECRET=$HS_RADSECRET

HS_MODE=hotspot
HS_TYPE=chillispot*

and my /etc/config/wireless:

*config 'wifi-iface'
    option 'device' 'wl0'
    option 'mode' 'ap'
    option 'ssid' 'WPA'
    option 'network' 'lan'
    option 'encryption' 'wpa2'
    option 'server' '127.0.0.1'
    option 'port' '1645'
    option 'key' 'secret'
    option 'isolate' '1'
    option 'hidden' '1'

*
Regards,

Damien Courtaillier

---------- Forwarded message ----------
From: Damien Courtaillier &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">d.courtaillier at gmail.com</A>&gt;
Date: 2010/4/15
Subject: Radius Proxy
To: <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli at coova.org</A>


Hello,

I'm trying to setup coova as a radius proxy, using radproxy options.
I use coova-chilli 1.2.3 (from the svn) on OpenWrt Kamikaze

coova runs directly on the AP that provides WPA2 wireless.

When I try to connect, I can see the Access-Accept in my radius log, but
coova never gives acces to the client.

Here is coova's output:

chilli.c: 1957: 0 (Debug) RADIUS Access-Request received
chilli.c: 1986: 0 (Debug) Calling Station ID is: 701a04a76fc3
dhcp.c: 389: 0 (Debug) DHCP newconn: 70:1a:04:a7:6f:c3
chilli.c: 3285: 0 (Debug) New DHCP request from MAC=70-1A-04-A7-6F-C3
chilli.c: 3288: 0 (Debug) New DHCP connection established
radius.c: 1446: 0 (Debug) RADIUS to 192.168.0.5:1812
chilli.c: 2792: 0 (Debug) Received access request confirmation from radius
server

chilli.c: 2828: 0 (Debug) Received access challenge from radius server
chilli.c: 920: 0 (Debug) Sending RADIUS AccessChallenge to client
chilli.c: 1957: 0 (Debug) RADIUS Access-Request received
chilli.c: 1986: 0 (Debug) Calling Station ID is: 701a04a76fc3
radius.c: 1446: 0 (Debug) RADIUS to 192.168.0.5:1812
chilli.c: 2792: 0 (Debug) Received access request confirmation from radius
server

Coova receives the dhcp request but seems not to respond to it...

when I try a chilli_query list, I get:

70-1A-04-A7-6F-C3 10.1.0.2 pass 4bc72fad44400001 1 net_test 9/0 9/0 0/0 0/0
0 0 0/0 0/0 -

It is the MAC address of my client, so chilli thinks it is connected however
it is not...

I tried giving an address directly to the client, I definitely can't
communicate with my AP.

What am  I doing wrong?

Does the WPA2 client communicate with coova's tun interface or directly with
the bridge ?
Actually, does the WPA2 clients have to be connected directly to the network
handled by coova (that is my case) or  can they connect to another network,
and coova just makes the authentication ?

Thanks for your answers.

Cheers.

Damien Courtaillier
-------------- next part --------------
An HTML attachment was scrubbed...
URL:
&lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20100419/efbbe7de/attac">http://lists.coova.org/pipermail/chilli/attachments/20100419/efbbe7de/attac</A>
hment.html&gt;

------------------------------

Message: 2
Date: Tue, 20 Apr 2010 15:17:55 +1000
From: Jason Allen &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">jason at theallens.id.au</A>&gt;
Subject: Re: [Chilli] Squid transparent proxy on same server
To: Isidor Zeuner &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli at quidecco.de</A>&gt;
Cc: <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli at coova.org</A>
Message-ID:
	&lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">k2k3e888d0e1004192217j54bc5511x44a96e3365773973 at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

On Wed, Apr 14, 2010 at 14:42, Isidor Zeuner &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli at quidecco.de</A>&gt; wrote:

&gt;<i> Hi Jason,
</I>&gt;<i>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Can anyone share configuration settings (or point me towards and article
</I>&gt;<i> or
</I>&gt;<i> &gt; how-to), with regard to iptable rules, to ensure that port 80 traffic is
</I>&gt;<i> &gt; transparently routed through to squid? I'd need to ensure that port 80
</I>&gt;<i> &gt; traffic to the server itself is still available as the server runs
</I>apache
&gt;<i> &gt; for teh charging portal.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> The HS_POSTAUTH_PROXY and HS_POSTAUTH_PROXYPORT configuration settings
</I>&gt;<i> are there to configure a transparent proxy to handle requests after
</I>&gt;<i> the user is authenticated. This is handled through chilli, not
</I>&gt;<i> iptables, and does not prevent you from still running a web server.
</I>&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i>
</I>&gt;<i> Isidor
</I>&gt;<i>
</I>
For the information of other (potential) users, I have not been able to get
this successfully work with the Squid proxy on the same server as chilli
(ie. HS_POSTAUTH_PROXY = 127.0.0.1). I have confirmed, via lynx, that squid
works fine for localhost/127.0.0.1 connections, but it does not work through
chilli for chilli authenticated clients.

Debug logs showed redirection to squid, but according to squid logs it
(squid) was not receiving the request.

Unfortunately, I'm not development minded enough to know what the problem is
or might be. If anyone has it working in this scenario, I would like to hear
from you if your willing to provide some advice on your configuration.


Thanks.

-- 
Cheers,
Jason
-------------- next part --------------
An HTML attachment was scrubbed...
URL:
&lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20100420/21d385e6/attac">http://lists.coova.org/pipermail/chilli/attachments/20100420/21d385e6/attac</A>
hment-0001.htm&gt;

------------------------------

Message: 3
Date: Tue, 20 Apr 2010 07:30:50 +0200 (CEST)
From: &quot;'Isidor Zeuner'&quot; &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli at quidecco.de</A>&gt;
Subject: Re: [Chilli] R: building chilli from source (was: R: R: R:
	Chilli	Digest, Vol 7, Issue 13)
To: &quot;Brigitta Bennici&quot; &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">b.bennici at it360.it</A>&gt;
Cc: <A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli at coova.org</A>
Message-ID: &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">20100420053050.A9C237894FB at quidecco.de</A>&gt;
Content-Type: text/plain; charset=&quot;utf-8&quot;

Hi Brigitta,

&gt;<i> sorry I did exactly that error. I attached the output as you suggested.
</I>Hope I did fine this time. Thank you for your support.
&gt;<i> 
</I>
It seems like you are having the same issue as Hardy Beltran
Monasterios had the day before (probably everyone compiling on CentOS
with ssl has). You might try if my patch (attached) works for you.

Best regards,

Isidor
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/x-gzip
Size: 3753 bytes
Desc: not available
URL:
&lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20100420/abed012e/attac">http://lists.coova.org/pipermail/chilli/attachments/20100420/abed012e/attac</A>
hment-0001.bin&gt;

------------------------------

_______________________________________________
Chilli mailing list
<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">Chilli at coova.org</A>
<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">http://lists.coova.org/cgi-bin/mailman/listinfo/chilli</A>


End of Chilli Digest, Vol 7, Issue 23
*************************************

</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001337.html">[Chilli] OpenSSL &amp; redirssl etc
</A></li>
	<LI>Next message: <A HREF="001310.html">[Chilli] R: building chilli from source
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1304">[ date ]</a>
              <a href="thread.html#1304">[ thread ]</a>
              <a href="subject.html#1304">[ subject ]</a>
              <a href="author.html#1304">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
