<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Chilli] Squid transparent proxy on same server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20Squid%20transparent%20proxy%20on%20same%20server&In-Reply-To=%3Cz2p3e888d0e1004151802x93ab87fbxb4a33e91f1d5f4e5%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001276.html">
   <LINK REL="Next"  HREF="001291.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chilli] Squid transparent proxy on same server</H1>
    <B>Jason Allen</B> 
    <A HREF="mailto:chilli%40coova.org?Subject=Re%3A%20%5BChilli%5D%20Squid%20transparent%20proxy%20on%20same%20server&In-Reply-To=%3Cz2p3e888d0e1004151802x93ab87fbxb4a33e91f1d5f4e5%40mail.gmail.com%3E"
       TITLE="[Chilli] Squid transparent proxy on same server">jason at theallens.id.au
       </A><BR>
    <I>Fri Apr 16 01:02:57 UTC 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001276.html">[Chilli] Squid transparent proxy on same server
</A></li>
        <LI>Next message: <A HREF="001291.html">[Chilli] Squid transparent proxy on same server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1278">[ date ]</a>
              <a href="thread.html#1278">[ thread ]</a>
              <a href="subject.html#1278">[ subject ]</a>
              <a href="author.html#1278">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Apr 15, 2010 at 19:32, Isidor Zeuner &lt;<A HREF="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">chilli at quidecco.de</A>&gt; wrote:

&gt;<i> Hi Jason,
</I>&gt;<i>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; How does it work? ( I could not find any further details on coova's
</I>&gt;<i> website
</I>&gt;<i> &gt; or wiki). Does chilli auto redirect the post-auth user received packets
</I>&gt;<i> to
</I>&gt;<i> &gt; the defined proxy server? Is it only port 80 destination traffic? Thus if
</I>&gt;<i> &gt; squid is installed on the same box as coova (and apache), then 127.0.0.1
</I>&gt;<i> and
</I>&gt;<i> &gt; 3128 would be valid and correct entries?
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> Yes, the setting causes port 80 traffic to be routed through the
</I>&gt;<i> supplied proxy server, plus port 443 traffic if the HS_REDIRSSL is
</I>&gt;<i> set.
</I>&gt;<i>
</I>&gt;<i> I have used the &quot;squid on the same box as chilli&quot; scenario with squid
</I>&gt;<i> listening on virtual IPs on the 10.0.0.0/8 block (because I had to
</I>&gt;<i> have squid distinguish between different configurations based on these
</I>&gt;<i> IPs), but I don't see why 127.0.0.1 shouldn't work, too.
</I>&gt;<i>
</I>
Interesting. My concern is that if I have squid listening on the ethernet
adapter (or ip range) that the wireless clients are using, then wouldn't
they be able to bypass chilli and it's authentication altogether by
assigning the squid server directly within their browser?

Scenario ... chilli, dhcp, squid is on the one box called
wireless.mydomain.com. If the authenticated wireless client configures their
browser to us a proxy on wireless.mydomain.com:3128, then would they be able
to bypass chilli (and authentication) altogether? That's why my thinking is
that I would only want squid listening on the localhost and not on the
ethernet or ip range that wireless clients are using?



&gt;<i> &gt; I'm using Coova v1.2.1 and have set the config file proxy settings to
</I>&gt;<i> &gt; 127.0.0.1 3128 but am not seeing any client activity in squid's
</I>&gt;<i> access.log.
</I>&gt;<i> &gt; I know squid is working properly, because if I define the proxy in a
</I>&gt;<i> client
</I>&gt;<i> &gt; browser then squid's access.log is recording the relevant entries.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> Did you configure squid to run as a transparent proxy? This is most
</I>&gt;<i> likely not what you would have if it is used in a browser proxy
</I>&gt;<i> setting, but chilli's HS_POSTAUTH_PROXY setting expects a
</I>&gt;<i> transparent proxy.
</I>&gt;<i>
</I>
I have &quot;http_port 3128 transparent&quot; configured within squid, so I do not
think that is my issue


&gt;<i> With debug logging enabled, chilli will diagnostics like &quot;rewriting
</I>&gt;<i> packet for post-auth proxy...&quot; when using the proxy setting, which
</I>&gt;<i> might help to test your configuration.
</I>&gt;<i>
</I>
I will give this a try and see what it reveals.

Thanks.

-- 
Cheers,
Jason
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.coova.org/pipermail/chilli/attachments/20100416/038633e2/attachment.htm">http://lists.coova.org/pipermail/chilli/attachments/20100416/038633e2/attachment.htm</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001276.html">[Chilli] Squid transparent proxy on same server
</A></li>
	<LI>Next message: <A HREF="001291.html">[Chilli] Squid transparent proxy on same server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1278">[ date ]</a>
              <a href="thread.html#1278">[ thread ]</a>
              <a href="subject.html#1278">[ subject ]</a>
              <a href="author.html#1278">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.coova.org/cgi-bin/mailman/listinfo/chilli">More information about the Chilli
mailing list</a><br>
</body></html>
